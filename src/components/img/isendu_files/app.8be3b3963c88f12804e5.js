(()=>{var e,t,s,r,a,i={39563:(e,t,s)=>{"use strict";s.d(t,{MX:()=>g,Qg:()=>S,yV:()=>C,D6:()=>A,Ee:()=>O,__:()=>x,rU:()=>te,TR:()=>le,D_:()=>de,tl:()=>me,QU:()=>Se,zZ:()=>je,U3:()=>p,Jm:()=>Me,xv:()=>n,Dx:()=>Ce,u:()=>Ae.Z,nw:()=>Oe,DE:()=>Ne,$6:()=>b,wJ:()=>R,a4:()=>I,Co:()=>N,$r:()=>D,lA:()=>z,MJ:()=>Z,U9:()=>H,nA:()=>V,t5:()=>F,Zw:()=>U,eU:()=>G,rz:()=>B,Tp:()=>$,cN:()=>_,Hs:()=>E,w_:()=>P,Q5:()=>Y,Jg:()=>q,_k:()=>K,sD:()=>Q,l8:()=>J,Zu:()=>X,HU:()=>W,xr:()=>ee,XR:()=>k,x7:()=>L,dB:()=>ae,e3:()=>be,b$:()=>ye,dn:()=>ge,hT:()=>xe,Ed:()=>fe,fY:()=>ve});var r=s(12028),a=s(79508),i=s(54549),o=s(97272);const{Text:n}=o.default;var l=s(94184),d=s.n(l),c=s(85893);const p=e=>{const{key:t,isDefaultMode:s,label:o,checked:l,onChange:p,disabled:u,labelPosition:h}=e;return(0,c.jsxs)("div",{className:d()("SwitchButton",{RowReverse:"right"===h}),children:[!s&&o&&(0,c.jsx)(n,{className:"SwitchButton__Label",type:l?void 0:"secondary",children:o}),s&&l&&(0,c.jsx)(n,{className:"SwitchButton__Label",type:l?void 0:"secondary",children:"Default"}),(0,c.jsx)(r.Z,{checked:l,checkedChildren:(0,c.jsx)(a.Z,{style:{color:"#262626"}}),unCheckedChildren:(0,c.jsx)(i.Z,{}),onChange:p,disabled:u},t)]})};p.displayName="SwitchButton";var u=s(51890),h=s(79166);const m=e=>{let{image:t,size:s,shape:r}=e;return"string"==typeof t?(0,c.jsx)(u.C,{src:t,size:s,shape:r||"circle",className:"default-border"}):(0,c.jsx)(c.Fragment,{children:t})},g=e=>{let{image:t,size:s,badge:r,badgeStatus:a,shape:i}=e;return r?(0,c.jsx)(h.Z,{status:a||"default",count:r,children:(0,c.jsx)(m,{image:t,size:s,shape:i})}):(0,c.jsx)(m,{image:t,size:s,shape:i})};var y=s(19006),f=s(64238);const b=e=>(0,y.getCountry)(null==e?void 0:e.toUpperCase())||e===y.worldCountry?`${f.e.CDN_ASSETS_URL}/flags/${e.toLowerCase()}.svg`:`${f.e.CDN_ASSETS_URL}/flags/empty.svg`;const{Text:v}=o.default,x=e=>{let{...t}=e;return(0,c.jsx)(v,{...t,className:`label ${t.className||""}`.trim()})};const S=e=>{let{image:t,size:s,badge:r,badgeStatus:a,primaryRow1:i,primaryRow2:o,secondaryRow1:l,secondaryRow2:d,shape:p,primaryRow1ClassName:u="primary"}=e,h=32;switch(s){case"small":h=24;break;case"large":h=40}const m="small"===s?x:n;return(0,c.jsxs)("div",{className:`enhanced-cell-container ${s||""}`,children:[t&&(0,c.jsx)("div",{className:"image",children:(0,c.jsx)(g,{badge:r,badgeStatus:a,size:h,image:t,shape:p})}),(0,c.jsxs)("div",{className:"info",children:[i&&(0,c.jsx)("div",{className:u,children:(0,c.jsx)(m,{className:"ellipsis",children:i})}),o&&(0,c.jsx)("div",{className:"primary",children:(0,c.jsx)(m,{className:"ellipsis",children:o})}),l&&(0,c.jsx)("div",{className:"secondary",children:(0,c.jsx)(m,{type:"secondary",className:"ellipsis",children:l})}),d&&(0,c.jsx)("div",{className:"secondary",children:(0,c.jsx)(m,{type:"secondary",className:"ellipsis",children:d})})]})]})};var j=s(67294),w=s(49288),M=s(11382);const C=e=>{let{onSelect:t,value:s,onChange:r,retrieveData:a,debounceDelay:i=500,disabled:o}=e;const[n,l]=(0,j.useState)(),[d,p]=(0,j.useState)([]),u=(0,j.useCallback)((()=>{l((e=>{e&&clearTimeout(e)}))}),[]);(0,j.useEffect)((()=>u),[u]);const h=e=>{u(),p([]),e&&l(setTimeout((async()=>{const t=await a(e);p(t),u()}),i))};return(0,c.jsx)(w.Z,{disabled:o,notFoundContent:n&&(0,c.jsx)("div",{style:{textAlign:"center"},children:(0,c.jsx)(M.Z,{})}),onChange:e=>null==r?void 0:r(e),value:s,options:d,getPopupContainer:e=>e||document.body,onSearch:async e=>{h(e)},allowClear:!0,onSelect:t,onFocus:()=>{s&&!d.length&&h(s)}})};const A=e=>{let{children:t}=e;return(0,c.jsx)("span",{className:"hoverable",children:t})};var T=s(20352);const O=e=>(0,c.jsx)(T.Z,{preview:!1,...e}),P=(f.e.CDN_ASSETS_URL,f.e.IMG_SHIPMENTS_W_URI,f.e.CDN_ASSETS_URL,f.e.IMG_INTEGRATIONS_W_URI,f.e.CDN_ASSETS_URL,f.e.IMG_ANALYTICS_W_URI,f.e.CDN_ASSETS_URL+"/"+f.e.IMG_SUCCESSFULLY_URI),N=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_EBAY_LOGO_URI,_=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_SHOPIFY_LOGO_URI,Z=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_ETSY_LOGO_URI,I=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_BIGCOMMERCE_LOGO_URI,D=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_ECWID_LOGO_URI,E=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_SQUARESPACE_LOGO_URI,k=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_WIX_LOGO_URI,L=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_WOOCOMMERCE_LOGO_URI,R=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_AMAZON_LOGO_URI,F=(f.e.CDN_ASSETS_URL,f.e.IMG_LOGIN_BACKGROUND_URI,f.e.CDN_ASSETS_URL,f.e.IMG_PASSWORDRESET_BACKGROUND_URI,f.e.CDN_ASSETS_URL,f.e.IMG_SIGNUP_PASSWORD_BACKGROUND_URI,f.e.CDN_ASSETS_URL+"/"+f.e.IMG_SETUP_BACKGROUND_1_URI),U=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_SETUP_BACKGROUND_2_URI,G=(f.e.CDN_ASSETS_URL,f.e.IMG_SETUP_BACKGROUND_3_URI,f.e.CDN_ASSETS_URL+"/"+f.e.IMG_SETUP_BACKGROUND_4_URI),B=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_SETUP_BACKGROUND_5_URI,$=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_SETUP_BACKGROUND_6_URI,z=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_EMAILSENT_URI,W=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_WARNING_URI,H=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_INFORMATION_URI,V=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_NOTIFICATION_ICON_URI,q=(f.e.CDN_ASSETS_URL,f.e.IMG_TRACKING_NOTIFICATIONS_SMS_1_URI,f.e.CDN_ASSETS_URL,f.e.IMG_TRACKING_NOTIFICATIONS_SMS_2_URI,f.e.CDN_ASSETS_URL,f.e.IMG_TRACKING_NOTIFICATIONS_SMS_3_URI,f.e.CDN_ASSETS_URL,f.e.IMG_TRACKING_NOTIFICATIONS_SMS_4_URI,f.e.CDN_ASSETS_URL,f.e.IMG_TRACKING_NOTIFICATIONS_SMS_5_URI,f.e.CDN_ASSETS_URL,f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_1_URI,f.e.CDN_ASSETS_URL,f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_2_URI,f.e.CDN_ASSETS_URL,f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_3_URI,f.e.CDN_ASSETS_URL,f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_4_URI,f.e.CDN_ASSETS_URL+"/"+f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_5_URI),Y=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_5_EN_URI,K=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_5_ES_URI,X=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_IN_TRANSIT_IT_PNG_URI,Q=(f.e.CDN_ASSETS_URL,f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_IN_TRANSIT_IT_SVG_URI,f.e.CDN_ASSETS_URL+"/"+f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_IN_TRANSIT_EN_PNG_URI),J=(f.e.CDN_ASSETS_URL,f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_IN_TRANSIT_EN_SVG_URI,f.e.CDN_ASSETS_URL+"/"+f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_IN_TRANSIT_ES_PNG_URI),ee=(f.e.CDN_ASSETS_URL,f.e.IMG_TRACKING_NOTIFICATIONS_WHATSAPP_IN_TRANSIT_ES_SVG_URI,f.e.CDN_ASSETS_URL+"/"+f.e.IMG_WHATSAPP_ICON_URI),{Link:te}=o.default;const se=f.e.CDN_S3_ASSETS_URL+"/"+f.e.LOGO_FULL_URI,re=f.e.CDN_ASSETS_URL+"/"+f.e.LOGO_SIMPLE_URI,ae=f.e.CDN_ASSETS_URL+"/"+f.e.LOGO_MANUAL_ORDER_URI,ie=f.e.CDN_ASSETS_URL+"/"+f.e.LOGO_DARK_LOADING_URI,oe=f.e.CDN_ASSETS_URL+"/"+f.e.LOGO_GIF_URI,ne=(e,t,s)=>e?se:t?ie:s?oe:re,le=e=>{let{full:t,desaturate:s,dark:r,gif:a}=e;return(0,c.jsx)("img",{style:{filter:s?"grayscale(100%)":void 0,objectFit:r?void 0:"contain",width:"100%",height:"100%"},src:ne(t,r,a)})};const de=e=>{let{image:t,title:s,size:r="small",badge:a,badgeStatus:i,primaryRow:o,secondaryRow:l}=e,d=32;switch(r){case"small":d=24;break;case"large":d=40}const p=n,m=e=>{let{image:t,size:s}=e;return"string"==typeof t?(0,c.jsx)(u.C,{src:t,size:s,shape:"square"}):(0,c.jsx)(c.Fragment,{children:t})};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"meta-card-title",children:(0,c.jsx)(p,{children:s})}),(0,c.jsx)("div",{className:`meta-card-container ${r||""}`,children:t||a||i||o||l?(0,c.jsxs)(c.Fragment,{children:[t&&(0,c.jsx)("div",{className:"image",children:(0,c.jsx)(m,{image:t,size:d})}),(a||i)&&(0,c.jsx)("div",{className:"badge",children:(0,c.jsx)(h.Z,{status:i||"default",count:a||null})}),(0,c.jsxs)("div",{className:"info",children:[o&&(0,c.jsx)("div",{className:"primary",children:(0,c.jsx)(p,{className:"ellipsis",children:o})}),l&&(0,c.jsx)("div",{className:"secondary",children:(0,c.jsx)(p,{type:"secondary",className:"ellipsis",children:l})})]})]}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"secondary",children:(0,c.jsx)(p,{type:"secondary",className:"ellipsis",children:" - "})})})})]})};var ce=s(38648);const pe={...ce.Z},ue=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_NOTIFICATION_ICON_URI;pe.info=e=>ce.Z.info({icon:(0,c.jsx)(u.C,{src:ue,size:"small"}),...e,className:`notification-info ${e.className||""}`.trim()});var he=s(97491);const me=e=>{const t=""+(e.showNumbers?"":"antd-pagination-hide-numbers");return(0,c.jsx)(he.Z,{...e,className:t})},ge=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_PAYMENTMETHOD_MASTERCARD_URI,ye=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_PAYMENTMETHOD_MAESTRO_URI,fe=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_PAYMENTMETHOD_VISA_URI,be=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_PAYMENTMETHOD_AMEX_URI,ve=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_PAYMENTMETHOD_WESTERNUNION_URI,xe=f.e.CDN_ASSETS_URL+"/"+f.e.IMG_PAYMENTMETHOD_SEPA_URI;const Se=e=>{let{logoImage:t,logoSize:s,optionName:r,optionComment:a}=e;return(0,c.jsxs)(c.Fragment,{children:[t?(0,c.jsx)(u.C,{src:t,size:s||"default"}):void 0,(0,c.jsxs)(n,{children:[" ",r," "]}),(0,c.jsxs)(n,{type:"secondary",children:[" ",a," "]})]})};const je=e=>{let{status:t,text:s}=e;return(0,c.jsx)(h.Z,{className:"statusBadge",status:t,text:s})};var we=s(95562);const{TabPane:Me}=we.default,{Title:Ce}=o.default;var Ae=s(94199),Te=s(68628);const Oe=e=>(0,c.jsx)(Ae.Z,{...e,children:(0,c.jsx)(Te.Z,{className:"standard-tooltip-icon"})});var Pe=s(73254);const Ne=e=>{let{phoneNumber:t,callToAction:s}=e;return(0,c.jsxs)("a",{target:"_blank",rel:"noopener noreferrer",href:`https://wa.me/${t}`,children:[s,(0,c.jsx)(Pe.Z,{style:{marginLeft:"4px"}})]})}},55222:(e,t,s)=>{"use strict";s.d(t,{x:()=>i});var r=s(50049),a=s(85893);const i=e=>{let{value:t,currency:s,maximumFractionDigits:i=2,minimumFractionDigits:o=2}=e;const n=t||0;return(0,a.jsx)(r.BK,{value:n,style:"currency",maximumFractionDigits:i,currency:s,currencyDisplay:"symbol",minimumFractionDigits:o})}},98823:(e,t,s)=>{"use strict";s.d(t,{x:()=>o});var r=s(67294),a=s(86896),i=s(85893);const o=(0,r.memo)((e=>{const t=(0,a.Z)(),{message:s=t.formatMessage({id:"loadingMessage",defaultMessage:"Loading"})}=e;return(0,i.jsxs)("div",{className:"flex gap-1 align-baseline",children:[(0,i.jsx)("div",{children:s})," ",(0,i.jsxs)("div",{className:"loading-dots",children:[(0,i.jsx)("div",{className:"loading-dots--dot",style:{background:"#ffcc01"}}),(0,i.jsx)("div",{className:"loading-dots--dot",style:{background:"#00baad"}}),(0,i.jsx)("div",{className:"loading-dots--dot",style:{background:"#f36d5b"}})]})]})}))},19959:(e,t,s)=>{"use strict";s.d(t,{T:()=>xe});var r=s(50003),a=s(44012),i=s(64937),o=s(86896),n=s(50049);const l=(0,n.vU)({GeneratedLabelNotificationTitle:{id:"generated.label.notification.title",defaultMessage:"Label generated"},GeneratedLabelNotificationSubTitle:{id:"generated.label.notification.subtitle",defaultMessage:"Your label has been created and sent to the selected carrier."},GeneratedLabelNotificationSubTitle2:{id:"generated.label.notification.subtitle2",defaultMessage:"You can now find the related order in the Orders> Generated labels section."},GeneratedLabelNotificationButton:{id:"generated.label.notification.button",defaultMessage:"Print label now"},GeneratedLabelsNotificationTitle:{id:"generated.labels.notification.title",defaultMessage:"Generated labels"},GeneratedLabelsNotificationSubTitle:{id:"generated.labels.notification.subtitle",defaultMessage:"Labels created and sent to the selected courier."},GeneratedLabelsNotificationSubTitle2:{id:"generated.labels.notification.subtitle2",defaultMessage:"You can now find the related orders in the Orders Generated Label section."},GeneratedLabelsNotificationButton:{id:"generated.labels.notification.button",defaultMessage:"Print label now"},DownloadedLabelNotificationTitle:{id:"downloaded.label.notification.title",defaultMessage:"Label downloaded"},DownloadedLabelNotificationSubTitle:{id:"downloaded.label.notification.subtitle",defaultMessage:"The label has been saved to this device."},DownloadedLabelNotificationSubTitle2:{id:"downloaded.label.notification.subtitle2",defaultMessage:"You can now request a pickup from the selected carrier."},DownloadedLabelNotificationButton:{id:"downloaded.label.notification.button",defaultMessage:"Go to the Pickups section"},ArchivedOrderNotificationTitle:{id:"archived.order.notification.title",defaultMessage:"Order archived"},ArchivedOrderNotificationSubTitle:{id:"archived.order.notification.subtitle",defaultMessage:"Your order has been archived."},ArchivedOrderNotificationSubTitle2:{id:"archived.order.notification.subtitle2",defaultMessage:'To retrieve it, search in "Find order" at the top right of the screen.'},ScheduledPickupNotificationTitle:{id:"scheduled.pickup.notification.title",defaultMessage:"Pickup booked"},ScheduledPickupNotificationSubTitle:{id:"scheduled.pickup.notification.subtitle",defaultMessage:"The carrier will collect the package within your chosen time window."},ScheduledPickupNotificationSubTitle2:{id:"scheduled.pickup.notification.subtitle2",defaultMessage:'As soon as it has been collected, you will find the order in the "In transit" section.'},ConnectedStoreNotificationTitle:{id:"connected.store.notification.title",defaultMessage:"Shop connected"},ConnectedStoreNotificationSubTitle:{id:"connected.store.notification.subtitle",defaultMessage:"From now on you will find the orders received for this shop in the Orders Ordered section."},ConnectedCarrierNotificationTitle:{id:"connected.carrier.notification.title",defaultMessage:"Carrier connected"},ConnectedCarrierNotificationSubTitle:{id:"connected.carrier.notification.subtitle",defaultMessage:"You can now use this carrier for your shipments."},ConnectedCarrierNotificationSubTitle2:{id:"connected.carrier.notification.subtitle2",defaultMessage:"Create a pickup with this carrier"},UpdatedInformationsNotificationTitle:{id:"updated.informations.notification.title",defaultMessage:"Updated data!"},UpdatedInformationsNotificationSubTitle:{id:"updated.informations.notification.subtitle",defaultMessage:"We have saved your details"},UpdatedInformationsNotificationSubTitle2:{id:"updated.informations.notification.subtitle2",defaultMessage:"Your isendu profile has been updated."},ResetServiceNotificationTitle:{id:"reset.service.notification.title",defaultMessage:"Service reset"},ResetServiceNotificationSubTitle:{id:"reset.service.notification.subtitle",defaultMessage:"Your plan for this service will restart today."},ResetServiceNotificationSubTitle2:{id:"reset.service.notification.subtitle2",defaultMessage:"Your Whatsapp message allowance has been reset."},ResetPlanNotificationTitle:{id:"reset.plan.notification.title",defaultMessage:"Plan reset"},ResetPlanNotificationSubTitle:{id:"reset.plan.notification.subtitle",defaultMessage:"Your plan will restart immediately."},ResetPlanNotificationSubTitle2:{id:"reset.plan.notification.subtitle2",defaultMessage:"Your shipment allowance has been reset."},ReactivatedServiceNotificationTitle:{id:"reactivated.service.notification.title",defaultMessage:"Service reactivated"},ReactivatedServiceNotificationSubTitle:{id:"reactivated.service.notification.subtitle",defaultMessage:"Great choice! You can use it right away."},ReactivatedPlanNotificationTitle:{id:"reactivated.plan.notification.title",defaultMessage:"We are happy to meet an isender again!"},ReactivatedPlanNotificationSubTitle:{id:"reactivated.plan.notification.subtitle",defaultMessage:"Your plan has been reactivated, so you can go back to using isendu right away."},ReactivatedPlanNotificationSubTitle2:{id:"reactivated.plan.notification.subtitle2",defaultMessage:"It's great to have you back."},PrintedLabelNotificationTitle:{id:"printed.label.notification.title",defaultMessage:"Label printed"},PrintedLabelNotificationSubTitle:{id:"printed.label.notification.subtitle",defaultMessage:"The label has been printed."},PrintedLabelNotificationSubTitle2:{id:"printed.label.notification.subtitle2",defaultMessage:"You can now request a pickup from the selected carrier."},PrintedLabelNotificationButton:{id:"printed.label.notification.button",defaultMessage:"Go to the Pickups section"},CreatedReturnNotificationTitle:{id:"created.return.notification.title",defaultMessage:"Return created"},CreatedReturnNotificationSubTitle:{id:"created.return.notification.subtitle",defaultMessage:"The return request has been made"},CreatedReturnNotificationSubTitle2:{id:"created.return.notification.subtitle2",defaultMessage:"You can follow each step in the Returns section."},CreatedReturnNotificationButton:{id:"created.return.notification.button",defaultMessage:"Go to Returns"},CanceledPlanNotificationTitle:{id:"canceled.plan.notification.title",defaultMessage:"Plan canceled"},CanceledPlanNotificationSubTitle:{id:"canceled.plan.notification.subtitle",defaultMessage:"We are sorry that you want to leave us."},CanceledPlanNotificationSubTitle2:{id:"canceled.plan.notification.subtitle2",defaultMessage:"But if you change your mind, we're still here for you: your account won't be deleted immediately, so you can just click on the \"Reactivate\" button to reuse your current settings."},CanceledPlanNotificationButton:{id:"canceled.plan.notification.button",defaultMessage:"Changed your mind?"},CanceledServiceNotificationTitle:{id:"canceled.service.notification.title",defaultMessage:"Service canceled"},CanceledServiceNotificationSubTitle:{id:"canceled.service.notification.subtitle",defaultMessage:"You will immediately lose access to this service's benefits. But if you change your mind, it's ready for you: just click on \"Reactivate\" to return to your current settings."},CanceledServiceNotificationButton:{id:"canceled.service.notification.button",defaultMessage:"Changed your mind?"},CreatedOrderNotificationTitle:{id:"created.order.notification.title",defaultMessage:"Order created"},CreatedOrderNotificationSubTitle:{id:"created.order.notification.subtitle",defaultMessage:"You can find it in the Orders ordered section"},CreatedOrderNotificationButton:{id:"created.order.notification.button",defaultMessage:"Go to orders"},PurchasedPlanNotificationTitle:{id:"purchased.plan.notification.title",defaultMessage:"Plan purchased"},PurchasedPlanNotificationYourPlan:{id:"subscription.expired.modal.success.your.isendu.plan",defaultMessage:"Your isendu plan"},DeletedNoteNotificationTitle:{id:"deleted.note.notification.title",defaultMessage:"Note deleted"},DeletedNoteNotificationSubTitle:{id:"deleted.note.notification.subtitle",defaultMessage:"Your note has been correctly deleted. You can add a new one at any time."},SavedNoteNotificationTitle:{id:"saved.note.notification.title",defaultMessage:"Note saved"},SavedNoteNotificationSubTitle:{id:"saved.note.notification.subtitle",defaultMessage:"Your note has been correctly saved. You can now read it or modify it anytime by clicking on 'Order notes' tag."}});var d=s(85893);const c=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:te,alt:"archive-return.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.ArchivedOrderNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ArchivedOrderNotificationSubTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ArchivedOrderNotificationSubTitle2)})]})]})};c.displayName="ArchivedOrderNotification";var p=s(71577),u=s(29323),h=s(67294);const m=(0,u.Pi)((()=>{const e=(0,o.Z)(),t=(0,h.useCallback)((()=>{}),[]);return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:K,alt:"alert.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.CanceledServiceNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.CanceledServiceNotificationSubTitle)}),(0,d.jsx)(p.Z,{type:"link",className:"NotificationToast__button pl-0 ml-0",onClick:t,children:e.formatMessage(l.CanceledServiceNotificationButton)})]})]})}));const g=(0,u.Pi)((()=>{const e=(0,o.Z)(),t=(0,h.useCallback)((()=>{}),[]);return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:K,alt:"alert.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.CanceledPlanNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.CanceledPlanNotificationSubTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.CanceledPlanNotificationSubTitle2)}),(0,d.jsx)(p.Z,{type:"link",className:"NotificationToast__button pl-0 ml-0",onClick:t,children:e.formatMessage(l.CanceledPlanNotificationButton)})]})]})}));const y=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:re,alt:"integration.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.ConnectedCarrierNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ConnectedCarrierNotificationSubTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ConnectedCarrierNotificationSubTitle2)})]})]})};y.displayName="ConnectedCarrierNotification";const f=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:re,alt:"integration.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.ConnectedStoreNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ConnectedStoreNotificationSubTitle)})]})]})};f.displayName="ConnectedStoreNotification";const b=()=>{const e=(0,o.Z)(),t=(0,h.useCallback)((()=>{var e;null===(e=document.getElementById("incoming_orders"))||void 0===e||e.click()}),[]);return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:le,alt:"created-order.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.CreatedOrderNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.CreatedOrderNotificationSubTitle)}),(0,d.jsx)(p.Z,{type:"link",className:"NotificationToast__button pl-0 ml-0",onClick:t,children:e.formatMessage(l.CreatedOrderNotificationButton)})]})]})};b.displayName="CreatedOrderNotification";const v=()=>{const e=document.querySelector(".ant-tabs-tab-btn[id$='returns']");e&&e.click()},x=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:te,alt:"pickup.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.CreatedReturnNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.CreatedReturnNotificationSubTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.CreatedReturnNotificationSubTitle2)}),(0,d.jsx)(p.Z,{type:"link",className:"NotificationToast__button pl-0 ml-0",onClick:v,children:e.formatMessage(l.CreatedReturnNotificationButton)})]})]})};x.displayName="CreatedReturnNotification";var S=s(89250);const j=(0,u.Pi)((()=>{const e=(0,o.Z)(),t=(0,S.s0)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:J,alt:"Downloaded-label.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.DownloadedLabelNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.DownloadedLabelNotificationSubTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.DownloadedLabelNotificationSubTitle2)}),(0,d.jsx)(p.Z,{type:"link",className:"NotificationToast__button pl-0 ml-0",onClick:()=>{const e=document.querySelector(".ant-tabs-tab-btn[id$='pickups']");e&&e.click(),t("/shipments/pickups")},children:e.formatMessage(l.DownloadedLabelNotificationButton)})]})]})}));var w=s(59102),M=s(25108);const C=(0,u.Pi)((e=>{var t;const{order:s}=e,[a,i]=(0,h.useState)(!1),{companiesStore:n}=(0,r.o)(),c=(0,o.Z)(),u=!(null===(t=n.companyInfo)||void 0===t||!t.useZebraBrowserPrinter);return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:X,alt:"generated-label.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:c.formatMessage(l.GeneratedLabelNotificationTitle)}),(0,d.jsx)("p",{children:c.formatMessage(l.GeneratedLabelNotificationSubTitle)}),(0,d.jsx)("p",{children:c.formatMessage(l.GeneratedLabelNotificationSubTitle2)}),(0,d.jsx)(p.Z,{type:"link",className:"NotificationToast__button pl-0 ml-0",loading:a,onClick:async()=>{if(s.order.id){i(!0);try{var e,t;await(0,w.qw)({ids:[s.order.id],onError:e=>{i(!1),M.log(e)},directPrinting:null===(e=n.companyInfo)||void 0===e?void 0:e.directPrinting,printCustomsDocuments:null===(t=n.companyInfo)||void 0===t?void 0:t.printCustomsDocuments,useZebraBrowserPrinter:u}),i(!1)}catch(e){}}},children:c.formatMessage(l.GeneratedLabelNotificationButton)})]})]})}));C.displayName="GeneratedLabelNotification";var A=s(25108);const T=(0,u.Pi)((e=>{var t;const{orders:s}=e,[a,i]=(0,h.useState)(!1),{companiesStore:n}=(0,r.o)(),c=(0,o.Z)(),u=!(null===(t=n.companyInfo)||void 0===t||!t.useZebraBrowserPrinter);return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:X,alt:"generated-label.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:c.formatMessage(l.GeneratedLabelsNotificationTitle)}),(0,d.jsx)("p",{children:c.formatMessage(l.GeneratedLabelsNotificationSubTitle)}),(0,d.jsx)("p",{children:c.formatMessage(l.GeneratedLabelsNotificationSubTitle2)}),(0,d.jsx)(p.Z,{type:"link",className:"NotificationToast__button pl-0 ml-0",loading:a,onClick:async()=>{if(s){i(!0);try{var e,t;const r=(null==s?void 0:s.map((e=>e.order.id)))||[];if(!r)return;await(0,w.qw)({ids:r,onError:e=>{i(!1),A.log(e)},directPrinting:null===(e=n.companyInfo)||void 0===e?void 0:e.directPrinting,printCustomsDocuments:null===(t=n.companyInfo)||void 0===t?void 0:t.printCustomsDocuments,useZebraBrowserPrinter:u}),i(!1)}catch(e){}}},children:c.formatMessage(l.GeneratedLabelsNotificationButton)})]})]})}));T.displayName="GeneratedLabelsNotification";var O=s(70506);const P=()=>{const e=(0,o.Z)(),t=(0,S.s0)(),s=(0,S.TH)(),r=(0,h.useMemo)((()=>s.pathname.includes(O.H.shipments.pickups)),[s.pathname]);return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:ee,alt:"Printed-label.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.PrintedLabelNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.PrintedLabelNotificationSubTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.PrintedLabelNotificationSubTitle2)}),!r&&(0,d.jsx)(p.Z,{type:"link",className:"NotificationToast__button pl-0 ml-0",onClick:()=>t(`${O.H.shipments.root}/${O.H.shipments.pickups}`),children:e.formatMessage(l.PrintedLabelNotificationButton)})]})]})};P.displayName="PrintedLabelNotification";var N=s(50573);const _=e=>{var t,s;let{selectedPlanData:r}=e;const a=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:ie,alt:"purches-image.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:a.formatMessage(l.PurchasedPlanNotificationTitle)}),(0,d.jsxs)("p",{children:[a.formatMessage(l.PurchasedPlanNotificationYourPlan)," ",(0,d.jsx)("strong",{children:null==r?void 0:r.name})]}),(0,d.jsxs)("p",{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(n.BK,{value:(null==r||null===(t=r.plan)||void 0===t||null===(s=t.metadata)||void 0===s?void 0:s.amount)||0})," ","year"===(null==r?void 0:r.plan.interval)?a.formatMessage({id:"settings.subscriptions.modal.summary.shipmentsYear",defaultMessage:"shipments / year"}):a.formatMessage({id:"settings.subscriptions.modal.summary.shipmentsMonth",defaultMessage:"shipments / month"})]}),(0,d.jsx)("div",{children:r&&(0,d.jsx)(N.A,{currentPlan:r})})]})]})]})};_.displayName="PurchasedPlanNotification";const Z=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:q,alt:"plan-reactivated.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.ReactivatedPlanNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ReactivatedPlanNotificationSubTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ReactivatedPlanNotificationSubTitle2)})]})]})};Z.displayName="ReactivatedPlanNotification";const I=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:ne,alt:"service-reactivated.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.ReactivatedServiceNotificationTitle)}),(0,d.jsxs)("p",{children:[e.formatMessage(l.ReactivatedServiceNotificationSubTitle)," ",(0,d.jsx)("br",{})]})]})]})};I.displayName="ReactivatedServiceNotification";const D=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:oe,alt:"reset.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.ResetPlanNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ResetPlanNotificationSubTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ResetPlanNotificationSubTitle2)})]})]})};D.displayName="ResetPlanNotification";const E=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:oe,alt:"reset.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.ResetServiceNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ResetServiceNotificationSubTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ResetServiceNotificationSubTitle2)})]})]})};E.displayName="ResetServiceNotification";const k=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:se,alt:"pickup.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.ScheduledPickupNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ScheduledPickupNotificationSubTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.ScheduledPickupNotificationSubTitle2)})]})]})};k.displayName="ScheduledPickupNotification";const L=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:ae,alt:"saved-informations.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.UpdatedInformationsNotificationTitle)}),(0,d.jsxs)("p",{children:[e.formatMessage(l.UpdatedInformationsNotificationSubTitle),(0,d.jsx)("br",{}),e.formatMessage(l.UpdatedInformationsNotificationSubTitle2)]})]})]})};L.displayName="UpdatedInformationsNotification";const R=()=>{const e=(0,S.s0)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:de,alt:"new-message.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:(0,d.jsx)(a.Z,{id:"new.whatsapp.message.notification.title",defaultMessage:"New message"})}),(0,d.jsx)("p",{children:(0,d.jsx)(a.Z,{id:"new.whatsapp.message.notification.description",defaultMessage:"You have recevived a reply message from a customer of your store."})}),(0,d.jsx)(p.Z,{className:"flex p-0",type:"link",onClick:()=>e(`/${O.H.conversations.root}`),children:(0,d.jsx)(a.Z,{id:"notification.conversations.goToConversations",defaultMessage:"Go to conversations"})})]})]})};R.displayName="GeneratedLabelNotification";var F=s(27484),U=s.n(F),G=s(3375);const B=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:V,alt:"success.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.SavedNoteNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.SavedNoteNotificationSubTitle)})]})]})};B.displayName="SavedNoteNotification";const $=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:V,alt:"success.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage(l.DeletedNoteNotificationTitle)}),(0,d.jsx)("p",{children:e.formatMessage(l.DeletedNoteNotificationSubTitle)})]})]})};$.displayName="DeletedNoteNotification";const z=()=>{const e=(0,o.Z)();return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:de,alt:"saved-informations.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:e.formatMessage({id:"transactionalWhatsapp.templateSentNotification.title",defaultMessage:"Template submitted"})}),(0,d.jsx)("p",{children:e.formatMessage({id:"transactionalWhatsapp.templateSentNotification.message",defaultMessage:"The template has been sent for approval.{br} The response will arrive within 3 to 4 working days."},{br:(0,d.jsx)("br",{})})})]})]})};z.displayName="WhatsappTemplateSentNotification";const W="https://static-files-cdn.isendu.com/notifications",H=`${W}/notice.svg`,V=`${W}/success.svg`,q=`${W}/plan-reactivated.svg`,Y=`${W}/info.svg`,K=`${W}/alert.svg`,X=`${W}/generated-label.svg`,Q=`${W}/new-order.svg`,J=`${W}/saved-label.svg`,ee=`${W}/print.svg`,te=`${W}/archive-return.svg`,se=`${W}/pickup.svg`,re=`${W}/integration.svg`,ae=`${W}/saved-information.svg`,ie=`${W}/purchase.svg`,oe=`${W}/reset.svg`,ne=`${W}/service-reactivated.svg`,le=`${W}/order-created.svg`,de=`${W}/new-message.svg`,ce={GENERATED_LABEL:C,GENERATED_LABELS:T,DOWNLOADED_LABEL:j,PRINTED_LABEL:P,ARCHIVED_ORDERS:c,SCHEDULED_PICKUP:k,CONNECTED_STORE:f,CONNECTED_CARRIER:y,UPDATED_INFORMATIONS:L,RESET_SERVICE:E,RESET_PLAN:D,REACTIVATED_SERVICE:I,REACTIVATED_PLAN:Z,CREATED_RETURN:x,CANCELED_PLAN:g,CANCELED_SERVICE:m,CREATED_ORDER:b,PURCHASED_PLAN:_,NEW_ORDER:e=>{const{orderId:t,storeOrderId:s,storeName:r}=e;return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{src:Q,alt:"new-order.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:(0,d.jsx)(a.Z,{id:"notification.new.order.title",defaultMessage:"A new order has arrived!"})}),(0,d.jsx)("p",{children:(0,d.jsx)(a.Z,{id:"notification.new.order.description",defaultMessage:"The order ID is: {storeOrderId}. It has just been synchronized from your {storeName} store.",values:{storeOrderId:(0,d.jsx)("b",{children:s}),storeName:(0,d.jsx)("b",{children:r})}})}),t&&(0,d.jsx)(p.Z,{className:"flex p-0",type:"link",onClick:()=>(e=>window.open(`/shipments/orders?order=${e}`,"_blank"))(t),children:(0,d.jsx)(a.Z,{id:"ordersTable.toolbar.newOrder.modal.steps.orderDetails",defaultMessage:"Order detail"})})]})]})},NEW_WHATSAPP_MESSAGE:R,FORGOTTEN_SHIPMENT:()=>(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{src:Y,alt:"new-order.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:(0,d.jsx)(a.Z,{id:"ordersTable.missedShipment.title",defaultMessage:"You missed a shipment!"})}),(0,d.jsx)("p",{children:(0,d.jsx)(a.Z,{id:"ordersTable.missedShipment.message",defaultMessage:"There is a shipment generated 3 or more days ago, please review them."})})]})]}),SAVED_NOTE:B,DELETED_NOTE:$,WHATSAPP_TEMPLATE_SENT:z},pe={FORGOTTEN_SHIPMENT:()=>ue()},ue=()=>{const e=U()().format("DD/MM/YYYY");window.localStorage.setItem("nMissShipDt",e)},he={autoClose:3e3,pauseOnHover:!0};var me=s(39563);const ge=e=>{const{title:t,subTitle:s}=e;return(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper pl-2 pr-3",children:[t&&(0,d.jsx)("div",{style:{fontSize:"18px"},children:(0,d.jsx)(me.xv,{children:t})}),s&&(0,d.jsx)("div",{children:(0,d.jsx)(me.xv,{type:"secondary",children:s})})]})};ge.displayName="NotificationToastGeneric";const ye=e=>{const{title:t,subTitle:s}=e;return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:Y,alt:"info.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:t}),s&&(0,d.jsx)("p",{children:s})]})]})};ye.displayName="NotificationToastInfo";const fe=e=>{const{title:t="Generic warning",subTitle:s=""}=e;return(0,d.jsxs)("div",{className:"NotificationToast",children:[(0,d.jsx)("img",{className:"mr-2",src:H,alt:"notice.svg"}),(0,d.jsxs)("div",{className:"NotificationToast__TextWrapper",children:[(0,d.jsx)("h1",{children:t}),(0,d.jsx)("p",{children:s})]})]})};fe.displayName="NotificationToastWarning";var be=s(98933);function ve(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if("object"==typeof t[0]){const e=null==t?void 0:t[0].message,s=null==t?void 0:t[0].description;i.Am.error((0,d.jsx)(ge,{title:e,subTitle:s}),{pauseOnHover:!0,autoClose:3e3})}else{const[e,s]=t;i.Am.error((0,d.jsx)(ge,{title:e,subTitle:s}),{pauseOnHover:!0,autoClose:3e3})}}const xe={warning:function(e,t){i.Am.warn((0,d.jsx)(fe,{title:e,subTitle:t}),{icon:!1,pauseOnHover:!0})},success:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if("object"==typeof t[0]){const e=null==t?void 0:t[0].message,s=null==t?void 0:t[0].description;i.Am.success((0,d.jsx)(ge,{title:e,subTitle:s}),{pauseOnHover:!0,autoClose:3e3})}else{const[e,s]=t;i.Am.success((0,d.jsx)(ge,{title:e,subTitle:s}),{pauseOnHover:!0,autoClose:3e3})}},info:function(e,t){i.Am.info((0,d.jsx)(ye,{title:e,subTitle:t}),{icon:!1,pauseOnHover:!0,autoClose:3e3})},error:ve,template:function(){for(var e,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];const[n,l={}]=s;if(null===(e=r.rootStore.companiesStore.companyInfo)||void 0===e||!e.showSmartFeedback){if("NEW_ORDER"===n){const e=l;return void i.Am.success((0,d.jsx)(a.Z,{id:"new.order.basic.notification.title",defaultMessage:"New order {storeOrderId} from {storeName}",values:{storeOrderId:e.storeOrderId,storeName:e.storeName}}),{autoClose:3e3,pauseOnHover:!0})}return function(e){switch(e){case"ARCHIVED_ORDERS":return void i.Am.success((0,d.jsx)(a.Z,{id:"archived.order.notification.title",defaultMessage:"Order archived"}),he);case"CANCELED_PLAN":return void i.Am.success((0,d.jsx)(a.Z,{id:"canceled.plan.notification.title",defaultMessage:"Plan canceled"}),he);case"CANCELED_SERVICE":return void i.Am.success((0,d.jsx)(a.Z,{id:"canceled.service.notification.title",defaultMessage:"Service canceled"}),he);case"CONNECTED_CARRIER":return void i.Am.success((0,d.jsx)(a.Z,{id:"connected.carrier.notification.title",defaultMessage:"Carrier connected"}),he);case"CONNECTED_STORE":return void i.Am.success((0,d.jsx)(a.Z,{id:"connected.store.notification.title",defaultMessage:"Store connected"}),he);case"CREATED_ORDER":return void i.Am.success((0,d.jsx)(a.Z,{id:"created.order.notification.title",defaultMessage:"Order created"}),he);case"CREATED_RETURN":return void i.Am.success((0,d.jsx)(a.Z,{id:"created.return.notification.title",defaultMessage:"Return created"}),he);case"DELETED_NOTE":return void i.Am.success((0,d.jsx)(a.Z,{id:"deleted.note.notification.title",defaultMessage:"Note deleted"}),he);case"DOWNLOADED_LABEL":return void i.Am.success((0,d.jsx)(a.Z,{id:"downloaded.label.notification.title",defaultMessage:"Label downloaded"}),he);case"FORGOTTEN_SHIPMENT":i.Am.info((0,d.jsx)(a.Z,{id:"ordersTable.missedShipment.title",defaultMessage:"You've forgotten a shipment!"}),he);const e=U()().format("DD/MM/YYYY");return void localStorage.setItem("nMissShipDt",e);case"GENERATED_LABEL":return void i.Am.success((0,d.jsx)(a.Z,{id:"generated.label.notification.title",defaultMessage:"Label generated"}),he);case"GENERATED_LABELS":return void i.Am.success((0,d.jsx)(a.Z,{id:"generated.labels.notification.title",defaultMessage:"Labels generated"}),he);case"NEW_WHATSAPP_MESSAGE":return void i.Am.info((0,d.jsx)(a.Z,{id:"new.whatsapp.message.notification.title",defaultMessage:"New WhatsApp message"}),he);case"PRINTED_LABEL":return void i.Am.success((0,d.jsx)(a.Z,{id:"printed.label.notification.title",defaultMessage:"Label printed"}),he);case"PURCHASED_PLAN":return void i.Am.success((0,d.jsx)(a.Z,{id:"purchased.plan.notification.title",defaultMessage:"Plan purchased"}),he);case"REACTIVATED_PLAN":return void i.Am.success((0,d.jsx)(a.Z,{id:"reactivated.plan.notification.title",defaultMessage:"Plan reactivated"}),he);case"RESET_PLAN":return void i.Am.success((0,d.jsx)(a.Z,{id:"reset.plan.notification.title",defaultMessage:"Plan reset"}),he);case"RESET_SERVICE":return void i.Am.success((0,d.jsx)(a.Z,{id:"reset.service.notification.title",defaultMessage:"Service reset"}),he);case"SAVED_NOTE":return void i.Am.success((0,d.jsx)(a.Z,{id:"saved.note.notification.title",defaultMessage:"Note saved"}),he);case"SCHEDULED_PICKUP":return void i.Am.success((0,d.jsx)(a.Z,{id:"scheduled.pickup.notification.title",defaultMessage:"Pickup scheduled"}),he);case"UPDATED_INFORMATIONS":return void i.Am.success((0,d.jsx)("span",{className:"ml-2",children:(0,d.jsx)(a.Z,{id:"updated.informations.notification.title",defaultMessage:"Informations updated"})}),{...he,icon:(0,d.jsx)("span",{style:{color:"#02baad",fontSize:24},children:(0,d.jsx)(G.Z,{})})});case"WHATSAPP_TEMPLATE_SENT":i.Am.success((0,d.jsx)(a.Z,{id:"transactionalWhatsapp.templateSentNotification.message",defaultMessage:"The template has been sent for approval.{br} The response will arrive within 3 to 4 working days.",values:{br:(0,d.jsx)("br",{})}}),he)}}(n)}const c=ce[n];(0,i.Am)((0,d.jsx)(c,{...l},n),{icon:!1,pauseOnHover:!0,autoClose:3e3,onClose:()=>{const e=n;pe[e]&&pe[e]()}})},genericError:function(){return ve({message:be.G.instance.formatMessage({id:"error.generic.title",defaultMessage:"Oops, something went wrong!"}),description:be.G.instance.formatMessage({id:"error.generic.description",defaultMessage:"Please try again in a few seconds"})})}}},96893:(e,t,s)=>{"use strict";s.d(t,{Sy:()=>se,Io:()=>re,c3:()=>V,ms:()=>ee,Id:()=>J,f_:()=>te});var r=s(44012),a=s(76772),i=s(71577),o=s(27049),n=s(39563),l=s(43926),d=s(55222),c=s(98823),p=s(47635),u=s(50003),h=s(29323),m=s(50049),g=s(89250),y=s(85893);function f(){return(0,y.jsx)("div",{className:"SubscriptionEditModal__Content",children:(0,y.jsx)("div",{className:"SubscriptionModalCard w-full",style:{padding:"5rem",fontSize:23},children:(0,y.jsxs)("div",{className:"flex flex-column align-center justify-center",children:[(0,y.jsx)("img",{src:"https://static-files-cdn.isendu.com/images/waiting.webp",height:250,style:{position:"relative",left:16,marginBottom:32}}),(0,y.jsx)(c.x,{message:(0,y.jsx)(r.Z,{id:"subscriptionModal.processingInProgress",defaultMessage:"Processing in progress"})})]})})})}const b=(0,h.Pi)((function(){var e;const{subscriptionsStore:t}=(0,u.o)(),s=(0,g.s0)(),{planPrice:c,shipments:h,expansionCount:f}="monthly"===(b=p.G).selectedBillingCycle?{planPrice:null===(v=b.selectedPlan)||void 0===v?void 0:v.monthlyPrice,shipments:null===(x=b.selectedPlan)||void 0===x?void 0:x.monthlyShipments,expansionCount:b.selectedExpansionCount}:{planPrice:null===(S=b.selectedPlan)||void 0===S?void 0:S.yearlyPrice,shipments:null===(j=b.selectedPlan)||void 0===j?void 0:j.yearlyShipments,expansionCount:b.selectedExpansionCount};var b,v,x,S,j;const w=t.getExpansionsPrice(p.G.selectedBillingCycle,f),{title:M,subtitle:C}=function(e,t){switch(e){case"BUY_PLAN":return{title:(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.buyPlan.title",defaultMessage:"Happy to have you with us!"}),subtitle:(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.buyPlan.subtitle",defaultMessage:"The purchase was successful."})};case"UPGRADE_PLAN":return{title:(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.upgradePlan.title",defaultMessage:"Upgrade completed"}),subtitle:(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.buyPlan.subtitle",defaultMessage:"The purchase was successful."})};case"EDIT_PLAN":return{title:(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.editPlan.title",defaultMessage:"Edit completed"}),subtitle:(0,y.jsxs)("span",{children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.editPlan.subtitle",defaultMessage:"Plan change and payment will occur when your plan is renewed on the"})," ",(0,y.jsx)(m.Ji,{value:t,year:"numeric",month:"long",day:"2-digit"})]})};case"BUY_EXPANSION":return{title:(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.buyExpansion.title",defaultMessage:"Expansion completed"}),subtitle:(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.buyPlan.subtitle",defaultMessage:"The purchase was successful."})};case"REDUCE_EXPANSION":return{title:(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.reduceExpansion.title",defaultMessage:"Reduction completed"}),subtitle:(0,y.jsxs)("span",{children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.editPlan.subtitle",defaultMessage:"Plan change and payment will occur when your plan is renewed on the"})," ",(0,y.jsx)(m.Ji,{value:t,year:"numeric",month:"long",day:"2-digit"})]})}}}(p.G.operation,null===(e=p.G.activeSubscription)||void 0===e?void 0:e.expiresAt),[A,T]=function(e,t){switch(e.operation){case"UPGRADE_PLAN":case"EDIT_PLAN":case"BUY_EXPANSION":case"REDUCE_EXPANSION":return[{label:(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.goToConversations",defaultMessage:"Go to conversations"}),onClick:()=>{e.closeModal(),t("/conversations")}},{label:(0,y.jsx)(r.Z,{id:"subscriptionModal.closeModal",defaultMessage:"Close modal"}),onClick:()=>e.closeModal()}];case"BUY_PLAN":return[{label:(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.backToIsendu",defaultMessage:"Back to isendu"}),onClick:()=>{e.closeModal(),t("/shipments/orders")}},{label:(0,y.jsx)(r.Z,{id:"subscriptionModal.confirmation.goToWhatsappTemplates",defaultMessage:"Go to WhatsApp templates"}),onClick:()=>{e.closeModal(),t("/marketing/whatsapp")}}]}}(p.G,s);return(0,y.jsxs)("div",{className:"SubscriptionEditModal__Content",children:[(0,y.jsx)("div",{className:"SubscriptionModalCard",children:(0,y.jsxs)("div",{className:"flex flex-column align-center w-full",children:[(0,y.jsx)(n.Dx,{level:3,className:"mb-1",children:M}),(0,y.jsx)(n.xv,{type:"secondary",children:C}),(0,y.jsx)("img",{src:"https://static-files-cdn.isendu.com/notifications/purchase.svg",height:150,className:"mt-2 mb-2"}),(0,y.jsx)(n.Dx,{level:5,children:(0,y.jsx)(r.Z,{id:"subscriptionModal.purchaseSummary",defaultMessage:"Purchase summary"})}),(0,y.jsxs)("div",{className:"w-full mt-2",children:[p.G.selectedPlan&&(0,y.jsxs)("div",{className:"Confirmation__Detail",children:[(0,y.jsxs)(n.xv,{strong:!0,children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.isenduPlan",defaultMessage:"isendu plan"})," ",p.G.selectedPlan.planName]}),(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(m.BK,{value:h})," ",(0,y.jsx)(r.Z,{id:"subscriptionModal.shipments",defaultMessage:"shipments"})," /",p.G.isMonthOperation?(0,y.jsx)(r.Z,{id:"current.plan.interval.month",defaultMessage:"month"}):(0,y.jsx)(r.Z,{id:"current.plan.interval.year",defaultMessage:"year"})," ","- ",(0,y.jsx)(d.x,{currency:"EUR",value:c}),"  (",p.G.isMonthOperation?(0,y.jsx)(r.Z,{id:"subscriptionModal.monthlyPayment",defaultMessage:"monthly payment"}):(0,y.jsx)(r.Z,{id:"subscriptionModal.annualPayment",defaultMessage:"annual payment"}),")"]})]}),p.G.selectedExpansionCount>0&&(0,y.jsxs)("div",{className:"Confirmation__Detail",children:[(0,y.jsxs)(n.xv,{strong:!0,children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.whatsappExpansion",defaultMessage:"WhatsApp Expansion"})," ",p.G.selectedExpansionCount]}),(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(m.BK,{value:f})," ",(0,y.jsx)(r.Z,{id:"subscriptionModal.WAConversations",defaultMessage:"WA conversations"})," /",p.G.isMonthOperation?(0,y.jsx)(r.Z,{id:"current.plan.interval.month",defaultMessage:"month"}):(0,y.jsx)(r.Z,{id:"current.plan.interval.year",defaultMessage:"year"})," ","- ",(0,y.jsx)(d.x,{currency:"EUR",value:w}),"  (",p.G.isMonthOperation?(0,y.jsx)(r.Z,{id:"subscriptionModal.monthlyPayment",defaultMessage:"monthly payment"}):(0,y.jsx)(r.Z,{id:"subscriptionModal.annualPayment",defaultMessage:"annual payment"}),")"]})]})]})]})}),(0,y.jsx)("div",{className:"SubscriptionModalCard mt-3",children:(0,y.jsxs)("div",{className:"flex flex-column w-full gap-1",children:["BUY_PLAN"===p.G.operation&&(0,y.jsx)("div",{className:"mb-3",children:(0,y.jsx)(a.Z,{type:"warning",icon:(0,y.jsx)(l.Z,{style:{fontSize:38,marginRight:16}}),showIcon:!0,message:(0,y.jsx)(r.Z,{id:"subscriptionModal.templatesInfo",defaultMessage:"To send your automatic messages go to the WhatsApp templates page and turn on the switches related to sending states."})})}),(0,y.jsxs)("div",{className:"flex align-center",children:[(0,y.jsx)(i.Z,{className:"SubscriptionEditModal__Footer__Button",style:{flex:1},onClick:A.onClick,children:A.label}),(0,y.jsx)(o.Z,{type:"vertical",style:{height:32},className:"mr-2 ml-2"}),(0,y.jsx)(i.Z,{type:"primary",className:"SubscriptionEditModal__Footer__Button",style:{flex:1},onClick:T.onClick,children:T.label})]})]})})]})})),v=(0,h.Pi)((function(){return(0,y.jsx)("div",{className:"SubscriptionEditModal__Content",children:(0,y.jsx)("div",{className:"SubscriptionModalCard",children:(0,y.jsxs)("div",{className:"flex flex-column align-center w-full",children:[(0,y.jsx)(n.Dx,{level:3,className:"mb-1",children:(0,y.jsx)(r.Z,{id:"subscriptionModal.genericError.title",defaultMessage:"Generic error"})}),(0,y.jsx)("img",{src:"https://static-files-cdn.isendu.com/notifications/alert2.svg",height:150,className:"mt-2 mb-2"}),(0,y.jsxs)("div",{className:"Confirmation__ErrorBox",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"subscriptionModal.genericError.subtitle",defaultMessage:"There was a problem processing your request, please try again."})}),(0,y.jsxs)("div",{className:"flex align-center mt-2",children:[(0,y.jsx)(i.Z,{className:"SubscriptionEditModal__Footer__Button",style:{flex:1},onClick:()=>p.G.closeModal(),children:(0,y.jsx)(r.Z,{id:"generic.cancel",defaultMessage:"Cancel"})}),(0,y.jsx)(o.Z,{type:"vertical",style:{height:32},className:"mr-2 ml-2"}),(0,y.jsx)(i.Z,{type:"primary",className:"SubscriptionEditModal__Footer__Button",style:{flex:1},onClick:()=>p.G.finalizeOperation(),children:(0,y.jsx)(r.Z,{id:"subscriptionModal.retry",defaultMessage:"Retry"})})]})]})]})})})})),x=(0,h.Pi)((function(){switch(p.G.paymentStatus){case"pending":return(0,y.jsx)(f,{});case"success":return(0,y.jsx)(b,{});case"error":return(0,y.jsx)(v,{});default:return null}}));var S=s(53886),j=s(40847),w=s(99177),M=s(71230),C=s(15746),A=s(84403);const T=(0,h.Pi)((function(){var e;const{subscriptionsStore:t}=(0,u.o)(),s="REDUCE_EXPANSION"===p.G.operation?p.G.activeSubscription.expansionsConversations:p.G.hasYearlyPlan?re:se,i=p.G.isMonthOperation?50:300,o=t.getSelectedExpansionTierPrice((null===(e=p.G.activeSubscription)||void 0===e?void 0:e.recurringType)||"monthly",p.G.selectedExpansionCount);function l(){return p.G.selectedExpansionCount===s}return(0,y.jsx)("div",{className:"SubscriptionModalCard",style:{flex:3},children:(0,y.jsxs)("div",{className:"SelectExpansionBox",children:[(0,y.jsx)("div",{className:"mb-2",children:function(){var e,t;switch(p.G.operation){case"EDIT_PLAN":case"BUY_PLAN":case"UPGRADE_PLAN":return(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.upgrade",defaultMessage:"Your plan isendu already includes <strong>{value} conversations</strong>, you can increase the number by selecting it from the slider below or skip this step.",values:{strong:e=>(0,y.jsx)("strong",{children:e}),value:(0,y.jsx)(m.BK,{value:(null===(e=p.G.selectedPlan)||void 0===e?void 0:e.monthlyIncludedConversations)||0})}});case"BUY_EXPANSION":case"REDUCE_EXPANSION":return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.buyReduce1",defaultMessage:"Your isendu plan already includes <strong>{value} {recurringType} conversations</strong>",values:{strong:e=>(0,y.jsx)("strong",{children:e}),value:(0,y.jsx)(m.BK,{value:p.G.activeSubscription.planIncludedConversations}),recurringType:"monthly"===p.G.activeSubscription.recurringType?(0,y.jsx)(r.Z,{id:"settings.subscriptions.monthly",defaultMessage:"monthly"}):(0,y.jsx)(r.Z,{id:"settings.subscriptions.annual",defaultMessage:"annual"})}}),((null===(t=p.G.activeSubscription)||void 0===t?void 0:t.expansionsConversations)||0)>0&&(0,y.jsxs)(y.Fragment,{children:[" ",(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.buyReduce2",defaultMessage:"<strong>and another {value}</strong> purchased as an expansion",values:{strong:e=>(0,y.jsx)("strong",{children:e}),value:(0,y.jsx)(m.BK,{value:p.G.activeSubscription.expansionsConversations})}})]}),". ","BUY_EXPANSION"===p.G.operation?(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.buyReduce3",defaultMessage:"You can decide the additional quota by selecting it from the slider below."}):(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.buyReduce4",defaultMessage:"You can reduce the additional quota by editing it from the slider below."})]})}}()}),(0,y.jsx)(n.Dx,{level:5,children:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.selectQuota",defaultMessage:"Select the additional quota"})}),(0,y.jsxs)("div",{className:"flex align-center",children:[(0,y.jsx)("div",{style:{fontSize:18},children:(0,y.jsx)(m.BK,{value:0})}),(0,y.jsx)(w.Z,{value:p.G.selectedExpansionCount,min:0,max:s,step:i,onChange:e=>p.G.setSelectedExpansionCount(e),tooltipVisible:!1}),(0,y.jsx)("div",{style:{fontSize:18},children:(0,y.jsx)(m.BK,{value:s,minimumFractionDigits:0,maximumFractionDigits:0})})]}),(0,y.jsxs)(M.Z,{align:"middle",className:"SelectExpansionBox__Row",children:[(0,y.jsx)(C.Z,{span:10,children:(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.monthlyConversations",defaultMessage:"Number of conversations"}),":"]})}),(0,y.jsx)(C.Z,{span:8,className:"flex justify-center",children:(0,y.jsx)(n.Dx,{level:1,children:l()&&"BUY_EXPANSION"===p.G.operation?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.BK,{value:p.G.selectedExpansionCount,minimumFractionDigits:0,maximumFractionDigits:0}),"+"]}):(0,y.jsx)(m.BK,{value:p.G.selectedExpansionCount,minimumFractionDigits:0,maximumFractionDigits:0})})})]}),(0,y.jsxs)(M.Z,{align:"middle",className:"SelectExpansionBox__Row pt-1 pb-1",children:[(0,y.jsx)(C.Z,{span:10,children:(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.monthlyCost",defaultMessage:"Total cost"}),":"," "]})}),(0,y.jsx)(C.Z,{span:8,className:"flex justify-center",children:(0,y.jsx)(n.Dx,{level:5,children:l()&&"BUY_EXPANSION"===p.G.operation?"-":(0,y.jsx)(d.x,{currency:"EUR",value:o*p.G.selectedExpansionCount,maximumFractionDigits:2})})})]}),(0,y.jsxs)(M.Z,{align:"middle",className:"SelectExpansionBox__Row pt-1 pb-1",children:[(0,y.jsx)(C.Z,{span:10,children:(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.conversationCost",defaultMessage:"Cost per conversation"}),":"," "]})}),(0,y.jsx)(C.Z,{span:8,className:"flex justify-center",children:(0,y.jsx)(n.Dx,{level:5,children:l()&&"BUY_EXPANSION"===p.G.operation?"-":(0,y.jsx)(d.x,{currency:"EUR",value:o,maximumFractionDigits:3})})})]}),(0,y.jsx)("div",{className:"mt-2",children:(0,y.jsx)(r.Z,{id:"settings.billings.upgrade.plan.modal.doubt",defaultMessage:"If you have any doubt, talk to <link>sales team</link>",values:{link:e=>(0,y.jsx)(n.rU,{href:A._.salesLink,target:"_blank",children:e})}})}),("EDIT_PLAN"===p.G.operation||"UPGRADE_PLAN"===p.G.operation)&&(0,y.jsx)(a.Z,{className:"mt-3",type:"info",message:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.editUpgradeAlert",defaultMessage:"Keep in mind that with the plan change, the remaining shipments and conversations from the previous plan will no longer be available."}),icon:(0,y.jsx)(j.Z,{}),showIcon:!0}),("BUY_EXPANSION"===p.G.operation||"REDUCE_EXPANSION"===p.G.operation)&&(0,y.jsx)(a.Z,{className:"mt-3",type:"info",message:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.buyReduceAlert",defaultMessage:"Keep in mind that with the expansion, any discounts that may have been applied to conversations previously will no longer be available."}),icon:(0,y.jsx)(j.Z,{}),showIcon:!0})]})})}));const O=(0,h.Pi)((function(){var e;const{subscriptionsStore:t}=(0,u.o)(),s=p.G.selectedPlan?p.G.selectedPlan.monthlyIncludedConversations:(null===(a=p.G.activeSubscription)||void 0===a?void 0:a.planIncludedConversations)||0;var a;const i=(null===(e=p.G.activeSubscription)||void 0===e?void 0:e.expansionsConversations)||0,l=p.G.hasYearlyPlan&&p.G.isEditingExpansion;return(0,y.jsx)("div",{className:"SubscriptionModalCard",style:{flex:1,display:"block"},children:(0,y.jsxs)("div",{className:"flex flex-column justify-between h-full",children:[(0,y.jsx)("div",{className:"flex flex-column",children:(0,y.jsxs)("div",{children:[(0,y.jsx)(n.Dx,{level:5,children:l?(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.annualOverview",defaultMessage:"Annual overview"}):(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.monthlyOverview",defaultMessage:"Monthly overview"})}),(0,y.jsxs)("div",{className:"flex align-center justify-between mb-1",children:[(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.freeConv",defaultMessage:"Free conv."}),":"]}),(0,y.jsx)(m.BK,{value:s})]}),p.G.isEditingExpansion&&i>0&&(0,y.jsxs)("div",{className:"flex align-center justify-between mb-1",children:[(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.prevExpansions",defaultMessage:"Prev. expansions"}),":"]}),(0,y.jsx)(m.BK,{value:i})]}),["BUY_PLAN","UPGRADE_PLAN","EDIT_PLAN"].includes(p.G.operation)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"flex align-center justify-between mb-1",children:[(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.expansion",defaultMessage:"Expansion"}),":"]}),(0,y.jsx)(m.BK,{value:p.G.selectedExpansionCount})]}),(0,y.jsxs)("div",{className:"flex align-center justify-between",children:[(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.totalConv",defaultMessage:"Total conv."}),":"]}),(0,y.jsx)(m.BK,{value:s+p.G.selectedExpansionCount})]})]})]})}),"BUY_EXPANSION"===p.G.operation&&(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"flex flex-column mb-3",children:[(0,y.jsx)(n.xv,{strong:!0,children:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.now",defaultMessage:"Now"})}),(0,y.jsx)(o.Z,{className:"w-full mt-0 mb-1"}),(0,y.jsxs)("div",{className:"flex align-center justify-between mb-1",children:[(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.additionalConv",defaultMessage:"Additional conv."}),":"]}),(0,y.jsx)(m.BK,{value:p.G.selectedExpansionCount})]}),(0,y.jsxs)("div",{className:"flex align-center justify-between mb-1",children:[(0,y.jsxs)(n.xv,{type:"secondary",strong:!0,children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.cost",defaultMessage:"Cost"}),":"]}),p.G.hasSelectedMaxExpansion?"-":(0,y.jsx)(d.x,{currency:"EUR",value:t.getExpansionsPrice(p.G.activeSubscription.recurringType,p.G.selectedExpansionCount)})]})]}),(0,y.jsxs)("div",{className:"flex flex-column",children:[(0,y.jsxs)(n.xv,{strong:!0,children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.atRenewal",defaultMessage:"At renewal"})," (",(0,y.jsx)(m.Ji,{value:p.G.activeSubscription.expiresAt,year:"numeric",month:"2-digit",day:"2-digit"}),")"]}),(0,y.jsx)(o.Z,{className:"w-full mt-0 mb-1"}),(0,y.jsxs)("div",{className:"flex align-center justify-between mb-1",children:[(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.totalConv",defaultMessage:"Total conv."}),":"]}),(0,y.jsx)(m.BK,{value:i+p.G.selectedExpansionCount+s})]}),(0,y.jsxs)("div",{className:"flex align-center justify-between mb-1",children:[(0,y.jsxs)(n.xv,{type:"secondary",strong:!0,children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.cost",defaultMessage:"Cost"}),":"]}),p.G.hasSelectedMaxExpansion?"-":(0,y.jsx)(d.x,{currency:"EUR",value:t.getExpansionsPrice(p.G.activeSubscription.recurringType,p.G.activeSubscription.expansionsConversations+p.G.selectedExpansionCount)})]})]})]}),"REDUCE_EXPANSION"===p.G.operation&&(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"flex flex-column mb-3",children:[(0,y.jsx)(n.xv,{strong:!0,children:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.now",defaultMessage:"Now"})}),(0,y.jsx)(o.Z,{className:"w-full mt-0 mb-1"}),(0,y.jsxs)("div",{className:"flex align-center justify-between mb-1",children:[(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.convLess",defaultMessage:"Conv. less"}),":"]}),(0,y.jsx)(m.BK,{value:i-p.G.selectedExpansionCount})]}),(0,y.jsxs)("div",{className:"flex align-center justify-between mb-1",children:[(0,y.jsxs)(n.xv,{type:"secondary",strong:!0,children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.cost",defaultMessage:"Cost"}),":"]}),(0,y.jsx)(d.x,{currency:"EUR",value:0})]})]}),(0,y.jsxs)("div",{className:"flex flex-column",children:[(0,y.jsxs)(n.xv,{strong:!0,children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.atRenewal",defaultMessage:"At renewal"})," (",(0,y.jsx)(m.Ji,{value:p.G.activeSubscription.expiresAt,year:"numeric",month:"2-digit",day:"2-digit"}),")"]}),(0,y.jsx)(o.Z,{className:"w-full mt-0 mb-1"}),(0,y.jsxs)("div",{className:"flex align-center justify-between mb-1",children:[(0,y.jsxs)(n.xv,{type:"secondary",children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.totalConv",defaultMessage:"Total conv."}),":"]}),(0,y.jsx)(m.BK,{value:s+i-(i-p.G.selectedExpansionCount)})]}),(0,y.jsxs)("div",{className:"flex align-center justify-between mb-1",children:[(0,y.jsx)(n.xv,{type:"secondary",strong:!0,children:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.cost",defaultMessage:"Cost"})}),(0,y.jsx)(d.x,{currency:"EUR",value:t.getExpansionsPrice(p.G.activeSubscription.recurringType,p.G.selectedExpansionCount)})]})]})]})]})})}));const P=function(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"SubscriptionEditModal__Content mt-3 align-baseline",children:[(0,y.jsx)(n.Dx,{level:3,children:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.tour.1.title",defaultMessage:"What is a conversation?"})}),(0,y.jsx)(a.Z,{className:"mt-2 p-2",type:"warning",icon:(0,y.jsx)(l.Z,{className:"BulbIcon"}),showIcon:!0,message:(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.tour.1.subtitle",defaultMessage:"A conversation is equivalent to an automatic template sent, this opens a 24-hour window in which you can chat freely with the client.<br>After the 24 hours, responding to a client costs a conversation and opens a new 24-hour window of free chat.",values:{br:()=>(0,y.jsx)("br",{})}})})}),(0,y.jsx)(n.Dx,{level:3,className:"mt-2 mb-2",children:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.tour.2.title",defaultMessage:"What can I do with conversations?"})})]}),(0,y.jsx)("div",{className:"SelectExpansionTour__Banner SelectExpansionTour__Banner--gray",children:(0,y.jsxs)("div",{className:"SelectExpansionTour__Banner__Content",children:[(0,y.jsxs)("div",{className:"SelectExpansionTour__Banner__Text",children:[(0,y.jsxs)("div",{className:"flex align-center",children:[(0,y.jsx)("span",{className:"SelectExpansionTour__Banner__Step",children:"1"}),(0,y.jsx)(n.Dx,{level:5,style:{marginBottom:0},children:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.tour.2.subtitle1",defaultMessage:"Automatically send your messages"})})]}),(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.tour.2.subtitle2",defaultMessage:"Your WhatsApp messages will be delivered to customers automatically, you choose how many messages to send per shipment."})})]}),(0,y.jsx)("div",{className:"SelectExpansionTour__Banner__Image",children:(0,y.jsx)(n.Ee,{src:"https://isendu-cdn-static-files.s3.eu-central-1.amazonaws.com/images/illustrazione-messaggi.svg",alt:"illustrazione-messaggi",height:200})})]})}),(0,y.jsx)("div",{className:"SelectExpansionTour__Banner SelectExpansionTour__Banner--white",children:(0,y.jsxs)("div",{className:"SelectExpansionTour__Banner__Content",children:[(0,y.jsx)("div",{className:"SelectExpansionTour__Banner__Image",children:(0,y.jsx)(n.Ee,{src:"https://isendu-cdn-static-files.s3.eu-central-1.amazonaws.com/images/illlustrazione-conversazioni.svg",alt:"illustrazione-conversazioni",height:200})}),(0,y.jsxs)("div",{className:"SelectExpansionTour__Banner__Text",children:[(0,y.jsxs)("div",{className:"flex align-center",children:[(0,y.jsx)("span",{className:"SelectExpansionTour__Banner__Step",children:"2"}),(0,y.jsx)(n.Dx,{level:5,style:{marginBottom:0},children:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.tour.2.subtitle3",defaultMessage:"Chat with your customers"})})]}),(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"subscriptionModal.expansions.tour.2.subtitle4",defaultMessage:"Thanks to isendu's internal chat you can monitor the progress of your automated messages and respond live to all customers who write to you. Order support has never been easier and fast."})})]})]})})]})};const N=(0,S.Pi)((function(){const{title:e,subtitle:t}="REDUCE_EXPANSION"===p.G.operation?{title:(0,y.jsx)(r.Z,{id:"subscriptionModal.reduceExpansion.title",defaultMessage:"WhatsApp plan reduction"}),subtitle:(0,y.jsx)(r.Z,{id:"subscriptionModal.reduceExpansion.subtitle",defaultMessage:"You can reduce the number of conversations to shape the plan to suit your needs"})}:{title:(0,y.jsx)(r.Z,{id:"subscriptionModal.addExpansion.title",defaultMessage:"Expand your WhatsApp limit"}),subtitle:(0,y.jsx)(r.Z,{id:"subscriptionModal.addExpansion.subtitle",defaultMessage:"In addition to the conversations included in your plan you can expand the number with the slider below"})};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"SubscriptionEditModal__StepTitle",children:[(0,y.jsx)(n.Dx,{level:5,children:e}),(0,y.jsx)(n.xv,{type:"secondary",children:t})]}),(0,y.jsx)("div",{className:"SubscriptionEditModal__Content",children:(0,y.jsxs)("div",{className:"flex",style:{gap:24},children:[(0,y.jsx)(T,{}),(0,y.jsx)(O,{})]})}),"BUY_PLAN"===p.G.operation&&(0,y.jsx)(P,{})]})}));var _=s(11382),Z=s(15873),I=s(73218),D=s(94184),E=s.n(D);const k=(0,h.Pi)((function(e){const{description:t,children:s,rowKey:r}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"PlansTable__FeatureDescription",children:t}),p.G.allPlans.map((e=>{var t,a;return(0,y.jsx)("div",{className:E()("PlansTable__Table__Cell",{"plan-active":p.G.selectedPlan?p.G.selectedPlan.planName===e.planName:(null===(t=p.G.activeSubscription)||void 0===t?void 0:t.planName)===e.planName,"disabled-cell":"UPGRADE_PLAN"===p.G.operation&&!!p.G.activeSubscription&&e.planLevel<=(null===(a=p.G.activeSubscription)||void 0===a?void 0:a.planLevel)}),children:s(e)},e.monthlyPlanId+r)}))]})}));const L=(0,h.Pi)((function(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"PlansTable__Table__Header",children:" "}),p.G.allPlans.map((e=>{var t,s,r;return(0,y.jsxs)("div",{className:E()("PlansTable__Table__Header",{"plan-active":p.G.selectedPlan?p.G.selectedPlan.planName===e.planName:(null===(t=p.G.activeSubscription)||void 0===t?void 0:t.planName)===e.planName,"disabled-cell":"UPGRADE_PLAN"===p.G.operation&&!!p.G.activeSubscription&&e.planLevel<=p.G.activeSubscription.planLevel}),children:[(0,y.jsx)(n.Dx,{level:5,children:e.planName}),(0,y.jsx)(i.Z,{className:E()("PlansTable__Table__SelectionButton",{"PlansTable__Table__SelectionButton--selected":[null===(s=p.G.selectedPlan)||void 0===s?void 0:s.planName,null===(r=p.G.activeSubscription)||void 0===r?void 0:r.planName].includes(e.planName)}),onClick:()=>{var t;e.planName!==(null===(t=p.G.activeSubscription)||void 0===t?void 0:t.planName)&&p.G.setSelectedPlan(e)},disabled:"UPGRADE_PLAN"===p.G.operation&&!!p.G.activeSubscription&&e.planLevel<=p.G.activeSubscription.planLevel,children:R(p.G.activeSubscription,p.G.selectedPlan,e)})]},e.monthlyPlanId)}))]})}));function R(e,t,s){return(null==t?void 0:t.planName)===s.planName?(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.selected",defaultMessage:"Selected"}):(null==e?void 0:e.planName)===(null==s?void 0:s.planName)?null!=e&&e.isFuture?(0,y.jsx)(r.Z,{id:"subscriptionStatus.text.inActivation",defaultMessage:"In activation"}):(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.active",defaultMessage:"Active"}):(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.select",defaultMessage:"Select"})}const F=(0,h.Pi)((function(){return p.G.allPlans.length?(0,y.jsx)("div",{className:"SubscriptionModalCard",children:(0,y.jsxs)("div",{className:"PlansTable__Table",children:[(0,y.jsx)(L,{}),(0,y.jsx)(k,{description:(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.carrierShipLimitLabel",defaultMessage:"Number of {type} shipments with own carrier contracts",values:{type:(0,y.jsx)(r.Z,{id:"settings.subscriptions.monthly",defaultMessage:"monthly"})}}),rowKey:"carrierShipLimit",children:e=>"unlimited"===e.monthlyShipments||"unlimited"===e.yearlyShipments?(0,y.jsx)(r.Z,{id:"settings.subscriptions.unlimited",defaultMessage:"Unlimited"}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(n.xv,{children:(0,y.jsx)(m.BK,{value:e.monthlyShipments})}),(0,y.jsxs)("small",{children:["(",(0,y.jsx)(m.BK,{value:e.yearlyShipments})," ",(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.perYear",defaultMessage:"yearly"}),")"]})]})}),(0,y.jsx)(k,{description:(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.includedConversations",defaultMessage:"Number of monthly WhatsApp conversations included"}),rowKey:"whatsapp",children:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(n.xv,{children:(0,y.jsx)(m.BK,{value:e.monthlyIncludedConversations})}),(0,y.jsxs)("small",{children:["(",(0,y.jsx)(m.BK,{value:e.yearlyIncludedConversations})," ",(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.perYear",defaultMessage:"yearly"}),")"]})]})}),(0,y.jsx)(k,{description:(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.transactionEmailsLabel",defaultMessage:"Transactional emails"}),rowKey:"transactionalEmail",children:e=>e.canUseTransactionalMail?(0,y.jsx)(Z.Z,{className:"GreenIcon"}):(0,y.jsx)(I.Z,{className:"RedIcon"})}),(0,y.jsx)(k,{description:(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.automationRulesLabel",defaultMessage:"Automation rules"}),rowKey:"automationRules",children:e=>e.canUseAutomationRules?(0,y.jsx)(Z.Z,{className:"GreenIcon"}):(0,y.jsx)(I.Z,{className:"RedIcon"})}),(0,y.jsx)(k,{description:(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.brtRates",defaultMessage:"Access to BRT rates (Italy only) at €4.70"}),rowKey:"brtRate",children:()=>(0,y.jsx)(Z.Z,{className:"GreenIcon"})}),(0,y.jsx)(k,{description:(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.upsRates",defaultMessage:"Access to UPS rates at €6.30"}),rowKey:"upsRate",children:()=>(0,y.jsx)(Z.Z,{className:"GreenIcon"})}),(0,y.jsx)(k,{description:(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.zebra",defaultMessage:"<div>Zebra printer valued at €550</div> <small>(with 3 years of insurance)</small>",values:{div:e=>(0,y.jsx)("div",{children:e}),small:e=>(0,y.jsx)("small",{children:e})}})}),rowKey:"zebraPrinter",children:()=>(0,y.jsx)(Z.Z,{className:"GreenIcon"})}),(0,y.jsx)(k,{description:(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.customerSuccess",defaultMessage:"<div>Dedicated Customer Success</div> <small>(marketing consulting)</small>",values:{div:e=>(0,y.jsx)("div",{children:e}),small:e=>(0,y.jsx)("small",{children:e})}})}),rowKey:"customerSuccess",children:()=>(0,y.jsx)(Z.Z,{className:"GreenIcon"})}),(0,y.jsx)(k,{description:(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.eCommerceChecklist",defaultMessage:"<div>E-commerce checklist</div> <small>(300 points to analyze and improve your e-commerce)</small>",values:{div:e=>(0,y.jsx)("div",{children:e}),small:e=>(0,y.jsx)("small",{children:e})}})}),rowKey:"eCommerceChecklist",children:()=>(0,y.jsx)(Z.Z,{className:"GreenIcon"})}),(0,y.jsx)(k,{description:(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.webinair",defaultMessage:"Monthly training webinar"}),rowKey:"webinair",children:()=>(0,y.jsx)(Z.Z,{className:"GreenIcon"})}),(0,y.jsx)(k,{description:(0,y.jsx)(r.Z,{id:"settings.subscriptions.modal.plans.supportViaWhatsapp",defaultMessage:"Dedicated support via WhatsApp"}),rowKey:"supportViaWhatsapp",children:()=>(0,y.jsx)(Z.Z,{className:"GreenIcon"})})]})}):null}));const U=(0,h.Pi)((function(){const{subscriptionsStore:e}=(0,u.o)();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"SubscriptionEditModal__StepTitle",children:function(){switch(p.G.operation){case"UPGRADE_PLAN":return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(n.Dx,{level:5,children:(0,y.jsx)(r.Z,{id:"subscriptionModal.plans.upgrade.title",defaultMessage:"Add more features to your plan"})}),(0,y.jsx)(n.xv,{type:"secondary",children:(0,y.jsx)(r.Z,{id:"subscriptionModal.plans.upgrade.subtitle",defaultMessage:"Choose a plan tailored to the growth of your business"})})]});case"BUY_PLAN":return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(n.Dx,{level:5,children:(0,y.jsx)(r.Z,{id:"subscriptionModal.plans.buy.title",defaultMessage:"Activate a subscription and join isendu"})}),(0,y.jsx)(n.xv,{type:"secondary",children:(0,y.jsx)(r.Z,{id:"subscriptionModal.plans.buy.subtitle",defaultMessage:"Choose the right shipping package for your e-commerce business"})})]});case"EDIT_PLAN":return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(n.Dx,{level:5,children:(0,y.jsx)(r.Z,{id:"subscriptionModal.plans.edit.title",defaultMessage:"Change your subscription"})}),(0,y.jsx)(n.xv,{type:"secondary",children:(0,y.jsx)(r.Z,{id:"subscriptionModal.plans.edit.subtitle",defaultMessage:"Choose a plan tailored to your business"})})]})}}()}),(0,y.jsx)("div",{className:"SubscriptionEditModal__Content",children:e.isLoading?(0,y.jsx)(G,{}):(0,y.jsx)(F,{})})]})}));function G(){return(0,y.jsx)("div",{className:"SubscriptionEditModal__Loader",children:(0,y.jsx)(_.Z,{size:"large"})})}const B=(0,h.Pi)((function(){var e,t,s;const{subscriptionsStore:a,companiesStore:i}=(0,u.o)(),o="IT"===(null===(e=i.companyInfo)||void 0===e||null===(t=e.billingAddress)||void 0===t?void 0:t.countryIsoCode),{planPrice:n,savings:l,expansionPrice:c,expansionCount:h}=function(e,t){var s,r;return e.isMonthOperation?{planPrice:(null===(s=e.selectedPlan)||void 0===s?void 0:s.monthlyPrice)||0,expansionCount:e.selectedExpansionCount,expansionPrice:t.getExpansionsPrice("monthly",e.selectedExpansionCount),savings:0}:{planPrice:12*((null===(r=e.selectedPlan)||void 0===r?void 0:r.monthlyPrice)||0),expansionCount:e.selectedExpansionCount,expansionPrice:t.getExpansionsPrice("yearly",e.selectedExpansionCount),savings:0}}(p.G,a),g=n-l+c,f=o?.22*g:0,b=g+f;return(0,y.jsx)("div",{className:"SubscriptionModalCard",children:(0,y.jsxs)("div",{className:"flex flex-column w-full",children:["REDUCE_EXPANSION"===p.G.operation&&(0,y.jsx)("div",{className:"mb-1",children:(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.changesAtRenewal",defaultMessage:"Changes and payment will be made <strong>upon renewal</strong> of your plan <strong>on {renewalDate}</strong>",values:{renewalDate:(0,y.jsx)(m.Ji,{value:p.G.activeSubscription.expiresAt,day:"2-digit",month:"2-digit",year:"numeric"}),strong:e=>(0,y.jsx)("strong",{children:e})}})}),(0,y.jsxs)("div",{className:"PurchaseSummary__Row PurchaseSummary__Row__Header",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.description",defaultMessage:"Description"})}),(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.amount",defaultMessage:"Amount"})})]}),n>0&&(0,y.jsxs)("div",{className:"PurchaseSummary__Row",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.plan",defaultMessage:"Plan"})," ",null===(s=p.G.selectedPlan)||void 0===s?void 0:s.planName," ",p.G.isMonthOperation?(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.monthly",defaultMessage:"monthly"}):(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.annual",defaultMessage:"annual"})]}),(0,y.jsx)("div",{children:(0,y.jsx)(d.x,{currency:"EUR",value:n})})]}),c>0&&(0,y.jsxs)("div",{className:"PurchaseSummary__Row",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.expansionDescription",defaultMessage:"WhatsApp expansion {value} conversations {recurringType}",values:{value:(0,y.jsx)(m.BK,{value:h}),recurringType:p.G.isMonthOperation?(0,y.jsx)(r.Z,{id:"settings.subscriptions.monthly",defaultMessage:"monthly"}):(0,y.jsx)(r.Z,{id:"settings.subscriptions.annual",defaultMessage:"annual"})}})}),(0,y.jsx)("div",{children:(0,y.jsx)(d.x,{currency:"EUR",value:c})})]}),(0,y.jsxs)("div",{className:"PurchaseSummary__Row",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.subtotal",defaultMessage:"Subtotal"})}),(0,y.jsx)("div",{children:(0,y.jsx)(d.x,{currency:"EUR",value:g})})]}),f>0&&(0,y.jsxs)("div",{className:"PurchaseSummary__Row",children:[(0,y.jsx)("div",{children:"Iva (22%)"}),(0,y.jsx)("div",{children:(0,y.jsx)(d.x,{currency:"EUR",value:f})})]}),(0,y.jsxs)("div",{className:"PurchaseSummary__Row PurchaseSummary__Row__Total",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.total",defaultMessage:"Total"})}),(0,y.jsx)("div",{children:(0,y.jsx)(d.x,{currency:"EUR",value:b})})]})]})})}));const $=(0,S.Pi)((function(){if("BUY_PLAN"!==p.G.operation&&"UPGRADE_PLAN"!==p.G.operation)return null;const e="BUY_PLAN"===p.G.operation?(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.alert.buy",defaultMessage:"View the rules on sending transactional notifications to end customers from this link: <gdprLink>isendu GDPR policy</gdprLink>",values:{gdprLink:e=>(0,y.jsx)(n.rU,{href:"https://support.isendu.com/come-autorizzare-linvio-di-notifiche-transazionali-da-parte-di-isendu",children:e})}})})}):(0,y.jsx)("div",{children:(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.alert.other",defaultMessage:"By choosing to upgrade at renewal you will have the option to change your choice up to renewal day. With immediate upgrade the previous plan (shipments and conversations) will be instantly deleted and replaced with the new one you selected."})});return(0,y.jsx)(a.Z,{className:"mt-3 pb-2",type:"info",showIcon:!0,icon:(0,y.jsx)(j.Z,{style:{margin:"4px 16px 0 0",fontSize:22,alignSelf:"baseline"}}),message:e})}));function z(e){switch(e){case"BUY_EXPANSION":case"REDUCE_EXPANSION":return(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.subtitle1",defaultMessage:"From this step you can review the data and purchase safely"});default:return(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.subtitle2",defaultMessage:"From this step you can choose the billing period and purchase safely"})}}const W=(0,h.Pi)((function(){const{subscriptionsStore:e}=(0,u.o)();return e.isLoading?(0,y.jsx)(H,{}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"SubscriptionEditModal__StepTitle",children:[(0,y.jsx)(n.Dx,{level:5,children:(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.title",defaultMessage:"Overview"})}),(0,y.jsx)(n.xv,{type:"secondary",children:z(p.G.operation)})]}),(0,y.jsxs)("div",{className:"SubscriptionEditModal__Content",children:[(0,y.jsx)(n.Dx,{level:3,className:"mt-3",children:(0,y.jsx)(r.Z,{id:"subscriptionModal.overview.report",defaultMessage:"Report"})}),(0,y.jsx)(B,{}),(0,y.jsx)($,{})]})]})}));function H(){return(0,y.jsx)("div",{className:"SubscriptionEditModal__Loader",children:(0,y.jsx)(_.Z,{size:"large"})})}let V=function(e){return e.SelectPlan="select-plan",e.SelectExpansion="select-expansion",e.Summary="summary",e.SetPaymentMethod="set-payment-method",e.Confirmation="confirmation",e}({});const q={key:V.SelectPlan,title:(0,y.jsx)(r.Z,{id:"settings.subscriptionModal.selectPlan.title",defaultMessage:"Select a plan"}),content:(0,y.jsx)(U,{})},Y={key:V.SelectExpansion,title:(0,y.jsx)(r.Z,{id:"settings.subscriptionModal.buyExpansion.title",defaultMessage:"Expand WhatsApp"}),content:(0,y.jsx)(N,{})},K={key:V.SelectExpansion,title:(0,y.jsx)(r.Z,{id:"settings.subscriptionModal.reduceExpansion.title",defaultMessage:"Reduce WhatsApp"}),content:(0,y.jsx)(N,{})},X={key:V.Summary,title:(0,y.jsx)(r.Z,{id:"settings.subscriptionModal.summary.title",defaultMessage:"Summary"}),content:(0,y.jsx)(W,{})},Q={key:V.Confirmation,title:null,content:(0,y.jsx)(x,{})},J=[q],ee=[Y,X,Q],te=[K,X,Q],se=2500,re=3e4},78219:(e,t,s)=>{"use strict";s.d(t,{Z:()=>j});var r=s(273),a=s(53886),i=s(47635),o=s(75899),n=s(96893),l=s(44012),d=s(85893);function c(e){return e.key!==n.c3.Confirmation}function p(e){switch(e){default:case"BUY_PLAN":return(0,d.jsx)(l.Z,{id:"subscriptionModal.header.buyPlan",defaultMessage:"Buy a plan"});case"UPGRADE_PLAN":return(0,d.jsx)(l.Z,{id:"subscriptionModal.header.upgradePlan",defaultMessage:"Upgrade plan"});case"EDIT_PLAN":return(0,d.jsx)(l.Z,{id:"subscriptionModal.header.editPlan",defaultMessage:"Edit plan"});case"BUY_EXPANSION":return(0,d.jsx)(l.Z,{id:"subscriptionModal.header.whatsappExpansion",defaultMessage:"Expand WhatsApp plan"});case"REDUCE_EXPANSION":return(0,d.jsx)(l.Z,{id:"subscriptionModal.header.reduceWhatsappExpansion",defaultMessage:"Reduce WhatsApp plan"})}}const u=(0,a.Pi)((function(){const e=["BUY_PLAN","EDIT_PLAN","UPGRADE_PLAN"].includes(i.G.operation),t=i.G.activeStep.key!==n.c3.Confirmation,s=!e&&t;return(0,d.jsxs)("div",{className:"flex align-center",children:[(0,d.jsx)("div",{style:{flex:1},children:p(i.G.operation)}),(0,d.jsx)("div",{style:{flex:1},children:s&&(0,d.jsx)(o.default,{current:i.G.activeStepIndex,className:"SubscriptionEditModal__Steps",progressDot:!0,children:i.G.steps.filter(c).map((e=>(0,d.jsx)(o.default.Step,{title:e.title},e.key)))})}),(0,d.jsx)("div",{style:{flex:1},children:" "})]})}));var h=s(71577),m=s(29323),g=s(50003);function y(e){switch(e){case"es":return"https://meetings.hubspot.com/isendu/customer-success-meeting-spain";case"it":default:return"https://meetings.hubspot.com/federico-desantis/csm-for-clients";case"de":return"https://meetings.hubspot.com/imorelli"}}const f=(0,m.Pi)((function(){switch(i.G.activeStep.key){case n.c3.SelectPlan:return(0,d.jsx)(b,{});case n.c3.SelectExpansion:return(0,d.jsx)(v,{});case n.c3.Summary:return(0,d.jsx)(x,{});default:return null}})),b=(0,m.Pi)((function(){var e;const{usersStore:t}=(0,g.o)(),s=(null===(e=t.userInfo)||void 0===e?void 0:e.language)||"en";return(0,d.jsxs)("div",{className:"SubscriptionEditModal__Footer justify-end",children:[(0,d.jsx)(h.Z,{className:"SubscriptionEditModal__Footer__Button mr-1",onClick:()=>i.G.closeModal(),children:(0,d.jsx)(l.Z,{id:"generic.cancel",defaultMessage:"Cancel"})}),(0,d.jsx)(h.Z,{type:"primary",className:"SubscriptionEditModal__Footer__Button",onClick:()=>window.open(y(s),"_blank"),disabled:!i.G.selectedPlan,children:(0,d.jsx)(l.Z,{id:"generic.contactUs",defaultMessage:"Contact us"})})]})})),v=(0,m.Pi)((function(){var e;const{usersStore:t}=(0,g.o)(),s=(null===(e=t.userInfo)||void 0===e?void 0:e.language)||"en";return["BUY_EXPANSION","REDUCE_EXPANSION"].includes(i.G.operation)?(0,d.jsxs)("div",{className:"SubscriptionEditModal__Footer justify-end",children:[(0,d.jsx)(h.Z,{className:"SubscriptionEditModal__Footer__Button mr-1",onClick:()=>i.G.closeModal(),children:(0,d.jsx)(l.Z,{id:"generic.cancel",defaultMessage:"Cancel"})}),i.G.hasSelectedMaxExpansion?(0,d.jsx)(h.Z,{type:"primary",className:"SubscriptionEditModal__Footer__Button",onClick:()=>window.open(y(s),"_blank"),children:(0,d.jsx)(l.Z,{id:"generic.contactUs",defaultMessage:"Contact us"})}):(0,d.jsx)(h.Z,{type:"primary",className:"SubscriptionEditModal__Footer__Button",onClick:()=>i.G.nextStep(),disabled:!i.G.selectedExpansionCount||i.G.hasNotReducedExpansion,children:(0,d.jsx)(l.Z,{id:"subscriptionModal.goToSummary",defaultMessage:"Go to summary"})})]}):(0,d.jsxs)("div",{className:"SubscriptionEditModal__Footer justify-between",children:[(0,d.jsx)(h.Z,{type:"link",className:"SubscriptionEditModal__Footer__Button",onClick:()=>{i.G.setSelectedExpansionCount(0),i.G.nextStep()},children:(0,d.jsx)(l.Z,{id:"settings.subscriptions.modal.skipStep",defaultMessage:"Skip step"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)(h.Z,{className:"SubscriptionEditModal__Footer__Button mr-1",onClick:()=>i.G.previousStep(),children:(0,d.jsx)(l.Z,{id:"generic.back",defaultMessage:"Back"})}),i.G.hasSelectedMaxExpansion?(0,d.jsx)(h.Z,{type:"primary",className:"SubscriptionEditModal__Footer__Button",onClick:()=>window.open(y(s),"_blank"),children:(0,d.jsx)(l.Z,{id:"generic.contactUs",defaultMessage:"Contact us"})}):(0,d.jsx)(h.Z,{type:"primary",className:"SubscriptionEditModal__Footer__Button",onClick:()=>i.G.nextStep(),disabled:!i.G.selectedExpansionCount,children:(0,d.jsx)(l.Z,{id:"subscriptionModal.addExpansion",defaultMessage:"Add expansion"})})]})]})})),x=(0,m.Pi)((function(){return(0,d.jsxs)("div",{className:"SubscriptionEditModal__Footer justify-end",children:[(0,d.jsx)(h.Z,{className:"SubscriptionEditModal__Footer__Button mr-1",onClick:()=>i.G.previousStep(),children:(0,d.jsx)(l.Z,{id:"generic.back",defaultMessage:"Back"})}),(0,d.jsx)(h.Z,{type:"primary",className:"SubscriptionEditModal__Footer__Button",onClick:()=>{i.G.nextStep(),i.G.shouldSetPaymentData||i.G.finalizeOperation()},children:S(i.G.operation)})]})}));function S(e){return"REDUCE_EXPANSION"===e?(0,d.jsx)(l.Z,{id:"subscriptionModal.finishEdit",defaultMessage:"Finish edit"}):(0,d.jsx)(l.Z,{id:"subscriptionModal.finishPurchase",defaultMessage:"Finish you purchase"})}const j=(0,a.Pi)((function(){const e=i.G.activeStep.key===n.c3.Confirmation;return(0,d.jsx)(r.Z,{className:"FullPageDrawer",title:(0,d.jsx)(u,{}),footer:!e&&(0,d.jsx)(f,{}),placement:"bottom",onClose:()=>i.G.closeModal(),open:i.G.isSubscriptionModalOpen,height:"100%",destroyOnClose:!0,children:i.G.activeStep.content})}))},47635:(e,t,s)=>{"use strict";s.d(t,{G:()=>w});var r,a,i,o,n,l,d,c,p,u,h,m,g,y,f=s(43269),b=s(53229),v=s(50003),x=s(68949),S=s(96893);const j=S.ms[0];const w=new(r=class{get isMonthOperation(){return"monthly"===this.selectedBillingCycle}get hasYearlyPlan(){return!!this.activeSubscription&&"yearly"===this.activeSubscription.recurringType}get isEditingExpansion(){return"BUY_EXPANSION"===this.operation||"REDUCE_EXPANSION"===this.operation}get hasNotReducedExpansion(){return"REDUCE_EXPANSION"===this.operation&&this.selectedExpansionCount>=this.activeSubscription.expansionsConversations}get hasSelectedMaxExpansion(){const e=this.isMonthOperation?S.Sy:S.Io;return this.selectedExpansionCount>=e}openModal(e){this.isSubscriptionModalOpen=!0,this.operation=e,this.initModal()}async initModal(){switch(this.steps=this.getOperationSteps(),this.activeStep=this.steps[0],this.operation){case"BUY_PLAN":case"EDIT_PLAN":case"UPGRADE_PLAN":await this.rootStore.subscriptionsStore.getAllPlans();break;case"BUY_EXPANSION":this.selectedBillingCycle=this.activeSubscription.recurringType;break;case"REDUCE_EXPANSION":this.selectedBillingCycle=this.activeSubscription.recurringType,this.selectedExpansionCount=this.activeSubscription.expansionsConversations}}getOperationSteps(){switch(this.operation){case"BUY_PLAN":case"EDIT_PLAN":case"UPGRADE_PLAN":return S.Id;case"BUY_EXPANSION":return S.ms;case"REDUCE_EXPANSION":return S.f_;default:return[]}}nextStep(){this.activeStepIndex++,this.activeStep=this.steps[this.activeStepIndex]}previousStep(){this.activeStepIndex--,this.activeStep=this.steps[this.activeStepIndex]}closeModal(){this.isSubscriptionModalOpen=!1,this.resetModal()}resetModal(){this.activeStep=j,this.activeStepIndex=0,this.selectedExpansionCount=0,this.selectedPlan=null,this.selectedBillingCycle="yearly",this.paymentStatus=null}setSelectedPlan(e){this.selectedPlan=e}setSelectedExpansionCount(e){this.selectedExpansionCount=e}finalizeOperation(){this.paymentStatus="pending";try{switch(this.operation){case"BUY_EXPANSION":const e=this.activeSubscription.expansionsConversations+this.selectedExpansionCount;return this.rootStore.subscriptionsStore.addWhatsappExpansion(e);case"REDUCE_EXPANSION":return this.rootStore.subscriptionsStore.decreaseWhatsappExpansion(this.selectedExpansionCount)}}catch(e){this.paymentStatus="error"}}constructor(e){(0,f.Z)(this,"isSubscriptionModalOpen",a,this),(0,f.Z)(this,"operation",i,this),(0,f.Z)(this,"shouldSetPaymentData",o,this),(0,f.Z)(this,"allPlans",n,this),(0,f.Z)(this,"activeSubscription",l,this),(0,f.Z)(this,"steps",d,this),(0,f.Z)(this,"activeStepIndex",c,this),(0,f.Z)(this,"activeStep",p,this),(0,f.Z)(this,"selectedPlan",u,this),(0,f.Z)(this,"selectedExpansionCount",h,this),(0,f.Z)(this,"selectedBillingCycle",m,this),(0,f.Z)(this,"paymentStatus",g,this),(0,f.Z)(this,"paymentError",y,this),this.rootStore=e,(0,x.rC)(this),(0,x.U5)((()=>e.subscriptionsStore.activeSubscription),(e=>{(0,x.z)((()=>{this.activeSubscription=e}))})),(0,x.U5)((()=>e.websocketStore.messages.length),(()=>{(0,x.z)((()=>{if(!this.isSubscriptionModalOpen)return;const t=e.websocketStore.messages.pop();t&&"subscriptions_refresh"===t.type&&(this.paymentStatus=t.message.Result?"success":"error","error"===this.paymentStatus&&(this.paymentError=t.message.ErrorMessage))}))})),(0,x.U5)((()=>e.subscriptionsStore.allAvailablePlans),(e=>{(0,x.z)((()=>this.allPlans=e))})),(0,x.U5)((()=>e.paymentMethodsStore.paymentMethodsArray.length),(e=>{this.shouldSetPaymentData=0===e}))}},a=(0,b.Z)(r.prototype,"isSubscriptionModalOpen",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=(0,b.Z)(r.prototype,"operation",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"EDIT_PLAN"}}),o=(0,b.Z)(r.prototype,"shouldSetPaymentData",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n=(0,b.Z)(r.prototype,"allPlans",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,b.Z)(r.prototype,"activeSubscription",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=(0,b.Z)(r.prototype,"steps",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=(0,b.Z)(r.prototype,"activeStepIndex",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=(0,b.Z)(r.prototype,"activeStep",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j}}),u=(0,b.Z)(r.prototype,"selectedPlan",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=(0,b.Z)(r.prototype,"selectedExpansionCount",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=(0,b.Z)(r.prototype,"selectedBillingCycle",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"yearly"}}),g=(0,b.Z)(r.prototype,"paymentStatus",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=(0,b.Z)(r.prototype,"paymentError",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),(0,b.Z)(r.prototype,"isMonthOperation",[x.Fl],Object.getOwnPropertyDescriptor(r.prototype,"isMonthOperation"),r.prototype),(0,b.Z)(r.prototype,"hasYearlyPlan",[x.Fl],Object.getOwnPropertyDescriptor(r.prototype,"hasYearlyPlan"),r.prototype),(0,b.Z)(r.prototype,"isEditingExpansion",[x.Fl],Object.getOwnPropertyDescriptor(r.prototype,"isEditingExpansion"),r.prototype),(0,b.Z)(r.prototype,"hasNotReducedExpansion",[x.Fl],Object.getOwnPropertyDescriptor(r.prototype,"hasNotReducedExpansion"),r.prototype),(0,b.Z)(r.prototype,"hasSelectedMaxExpansion",[x.Fl],Object.getOwnPropertyDescriptor(r.prototype,"hasSelectedMaxExpansion"),r.prototype),(0,b.Z)(r.prototype,"openModal",[x.aD],Object.getOwnPropertyDescriptor(r.prototype,"openModal"),r.prototype),(0,b.Z)(r.prototype,"initModal",[x.aD],Object.getOwnPropertyDescriptor(r.prototype,"initModal"),r.prototype),(0,b.Z)(r.prototype,"nextStep",[x.aD],Object.getOwnPropertyDescriptor(r.prototype,"nextStep"),r.prototype),(0,b.Z)(r.prototype,"previousStep",[x.aD],Object.getOwnPropertyDescriptor(r.prototype,"previousStep"),r.prototype),(0,b.Z)(r.prototype,"closeModal",[x.aD],Object.getOwnPropertyDescriptor(r.prototype,"closeModal"),r.prototype),(0,b.Z)(r.prototype,"resetModal",[x.aD],Object.getOwnPropertyDescriptor(r.prototype,"resetModal"),r.prototype),(0,b.Z)(r.prototype,"setSelectedPlan",[x.aD],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedPlan"),r.prototype),(0,b.Z)(r.prototype,"setSelectedExpansionCount",[x.aD],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedExpansionCount"),r.prototype),(0,b.Z)(r.prototype,"finalizeOperation",[x.aD],Object.getOwnPropertyDescriptor(r.prototype,"finalizeOperation"),r.prototype),r)(v.rootStore)},48170:(e,t,s)=>{"use strict";s.d(t,{e:()=>o});var r=s(39563),a=s(50003),i=s(85893);const o=e=>{let{onSelect:t,value:s,onChange:o,context:n,disabled:l=!1}=e;const{addressesStore:d}=(0,a.o)();return(0,i.jsx)(r.yV,{value:s,onChange:o,onSelect:t,retrieveData:async e=>(await d.addressFormAutocomplete([e,...n||[]].join(" "))).map((e=>({label:[e.street,e.city,e.state,e.zipCode,e.countryIsoCode].filter((e=>e)).join(", "),value:JSON.stringify(e)}))),debounceDelay:500,disabled:l})}},50573:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(29323),a=s(55222),i=s(84403),o=s(50049),n=s(86896),l=s(85893);const d=(0,o.vU)({intervalYear:{id:"current.plan.interval.year",defaultMessage:"year"},intervalMonth:{id:"current.plan.interval.month",defaultMessage:"month"}}),c=(0,r.Pi)((e=>{var t;let{currentPlan:s}=e;const r=(0,n.Z)();let o=0,c=i._.currencyEUR;s.plan&&("per_unit"===s.plan.billing_scheme&&s.plan.amount&&(o=s.plan.amount,s.plan.currency&&(c=s.plan.currency.toUpperCase())),"flat_fee"===s.plan.billing_scheme?s.plan.amount&&(o=s.plan.amount,s.plan.currency&&(c=s.plan.currency.toUpperCase())):"flat_fee"===s.plan.billing_scheme&&s.plan.amount&&(o=s.plan.amount,s.plan.currency&&(c=s.plan.currency.toUpperCase()))),o>0&&(o=Number((o/100).toFixed(2)));let p=r.formatMessage(d.intervalYear);if(null!=s&&s.plan&&null!=s&&null!==(t=s.plan)&&void 0!==t&&t.interval)switch(s.plan.interval){case"month":p=r.formatMessage(d.intervalMonth);break;case"year":p=r.formatMessage(d.intervalYear);break;default:p=s.plan.interval}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.x,{value:o,currency:c}),`/${p}`]})}))},60843:(e,t,s)=>{"use strict";s.d(t,{Y:()=>a,_:()=>r});const r={AMAZON:"ISU-IC19",BRT:"ISU-IC4",CORREOS:"ISU-IC15",CORREOS_EXPRESS:"ISU-IC17",DHL_CONNECT:"ISU-IC14",DHL_EXPRESS:"ISU-IC3",DHL_PAKET:"ISU-IC21",DPD:"ISU-IC24",FAN_COURIER:"ISU-IC5",FEDEX:"ISU-IC9",GLS_ITALY:"ISU-IC2",GLS_SPAIN:"ISU-IC10",GLS_GERMANY:"ISU-IC26",MRW:"ISU-IC13",NACEX:"ISU-IC20",NEXIVE:"ISU-IC12",POSTE_DELIVERY_BUSINESS:"ISU-IC11",POSTE_ITALIANE:"ISU-IC7",SDA:"ISU-IC8",SEUR:"ISU-IC16",TIPSA:"ISU-IC18",TNT_ITALY:"ISU-IC6",UPS:"ISU-IC1",LICCARDI_TRASPORTI:"ISU-IC22",SPRING_GDS:"ISU-IC25",UPS_ONBOARDING:"ISU-IC23",DPD_UK:"ISU-IC27",AMAZON_MERCHANT_FULFILLMENT:"ISU-IC28",CTT:"ISU-IC29",DHL_PARCEL_ES:"ISU-IC31",ENVIALIA:"ISU-IC30"},a={[r.POSTE_ITALIANE]:"https://resources.isendu.com/hubfs/ISENDU_Listino%20Prezzi%20Poste%20Italiane%20(1).pdf",[r.FEDEX]:"https://resources.isendu.com/hubfs/ISENDU_Listino%20Prezzi%20FedEx.pdf",[r.CORREOS_EXPRESS]:"https://resources.isendu.com/hubfs/ISENDU_Tarifas%20Correos%20Express.pdf"}},20189:(e,t,s)=>{"use strict";s.d(t,{V:()=>r});const r={canConnectWabaWithFreeTrial:"canConnectWabaWithFreeTrial",diciassetteTrackPrestashop:"17TrackPrestashop",enableBrtPickup:"possibileRitiroBRT",integrationsAppsVisible:"integrationsAppsVisible",isenduCarriersForSelfOnboarders:"isenduCarriersForSelfOnboarders",msStores:"msStores",storeEnableSquarespace:"storeEnableSquarespace",storeEnableCommerceLayer:"storeEnableCommerceLayer",storeEnableMirakl:"storeEnableMirakl",useNewPlans:"useNewPlans",useNewTransactionalWhatsapp:"useNewTransactionalWhatsapp"}},64238:(e,t,s)=>{"use strict";s.d(t,{e:()=>n});const r="new_logo",a="images",i="sms_assets",o="whatsapp_assets",n={CDN_ASSETS_URL:"https://static-files-cdn.isendu.com",CDN_S3_ASSETS_URL:"https://isendu-cdn-static-files.s3.eu-central-1.amazonaws.com",LOGO_FOLDER:r,IMAGES_FOLDER:a,SMS_ASSETS_FOLDER:i,WHATSAPP_ASSETS_FOLDER:o,LOGO_FULL_URI:`${r}/isu_logo.svg`,LOGO_SIMPLE_URI:`${r}/logo_simple.svg`,LOGO_MANUAL_ORDER_URI:`${r}/logo_manual_order.png`,LOGO_DARK_LOADING_URI:`${r}/logo_dark.png`,LOGO_GIF_URI:`${r}/logo_gif.gif`,DEFAULT_AVATAR_URI:`${r}/avatar.png`,IMG_SHIPMENTS_W_URI:`${a}/shipments_w.png`,IMG_INTEGRATIONS_W_URI:`${a}/integrations_w.png`,IMG_ANALYTICS_W_URI:`${a}/analytics_w.png`,IMG_SUCCESSFULLY_URI:`${a}/successfully.svg`,IMG_EBAY_LOGO_URI:`${a}/ebay_logo.svg`,IMG_SHOPIFY_LOGO_URI:`${a}/shopify_logo.svg`,IMG_ETSY_LOGO_URI:`${a}/etsy_logo.svg`,IMG_BIGCOMMERCE_LOGO_URI:`${a}/bigcommerce.svg`,IMG_ECWID_LOGO_URI:`${a}/ecwid.svg`,IMG_SQUARESPACE_LOGO_URI:`${a}/squarespace.svg`,IMG_WIX_LOGO_URI:`${a}/wix.svg`,IMG_WOOCOMMERCE_LOGO_URI:`${a}/woocommerce_logo.svg`,IMG_AMAZON_LOGO_URI:`${a}/amazon_logo.svg`,IMG_LOGIN_BACKGROUND_URI:`${a}/Background_login.png`,IMG_PASSWORDRESET_BACKGROUND_URI:`${a}/background_password_reset.png`,IMG_SIGNUP_PASSWORD_BACKGROUND_URI:`${a}/background_password_setup.png`,IMG_SETUP_BACKGROUND_1_URI:`${a}/setup/img_1.png`,IMG_SETUP_BACKGROUND_2_URI:`${a}/setup/img_2.png`,IMG_SETUP_BACKGROUND_3_URI:`${a}/setup/img_3.png`,IMG_SETUP_BACKGROUND_4_URI:`${a}/setup/img_4.png`,IMG_SETUP_BACKGROUND_5_URI:`${a}/setup/img_5.png`,IMG_SETUP_BACKGROUND_6_URI:`${a}/setup/img_6.png`,IMG_EMAILSENT_URI:`${a}/email_sent.png`,IMG_WARNING_URI:`${a}/warning.png`,IMG_INFORMATION_URI:`${a}/information.png`,IMG_NOTIFICATION_ICON_URI:`${a}/notification_icon.svg`,IMG_PAYMENTMETHOD_MASTERCARD_URI:`${a}/payment_method_mastercard.png`,IMG_PAYMENTMETHOD_MAESTRO_URI:`${a}/payment_method_maestro.png`,IMG_PAYMENTMETHOD_VISA_URI:`${a}/payment_method_visa.png`,IMG_PAYMENTMETHOD_AMEX_URI:`${a}/payment_method_amex.png`,IMG_PAYMENTMETHOD_WESTERNUNION_URI:`${a}/payment_method_westernunion.png`,IMG_PAYMENTMETHOD_SEPA_URI:`${a}/payment_method_sepa.png`,IMG_TRACKING_NOTIFICATIONS_SMS_1_URI:`${i}/Sms-1-IT.png`,IMG_TRACKING_NOTIFICATIONS_SMS_2_URI:`${i}/Sms-2-IT.png`,IMG_TRACKING_NOTIFICATIONS_SMS_3_URI:`${i}/Sms-3-IT.png`,IMG_TRACKING_NOTIFICATIONS_SMS_4_URI:`${i}/Sms-4-IT.png`,IMG_TRACKING_NOTIFICATIONS_SMS_5_URI:`${i}/Sms-5-IT.png`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_1_URI:`${o}/Whatsapp-1-IT.png`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_2_URI:`${o}/Whatsapp-2-IT.png`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_3_URI:`${o}/Whatsapp-3-IT.png`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_4_URI:`${o}/Whatsapp-4-IT.png`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_5_URI:`${o}/Whatsapp-5-IT.png`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_5_EN_URI:`${o}/Whatsapp-5-EN.png`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_5_ES_URI:`${o}/Whatsapp-5-ES.png`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_IN_TRANSIT_IT_PNG_URI:`${o}/whatsapp_in_transit_it.png`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_IN_TRANSIT_IT_SVG_URI:`${o}/whatsapp_in_transit_it.svg`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_IN_TRANSIT_EN_PNG_URI:`${o}/whatsapp_in_transit_en.png`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_IN_TRANSIT_EN_SVG_URI:`${o}/whatsapp_in_transit_en.svg`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_IN_TRANSIT_ES_PNG_URI:`${o}/whatsapp_in_transit_es.png`,IMG_TRACKING_NOTIFICATIONS_WHATSAPP_IN_TRANSIT_ES_SVG_URI:`${o}/whatsapp_in_transit_es.svg`,IMG_WHATSAPP_ICON_URI:`${o}/whatsapp-icon.svg`}},7586:(e,t,s)=>{"use strict";s.d(t,{k:()=>r});const r={AMAZON:"ISU-IS1",BIGCOMMERCE:"ISU-IS14",EBAY:"ISU-IS6",ECWID:"ISU-IS15",ETSY:"ISU-IS13",MAGENTO_1:"ISU-IS4",MAGENTO_2:"ISU-IS5",OPENCART_2:"ISU-IS8",PRESTASHOP:"ISU-IS3",SHOPIFY_2:"ISU-IS9",SHOPIFY:"ISU-IS7",SHOPWARE:"ISU-IS19",STOREDEN:"ISU-IS12",WIX:"ISU-IS16",WOOCOMMERCE_MARKETPLACE:"ISU-IS17",WOOCOMMERCE_V2:"ISU-IS10",WOOCOMMERCE:"ISU-IS2",SQUARESPACE:"ISU-IS20",MANOMANO:"ISU-IS21",COMMERCELAYER:"ISU-IS18",MIRAKL:"ISU-IS22"}},74141:(e,t,s)=>{"use strict";s.d(t,{o$:()=>n,$n:()=>c,rc:()=>d,d_:()=>l});var r=s(51066),a=s(25108);var i=s(50003),o=s(25108);const n=(e,t,s)=>{try{const i=e.companyInfo,o=void 0!==s.find((e=>{var t;return e.active&&!e.disabled&&(null===(t=e.store)||void 0===t?void 0:t.internalCode)===r.availableStores.prestashop.internalCode})),n=[];if(t&&n.push("freeTrial"),o&&n.push("prestashop"),i){(e=>{var t;window.Beamer?(window.Beamer.init(),window.Beamer.update({user_email:e.email,user_id:e.companyId,user_firstname:e.firstName,user_lastname:e.lastName,filter:null===(t=e.filters)||void 0===t?void 0:t.join(",")})):a.error("Beamer not loaded!")})({email:(null==i?void 0:i.email)||"",companyId:`${(null==i?void 0:i.id)||-1}`,firstName:(null==i?void 0:i.name)||"",lastName:"",filters:n.length?n:void 0})}}catch(e){o.log(e)}},l=e=>{i.rootStore.websocketStore.emitMessage({type:"pickinglist_printed",ordersIds:e})},d=e=>{i.rootStore.websocketStore.emitMessage({type:"manifest_printed",ordersIds:e.map((e=>e.order.id))})},c=e=>{i.rootStore.websocketStore.emitMessage({type:"custom_rates_created",carrierId:e})}},84403:(e,t,s)=>{"use strict";s.d(t,{_:()=>r});const r={productionEnv:"production",billingEmailAddress:"billing@isendu.com",userNotFoundError:"User not found",unauthorizedError:"Unauthorized",refreshTokenError:"REFRESH_TOKEN_ERROR",getPaymentSubscriptionsError:"Error getting payment subscriptions",requestedOauth:"requestedOauth",oauth2ReqState:"oa2s",oauth2ReqCodeVer:"oa2cv",amazonOauthFlow:"amazonOauthFlow",amazonOauthFlowMerchant:"M",amazonOauthFlowCarrier:"C",amazonOauthFlowStore:"S",amazonOauthState:"amazonOauthState",amazonAddParams:"amazonAddParams",amazonCountry:"amazonCountry",amazonCustomName:"amazonCustomName",redirect:"redirect",redirectAfterLogin:"redirectAfterLogin",connectSubPath:"connect",shopifyRedirectUrl:"https://apps.shopify.com/isendu",gravatarRedirectUrl:"https://www.gravatar.com",currencyEUR:"EUR",currencyUSD:"USD",currencyGBP:"GBP",labelPDF:"PDF",labelTemplateA4:"A4",privacyPolicyUrl:"https://www.iubenda.com/privacy-policy/13166849",termsConditionUrl:"https://www.iubenda.com/termini-e-condizioni/13166849",accountPaused:"account_paused",paymentServiceError:"payment_service_error",supportEmail:"support@isendu.com",contactSupportLink:"https://meetings.hubspot.com/dario-satti/isendu",salesLink:"https://support.isendu.com/meetings/isendu/call-with-sales",freemiumSubscription:"Freemium",activeStatusSubscription:"active",chargebeePaymentMethodType:"chargebee",splitAddons:"-",addonsRecurringTypeMonthly:"MONTHLY",addonsRecurringTypeWeekly:"WEEKLY",addonsRecurringTypeYearly:"YEARLY",removeSelfOnboardingBlockLink:"https://isendu.club/free-trial-carriers",upsAccountNumber:"upsAccountNumber",upsOauthFlow:"upsOauthFlow",upsSetupOauthFlow:"setup",upsRefreshTokenFlow:"refreshToken",upsRegisterOauthFlow:"register",upsIntegrationId:"upsIntegrationId",upsRegistrationId:"upsRegistrationId",cdnAssetsUrl:"https://static-files-cdn.isendu.com",unsentConversationsMessages:"unsentConversationsMessages",default_lang_de:{locale:"de_DE",language:"Deutsch"}}},42611:(e,t,s)=>{"use strict";s.d(t,{L:()=>o});var r=s(43381),a=s.n(r),i=s(25108);function o(e,t,s){try{return a()().possibilities().includes(t)?a()(e).from(t).to(s):a()(e).from(t.toLowerCase()).to(s)}catch(e){return i.error(e),0}}},42513:(e,t,s)=>{"use strict";s.d(t,{kx:()=>o,nR:()=>r,sE:()=>a});const r={IT:"IT",SanMarino:"SM"},a=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","SM"],i=["SM","GR"],o=a.filter((e=>!i.includes(e)))},29865:(e,t,s)=>{"use strict";s.d(t,{U5:()=>l,Y0:()=>d,t6:()=>o,zt:()=>n});var r=s(79283),a=s(82272),i=s(50003);const o=e=>{var t;const{usersStore:s}=(0,i.o)(),r=(null==s||null===(t=s.userInfo)||void 0===t||t.language,{day:"2-digit",month:"2-digit",year:"2-digit"});if(e){if((0,a.qb)(new Date(e))){const t=new Date(e);return`${Intl.DateTimeFormat("en-GB",r).format(t)}`}return(e=>{const t=e;let s;t&&(s=`${t.split(" ")[0]}`);return s})(e.toString())}return""},n=e=>{var t;const{usersStore:s}=(0,i.o)(),r=(null==s||null===(t=s.userInfo)||void 0===t||t.language,{hour:"2-digit",minute:"2-digit",hour12:!1});if(e){if((0,a.qb)(new Date(e))){const t=new Date(e);return`${Intl.DateTimeFormat("en-GB",r).format(t)}`}return(e=>{let t;if(e){const s=e.split(" ");if(s[1]){const[e,r]=s[1].split(":");t=r?`${e}:${r}`:`${e}`}}return t||"00:00"})(e.toString())}return""},l=e=>{var t;const{usersStore:s}=(0,i.o)(),o=(null==s||null===(t=s.userInfo)||void 0===t||t.language,"en-GB"),n={day:"2-digit",month:"2-digit",year:"2-digit"},l={hour:"2-digit",minute:"2-digit",hour12:!1};if(e){let t=e;if((0,r.h)(t)&&10===`${t}`.length&&(t*=1e3),(0,a.qb)(new Date(t))){const e=new Date(t);return`${Intl.DateTimeFormat(o,n).format(e)} · ${Intl.DateTimeFormat(o,l).format(e)}`}return(e=>{const t=e;let s,r;if(t){const[e,a]=t.split(" ");if(s=`${e}`,a){const[e,t]=a.split(":");r=t?`${e}:${t}`:`${e}`}}return r?`${s} · ${r}`:s||e})(e.toString())}return""},d=(e,t)=>`${e||"00:00"} - ${t||"00:00"}`},74435:(e,t,s)=>{"use strict";s.d(t,{P:()=>i,l:()=>o});var r=s(44012),a=s(85893);function i(e){return{max:e,message:(0,a.jsx)(r.Z,{id:"form.validation.input.maxLength",defaultMessage:"Max {value} characters",values:{value:e}})}}const o={required:!0,message:(0,a.jsx)(r.Z,{id:"form.validation.input.required",defaultMessage:"Required"})}},82272:(e,t,s)=>{"use strict";s.d(t,{BS:()=>z,EB:()=>I,Gx:()=>T,HS:()=>K,HY:()=>O,Ju:()=>q,K$:()=>ee,Mi:()=>x,OA:()=>oe,P6:()=>F,Qo:()=>se,R0:()=>le,RD:()=>Y,SQ:()=>L,TA:()=>_,VJ:()=>ne,Wp:()=>U,XZ:()=>A,YY:()=>D,Z9:()=>ie,ZW:()=>V,b9:()=>C,bi:()=>te,eu:()=>M,gP:()=>ce,kB:()=>j,lo:()=>P,mR:()=>pe,mT:()=>Z,nF:()=>G,pd:()=>de,ph:()=>$,pu:()=>X,qX:()=>R,qb:()=>k,sF:()=>B,su:()=>N,t8:()=>S,tN:()=>w,w2:()=>H,wi:()=>re,wo:()=>Q,xu:()=>E});var r=s(19650),a=s(39563),i=s(25142),o=s(50049),n=s(44012),l=s(60843),d=s(84403),c=s(42611),p=s(19006),u=s(27484),h=s.n(u),m=s(51066),g=s(19959),y=s(83886),f=s(50003),b=s(85893);const v=(0,o.vU)({labelTemplateThermal:{id:"labelTTemplate.thermal",defaultMessage:"Thermal label"},header:{id:"functions.labels.fix.header",defaultMessage:"Unable to create this shipment because:"},sender:{id:"functions.labels.fix.sender",defaultMessage:"Sender address is missing or invalid"},receiver:{id:"functions.labels.fix.receiver",defaultMessage:"Receiver address is missing or invalid"},package:{id:"functions.labels.fix.package",defaultMessage:"Package info required"},carrier:{id:"functions.labels.fix.carrier",defaultMessage:"Shipping info required"},footer:{id:"functions.labels.fix.footer",defaultMessage:"Please update order details to continue"},errorShippingOrdersTitle:{id:"ordersTable.shipOrders.notification.error.title",defaultMessage:"Error"},errorShippingOrdersMessage:{id:"ordersTable.shipOrders.notification.error.message",defaultMessage:"Error shipping order"},errorPaymentServiceWarningTitle:{id:"functions.handleShipError.notification.warning.title",defaultMessage:"Something went wrong"},errorPaymentServiceWarningMessage:{id:"functions.handleShipError.notification.warning.message",defaultMessage:"We are experiencing technical problems and we are working to resolve them as soon as possible. Please, try again later"}}),x=(e,t)=>{const s=atob(e),r=new ArrayBuffer(s.length),a=new Uint8Array(r);for(let e=0;e<s.length;e++)a[e]=s.charCodeAt(e);return new Blob([r],{type:t})},S=(e,t)=>{const s=document.createElement("a");document.body.appendChild(s),s.style.display="none",s.href=window.URL.createObjectURL(e),s.download=t,s.click(),window.URL.revokeObjectURL(s.href),s.remove()},j=(e,t)=>{const s=document.createElement("a");document.body.appendChild(s),s.style.display="none",s.href=e,s.download=t,s.click(),s.remove()},w=e=>{var t;const s=null==e||null===(t=e.order)||void 0===t?void 0:t.status;return!!s&&[m.OrderStatuses.PENDING,m.OrderStatuses.ERROR].includes(s)},M=e=>{if(e&&e.order)switch(e.order.status){case m.OrderStatuses.PENDING:case m.OrderStatuses.DELIVERED:return!1;default:return!0}return!1},C=(e,t)=>{if(e&&t){var s,r,a,i,o,n,l,d;const c=null!=e&&null!==(s=e.order)&&void 0!==s&&null!==(r=s.shippingInformation)&&void 0!==r&&r.addressFrom?null==e||null===(a=e.order)||void 0===a||null===(i=a.shippingInformation)||void 0===i?void 0:i.addressFrom:null!=e&&null!==(o=e.shipment)&&void 0!==o&&null!==(n=o.request)&&void 0!==n&&n.addressFrom?null==e||null===(l=e.shipment)||void 0===l||null===(d=l.request)||void 0===d?void 0:d.addressFrom:t.find((e=>e.isDefault));return!!(null!=c&&c.name&&null!=c&&c.city&&null!=c&&c.countryIsoCode&&null!=c&&c.street&&null!=c&&c.zipCode)}return!1},A=e=>{if(e){var t,s,r,a,i;const o=null!=e&&null!==(t=e.order)&&void 0!==t&&null!==(s=t.shippingInformation)&&void 0!==s&&s.addressTo?null==e||null===(r=e.order)||void 0===r||null===(a=r.shippingInformation)||void 0===a?void 0:a.addressTo:null==e||null===(i=e.order)||void 0===i?void 0:i.addressTo;return!!(null!=o&&o.name&&null!=o&&o.city&&null!=o&&o.countryIsoCode&&null!=o&&o.street&&null!=o&&o.zipCode)}return!1},T=e=>{var t;return!!e&&!!(null!==(t=e.order.shippingInformation)&&void 0!==t&&t.parcels&&e.order.shippingInformation.parcels.length>0)},O=(e,t)=>{var s;if(!e)return!1;const r=e.order.shippingInformation;return!!(A(e)&&r&&r.parcels&&r.parcels.length>0&&r.selectedCarrierId&&r.selectedCarrierId>0&&t.data[r.selectedCarrierId]&&null!==(s=e.order.shippingInformation)&&void 0!==s&&s.serviceCode)},P=(e,t,s,r)=>{let a=!1,i=!1,o=!1,n=!1;if(t){var l,d,c,p;C(t,s)||(a=!0),A(t)||(i=!0);const u=null==t||null===(l=t.order)||void 0===l?void 0:l.shippingInformation;return u&&null!=u&&u.parcels&&(null==u||null===(d=u.parcels)||void 0===d?void 0:d.length)>0||(o=!0),!r||null==r||!r.data||u&&null!=u&&u.selectedCarrierId&&(null==u?void 0:u.selectedCarrierId)>0&&null!=r&&r.data[null==u?void 0:u.selectedCarrierId]&&null!=t&&null!==(c=t.order)&&void 0!==c&&null!==(p=c.shippingInformation)&&void 0!==p&&p.serviceCode||(n=!0),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{children:e.formatMessage(v.header)}),(0,b.jsxs)("ul",{children:[a&&(0,b.jsx)("li",{children:e.formatMessage(v.sender)}),i&&(0,b.jsx)("li",{children:e.formatMessage(v.receiver)}),o&&(0,b.jsx)("li",{children:e.formatMessage(v.package)}),n&&(0,b.jsx)("li",{children:e.formatMessage(v.carrier)})]})]})}},N=e=>/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e),_=e=>{switch(e){case d._.currencyEUR:return m.CurrencyUnits.EURO;case d._.currencyUSD:return m.CurrencyUnits.US_DOLLAR;case d._.currencyGBP:return m.CurrencyUnits.POUND_STERLING;default:return m.CurrencyUnits.EURO}},Z=e=>{switch(e.toLowerCase()){case"en":return"English";case"it":return"Italiano";case"es":return"Español";case"de":return"Deutsch";default:return e}},I=(e,t,s)=>{const r=[],a=[];let i=e||"";if(null!=t&&t.data){if(Array.isArray(t.data))for(const e of t.data){const t=e;a.includes(t.msg)||(s&&v[t.msg]?r.push(s.formatMessage(v[t.msg])):r.push(t.msg),a.push(t.msg))}r.length>0&&(i=r.join(", "))}else null!=t&&t.message&&(i=t.message);return i},D=e=>{switch(e){case"mastercard":return a.dn;case"maestro":return a.b$;case"visa":return a.Ed;case"amex":return a.e3;case"westernunion":return a.fY;case"sepa":return a.hT;default:return""}},E=(e,t,s)=>{if(t===l._.DHL_EXPRESS)switch(e){case"ECOM26_84_A4_001":return"A4";case"ECOM26_84_001":return s.formatMessage(v.labelTemplateThermal);default:return e}return e},k=e=>!isNaN(e.getDate()),L=e=>{var t;return(null==e||null===(t=e.order)||void 0===t?void 0:t.trackingInformation)&&e.order.trackingInformation.length&&(0,y.Q)(e)||""},R=(e,t)=>{var s;let r="";return null!=t&&null!==(s=t.order)&&void 0!==s&&s.trackingInformation&&Array.isArray(t.order.trackingInformation)&&t.order.trackingInformation.length&&t.order.trackingInformation[t.order.trackingInformation.length-1]&&(r=t.order.trackingInformation[t.order.trackingInformation.length-1].number||""),e&&e===l._.BRT&&r.length>15&&(r=r.substr(0,15)),r},F=(e,t,s,r)=>{var a;let i,o="";const n=t.paymentSubscriptionsArray.filter((e=>"active"===e.status&&"Add-ons"!==e.plan.item_family_id));var l,c;if(!t.isPaymentSubscriptionsError&&!(n&&n.length>0&&(n.sort(((e,t)=>e.currentPeriodEnd-t.currentPeriodEnd)),i=n[0]),null!==(l=r.companyInfo)&&void 0!==l&&l.earlyAdopter||null!==(c=s.userInfo)&&void 0!==c&&c.skipCheckFinance))if(i){const e=i.invoices;if(W(e))o=m.Subscriptions.billingPending;else{const e=i.latest_invoice;var p,u;if(e)"active"!==i.status&&"past_due"!==i.status||"open"!==e.status||e.paid||e.attempted||(o=m.Subscriptions.billingPending),"incomplete"!==i.status&&"incomplete_expired"!==i.status||(o=m.Subscriptions.subscriptionPending),"past_due"===i.status&&"open"===e.status&&!e.paid&&e.attempted&&(o=m.Subscriptions.subscriptionExpired),"canceled"===i.status&&(o=m.Subscriptions.subscriptionExpired);else null!==(p=i.priceId)&&void 0!==p&&p.startsWith("Free-Trial")||null!==(u=i.priceId)&&void 0!==u&&u.startsWith("Beta-Tester")||(o=m.Subscriptions.subscriptionExpired)}}else o=m.Subscriptions.subscriptionExpired;null!==(a=s.userInfo)&&void 0!==a&&a.paused&&(o=d._.accountPaused),e.setAccountWarningType(o),""!==o?e.setModalWarningVisible(!0):e.setModalWarningVisible(!1)};function U(){var e,t,s,r;if(null!==(e=f.rootStore.companiesStore.companyInfo)&&void 0!==e&&e.earlyAdopter)return;let a="";const i=!f.rootStore.subscriptionsStore.activeSubscription,o=null===(t=f.rootStore.userStore.userInfo)||void 0===t?void 0:t.paused,n=(null===(s=f.rootStore.subscriptionsStore.activeSubscription)||void 0===s?void 0:s.hasDuePayments)&&!(null!==(r=f.rootStore.userStore.userInfo)&&void 0!==r&&r.skipCheckFinance);i?a=m.Subscriptions.subscriptionExpired:o?a=d._.accountPaused:n&&(a=m.Subscriptions.billingPending),f.rootStore.setAccountWarningType(a),f.rootStore.setModalWarningVisible(!!a)}const G=(e,t)=>{const s=t.filteredAddons.find((e=>{var t,s;return(null===(t=e.status)||void 0===t?void 0:t.toLowerCase())===m.Subscriptions.subscriptionGatewayStatusActive||"nonrenewing"===(null===(s=e.status)||void 0===s?void 0:s.toLowerCase())}));if(s){let t=!1;const r=s.itemPriceId.split(d._.splitAddons);Array.isArray(r)&&r.length>=4&&(t=r[1]===m.Subscriptions.subscriptionWhatsAppGroup2);const a=s.currentCount;let o=s.maxPlanCount;t&&(o=2*s.maxPlanCount),a>=o?(e.setModalWhatsappCounterVisible(!0),e.setWhatsappWarningType(i.Fd.whatsappCounterFinished)):a/o>=i.LH&&(e.setModalWhatsappCounterVisible(!0),e.setWhatsappWarningType(i.Fd.whatsappCounterAlmost))}};function B(){const e=f.rootStore.subscriptionsStore.activeSubscription;if(!e)return;const{availableConversations:t,sentConversations:s}=e;s>=t?(f.rootStore.setModalWhatsappCounterVisible(!0),f.rootStore.setWhatsappWarningType(i.Fd.whatsappCounterFinished)):s/t>=i.LH?(f.rootStore.setModalWhatsappCounterVisible(!0),f.rootStore.setWhatsappWarningType(i.Fd.whatsappCounterAlmost)):(f.rootStore.setModalWhatsappCounterVisible(!1),f.rootStore.setWhatsappWarningType(void 0))}const $=async(e,t)=>{const s=t.paymentSubscriptionsArray.filter((e=>{const t=e.plan;return"active"===e.status&&("SaaS-Recurring-Subscriptions"===t.item_family_id||"Free-Trial"===t.item_family_id||"Freemium"===t.item_family_id||"Beta-Tester"===t.item_family_id)}));if(s&&s.length>0){var r,a,o;s.sort(((e,t)=>e.currentPeriodEnd-t.currentPeriodEnd));const n=(null===(r=s[0])||void 0===r||null===(a=r.plan)||void 0===a||null===(o=a.metadata)||void 0===o?void 0:o.amount)||0,l=t.shipmentCounter;n&&-1!==n?l>=n?(e.setModalShipmentsCounterVisible(!0),e.setShipmentsWarningType(i.G9.shipmentsCounterFinished)):l/n>=i.fr?(e.setModalShipmentsCounterVisible(!0),e.setShipmentsWarningType(i.G9.shipmentsCounterAlmost)):(e.setModalShipmentsCounterVisible(!1),e.setShipmentsWarningType(void 0)):(e.setModalShipmentsCounterVisible(!1),e.setShipmentsWarningType(void 0))}};function z(){const e=f.rootStore.subscriptionsStore.activeSubscription;if(!e)return;const{hasUnlimitedShipments:t,availableShipments:s,sentShipments:r,planName:a}=e,o="17Track"===a;t?(f.rootStore.setModalShipmentsCounterVisible(!1),f.rootStore.setShipmentsWarningType(void 0)):r>=s&&!o?(f.rootStore.setModalShipmentsCounterVisible(!0),f.rootStore.setShipmentsWarningType(i.G9.shipmentsCounterFinished)):r/s>=i.fr&&!o?(f.rootStore.setModalShipmentsCounterVisible(!0),f.rootStore.setShipmentsWarningType(i.G9.shipmentsCounterAlmost)):(f.rootStore.setModalShipmentsCounterVisible(!1),f.rootStore.setShipmentsWarningType(void 0))}const W=e=>{if(e){if(e.find((e=>"open"===e.status&&!e.paid&&!e.attempted)))return!0}return!1},H=(e,t,s)=>{null==e||!e.message||e.message!==m.Subscriptions.subscriptionExpired&&e.message!==m.Subscriptions.subscriptionPending&&e.message!==m.Subscriptions.billingPending&&e.message!==d._.accountPaused?(null==e?void 0:e.message)===d._.paymentServiceError?g.T.warning((0,b.jsx)(n.Z,{id:"functions.handleShipError.notification.warning.title",defaultMessage:"Something went wrong"}),(0,b.jsx)(n.Z,{id:"functions.handleShipError.notification.warning.message",defaultMessage:"We are experiencing technical problems and we are working to resolve them as soon as possible. Please, try again later"})):g.T.error(s.formatMessage(v.errorShippingOrdersTitle),s.formatMessage(v.errorShippingOrdersMessage)):(t.setAccountWarningType(e.message),t.setModalWarningVisible(!0),t.modalWarningAlreadySeen&&t.setModalWarningAlreadySeen(!1))},V=()=>{const e=window.localStorage.getItem("whatsappCounterWarningDate"),t=h()().format("DD/MM/YYYY");return e&&e===t},q=()=>{const e=h()().format("DD/MM/YYYY");window.localStorage.setItem("whatsappCounterWarningDate",e)},Y=()=>{const e=window.localStorage.getItem("shipmentsCounterWarningDate"),t=h()().format("DD/MM/YYYY");return e&&e===t},K=()=>{const e=h()().format("DD/MM/YYYY");window.localStorage.setItem("shipmentsCounterWarningDate",e)},X=e=>{const t=Object.keys(e).map((t=>"string"==typeof e[t]?[t,e[t].trim()]:[t,e[t]]));return Object.fromEntries(t)},Q=(e,t,s,r)=>{let a=(0,c.L)(Number(e),t,s)||0;return r&&(a=Number(a.toFixed(r))),Number(a)};function J(e,t,s,r){const a=(0,c.L)(Number(r),s,e)||0;return void 0!==t?Number(a.toFixed(t)):a}function ee(e,t,s,r){return J(e,t,s,r)}function te(e,t,s,r){return J(e,t,s,r)}const se=e=>{let t,{shippingInformation:s,carriersStore:r}=e;const a=null==s?void 0:s.selectedCarrierId;if(a&&void 0!==r.allAvailableCarriersMap.data[a]){var i;const e=r.allAvailableCarriersMap.data[a];t={carrierData:e,service:re(null==e?void 0:e.services,null==s?void 0:s.serviceCode,null===(i=e.carrier)||void 0===i?void 0:i.internalCode,r.availableCarriers)}}return t},re=(e,t,s,r)=>{let a=null,i=null==e?void 0:e.find((e=>e.code===t));if(i)a=i;else{const e=null==r?void 0:r.find((e=>e.internalCode===s));var o;if(e)i=null===(o=e.services)||void 0===o?void 0:o.find((e=>e.code===t)),i&&(a=i)}return a},ae=(0,b.jsx)(n.Z,{id:"settings.trackingNotifications.countries.select.otherCountries",defaultMessage:"Other countries"}),ie=(e,t)=>e?(0,b.jsxs)(r.Z,{children:[!t&&(0,b.jsx)("img",{width:"12",height:"12",src:(0,a.$6)(e.alpha2)}),`${e.name}`]}):(0,b.jsxs)(r.Z,{children:[!t&&(0,b.jsx)("img",{width:"12",height:"12",src:(0,a.$6)(p.worldCountry)}),ae]}),oe=(e,t)=>(0,b.jsxs)(r.Z,{children:[!t&&(0,b.jsx)("img",{width:"12",height:"12",src:(0,a.$6)(e.alpha2)}),`${e.prefix}`]}),ne=e=>{switch(e){case m.TrackingNotificationsStatuses.FULFILLED:return(0,b.jsx)(n.Z,{id:"settings.trackingNotifications.status.label.orderReady",defaultMessage:"Order ready"});case m.TrackingNotificationsStatuses.IN_TRANSIT:return(0,b.jsx)(n.Z,{id:"settings.statusControl.status.label.inTransit",defaultMessage:"In transit"});case m.TrackingNotificationsStatuses.EXCEPTION:return(0,b.jsx)(n.Z,{id:"settings.statusControl.status.label.exception",defaultMessage:"Exception"});case m.TrackingNotificationsStatuses.DELIVERED:return(0,b.jsx)(n.Z,{id:"settings.statusControl.status.label.delivered",defaultMessage:"Delivered"});case m.TrackingNotificationsStatuses.REVIEW:return(0,b.jsx)(n.Z,{id:"settings.statusControl.status.label.review",defaultMessage:"Review"});case m.TrackingNotificationsStatuses.RETURN:return(0,b.jsx)(n.Z,{id:"settings.statusControl.status.label.return",defaultMessage:"Return"});default:return(0,b.jsx)(b.Fragment,{})}},le=(e,t,s)=>e?Number(Number(e).toFixed(null!==s||void 0!==s?s:2)):t,de=e=>+(Math.round(Number(e+"e+2"))+"e-2"),ce=e=>{let{condition:t,wrapper:s,children:r}=e;return t?s(r):r},pe=()=>new RegExp(/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i)},94095:(e,t,s)=>{"use strict";s.d(t,{Gg:()=>y,Ip:()=>x,X5:()=>f,z1:()=>b});var r=s(57119),a=s(51066),i=s(50146),o=s(9676),n=s(39563),l=s(19959),d=s(60843),c=s(50049),p=s(84403),u=s(70506),h=s(85893);const{confirm:m}=i.default,g=(0,c.vU)({errorShippingOrdersTitle:{id:"ordersTable.shipOrders.notification.error.title",defaultMessage:"Error"},errorShippingOrdersSingleOrderTitle:{id:"ordersTable.shipOrders.singleOrder.notification.error.title",defaultMessage:"Error shipping order #{orderId}"},errorShippingOrdersPaymentMethodMessage:{id:"ordersTable.shipOrders.paymentMethod.notification.error.message",defaultMessage:"Payment method not defined. Please add one in {link}"},errorShippingOrdersBillingAddressMessage:{id:"ordersTable.shipOrders.billingAddress.notification.error.message",defaultMessage:"Missing billing address. Please add one in {link}"},settingsBillingsLink:{id:"settingsBillings.link",defaultMessage:"Settings > Billings"},errorShippingOrdersSenderAddressMessage:{id:"ordersTable.shipOrders.senderAddress.notification.error.message",defaultMessage:"The 'Sender' address is empty"},errorShippingOrdersSenderProvinceMessage:{id:"ordersTable.shipOrders.senderProvince.notification.error.message",defaultMessage:"In your 'Sender' address, the 'Province' field must be 2 characters long"},errorShippingOrdersReceiverProvinceMessage:{id:"ordersTable.shipOrders.receiverProvince.notification.error.message",defaultMessage:"For the selected carriers, the 'Province' field in your 'Receiver' address cannot be null"},errorShippingOrdersCodIsenduContractMessage:{id:"ordersTable.shipOrders.codIsenduContract.notification.error.message",defaultMessage:"Cash on delivery is not available for the service selected. Please add a different delivery service and retry"},errorShippingOrdersMissingPhoneMessage:{id:"ordersTable.shipOrders.missingPhone.notification.error.message",defaultMessage:"Phone number is mandatory for the service selected. Please update shipping informations and retry"},errorShippingOrdersSelfOnboardingBlockMessage:{id:"ordersTable.shipOrders.selfOnboardingBlock.notification.error.message",defaultMessage:"Is not allowed to use isendu carriers during free trial. Please contact our support team at {removeSelfOnboardingBlockLink}"},carrierResponsibilitiesModalTitle:{id:"carrier.responsibilities.modal.title",defaultMessage:"Important information"},carrierResponsibilitiesModalMessage:{id:"carrier.responsibilities.modal.message",defaultMessage:"Remember that isendu is always on your side but has no responsibility for the delivery of shipments handled by the default carriers (Poste Italiane and FedEx).{br}{br}Take a look at <link>this article</link> to learn more about shipping."},carrierResponsibilitiesModalCheckbox:{id:"carrier.responsibilities.modal.dont.show.anymore.checkbox",defaultMessage:"Don't show anymore"},carrierResponsibilitiesModalOkButton:{id:"carrier.responsibilities.modal.ok.button",defaultMessage:"Ok, I got it"}}),y=(e,t)=>{switch(e){case a.OrderStatuses.DELIVERED:return"delivered";case a.OrderStatuses.PARTIALLY_FULFILLED:case a.OrderStatuses.FULFILLED:return"generated_label";case a.OrderStatuses.IN_TRANSIT:return"in_transit";case a.OrderStatuses.PENDING:case a.OrderStatuses.ERROR:case a.OrderStatuses.GENERATING_LABELS:return"incoming_orders";case a.OrderStatuses.EXCEPTION:return"exception";case a.OrderStatuses.EXTERNALLY_HANDLED:return t?"misc":"incoming_orders";default:return"misc"}},f=e=>{if(e){const t=8;return e.substring(e.length-t)}},b=async e=>{let{addressesStore:t,paymentMethodsStore:s,paymentSubscriptionsStore:a,subscriptionsStore:i,companiesStore:l,shipmentsStore:d,ordersStore:c,intl:p,orders:y,selectedCarriers:f,availableCarriers:b,singleOrder:x,onError:S,setLoadingButton:j,setSelectedOrdersIds:w,setGeneratingLabels:M,blockIsenduCarriersForSelfOnboarder:C,useNewPlans:A}=e;const T=((e,t,s)=>{var r;let a=!1;if(null==e||null===(r=e.companyInfo)||void 0===r||!r.modalCarrierResponsibilitiesShowed){const e=new Set;t.forEach((t=>{var s,r,a,i;null!=t&&null!==(s=t.order)&&void 0!==s&&null!==(r=s.shippingInformation)&&void 0!==r&&r.selectedCarrierId&&e.add(null==t||null===(a=t.order)||void 0===a||null===(i=a.shippingInformation)||void 0===i?void 0:i.selectedCarrierId)}));const r=[...e];for(let e=0;e<r.length;e++){var i;if(a=!(null==s||null===(i=s.data[r[e]])||void 0===i||!i.isIsenduCarrier),a)break}}return a})(l,y,f);T?m({title:(0,h.jsx)(n.xv,{className:"text-primary",style:{fontSize:"17px"},children:p.formatMessage(g.carrierResponsibilitiesModalTitle)}),icon:(0,h.jsx)(r.Z,{style:{fontSize:"24px",color:"#21a1bf"}}),content:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.xv,{type:"secondary",children:p.formatMessage(g.carrierResponsibilitiesModalMessage,{link:e=>(0,h.jsx)(n.rU,{target:"_blank",href:`${u.H.support.howToShip}`,children:e}),br:(0,h.jsx)("br",{})})}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)(o.Z,{onChange:e=>{l.setModalCarrierResponsibilitiesDoNotShowAnymore(e.target.checked)},children:(0,h.jsx)(n.xv,{type:"secondary",children:p.formatMessage(g.carrierResponsibilitiesModalCheckbox)})})]}),cancelButtonProps:{hidden:!0},okText:p.formatMessage(g.carrierResponsibilitiesModalOkButton),onOk(){l.modalCarrierResponsibilitiesDoNotShowAnymore&&l.updateModalCarrierResponsibilitiesShowed(!0),v({addressesStore:t,paymentMethodsStore:s,paymentSubscriptionsStore:a,subscriptionsStore:i,companiesStore:l,shipmentsStore:d,ordersStore:c,intl:p,orders:y,selectedCarriers:f,availableCarriers:b,singleOrder:x,onError:S,setLoadingButton:j,setSelectedOrdersIds:w,setGeneratingLabels:M,blockIsenduCarriersForSelfOnboarder:C,useNewPlans:A})},onCancel(){M&&M(!1)}}):v({addressesStore:t,paymentMethodsStore:s,paymentSubscriptionsStore:a,subscriptionsStore:i,companiesStore:l,shipmentsStore:d,ordersStore:c,intl:p,orders:y,selectedCarriers:f,availableCarriers:b,singleOrder:x,onError:S,setLoadingButton:j,setSelectedOrdersIds:w,setGeneratingLabels:M,blockIsenduCarriersForSelfOnboarder:C,useNewPlans:A})},v=async e=>{let{addressesStore:t,paymentMethodsStore:s,paymentSubscriptionsStore:r,subscriptionsStore:i,companiesStore:o,shipmentsStore:c,ordersStore:m,intl:y,orders:b,selectedCarriers:v,availableCarriers:x,singleOrder:S,onError:j,setLoadingButton:w,setSelectedOrdersIds:M,setGeneratingLabels:C,blockIsenduCarriersForSelfOnboarder:A,useNewPlans:T}=e;w&&w(!0);const O=[];b.forEach((e=>{var c,m,b,j,w,M,C,P;let N=!1,_=!1,Z=!1,I=!1,D=!1,E=!1,k=!1,L=!1,R=!1;const F=(null===(c=e.order.shippingInformation)||void 0===c?void 0:c.addressFrom)||(null===(m=e.shipment)||void 0===m?void 0:m.request.addressFrom)||t.senderAddressesArray.find((e=>e.isDefault)),U=(null===(b=e.order.shippingInformation)||void 0===b?void 0:b.addressTo)||(null===(j=e.shipment)||void 0===j?void 0:j.request.addressTo)||e.order.addressTo,G=null===(w=e.order.shippingInformation)||void 0===w?void 0:w.selectedCarrierId,B=null===(M=e.order.shippingInformation)||void 0===M?void 0:M.serviceCode;let $=null===(C=e.order.shippingInformation)||void 0===C?void 0:C.additionalServices;const z=null===(P=e.order.shippingInformation)||void 0===P?void 0:P.extra,W=v.data[G||""];let H=p._.labelPDF,V=null;const q=T?!i.activeSubscription:0===r.paymentSubscriptionsArray.filter((e=>"active"===e.status&&("SaaS-Recurring-Subscriptions"===e.plan.item_family_id||"Free-Trial"===e.plan.item_family_id||"Freemium"===e.plan.item_family_id||"Beta-Tester"===e.plan.item_family_id))).length;if(W){var Y,K,X,Q,J,ee,te,se,re,ae,ie,oe,ne,le,de;if(W.isIsenduCarrier&&(0===s.paymentMethodsArray.length||null===(Y=o.companyInfo)||void 0===Y||!Y.billingAddress))0===s.paymentMethodsArray.length&&(_=!0),null!==(ne=o.companyInfo)&&void 0!==ne&&ne.billingAddress||(Z=!0);if(null!==(K=o.companyInfo)&&void 0!==K&&K.earlyAdopter||!q||(N=!0),F||(I=!0),"IT"!==(null==F?void 0:F.countryIsoCode)||null!=F&&F.state&&2===(null==F||null===(X=F.state)||void 0===X?void 0:X.length)||(D=!0),(null===(Q=W.carrier)||void 0===Q?void 0:Q.internalCode)===d._.POSTE_ITALIANE||(null===(J=W.carrier)||void 0===J?void 0:J.internalCode)===d._.FEDEX||(null===(ee=W.carrier)||void 0===ee?void 0:ee.internalCode)===d._.DHL_EXPRESS)if(!U||!U.state)((null===(le=W.carrier)||void 0===le?void 0:le.internalCode)===d._.DHL_EXPRESS||(null===(de=W.carrier)||void 0===de?void 0:de.internalCode)===d._.FEDEX)&&"IT"!==(null==U?void 0:U.countryIsoCode)&&"US"!==(null==U?void 0:U.countryIsoCode)||(E=!0);if(W.isIsenduCarrier&&null!==(te=$)&&void 0!==te&&te.cod&&(k=!0),(null===(se=W.carrier)||void 0===se?void 0:se.internalCode)!==d._.POSTE_DELIVERY_BUSINESS||"EX8"!==(null===(re=e.order.shippingInformation)||void 0===re?void 0:re.serviceCode)&&"STD8"!==(null===(ae=e.order.shippingInformation)||void 0===ae?void 0:ae.serviceCode)||null!==(ie=e.order.addressTo)&&void 0!==ie&&ie.phoneNumber||(L=!0),W.isIsenduCarrier&&null!==(oe=o.companyInfo)&&void 0!==oe&&oe.selfOnboarding&&A&&(R=!0),N||_||Z||I||D||E||k||L||R){let t="";if(S){const s=e.order.isManual&&!e.order.storeOrderId?f(e.order.id):e.order.storeOrderId;t=y.formatMessage(g.errorShippingOrdersSingleOrderTitle,{orderId:s})}else t=y.formatMessage(g.errorShippingOrdersTitle);const s=y.formatMessage(g.settingsBillingsLink);l.T.error({message:t,description:(0,h.jsxs)(h.Fragment,{children:[N&&(0,h.jsxs)(h.Fragment,{children:[y.formatMessage({id:"subscriptionExpired.planExpired"}),(0,h.jsx)("br",{}),y.formatMessage({id:"account.warning.alert.subscriptionExpired.message"})]}),_&&(0,h.jsxs)(h.Fragment,{children:[y.formatMessage(g.errorShippingOrdersPaymentMethodMessage,{link:(0,h.jsx)(n.rU,{href:`${u.H.settings.billings}`,children:s})}),(0,h.jsx)("br",{})]}),Z&&(0,h.jsxs)(h.Fragment,{children:[y.formatMessage(g.errorShippingOrdersBillingAddressMessage,{link:(0,h.jsx)(n.rU,{href:`${u.H.settings.billings}`,children:s})}),(0,h.jsx)("br",{})]}),I&&(0,h.jsxs)(h.Fragment,{children:[y.formatMessage(g.errorShippingOrdersSenderAddressMessage),(0,h.jsx)("br",{})]}),D&&(0,h.jsxs)(h.Fragment,{children:[y.formatMessage(g.errorShippingOrdersSenderProvinceMessage),(0,h.jsx)("br",{})]}),E&&(0,h.jsxs)(h.Fragment,{children:[y.formatMessage(g.errorShippingOrdersReceiverProvinceMessage),(0,h.jsx)("br",{})]}),k&&(0,h.jsxs)(h.Fragment,{children:[y.formatMessage(g.errorShippingOrdersCodIsenduContractMessage),(0,h.jsx)("br",{})]}),L&&(0,h.jsxs)(h.Fragment,{children:[y.formatMessage(g.errorShippingOrdersMissingPhoneMessage),(0,h.jsx)("br",{})]}),R&&(0,h.jsxs)(h.Fragment,{children:[y.formatMessage(g.errorShippingOrdersSelfOnboardingBlockMessage,{removeSelfOnboardingBlockLink:(0,h.jsx)(n.rU,{href:p._.removeSelfOnboardingBlockLink,target:"_blank",children:`${p._.removeSelfOnboardingBlockLink}`})}),(0,h.jsx)("br",{})]})]})})}else{var ce,pe,ue,he,me,ge,ye,fe,be,ve,xe,Se,je,we,Me,Ce,Ae,Te,Oe;const t=x.data[(null===(ce=W.carrier)||void 0===ce?void 0:ce.internalCode)||""];var Pe,Ne,_e,Ze,Ie;if(""!==(null==W||null===(pe=W.customSettings)||void 0===pe||null===(ue=pe.label)||void 0===ue?void 0:ue.format)&&null!=t&&t.labelImageFormats&&(null==t||null===(he=t.labelImageFormats)||void 0===he?void 0:he.length)>0&&t.labelImageFormats.includes(null===(me=W.customSettings)||void 0===me||null===(ge=me.label)||void 0===ge?void 0:ge.format))H=null===(Pe=W.customSettings)||void 0===Pe||null===(Ne=Pe.label)||void 0===Ne?void 0:Ne.format;else t&&t.labelImageFormats&&t.labelImageFormats.length>0&&(H=t.labelImageFormats[0]);if(""!==(null==W||null===(ye=W.customSettings)||void 0===ye||null===(fe=ye.label)||void 0===fe?void 0:fe.template)&&null!=t&&t.labelImageTemplates&&(null==t||null===(be=t.labelImageTemplates)||void 0===be?void 0:be.length)>0&&t.labelImageTemplates.includes(null==W||null===(ve=W.customSettings)||void 0===ve||null===(xe=ve.label)||void 0===xe?void 0:xe.template))V=null==W||null===(_e=W.customSettings)||void 0===_e||null===(Ze=_e.label)||void 0===Ze?void 0:Ze.template;else null!=t&&t.labelImageTemplates&&(null==t||null===(Ie=t.labelImageTemplates)||void 0===Ie?void 0:Ie.length)>0&&(V=t.labelImageTemplates[0]);let s;null!==(Se=W.customSettings)&&void 0!==Se&&Se.createReturnLabel&&B&&($={...$,returnLabel:{service:B,labelFormat:H}}),s={format:H},V&&(s={...s,template:V});const r=null===(je=e.order.shippingInformation)||void 0===je?void 0:je.parcels,i={description:(null===(we=e.order.shippingInformation)||void 0===we||null===(Me=we.shipmentDetails)||void 0===Me?void 0:Me.description)||"-",goodsMonetaryValue:(null===(Ce=e.order.shippingInformation)||void 0===Ce||null===(Ae=Ce.shipmentDetails)||void 0===Ae?void 0:Ae.goodsMonetaryValue)||e.order.total||0,goodsCurrency:(null===(Te=e.order.shippingInformation)||void 0===Te||null===(Oe=Te.shipmentDetails)||void 0===Oe?void 0:Oe.goodsCurrency)||e.order.currency||a.CurrencyUnits.EURO,label:s};if(U&&null!=F&&F.name&&G&&r&&B){var De,Ee,ke,Le;const t={id:"error"===e.order.status?null===(De=e.shipment)||void 0===De||null===(Ee=De.request)||void 0===Ee?void 0:Ee.id:void 0,orderId:e.order.id||"",addressFrom:{name:F.name,companyName:F.companyName||void 0,countryIsoCode:F.countryIsoCode,city:F.city,state:F.state||void 0,street:F.street,street2:F.street2||void 0,zipCode:F.zipCode,phoneNumber:(null===(ke=F.phoneNumber)||void 0===ke?void 0:ke.replace(/\s/g,"").replace(/-/g,""))||void 0,email:F.email||void 0},addressTo:{name:U.name,companyName:U.companyName||void 0,countryIsoCode:U.countryIsoCode,city:U.city,state:U.state||void 0,street:U.street,street2:U.street2||void 0,zipCode:U.zipCode,phoneNumber:(null===(Le=U.phoneNumber)||void 0===Le?void 0:Le.replace(/\s/g,"").replace(/-/g,""))||void 0,email:U.email||void 0},selectedCarrierId:G,parcels:r,serviceCode:B,shipmentDetails:i,additionalServices:$,extra:z};O.push(t)}}}}));try{O.length>0&&await c.shipOrders(O).then((()=>{O.forEach((e=>{var t;const s=m.ordersArray.find((t=>t.order.id===e.id));var r;null!=s&&null!==(t=s.shipment)&&void 0!==t&&t.request.id&&c.closeShipments([null==s||null===(r=s.shipment)||void 0===r?void 0:r.request.id])})),M&&M([])}))}catch(e){j&&j(e)}finally{w&&w(!1),C&&C(!1)}},x=e=>{var t,s,r,a,i;return(null!=e&&null!==(t=e.order)&&void 0!==t&&t.id?null==e||null===(s=e.order)||void 0===s||!s.isManual||null!=e&&null!==(r=e.order)&&void 0!==r&&r.storeOrderId?null==e||null===(i=e.order)||void 0===i?void 0:i.storeOrderId:f(null==e||null===(a=e.order)||void 0===a?void 0:a.id):"")||""}},79283:(e,t,s)=>{"use strict";s.d(t,{h:()=>r});const r=e=>"number"==typeof e&&e==e},70506:(e,t,s)=>{"use strict";s.d(t,{H:()=>a,k:()=>r});const r={ACCOUNT:"account",ADDRESSES:"addresses",ADMIN_USERS_EMULATE:"emulate",ADMIN_USERS:"users",ADMIN:"admin",ANALYTICS:"analytics",AUTH_CONSENT:"consent",AUTH_LOGIN:"login",AUTH_PASSWORD_RESET:"password-reset",AUTH_SIGNUP:"signup",AUTH:"auth",AUTOMATION:"automation",BILLINGS:"billings",COMPANY:"company",CONVERSATIONS:"conversations",CONTACTLIST:"contactlist",EMAIL:"email",INTEGRATIONS_CARRIERS:"carriers",INTEGRATIONS_CARRIERS_OAUTH:"carriers-oauth",INTEGRATIONS_MARKETS:"marketplaces",INTEGRATIONS_STORES:"stores",INTEGRATIONS_PUBLICAPI:"public-api",INTEGRATIONS_APPS:"apps",INTEGRATIONS:"integrations",MARKETING:"marketing",NOT_FOUND:"404",ONBOARDING:"selfonboarding",ORDERS:"orders",PACKAGES:"packages",PICKPACK:"pickpack",PICKUP:"pickup",PICKUPS:"pickups",RETURNS:"returns",ROOT:"/",SENDER:"sender",SETTINGS:"settings",SHIPMENTS:"shipments",SUBSCRIPTIONS:"subscriptions",TRACKING_NOTIFICATIONS:"tracking-notifications",TRANSACTIONAL_WHATSAPP:"transactional-whatsapp",USER:"user",WHATSAPP:"whatsapp"},a={commonRoot:r.ROOT,notFound:{root:r.ROOT+r.NOT_FOUND},auth:{rootAbsolute:r.ROOT+r.AUTH,root:r.AUTH,login:r.AUTH_LOGIN,consent:r.AUTH_CONSENT,signup:r.AUTH_SIGNUP,passwordReset:r.AUTH_PASSWORD_RESET,passwordResetToken:`${r.AUTH_PASSWORD_RESET}/:token`},onboading:{createPassword:`${r.ONBOARDING}/create-password`,setup:`${r.ONBOARDING}/setup`},shipments:{rootAbsolute:r.ROOT+r.SHIPMENTS,root:r.SHIPMENTS,orders:r.ORDERS,orderDetail:`${r.ORDERS}/edit/:id`,returns:r.RETURNS,pickups:r.PICKUPS,pickupDetail:`${r.PICKUPS}/edit/:id`,pickpack:r.PICKPACK},conversations:{root:r.CONVERSATIONS},contactlist:{rootAbsolute:r.ROOT+r.CONTACTLIST,root:r.CONTACTLIST},automation:{root:r.AUTOMATION,orders:r.ORDERS,transactionalWhatsapp:r.TRANSACTIONAL_WHATSAPP},analytics:{rootAbsolute:r.ROOT+r.ANALYTICS,root:r.ANALYTICS},integrations:{rootAbsolute:r.ROOT+r.INTEGRATIONS,root:r.INTEGRATIONS,carriers:{root:r.INTEGRATIONS_CARRIERS,edit:r.INTEGRATIONS_CARRIERS+"/edit",oauth:r.INTEGRATIONS_CARRIERS_OAUTH,oauthSubPath:r.INTEGRATIONS_CARRIERS_OAUTH+"/:id/:subPath"},markets:{root:r.INTEGRATIONS_MARKETS,edit:r.INTEGRATIONS_MARKETS+"/edit",storeOuath:r.INTEGRATIONS_STORES,storeOauthSubPath:r.INTEGRATIONS_STORES+"/:id/:subPath",oauth:r.INTEGRATIONS_MARKETS,oauthSubPath:r.INTEGRATIONS_MARKETS+"/:id/:subPath"},publicApi:{root:r.INTEGRATIONS_PUBLICAPI},apps:{root:r.INTEGRATIONS_APPS}},marketing:{root:r.MARKETING,rootAbsolute:r.ROOT+r.MARKETING,email:r.EMAIL,whatsapp:r.WHATSAPP},settings:{rootAbsolute:r.ROOT+r.SETTINGS,root:r.SETTINGS,user:r.USER,account:r.ROOT+r.SETTINGS+"/"+r.ACCOUNT,billings:r.ROOT+r.SETTINGS+"/"+r.BILLINGS,company:r.ROOT+r.SETTINGS+"/"+r.COMPANY,addresses:r.ROOT+r.SETTINGS+"/"+r.ADDRESSES,addressesSender:r.ROOT+r.SETTINGS+"/"+r.ADDRESSES+"/"+r.SENDER,addressesPickup:r.ROOT+r.SETTINGS+"/"+r.ADDRESSES+"/"+r.PICKUP,packages:r.ROOT+r.SETTINGS+"/"+r.PACKAGES,automation:r.ROOT+r.SETTINGS+"/"+r.AUTOMATION,trackingNotifications:r.ROOT+r.SETTINGS+"/"+r.TRACKING_NOTIFICATIONS,subscriptions:r.ROOT+r.SETTINGS+"/"+r.SUBSCRIPTIONS},trackingNotifications:{root:r.TRACKING_NOTIFICATIONS},admin:{rootAbsolute:r.ROOT+r.ADMIN,root:r.ADMIN,users:{root:r.ADMIN_USERS,emulate:{root:r.ADMIN_USERS_EMULATE}}},hubspot:{help:"https://meetings.hubspot.com/dario-satti/isendu"},support:{howToShip:"https://support.isendu.com/quali-sono-le-informazioni-da-sapere-quando-si-spedisce"}}},65682:(e,t,s)=>{"use strict";s.d(t,{S:()=>l,c:()=>d});var r=s(57458),a=s(28364),i=s(82272),o=s(68949);const n=new a.Z({concurrency:1}),l=async(e,t)=>{n.add((async()=>{const s=await(e=>{const t=(0,r.eA)();return t.updateContainer(e),t.toBlob()})(e);(0,i.t8)(s,t)}))};const d=new class{constructor(){this.size=0,(0,o.rC)(this,{size:o.LO,set:o.aD.bound,increment:o.aD.bound})}set(e){this.size=e}increment(){this.size++}};n.on("idle",(()=>{d.set(0)})),n.on("add",(()=>{d.increment()}))},83886:(e,t,s)=>{"use strict";s.d(t,{Q:()=>r});const r=e=>{var t,s;return`https://trace.isendu.com/trace/${(null==e||null===(t=e.order)||void 0===t||null===(s=t.id)||void 0===s?void 0:s.split("o-")[1])||""}`}},50003:(e,t,s)=>{"use strict";s.d(t,{o:()=>o,rootStore:()=>a});var r=s(67294);const a=new(s(58576).My)(localStorage);a.setAppVersion("5.3.20");const i=(0,r.createContext)({rootStore:a,authStore:a.authStore,ordersStore:a.ordersStore,usersStore:a.userStore,companiesStore:a.companiesStore,ratesStore:a.ratesStore,carriersStore:a.carriersStore,marketplacesStore:a.marketplacesStore,shipmentsStore:a.shipmentsStore,websocketStore:a.websocketStore,adminStore:a.adminStore,pickupStore:a.pickupsStore,paymentSubscriptionsStore:a.paymentSubscriptionsStore,paymentMethodsStore:a.paymentMethodsStore,financeStore:a.financeStore,parcelsStore:a.parcelsStore,addressesStore:a.addressesStore,ordersListStateStore:a.ordersListStateStore,trackingNotificationsStore:a.trackingNotificationsStore,automationRulesStore:a.automationRulesStore,returnsListStateStore:a.returnsListStateStore,returnsStore:a.returnsStore,deliveryEstimateStore:a.deliveryEstimateStore,customRatesStore:a.customRatesStore,contactsStore:a.contactsStore,selfOnboardingStore:a.selfOnboardingStore,walletStore:a.walletStore,conversationsStore:a.conversationsStore,zebraPrintersStore:a.zebraPrintersStore,subscriptionsStore:a.subscriptionsStore,appsStore:a.appsStore,transactionalWhatsappStore:a.transactionalWhatsappStore}),o=()=>{const e=(0,r.useContext)(i);if(!e)throw new Error("useStore must be used within a StoreProvider.");return e}},21481:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});var r=s(67294);function a(e,t){const[s,a]=(0,r.useState)(e);return(0,r.useEffect)((()=>{const s=setTimeout((()=>{a(e)}),t);return()=>{clearTimeout(s)}}),[e,t]),s}},35431:(e,t,s)=>{"use strict";s.d(t,{y:()=>i});var r=s(49409),a=s(67294);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t]=r.Z.useForm();return(0,a.useEffect)((()=>{t.setFieldsValue(e)}),[t,e]),t}},53712:(e,t,s)=>{"use strict";s.d(t,{j:()=>c});var r=s(67294),a=s(97183),i=s(71230),o=s(15746),n=s(85893);const{Content:l}=a.default,d=["https://static-files-cdn.isendu.com/login_backgrounds/isu_background_1.jpg","https://static-files-cdn.isendu.com/login_backgrounds/isu_background_2.jpg","https://static-files-cdn.isendu.com/login_backgrounds/isu_background_3.jpg"];const c=e=>{let{contentSpan:t,children:s,type:c,className:p}=e;const u=(0,r.useMemo)((()=>{switch(c){case"login":return`url('${function(){const e=Math.floor(Math.random()*d.length);return d[e]}()}')`;case"passwordReset":case"changePassword":return"url('https://static-files-cdn.isendu.com/login_backgrounds/isu_background_3.jpg')"}}),[c]);return(0,n.jsx)(a.default,{className:`full-page-centered ${p||""}`,style:{background:"#fff",backgroundImage:u,backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:(0,n.jsx)(l,{children:(0,n.jsx)(i.Z,{justify:"center",className:"content",children:(0,n.jsx)(o.Z,{span:t,children:s})})})})}},86871:(e,t,s)=>{"use strict";s.d(t,{bd:()=>Ne,_j:()=>se,K5:()=>re});var r=s(50146),a=s(71230),i=s(15746),o=s(94199),n=s(19650),l=s(39563),d=s(57119),c=s(99165),p=s(80913),u=s(7085),h=s(79508),m=s(57254),g=s(44545),y=s(51066),f=s(71577),b=s(16114),v=s(19959),x=s(60843),S=s(20189),j=s(94095),w=s(74141),M=s(82272),C=s(65682),A=s(50003),T=s(63755),O=s(62184),P=s(29323),N=s(67294),_=s(86896),Z=s(44012),I=s(85893);const{confirm:D}=r.default,E=(0,P.Pi)((e=>{let{order:t,isHeader:s,className:r}=e;const[a,i]=(0,N.useState)(!1),{ordersStore:o}=(0,A.o)(),n=(0,_.Z)();return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(f.Z,{block:!0,className:r,type:s?"primary":"default",loading:a,onClick:()=>{D({title:n.formatMessage({id:"orderDetail.buttons.archiveorder.message"}),okText:"Ok",cancelText:n.formatMessage({id:"generic.cancel"}),onOk:()=>{i(!0),o._archiveOrder(t.order.id,!0).then((()=>v.T.template("ARCHIVED_ORDERS"))).then((()=>i(!1)))},centered:!0})},children:(0,I.jsx)(Z.Z,{id:"ordersList.ordersStatus.archive",defaultMessage:"Archive"})})})}));var k=s(32895),L=s(35677),R=s(59102),F=s(16549),U=s(35823),G=s.n(U),B=s(50049),$=s(1407),z=s(25108);const{confirm:W}=r.default,H=(0,B.vU)({successCancelShipmentMessage:{id:"ordersTable.navBar.notification.success.cancelShipment",defaultMessage:"Success"},errorCancelShipmentTitle:{id:"orderDetail.navBar.notification.error.cancelShipmentTitle",defaultMessage:"Error"},errorCancelShipmentMessage:{id:"orderDetail.navBar.notification.error.cancelShipmentMessage",defaultMessage:"Error cancel shipment"},errorBulkPickingListTitle:{id:"ordersTable.bulkPickingList.notification.error.title",defaultMessage:"Error"},errorBulkPickingListMessage:{id:"ordersTable.bulkPickingList.notification.error.message",defaultMessage:"Error downloading picking list doc"},pickingListPrinted:{id:"ordersTable.pickingList.printed",defaultMessage:"Printed"},pickingListAt:{id:"ordersTable.pickingList.at",defaultMessage:"at"},pickingListImage:{id:"ordersTable.pickingList.image",defaultMessage:"Image"},pickingListItem:{id:"ordersTable.pickingList.item",defaultMessage:"Item"},pickingListItems:{id:"ordersTable.pickingList.items",defaultMessage:"Items"},pickingListSku:{id:"ordersTable.pickingList.sku",defaultMessage:"SKU"},pickingListReceiver:{id:"ordersTable.pickingList.receiver",defaultMessage:"Receiver"},pickingListNote:{id:"ordersTable.pickingList.note",defaultMessage:"Note"},pickingListQty:{id:"ordersTable.pickingList.qty",defaultMessage:"QTY"},pickingListByItem:{id:"ordersTable.pickingList.byItem",defaultMessage:"By item"},pickingListByOrder:{id:"ordersTable.pickingList.byOrder",defaultMessage:"By order"},pickingListOrders:{id:"ordersTable.pickingList.orders",defaultMessage:"Orders"},pickingListOrder:{id:"ordersTable.pickingList.order",defaultMessage:"Order"},pickingListTotalQty:{id:"ordersTable.pickingList.totalQty",defaultMessage:"Total QTY"},pickingListTotal:{id:"ordersTable.pickingList.total",defaultMessage:"Total"},errorBulkPrintTitle:{id:"ordersTable.bulkPrint.notification.error.title",defaultMessage:"Error"},errorBulkPrintMessage:{id:"ordersTable.bulkPrint.notification.error.message",defaultMessage:"Error downloading label doc"},successForceAsDeliveredMessage:{id:"ordersTable.navBar.forceAsDelivered.notification.success",defaultMessage:"Success"},errorForceAsDeliveredMessage:{id:"ordersTable.navBar.forceAsDelivered.notification.failure",defaultMessage:"Operation failed"}}),V=(0,P.Pi)((e=>{var t,s,a,i,c,P,D;let{order:U,shipOrders:B}=e;const{ordersStore:V,carriersStore:q,companiesStore:Y,rootStore:K,addressesStore:X}=(0,A.o)(),[Q,J]=(0,N.useState)(!1),[ee,te]=(0,N.useState)(!1),[se,re]=(0,N.useState)(!1),[ae,ie]=(0,N.useState)(!1),[oe,ne]=(0,N.useState)(!1),[le,de]=(0,N.useState)(null),[ce,pe]=(0,N.useState)(null),[ue,he]=(0,N.useState)(!1),me=(0,_.Z)(),ge=(0,p.useFlag)(S.V.isenduCarriersForSelfOnboarders),ye=!(null===(t=Y.companyInfo)||void 0===t||!t.useZebraBrowserPrinter),[fe,be]=(0,N.useState)(!1),[ve,xe]=(0,N.useState)(!1);(0,N.useEffect)((()=>()=>V.setDownloadLock(!1)),[V]);const Se={at:me.formatMessage(H.pickingListAt),image:me.formatMessage(H.pickingListImage),items:me.formatMessage(H.pickingListItems),item:me.formatMessage(H.pickingListItem),sku:me.formatMessage(H.pickingListSku),receiver:me.formatMessage(H.pickingListReceiver),note:me.formatMessage(H.pickingListNote),orders:me.formatMessage(H.pickingListOrders),order:me.formatMessage(H.pickingListOrder),printed:me.formatMessage(H.pickingListPrinted),qty:me.formatMessage(H.pickingListQty),totalQty:me.formatMessage(H.pickingListTotalQty),total:me.formatMessage(H.pickingListTotal),byItem:me.formatMessage(H.pickingListByItem),byOrder:me.formatMessage(H.pickingListByOrder)},je=(0,M.lo)(me,U,X.senderAddressesArray,q.selectedCarriers),we=U.order.internalNote;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(n.Z,{className:"NavBarActions",direction:"horizontal",children:[U.order.status===y.OrderStatuses.PENDING&&(0,M.HY)(U,q.selectedCarriers)||U.order.status===y.OrderStatuses.ERROR?(0,I.jsxs)(f.Z,{id:"navBarActions.button.createShipment",className:"NavBarActions__CreateShipmentButton NavBarActions__Button",loading:ae,onClick:async()=>{""!==K.accountWarningType?(K.setModalWarningVisible(!0),K.modalWarningAlreadySeen&&K.setModalWarningAlreadySeen(!1)):await B([U],q.selectedCarriers,q.mappedAvailableCarriers,(e=>{ie(!1),(0,M.w2)(e,K,me)}),ie,!ge)},children:[(0,I.jsx)("span",{children:" "})," ",(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.createShipment",defaultMessage:"Create shipment"})]}):U.order.status&&U.order.status===y.OrderStatuses.GENERATING_LABELS?(0,I.jsxs)(f.Z,{className:"NavBarActions__Button ",type:"primary",loading:!0,disabled:!0,children:[(0,I.jsx)("span",{children:" "}),(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.generating",defaultMessage:"Generating"})]}):U.order.status&&"generated_label"===(0,j.Gg)(U.order.status)?(0,I.jsxs)(f.Z,{className:"NavBarActions__Button NavBarActions__Button--WhiteText",type:"text",disabled:!0,children:[!(null!==(s=U.shipment)&&void 0!==s&&null!==(a=s.responses[0])&&void 0!==a&&a.labelPrinted)&&(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.shipmentCreated",defaultMessage:"Shipment created"}),(null===(i=U.shipment)||void 0===i||null===(c=i.responses[0])||void 0===c?void 0:c.labelPrinted)&&(0,I.jsxs)("div",{className:"NavBarActions__Button NavBarActions__Button--WhiteText",children:[(0,I.jsx)(h.Z,{})," ",(0,I.jsx)(Z.Z,{id:"ordersTable.shipOrders.labelPrinted",defaultMessage:"Label printed"})]})]}):U.order.info17Track?(0,I.jsx)(E,{order:U,isHeader:!0,className:"NavBarActions__ActionDropdownButton NavBarActions__Button"}):!U.order.status||"in_transit"!==(0,j.Gg)(U.order.status)&&"delivered"!==(0,j.Gg)(U.order.status)&&"exception"!==(0,j.Gg)(U.order.status)?(0,M.HY)(U,q.selectedCarriers)?"":(0,I.jsx)(o.Z,{placement:"bottom",title:je,children:(0,I.jsx)(f.Z,{className:"NavBarActions__Button NavBarActions__ShipmentNotReady",type:"text",disabled:!0,children:(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.shipmentNotReady",defaultMessage:"Shipment not ready"})})}):(0,I.jsx)(f.Z,{className:"NavBarActions__Button NavBarActions__Button--WhiteText",type:"text",disabled:!0,children:"delivered"===U.order.status&&U.order.returnCreated?(0,I.jsxs)("div",{className:"NavBarActions__Button NavBarActions__Button--WhiteText",children:[(0,I.jsx)(h.Z,{}),(0,I.jsx)(Z.Z,{id:"ordersTable.shipOrders.returnCreated",defaultMessage:"Return created"})]}):(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.shipmentShipped",defaultMessage:"Shipment shipped"})}),!U.order.info17Track&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(b.Z,{overlayStyle:{boxShadow:"1px 1px 10px 0px rgb(0 0 0 / 13%)"},className:"navbar-print-dropdown",trigger:["click"],menu:function(){var e,t,s,r,a,i,o,n,l,d;const c=[{key:"ordersTable.callToAction.printOrderSummary",label:(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.printOrderSummary",defaultMessage:"Order Summary"}),onClick:async()=>{const e=await V.getOrderSummary({ids:[U.order.id]});G()((0,M.Mi)(e.file,"application/pdf"),`${e.name}.pdf`)}},{key:"ordersTable.callToAction.batchPickingList.byItem",label:(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.batchPickingList.byItem",defaultMessage:"Picking list by item"}),onClick:()=>be(!0)},{key:"ordersTable.callToAction.batchPickingList.byOrder",label:(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.batchPickingList.byOrder",defaultMessage:"Picking list by order"}),onClick:()=>xe(!0)}];var p,u,h;return(e=>{if(e.order.status){const t=(0,j.Gg)(e.order.status);return["generated_label","in_transit","delivered","exception"].includes(t)}return!1})(U)&&!U.order.info17Track&&(c.splice(0,0,{key:"navBarActions.menuItem.shippingLabel",label:(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.printShippingLabels",defaultMessage:"Shipping label"}),onClick:async()=>{try{var e;if(null!==(e=U.order.shippingInformation)&&void 0!==e&&e.selectedCarrierId&&U.order.id){var t,s;if((0,R.H)([U],q)){var r,a,i;const e=null===(r=U.order.shippingInformation)||void 0===r?void 0:r.selectedCarrierId,t=null===(a=q.allAvailableCarriersMap.data[e])||void 0===a||null===(i=a.carrier)||void 0===i?void 0:i.internalCode;return void(t===x._.BRT?pe(U.order.id):t===x._.SEUR&&de(U.order.id))}he(!0),await(0,R.qw)({ids:[U.order.id],onError:e=>{he(!1),z.log(e)},directPrinting:null===(t=Y.companyInfo)||void 0===t?void 0:t.directPrinting,printCustomsDocuments:null===(s=Y.companyInfo)||void 0===s?void 0:s.printCustomsDocuments,useZebraBrowserPrinter:ye}),he(!1)}}catch(e){z.log(e)}}}),null!==(p=U.shipment)&&void 0!==p&&p.responses&&null!==(u=U.shipment)&&void 0!==u&&u.responses[0]&&null!==(h=U.shipment.responses[0].returnLabel)&&void 0!==h&&h.labelUrl&&c.splice(1,0,{key:"navBarActions.menuItem.returnLabel",label:(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.printReturnLabels",defaultMessage:"Return label"}),onClick:async()=>{try{await(async e=>{var t,s;null!=U&&U.order.id&&await(0,R.qw)({ids:[U.order.id],onError:()=>{v.T.error(me.formatMessage(H.errorBulkPrintTitle),me.formatMessage(H.errorBulkPrintMessage))},directPrinting:null===(t=Y.companyInfo)||void 0===t?void 0:t.directPrinting,printCustomsDocuments:null===(s=Y.companyInfo)||void 0===s?void 0:s.printCustomsDocuments,labelType:e,useZebraBrowserPrinter:ye})})("return")}catch(e){}}})),!U.order.status||"generated_label"!==(0,j.Gg)(U.order.status)&&"in_transit"!==(0,j.Gg)(U.order.status)&&"delivered"!==(0,j.Gg)(U.order.status)&&"exception"!==(0,j.Gg)(U.order.status)||U.order.info17Track||c.push({key:"bulkBanner.menuItem.manifest",label:(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.batchManifest",defaultMessage:"Manifest"}),onClick:()=>{const e=(new Date).toISOString(),t=[];U.shipment&&t.push(U);try{var s,r,a,i;(0,w.rc)(t),(0,C.S)((0,I.jsx)(F.q,{orders:t||[],carrierCode:null===(s=t[0].shipment)||void 0===s||null===(r=s.request.carrier)||void 0===r?void 0:r.internalCode}),"manifest"+(null===(a=t[0].shipment)||void 0===a||null===(i=a.request.carrier)||void 0===i?void 0:i.carrierName.replace(/\s/g,""))+`-${e}.pdf`)}catch(e){z.error(e)}}}),null!==(e=U.shipment)&&void 0!==e&&e.responses&&(null===(t=U.shipment)||void 0===t?void 0:t.responses.length)>=1&&null!==(s=U.shipment)&&void 0!==s&&s.responses[0]&&null!==(r=U.shipment)&&void 0!==r&&null!==(a=r.responses[0].documents)&&void 0!==a&&a.waybill&&c.push({key:"navBarActions.menuItem.waybill",label:(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.waybill",defaultMessage:"Waybill DOC"}),onClick:async()=>{try{await(async()=>{var e,t;if(null!==(e=U.shipment)&&void 0!==e&&null!==(t=e.responses[0].documents)&&void 0!==t&&t.waybill)try{const e=await V.getWaybill(U.shipment.request.id||" "),t="waybill-"+((0,j.X5)(null==U?void 0:U.order.id)||" ").toString()+".pdf";G()((0,M.Mi)(e,"application/pdf"),t)}catch(e){z.error(e),v.T.error(me.formatMessage(H.errorBulkPrintTitle),me.formatMessage(H.errorBulkPrintMessage))}})()}catch(e){}}}),null!==(i=U.shipment)&&void 0!==i&&i.responses&&(null===(o=U.shipment)||void 0===o?void 0:o.responses.length)>=1&&null!==(n=U.shipment)&&void 0!==n&&n.responses[0]&&null!==(l=U.shipment)&&void 0!==l&&null!==(d=l.responses[0].documents)&&void 0!==d&&d.waybill&&c.push({key:"navBarActions.menuItem.shipmentReceipt",label:(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.shipmentReceipt",defaultMessage:"Shipment Receipt"}),onClick:async()=>{try{await(async()=>{var e,t;if(null!==(e=U.shipment)&&void 0!==e&&null!==(t=e.responses[0].documents)&&void 0!==t&&t.shipmentReceipt)try{const e=await V.getShipmentReceipt(U.shipment.request.id||" "),t="shipmentReceipt-"+((0,j.X5)(null==U?void 0:U.order.id)||" ").toString()+".pdf";G()((0,M.Mi)(e,"application/pdf"),t)}catch(e){z.error(e),v.T.error(me.formatMessage(H.errorBulkPrintTitle),me.formatMessage(H.errorBulkPrintMessage))}})()}catch(e){}}}),{items:c}}(),placement:"bottomRight",getPopupContainer:()=>document.getElementById("navBarActions.button.print")||document.body,children:(0,I.jsxs)(f.Z,{loading:ue,type:"primary",id:"navBarActions.button.print",className:"NavBarActions__PrintButton NavBarActions__Button",onClick:()=>{ne(!1)},children:[(0,I.jsx)(Z.Z,{id:"nav_bar_actions.dropdown.print",defaultMessage:"Print"}),(0,I.jsx)("span",{children:" "}),(0,I.jsx)(m.Z,{})]})}),(0,I.jsx)(b.Z,{trigger:["click"],menu:function(){const e=[{key:"ordersTable.callToAction.editInternalNote",label:we?(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.editInternalNote",defaultMessage:"Edit internal note"}):(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.addInternalNote",defaultMessage:"Add internal note"}),onClick:()=>{we?T.m.openEditModal(U.order):T.m.openAddModal(U.order)}},{key:"Manage tags",label:(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.manageTags",defaultMessage:"Manage order tags"}),onClick:()=>{$.K.openManageTagsModal(U.order)}},{key:"navBarActions.menuItem.archiveUnarchive",disabled:!U,onClick:()=>{r.default.confirm({centered:!0,title:U.order.archived?me.formatMessage({id:"orderDetail.buttons.unarchiveorder.message",defaultMessage:"Unarchive order"}):me.formatMessage({id:"orderDetail.buttons.archiveorder.message",defaultMessage:"Archive order"}),icon:(0,I.jsx)(d.Z,{}),cancelText:me.formatMessage({id:"generic.cancel",defaultMessage:"Cancel"}),onOk:async()=>{null!=U&&U.order.id&&(te(!0),U.order.archived?await V._archiveOrder(U.order.id,!1):await V._archiveOrder(U.order.id,!0),te(!1),ne(!1))}})},label:(0,I.jsxs)(l.xv,{disabled:!U||ee,children:[ee&&(0,I.jsx)(u.Z,{}),U.order.archived?(0,I.jsx)(Z.Z,{id:"orderDetail.buttons.unarchiveorder",defaultMessage:"Unarchive order"}):(0,I.jsx)(Z.Z,{id:"orderDetail.buttons.archiveorder",defaultMessage:"Archive order"})]})}];return U.order.status&&"generated_label"===(0,j.Gg)(U.order.status)&&e.splice(0,0,{key:"navBarActions.menuItem.cancelShipment",disabled:!U,label:(0,I.jsxs)(l.xv,{disabled:!U||Q,children:[Q&&(0,I.jsx)(u.Z,{}),(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.cancelShipment",defaultMessage:"Cancel shipment"})]}),onClick:()=>{W({title:me.formatMessage({id:"orderDetail.modal.cancelShipment",defaultMessage:"Do you want to cancel this shipment?"}),icon:(0,I.jsx)(d.Z,{}),centered:!0,onOk:()=>{var e;U.order.id&&null!==(e=U.shipment)&&void 0!==e&&e.request.id?(J(!0),V.deleteShipment(U.order.id,U.shipment.request.id).then((()=>{J(!1),ne(!1),v.T.success({message:me.formatMessage(H.successCancelShipmentMessage)})})).catch((e=>{J(!1),ne(!1),v.T.error(me.formatMessage(H.errorCancelShipmentTitle),me.formatMessage(H.errorCancelShipmentMessage)),z.log(e)}))):z.error("Order",U,"doesn't have a shipmentRequestId")}})}}),(0,M.eu)(U)&&e.push({key:"navBarActions.menuItem.setManualDelivered",label:(0,I.jsxs)(l.xv,{disabled:!U||se,children:[se&&(0,I.jsx)(u.Z,{}),(0,I.jsx)(Z.Z,{id:"orderDetail.buttons.setManualDelivered",defaultMessage:"Manually set as delivered"})]}),onClick:()=>{W({title:me.formatMessage({id:"orderDetail.buttons.setManualDelivered.confirm.message",defaultMessage:"Are you sure to manually set order as delivered?"}),icon:(0,I.jsx)(d.Z,{}),onOk:async()=>{(0,M.eu)(U)&&U.order.id&&(re(!0),V.patchManualCloseOrder([U.order.id]).then((()=>{v.T.success({message:me.formatMessage(H.successForceAsDeliveredMessage)})})).catch((()=>{v.T.error({message:me.formatMessage(H.errorForceAsDeliveredMessage)})})).finally((()=>{re(!1)})))}})}}),{items:e}}(),placement:"bottomLeft",children:(0,I.jsx)(f.Z,{id:"navBarActions.button.actionDropdown",className:"NavBarActions__ActionDropdownButton NavBarActions__Button",type:"primary",onClick:()=>{ne(!oe)},children:(0,I.jsx)(g.Z,{})})})]})]}),null!==ce&&(0,I.jsx)(L.p,{mode:"single",visible:null!==ce,onDone:async e=>{var t,s;await(0,R.qw)({ids:[ce],onError:()=>{v.T.error({message:me.formatMessage(H.errorBulkPrintTitle),description:me.formatMessage(H.errorBulkPrintMessage)})},directPrinting:null===(t=Y.companyInfo)||void 0===t?void 0:t.directPrinting,printCustomsDocuments:null===(s=Y.companyInfo)||void 0===s?void 0:s.printCustomsDocuments,startPosition:e,useZebraBrowserPrinter:ye}),pe(null)},onCancel:()=>{pe(null)}}),null!==le&&(0,I.jsx)(k.l,{mode:"single",onlySeur:!0,visible:null!==le,onDone:async e=>{var t,s;await(0,R.qw)({ids:[le],onError:()=>{v.T.error({message:me.formatMessage(H.errorBulkPrintTitle),description:me.formatMessage(H.errorBulkPrintMessage)})},directPrinting:null===(t=Y.companyInfo)||void 0===t?void 0:t.directPrinting,printCustomsDocuments:null===(s=Y.companyInfo)||void 0===s?void 0:s.printCustomsDocuments,startPosition:e,useZebraBrowserPrinter:ye}),de(null)},onCancel:()=>{de(null)}}),fe&&(0,I.jsx)(O.k,{companyName:(null==Y||null===(P=Y.companyInfo)||void 0===P?void 0:P.name)||"",order:U,labels:Se,ordering:O._.AggregatedByItem,onSuccess:()=>{z.log("Items Picking List generated"),V.setDownloadLock(!1),be(!1),(0,w.d_)([U.order.id])},fileName:`pickinglist-items-${(new Date).toISOString()}.pdf`}),ve&&(0,I.jsx)(O.k,{companyName:(null==Y||null===(D=Y.companyInfo)||void 0===D?void 0:D.name)||"",order:U,labels:Se,ordering:O._.AggregatedByOrder,onSuccess:()=>{z.log("Orders Picking List generated"),V.setDownloadLock(!1),xe(!1),(0,w.d_)([U.order.id])},fileName:`pickinglist-orders-${(new Date).toISOString()}.pdf`})]})}));var q=s(94184),Y=s.n(q),K=s(25108);const X=(0,B.vU)({pickingListPrinted:{id:"ordersTable.pickingList.printed",defaultMessage:"Printed"},pickingListAt:{id:"ordersTable.pickingList.at",defaultMessage:"at"},pickingListImage:{id:"ordersTable.pickingList.image",defaultMessage:"Image"},pickingListItem:{id:"ordersTable.pickingList.item",defaultMessage:"Item"},pickingListItems:{id:"ordersTable.pickingList.items",defaultMessage:"Items"},pickingListSku:{id:"ordersTable.pickingList.sku",defaultMessage:"SKU"},pickingListQty:{id:"ordersTable.pickingList.qty",defaultMessage:"QTY"},pickingListOrders:{id:"ordersTable.pickingList.orders",defaultMessage:"Orders"},pickingListTotalQty:{id:"ordersTable.pickingList.totalQty",defaultMessage:"Total QTY"},errorBulkPrintTitle:{id:"ordersTable.bulkPrint.notification.error.title",defaultMessage:"Error"},errorBulkPrintMessage:{id:"ordersTable.bulkPrint.notification.error.message",defaultMessage:"Error downloading label doc"}}),Q=(0,P.Pi)((e=>{let{pickup:t}=e;const{ordersStore:s,carriersStore:a,pickupStore:i}=(0,A.o)(),l=(0,_.Z)();async function d(){try{await i.deletePickup(t.pk),v.T.success({message:l.formatMessage({id:"pickupTable.callToAction.deletePickupSuccess",defaultMessage:"Pickup successfully deleted"})})}catch(e){K.log(e),v.T.error({message:l.formatMessage({id:"pickupTable.callToAction.deletePickupError",defaultMessage:"Error deleting pickup"})})}}const c=(0,N.useMemo)((()=>new Date(t.date.start.isoDateTime)<new Date),[t.date.start.isoDateTime]),p=(0,N.useMemo)((()=>"deleted"===t.status),[t.status]);const u={items:[{key:"navBarActionsPickups.menuItem.shippingLabel",label:(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.printShippingLabels",defaultMessage:"Shipping label"}),onClick:async()=>{try{await(async()=>{const e=t.orders;if(e)try{const t=await s.getLabelsForPickup({orders:e,isAdmin:"true"===localStorage.getItem("isAdmin")});if(!t)return;const r=`${t.name}.${t.type.toLowerCase()}`;if(Array.isArray(t.file))for(const e of t.file)G()((0,M.Mi)(e.file,"buffer"),`${e.name}.${e.type.toLowerCase()}`);else G()((0,M.Mi)(t.file,"buffer"),r)}catch(e){K.error(e),v.T.error(l.formatMessage(X.errorBulkPrintTitle),l.formatMessage(X.errorBulkPrintMessage))}})()}catch(e){}}},{key:"bulkBanner.menuItem.manifest",onClick:async()=>{var e,s,r,a;const i=(new Date).toISOString();t.orders&&((0,w.rc)(t.orders),(0,C.S)((0,I.jsx)(F.q,{orders:t.orders||[],carrierCode:null===(e=t.orders[0].shipment)||void 0===e||null===(s=e.request.carrier)||void 0===s?void 0:s.internalCode}),"manifest"+(null===(r=t.orders[0].shipment)||void 0===r||null===(a=r.request.carrier)||void 0===a?void 0:a.carrierName.replace(/\s/g,""))+`-${i}.pdf`))},label:(0,I.jsx)(Z.Z,{id:"ordersTable.callToAction.batchManifest",defaultMessage:"Manifest"})}]};return(0,I.jsxs)(n.Z,{className:"NavBarActions",direction:"horizontal",children:[(0,I.jsx)(b.Z,{trigger:["click"],menu:u,placement:"bottomRight",children:(0,I.jsxs)(f.Z,{loading:s.isLoading,id:"navBarActionsPickups.button.print",type:"primary",className:"NavBarActions__PrintButton NavBarActions__Button",onClick:()=>{},children:[(0,I.jsx)(Z.Z,{id:"nav_bar_actions.dropdown.print",defaultMessage:"Print"}),(0,I.jsx)("span",{children:" "}),(0,I.jsx)(m.Z,{})]})}),function(){var e;const s=a.selectedCarriersArray.find((e=>{var s;return e.id===(null===(s=t.carrier)||void 0===s?void 0:s.selectedCarrierId)}));return(null==s||null===(e=s.carrier)||void 0===e?void 0:e.internalCode)===x._.UPS_ONBOARDING}()&&(0,I.jsx)(o.Z,{title:c&&(0,I.jsx)(Z.Z,{id:"pickupTable.callToAction.deletePickupTooltip",defaultMessage:"You can't delete this pickup anymore"}),children:(0,I.jsx)(f.Z,{onClick:function(){r.default.confirm({title:l.formatMessage({id:"pickupTable.callToAction.deletePickup",defaultMessage:"Delete Pickup"}),content:l.formatMessage({id:"pickupTable.callToAction.deletePickupConfirmation",defaultMessage:"Are you sure you want to delete this pickup?"}),okText:l.formatMessage({id:"generic.confirm",defaultMessage:"Confirm"}),cancelText:l.formatMessage({id:"generic.cancel",defaultMessage:"Cancel"}),onOk:d,centered:!0})},type:"primary",className:Y()("NavBarActions__Button",{NavBarActions__DeleteButton:!c&&!p}),disabled:c||p,children:(0,I.jsx)(Z.Z,{id:"generic.delete",defaultMessage:"Delete"})})})]})}));var J=s(74855),ee=s.n(J);const te=(0,B.vU)({successCopyTitle:{id:"orderDetail.navBar.notification.success.copyTitle",defaultMessage:"Copied!"},tooltipCopy:{id:"orderDetail.navBar.tooltip.copy",defaultMessage:"Copy"},firstLevelShipments:{id:"navbar.firstLevel.shipments",defaultMessage:"Shipments"},firstLevelIntegrations:{id:"navbar.firstLevel.integrations",defaultMessage:"Integrations"},confirmShipmentModalTitle:{id:"orderDetail.navbar.confirmShipmentModal.title",defaultMessage:"Attention! Paperless Trade data incomplete."},confirmShipmentModalContent:{id:"orderDetail.navbar.confirmShipmentModal.content",defaultMessage:"You have entered some data for Paperless Trade but not the minimum set required to activate this feature.{br}By creating the shipment anyway, the data entered will not be sent Product details"},confirmShipmentModalConfirm:{id:"orderDetail.navbar.confirmShipmentModal.confirm",defaultMessage:"Create shipment"},confirmShipmentModalCancel:{id:"orderDetail.navbar.confirmShipmentModal.cancel",defaultMessage:"Cancel"}});const se=(0,P.Pi)((e=>{var t,s;let{order:u}=e;const{shipmentsStore:h,companiesStore:m,addressesStore:g,paymentMethodsStore:y,ordersStore:f,paymentSubscriptionsStore:b,subscriptionsStore:x}=(0,A.o)(),w=(0,_.Z)(),M=(0,p.useFlag)(S.V.isenduCarriersForSelfOnboarders),C=(0,p.useFlag)(S.V.useNewPlans),T=!(null==u||null===(t=u.order.paperlessShippingFileInfo)||void 0===t||!t.length)&&(null==u||null===(s=u.order.paperlessShippingFileInfo)||void 0===s?void 0:s.length)>0,O=!(null==u||!u.order.paperlessShippingData),P=(0,N.useCallback)(((e,t,s,a,i)=>{r.default.confirm({title:w.formatMessage(te.confirmShipmentModalTitle),icon:(0,I.jsx)(d.Z,{}),content:w.formatMessage(te.confirmShipmentModalContent,{br:(0,I.jsx)("br",{})}),width:500,okText:w.formatMessage(te.confirmShipmentModalConfirm),cancelText:w.formatMessage(te.confirmShipmentModalCancel),onOk:async()=>{await(0,j.z1)({addressesStore:g,paymentMethodsStore:y,paymentSubscriptionsStore:b,subscriptionsStore:x,companiesStore:m,shipmentsStore:h,ordersStore:f,intl:w,orders:e,selectedCarriers:t,availableCarriers:s,onError:a,setLoadingButton:i,blockIsenduCarriersForSelfOnboarder:!M,useNewPlans:C})}})}),[g,m,w,f,y,b,h,M,x,C]),D=(0,N.useCallback)((async(e,t,s,r,a)=>{!T&&O||T&&!O?P(e,t,s,r,a):await(0,j.z1)({addressesStore:g,paymentMethodsStore:y,paymentSubscriptionsStore:b,subscriptionsStore:x,companiesStore:m,shipmentsStore:h,ordersStore:f,intl:w,orders:e,selectedCarriers:t,availableCarriers:s,onError:r,setLoadingButton:a,blockIsenduCarriersForSelfOnboarder:!M,useNewPlans:C})}),[T,O,g,y,b,x,m,h,f,w,P,M,C]);return(0,I.jsx)("div",{className:"order-nav-bar",children:(0,I.jsxs)(a.Z,{justify:"space-around",align:"middle",className:"order-nav-bar-row",children:[(0,I.jsx)(i.Z,{span:9,children:(0,I.jsx)(Z.Z,{id:"orderDetail.header.orderDetail",defaultMessage:"Order detail"})}),(0,I.jsx)(i.Z,{span:6,children:(0,I.jsx)(a.Z,{justify:"space-around",align:"middle",children:(0,I.jsx)(i.Z,{span:24,className:"text-align-center",children:(0,I.jsx)("div",{className:"text-align-center DetailId",children:(0,I.jsx)(o.Z,{placement:"bottom",title:(0,I.jsxs)(n.Z,{direction:"horizontal",children:[(0,I.jsxs)(l.xv,{className:"tooltip-text",children:["#",(0,j.Ip)(u)]}),(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(ee(),{text:(0,j.Ip)(u),onCopy:()=>{v.T.success({message:w.formatMessage(te.successCopyTitle)})},children:(0,I.jsx)(c.Z,{title:w.formatMessage(te.tooltipCopy),id:"orderDetailNavBar.icon.copy"})})})]}),children:(0,I.jsxs)(l.xv,{children:["#",(0,j.Ip)(u)]})})})})})}),(0,I.jsx)(i.Z,{span:9,children:(0,I.jsx)(V,{order:u,shipOrders:D})})]})})})),re=(0,P.Pi)((e=>{let{pickup:t}=e;const s=(0,_.Z)();return(0,I.jsx)("div",{className:"pickup-nav-bar",children:(0,I.jsxs)(a.Z,{justify:"space-around",align:"middle",className:"pickup-nav-bar-row",children:[(0,I.jsx)(i.Z,{span:9,children:(0,I.jsx)(Z.Z,{id:"pickupDetail.header.pickupDetail",defaultMessage:"Pickup Detail"})}),(0,I.jsx)(i.Z,{span:6,children:(0,I.jsx)(a.Z,{justify:"space-around",align:"middle",children:(0,I.jsx)(i.Z,{span:24,className:"text-align-center",children:(0,I.jsx)("span",{className:"text-align-center DetailId",children:(0,I.jsx)(o.Z,{placement:"bottom",title:(0,I.jsxs)(n.Z,{direction:"horizontal",children:[(0,I.jsx)(l.xv,{className:"tooltip-text",children:t.pickUpRef?t.pickUpRef:" "}),(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(ee(),{text:(t.pickUpRef?t.pickUpRef:" ")||"",onCopy:()=>{v.T.success({message:s.formatMessage(te.successCopyTitle)})},children:(0,I.jsx)(c.Z,{title:s.formatMessage(te.tooltipCopy),id:"pickupDetail.icon.copy"})})})]}),children:(0,I.jsx)(l.xv,{children:t.pickUpRef?`#${t.pickUpRef}`:" "})})})})})}),(0,I.jsx)(i.Z,{span:9,children:(0,I.jsx)(Q,{pickup:t})})]})})}));var ae=s(27049),ie=s(70506),oe=s(57493),ne=s(79655),le=s(84403);const de=`${le._.cdnAssetsUrl}/icons/navbar/news.svg`,ce=`${le._.cdnAssetsUrl}/icons/navbar/news_hover.svg`,pe=(0,N.memo)((()=>{const[e,t]=(0,N.useState)(!1);return(0,I.jsx)(o.Z,{placement:"bottom",title:(0,I.jsx)(Z.Z,{id:"beamer.menu.tooltip",defaultMessage:"News in isendu"}),children:(0,I.jsx)("div",{onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),className:"BeamerButton Header__NavBar__Button beamerButton",children:(0,I.jsx)("img",{src:e?ce:de,alt:"News"})})})}));pe.displayName="BeamerMenu";var ue=s(54549),he=s(49101),me=s(70913),ge=s(52125);const ye=`${le._.cdnAssetsUrl}/icons/navbar/help_modal.svg`,fe="https://share.hsforms.com/1m4sOCBXbQRefzMxJZdbvbA3w1m7",be="https://share.hsforms.com/1VdSGf2ZfRZiEQLjcwDO7SQ3w1m7",ve="https://share.hsforms.com/18Cy5ZppzTnmIBOhAgH90OQ3w1m7";const xe=function(e){var t;const{isModalOpen:s,setIsModalOpen:a}=e,{usersStore:i}=(0,A.o)(),o=null===(t=i.userInfo)||void 0===t?void 0:t.language;return(0,I.jsx)(r.default,{className:"NavBar__HelpModal",bodyStyle:{display:"flex",flexDirection:"column",justifyContent:"center",padding:"2px 2px 2px 2px",height:"430px"},destroyOnClose:!0,open:s,closable:!0,centered:!0,maskClosable:!1,width:450,footer:null,closeIcon:(0,I.jsx)(ue.Z,{onClick:()=>a(!1)}),children:(0,I.jsxs)("div",{className:"NavBar__HelpModal__Content",children:[(0,I.jsxs)("div",{className:"NavBar__HelpModal__UserInfoBox",children:[(0,I.jsx)("img",{style:{width:"100px",height:"100px",marginBottom:"8px"},src:ye}),(0,I.jsx)(l.xv,{className:"NavBar__HelpModal__UserName",children:"Isendu help"})]}),(0,I.jsx)(ae.Z,{className:"NavBar__HelpModal__Divider"}),(0,I.jsx)("div",{onClick:()=>{var e;window.open(`${(e=>{switch(e){case"it":return fe;case"en":default:return be;case"es":return ve}})(o)}?email=${(null===(e=i.userInfo)||void 0===e?void 0:e.email)||""}`,"_blank")},children:(0,I.jsxs)("div",{className:"NavBar__HelpModal__SettingsButton",children:[(0,I.jsx)(he.Z,{}),(0,I.jsx)(Z.Z,{id:"helpmenu.item.newTicket",defaultMessage:"<b>New ticket</b>",values:{b:e=>(0,I.jsx)("b",{children:e})}})]})}),(0,I.jsx)(ae.Z,{className:"NavBar__HelpModal__Divider"}),(0,I.jsx)("div",{onClick:()=>{window.open("https://support.isendu.com/_hcms/mem/login?redirect_url=https://support.isendu.com/ticket","_blank")},children:(0,I.jsxs)("div",{className:"NavBar__HelpModal__SettingsButton",children:[(0,I.jsx)(d.Z,{}),(0,I.jsx)(Z.Z,{id:"helpmenu.item.supportPage",defaultMessage:"Support Page"})]})}),(0,I.jsx)(ae.Z,{className:"NavBar__HelpModal__Divider"}),(0,I.jsx)("div",{onClick:()=>window.open("https://support.isendu.com/","_blank"),children:(0,I.jsxs)("div",{className:"NavBar__HelpModal__SettingsButton",children:[(0,I.jsx)(me.Z,{}),(0,I.jsx)(Z.Z,{id:"helpmenu.item.helpCenter",defaultMessage:"Help center"})]})}),(0,I.jsx)(ae.Z,{className:"NavBar__HelpModal__Divider"}),(0,I.jsx)("div",{onClick:()=>{window.open("https://changelog.isendu.com/requests/it","_blank")},children:(0,I.jsxs)("div",{className:"NavBar__HelpModal__SettingsButton",children:[(0,I.jsx)(ge.Z,{}),(0,I.jsx)(Z.Z,{id:"helpmenu.item.featureRequest",defaultMessage:"Suggest a feature"})]})})]})})};const Se=`${le._.cdnAssetsUrl}/icons/navbar/help.svg`,je=`${le._.cdnAssetsUrl}/icons/navbar/help_hover.svg`;function we(){const[e,t]=(0,N.useState)(!1),[s,r]=(0,N.useState)(!1);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(o.Z,{placement:"bottom",title:(0,I.jsx)(Z.Z,{id:"help.menu.tooltip",defaultMessage:"Isendu help"}),children:(0,I.jsx)("div",{onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),onClick:()=>r(!s),className:"NewsButton Header__NavBar__Button",children:(0,I.jsx)("img",{src:e?je:Se,alt:"News"})})}),(0,I.jsx)(xe,{isModalOpen:s,setIsModalOpen:r})]})}we.displayName="HelpMenu";var Me=s(89366),Ce=s(55035),Ae=s(51890),Te=s(64238);const Oe=Te.e.CDN_ASSETS_URL+"/"+Te.e.DEFAULT_AVATAR_URI,Pe=(0,P.Pi)((()=>{var e,t,s,a,i,o,d,c,p;const{companiesStore:u,usersStore:h,authStore:m}=(0,A.o)(),[g,y]=(0,N.useState)(!1);let f="",b="";var v,x;null!==(e=h.userInfo)&&void 0!==e&&e.firstName&&null!==(t=h.userInfo)&&void 0!==t&&t.lastName?(b=`${null===(v=h.userInfo)||void 0===v?void 0:v.firstName} ${null===(x=h.userInfo)||void 0===x?void 0:x.lastName}`,f="capitalize"):h.userInfo&&(b=h.userInfo.email.length>12?`${h.userInfo.email.slice(0,12)}...`:h.userInfo.email);return(0,I.jsxs)("span",{onClick:()=>y(!g),className:"Header__NavBar__Button",children:[(0,I.jsxs)(n.Z,{className:"pl-1 pr-1",children:[(0,I.jsx)(Ae.C,{style:{marginBottom:"3px"},src:(null===(s=u.companyInfo)||void 0===s?void 0:s.logo)||Oe,children:null===(a=h.userInfo)||void 0===a||null===(i=a.firstName)||void 0===i?void 0:i.substring(0,1).toUpperCase()}),(0,I.jsx)(l.xv,{style:{maxWidth:"300px"},className:`username ${f}`,ellipsis:!0,children:b})]}),(0,I.jsx)(r.default,{className:"NavBar__UserModal",bodyStyle:{display:"flex",flexDirection:"column",justifyContent:"center",padding:"2px 2px 2px 2px",height:"300px"},destroyOnClose:!0,open:g,closable:!0,centered:!0,maskClosable:!1,width:450,footer:null,children:(0,I.jsxs)("div",{className:"NavBar__UserModal__Content",children:[(0,I.jsxs)("div",{className:"NavBar__UserModal__UserInfoBox",children:[(0,I.jsx)(Ae.C,{style:{width:"60px",height:"60px",marginBottom:"8px"},src:(null===(o=u.companyInfo)||void 0===o?void 0:o.logo)||Oe,children:null===(d=h.userInfo)||void 0===d||null===(c=d.firstName)||void 0===c?void 0:c.substring(0,1).toUpperCase()}),(0,I.jsx)(l.xv,{className:"NavBar__UserModal__UserName",children:b}),(0,I.jsx)(l.xv,{className:"NavBar__UserModal__Email",children:null===(p=h.userInfo)||void 0===p?void 0:p.email})]}),(0,I.jsx)(ae.Z,{className:"NavBar__UserModal__Divider"}),(0,I.jsx)(ne.rU,{to:ie.H.settings.account,children:(0,I.jsxs)("div",{className:"NavBar__UserModal__SettingsButton",children:[(0,I.jsx)(Me.Z,{}),(0,I.jsx)(Z.Z,{id:"settings.menu.tooltip",defaultMessage:"Settings"})]})}),(0,I.jsx)(ae.Z,{className:"NavBar__UserModal__Divider"}),(0,I.jsxs)("div",{className:"NavBar__UserModal__DisconnectButton",onClick:()=>{m.doLogout(),localStorage.clear(),window.location.reload()},children:[(0,I.jsx)(Ce.Z,{}),(0,I.jsx)(Z.Z,{id:"menu.item.logout",defaultMessage:"Logout"})]})]})})]})}));const Ne=(0,P.Pi)((()=>{const e=oe.S.isSidebarLocked?"Header__Navbar__Hamburger--open":"";return(0,I.jsxs)("div",{className:"Header__NavBar",children:[(0,I.jsxs)("div",{className:"Header__NavBar__Company",children:[(0,I.jsx)("div",{className:`Header__Navbar__Hamburger ${e}`,onClick:()=>oe.S.toggleLock(),children:(0,I.jsx)("div",{className:"icon"})}),(0,I.jsx)("div",{className:"Header__NavBar__Logo",children:(0,I.jsx)(ne.rU,{to:ie.H.commonRoot,children:(0,I.jsx)(l.TR,{full:!0})})})]}),(0,I.jsxs)("div",{className:"Header__NavBar__Menu",children:[(0,I.jsxs)("div",{className:"Header__NavBar__Actions",children:[(0,I.jsx)(pe,{}),(0,I.jsx)(we,{})]}),(0,I.jsx)(ae.Z,{className:"Header__NavBar__Menu__Divider",type:"vertical"}),(0,I.jsx)(Pe,{})]})]})}))},68206:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});const r=(0,s(50049).vU)({genericApply:{id:"generic.apply",defaultMessage:"Apply"},genericBack:{id:"generic.back",defaultMessage:"Back"},genericEdit:{id:"generic.edit",defaultMessage:"Edit"},genericCancel:{id:"generic.cancel",defaultMessage:"Cancel"},genericClose:{id:"generic.close",defaultMessage:"Close"},genericConfirm:{id:"generic.confirm",defaultMessage:"Confirm"},genericCreatedAt:{id:"generic.createdAt",defaultMessage:"Created at: {date}"},genericImport:{id:"generic.import",defaultMessage:"Import"},genericNext:{id:"generic.next",defaultMessage:"Next"},genericOk:{id:"generic.ok",defaultMessage:"Ok"},genericPrevious:{id:"generic.previous",defaultMessage:"Previous"},genericQuantity:{id:"generic.quantity",defaultMessage:"{format, select, short {Qt.} other {Quantity}}"},genericSave:{id:"generic.save",defaultMessage:"Save"},genericSelect:{id:"generic.select",defaultMessage:"Select"},genericUpdate:{id:"generic.update",defaultMessage:"Update"},genericConnect:{id:"generic.connect",defaultMessage:"Connect"},genericAdd:{id:"generic.add",defaultMessage:"Add"},genericConfirmRemove:{id:"generic.confirm.remove",defaultMessage:"Yes, remove"}})},57493:(e,t,s)=>{"use strict";s.d(t,{S:()=>c});var r,a,i,o=s(43269),n=s(53229),l=s(68949);const d="SIDEBAR_LOCKED";const c=new(r=class{open(){this.isSidebarOpen=!0}close(){this.isSidebarOpen=!1}toggleLock(){this.isSidebarOpen=!this.isSidebarOpen,this.isSidebarLocked=!this.isSidebarLocked,localStorage.setItem(d,JSON.stringify(this.isSidebarLocked))}constructor(){(0,o.Z)(this,"isSidebarOpen",a,this),(0,o.Z)(this,"isSidebarLocked",i,this),(0,l.rC)(this);const e=localStorage.getItem(d);if(e){const t=JSON.parse(e);this.isSidebarOpen=t,this.isSidebarLocked=t}}},a=(0,n.Z)(r.prototype,"isSidebarOpen",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=(0,n.Z)(r.prototype,"isSidebarLocked",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,n.Z)(r.prototype,"open",[l.aD],Object.getOwnPropertyDescriptor(r.prototype,"open"),r.prototype),(0,n.Z)(r.prototype,"close",[l.aD],Object.getOwnPropertyDescriptor(r.prototype,"close"),r.prototype),(0,n.Z)(r.prototype,"toggleLock",[l.aD],Object.getOwnPropertyDescriptor(r.prototype,"toggleLock"),r.prototype),r)},98933:(e,t,s)=>{"use strict";s.d(t,{G:()=>l});var r,a,i=s(43269),o=s(53229),n=s(68949);const l=new(r=class{setIntlInstance(e){this.instance=e}constructor(){(0,i.Z)(this,"instance",a,this),(0,n.rC)(this)}},a=(0,o.Z)(r.prototype,"instance",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,o.Z)(r.prototype,"setIntlInstance",[n.aD],Object.getOwnPropertyDescriptor(r.prototype,"setIntlInstance"),r.prototype),r)},58989:(e,t,s)=>{"use strict";s.d(t,{X:()=>c});var r,a,i,o=s(43269),n=s(53229),l=s(52861),d=s(68949);const c=new(r=class{setLanguage(e){this.language=e,this.getTranslations()}async getTranslations(){const e=this.isProductionBuild?function(){const e=new Date,t=e.getMinutes(),s=10*Math.floor(t/10);return e.setMinutes(s,0,0),e.getTime()}():Date.now(),t=`https://cdn.simplelocalize.io/fff354762e3645bcbe9238b506390c6b/${this.isProductionBuild?"_production":"_latest"}/${this.language}?nocache=${e}`;l.Z.get(t).then((e=>{let{data:t}=e;(0,d.z)((()=>this.messages=t))})).catch((()=>{l.Z.get(`/simplelocalize/fff354762e3645bcbe9238b506390c6b/${this.language}?nocache=${e}`).then((e=>{let{data:t}=e;(0,d.z)((()=>this.messages=t))}))}))}isLanguageSupported(e){return/^(it|es|en|de)(-|_)?([A-Za-z]{2})?$/i.test(e)}setBrowserLanguage(){var e;const t=(null===(e=navigator.languages)||void 0===e?void 0:e[0])||navigator.language,s=this.isLanguageSupported(t)?t.split(/[_-]+/)[0]:"en";this.language=s}constructor(){(0,o.Z)(this,"language",a,this),(0,o.Z)(this,"messages",i,this),this.isProductionBuild=!0,(0,d.rC)(this),this.setBrowserLanguage()}},a=(0,n.Z)(r.prototype,"language",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"en"}}),i=(0,n.Z)(r.prototype,"messages",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,n.Z)(r.prototype,"setLanguage",[d.aD],Object.getOwnPropertyDescriptor(r.prototype,"setLanguage"),r.prototype),(0,n.Z)(r.prototype,"getTranslations",[d.aD],Object.getOwnPropertyDescriptor(r.prototype,"getTranslations"),r.prototype),(0,n.Z)(r.prototype,"setBrowserLanguage",[d.aD],Object.getOwnPropertyDescriptor(r.prototype,"setBrowserLanguage"),r.prototype),r)},63755:(e,t,s)=>{"use strict";s.d(t,{m:()=>p});var r,a,i,o,n=s(43269),l=s(53229),d=s(50003),c=s(68949);const p=new(r=class{openEditModal(e){this.isEditModalVisible=!0,this.selectedOrder=e}openAddModal(e){this.isAddModalVisible=!0,this.selectedOrder=e}closeEditModal(){this.isEditModalVisible=!1,this.selectedOrder=null}closeAddModal(){this.isAddModalVisible=!1,this.selectedOrder=null}async saveNote(e){var t,s,r,a,i;const o={id:null===(t=this.selectedOrder)||void 0===t?void 0:t.id,storeOrderId:null===(s=this.selectedOrder)||void 0===s?void 0:s.storeOrderId,notes:null===(r=this.selectedOrder)||void 0===r?void 0:r.customerNote,description:null===(a=this.selectedOrder)||void 0===a?void 0:a.name,total:null===(i=this.selectedOrder)||void 0===i?void 0:i.total,internalNote:e};await this.rootStore.ordersStore.patchManualOrder(o),(0,c.z)((()=>{this.selectedOrder&&(this.selectedOrder.internalNote=e)}))}constructor(e){(0,n.Z)(this,"isEditModalVisible",a,this),(0,n.Z)(this,"isAddModalVisible",i,this),(0,n.Z)(this,"selectedOrder",o,this),this.rootStore=e,(0,c.rC)(this)}},a=(0,l.Z)(r.prototype,"isEditModalVisible",[c.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=(0,l.Z)(r.prototype,"isAddModalVisible",[c.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=(0,l.Z)(r.prototype,"selectedOrder",[c.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),(0,l.Z)(r.prototype,"openEditModal",[c.aD],Object.getOwnPropertyDescriptor(r.prototype,"openEditModal"),r.prototype),(0,l.Z)(r.prototype,"openAddModal",[c.aD],Object.getOwnPropertyDescriptor(r.prototype,"openAddModal"),r.prototype),(0,l.Z)(r.prototype,"closeEditModal",[c.aD],Object.getOwnPropertyDescriptor(r.prototype,"closeEditModal"),r.prototype),(0,l.Z)(r.prototype,"closeAddModal",[c.aD],Object.getOwnPropertyDescriptor(r.prototype,"closeAddModal"),r.prototype),(0,l.Z)(r.prototype,"saveNote",[c.aD],Object.getOwnPropertyDescriptor(r.prototype,"saveNote"),r.prototype),r)(d.rootStore)},18485:(e,t,s)=>{"use strict";s.d(t,{Cz:()=>i,Te:()=>l,Ty:()=>n,of:()=>a,tF:()=>r,y2:()=>o});const r="https://static-files-cdn.isendu.com/notifications/success.svg",a="https://static-files-cdn.isendu.com/images/isendu_EmptyStatePlaceholder_azure.webp",i="https://static-files-cdn.isendu.com/carriers_logos/ups_onboarding.svg",o={english:"https://www.ups.com/assets/resources/webcontent/en_GB/terms_carriage_eur.pdf",italian:"https://www.ups.com/assets/resources/webcontent/it_IT/terms_carriage_it.pdf",spanish:"https://www.ups.com/assets/resources/webcontent/es_ES/terms_carriage_es.pdf",german:"https://www.ups.com/de/de/support/shipping-support/legal-terms-conditions.page"},n={english:"https://www.ups.com/gb/en/support/shipping-support/shipping-special-care-regulated-items/prohibited-items.page",italian:"https://www.ups.com/it/it/support/shipping-support/shipping-special-care-regulated-items/prohibited-items.page",spanish:"https://www.ups.com/es/es/support/shipping-support/shipping-special-care-regulated-items/prohibited-items.page",german:"https://www.ups.com/de/de/support/shipping-support/shipping-special-care-regulated-items/prohibited-items.page"},l={english:"https://www.ups.com/assets/resources/webcontent/en_GB/UTA.pdf",italian:"https://www.ups.com/assets/resources/webcontent/it_IT/UTA.pdf",spanish:"https://www.ups.com/assets/resources/webcontent/es_ES/UTA.pdf",german:"https://www.ups.com/assets/resources/webcontent/de_DE/terms_carriage_de.pdf"}},19621:(e,t,s)=>{"use strict";s.d(t,{AS:()=>i,GM:()=>h,Gw:()=>o,Kp:()=>p,aL:()=>u,xk:()=>l});var r=s(60843),a=s(18485);const i=e=>n(e)&&(o(e)||l(e)||d(e)||c(e)),o=e=>{var t,s;const r=new Date(null===(t=e.credentials)||void 0===t||null===(s=t.clientAuthentication)||void 0===s?void 0:s.refreshTokenExpiration);return r.getTime()-(new Date).getTime()<6048e5&&r>new Date},n=e=>{var t;return(null===(t=e.carrier)||void 0===t?void 0:t.internalCode)===r._.UPS_ONBOARDING},l=e=>{var t,s;const r=null===(t=e.credentials)||void 0===t||null===(s=t.clientAuthentication)||void 0===s?void 0:s.refreshTokenExpiration;return new Date(r)<new Date},d=e=>{var t;return!(null!==(t=e.credentials)&&void 0!==t&&t.accountNumber)},c=e=>{var t,s;return!(null!==(t=e.credentials)&&void 0!==t&&null!==(s=t.clientAuthentication)&&void 0!==s&&s.refreshTokenExpiration)},p=e=>{switch(e){case"en":default:return a.y2.english;case"it":return a.y2.italian;case"es":return a.y2.spanish;case"de":return a.y2.german}},u=e=>{switch(e){case"en":default:return a.Ty.english;case"it":return a.Ty.italian;case"es":return a.Ty.spanish;case"de":return a.Ty.german}},h=e=>{switch(e){case"en":default:return a.Te.english;case"it":return a.Te.italian;case"es":return a.Te.spanish;case"de":return a.Te.german}}},22665:(e,t,s)=>{"use strict";s.d(t,{J:()=>A});var r=s(68628),a=s(99165),i=s(51066),o=s(19006),n=s(34041),l=s(76772),d=s(49409),c=s(32787),p=s(27049),u=s(19650),h=s(39563),m=s(19959),g=s(82272),y=s(67294),f=s(74855),b=s.n(f),v=s(50049),x=s(86896),S=s(44012),j=s(43148),w=s(85893);const M=(0,v.vU)({labelSellerId:{id:"modal.integrations.stores.amazon.label.sellerId",defaultMessage:"Seller Id"},messageSellerId:{id:"modal.integrations.stores.amazon.message.sellerId",defaultMessage:"Enter your SellerId"},labelCountry:{id:"modal.integrations.stores.amazon.label.country",defaultMessage:"Country"},messageCountry:{id:"modal.integrations.stores.amazon.message.country",defaultMessage:"Select the country of your Amazon store"},labelMWSAuthToken:{id:"modal.integrations.stores.amazon.label.MWSAuthToken",defaultMessage:"MWS Auth Token"},messageMWSAuthToken:{id:"modal.integrations.stores.amazon.message.MWSAuthToken",defaultMessage:"Enter your MWS Auth Token"},labelOrderSource:{id:"modal.integrations.stores.amazon.label.orderSource",defaultMessage:"Order Source"},labelMerchant:{id:"modal.integrations.stores.amazon.label.merchant",defaultMessage:"Merchant"},successCopyTitle:{id:"modal.integrations.stores.amazon.notification.success.copyTitle",defaultMessage:"Copied!"},tooltipCopy:{id:"modal.integrations.stores.amazon.tooltip.copy",defaultMessage:"Copy"}}),{Option:C}=n.default,A=e=>{let{formInstance:t}=e;const s=(0,x.Z)(),[f,v]=(0,y.useState)(),[A,T]=(0,y.useState)(null==t?void 0:t.getFieldValue("countryCode")),O=Object.keys(i.cartRoverCartIds.AMAZON),P=o.countriesArray.filter((e=>O.includes(e.alpha2))).sort(((e,t)=>e.name>t.name?1:t.name>e.name?-1:0));return(0,y.useEffect)((()=>{if(A){const e=i.cartRoverDeveloperIds.AMAZON[`${A}`];e&&e!==f&&v(e)}}),[f,A]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.Z,{style:{paddingRight:"40px"},type:"info",message:(0,w.jsx)(h.xv,{children:(0,w.jsx)(S.Z,{id:"modal.integrations.stores.amazon.dismissedServiceNotification",defaultMessage:"<strong>Important</strong> - This version of the Amazon Marketplace integration has been discontinued because it is outdated. In order to restore your orders, please integrate your Amazon shop again. <aContactUs><underline>Contact us</underline></aContactUs>if you need clarification or assistance.",values:{strong:e=>(0,w.jsx)("strong",{children:e}),underline:e=>(0,w.jsx)("u",{style:{textDecoration:"underline"},children:e}),aContactUs:e=>(0,w.jsx)("a",{href:"mailto:support@isendu.com",target:"_blank",rel:"noreferrer",children:e}),br:(0,w.jsx)("br",{})}})}),icon:(0,w.jsx)(r.Z,{style:{padding:"0px 12px 0 6px"}}),showIcon:!0,className:"mb-1"}),(0,w.jsx)(d.Z.Item,{label:(0,w.jsx)(S.Z,{id:"integrations.stores.selectedStore",defaultMessage:"Selected store"}),children:(0,w.jsxs)("div",{className:"flex align-center gap-1",children:[(0,w.jsx)(h.Ee,{src:h.wJ,width:40}),(0,w.jsx)(h.xv,{children:"Amazon"})]})}),(0,w.jsx)(d.Z.Item,{name:"customName",label:(0,w.jsx)(S.Z,{id:"integrations.stores.storeDescription",defaultMessage:"Description"}),help:(0,w.jsx)(S.Z,{id:"integrations.stores.storeDescriptionHelp",defaultMessage:"This will help identify different accounts from the same store."}),children:(0,w.jsx)(c.default,{placeholder:s.formatMessage({id:"integrations.stores.storeDescriptionPlaceholder",defaultMessage:"Insert a description"})})}),(0,w.jsx)(p.Z,{className:"w-full"}),(0,w.jsx)("div",{className:"mb-2",children:(0,w.jsx)(h.xv,{type:"secondary",children:(0,w.jsx)(S.Z,{id:"integrations.credentials",defaultMessage:"Credentials"})})}),(0,w.jsx)(j.mq,{name:"countryCode",label:s.formatMessage(M.labelCountry),required:!0,message:s.formatMessage(M.messageCountry),children:(0,w.jsx)(n.default,{disabled:!(null==t||!t.getFieldValue("orderSource")),dropdownMatchSelectWidth:!1,onChange:e=>{A!==e&&T(e)},getPopupContainer:e=>e||document.body,children:P.map((e=>(0,w.jsx)(C,{value:e.alpha2,children:(0,g.Z9)(e)},e.alpha2)))})}),(0,w.jsx)(j.mq,{name:"developerId",label:(0,w.jsxs)("span",{children:[(0,w.jsx)(S.Z,{id:"modal.integrations.stores.amazon.label.developerId",defaultMessage:"Developer ID"}),(0,w.jsx)(h.nw,{title:(0,w.jsx)(S.Z,{id:"modal.integrations.stores.amazon.tooltip.developerId",defaultMessage:'Copy this code and use it to configure a new Developer (if not already present) in your Amazon Seller Central "Manage your apps" section'})})]}),children:f?(0,w.jsxs)(u.Z,{children:[(0,w.jsx)(h.xv,{children:f}),(0,w.jsx)(b(),{text:f,onCopy:()=>{m.T.success({message:s.formatMessage(M.successCopyTitle)})},children:(0,w.jsx)(a.Z,{title:s.formatMessage(M.tooltipCopy),id:"modal.integrations.stores.amazon.tooltip.copy"})})]}):(0,w.jsx)(h.xv,{type:"secondary",children:(0,w.jsx)("i",{children:(0,w.jsx)(S.Z,{id:"modal.integrations.stores.amazon.developerId.selectCountry",defaultMessage:"-- Select a Country first --"})})})}),(0,w.jsx)(j.mq,{name:"sellerId",label:s.formatMessage(M.labelSellerId),required:!0,message:s.formatMessage(M.messageSellerId),children:(0,w.jsx)(c.default,{})}),(0,w.jsx)(j.mq,{name:"authMWS",label:s.formatMessage(M.labelMWSAuthToken),required:!0,message:s.formatMessage(M.messageMWSAuthToken),children:(0,w.jsx)(c.default,{})}),(0,w.jsx)(j.mq,{name:"orderSource",label:s.formatMessage(M.labelOrderSource),hidden:!0,children:(0,w.jsx)(c.default,{})}),(0,w.jsx)(j.mq,{name:"merchantPk",label:s.formatMessage(M.labelMerchant),hidden:!0,children:(0,w.jsx)(c.default,{})})]})}},43148:(e,t,s)=>{"use strict";s.d(t,{Xu:()=>u,mq:()=>d,n7:()=>p,xs:()=>h,yn:()=>c});var r=s(34041),a=s(49409),i=s(9676),o=s(44012),n=s(85893);const{Option:l}=r.default,d=e=>{let{name:t,label:s,children:r,required:i,message:o,initialValue:l,hidden:d}=e;return(0,n.jsx)(a.Z.Item,{name:t,label:s,initialValue:l,rules:[{required:i,message:o}],hidden:d,children:r},t)},c=()=>(0,n.jsx)(a.Z.Item,{label:(0,n.jsx)(o.Z,{id:"marketList.modal.step2.label.sync-back",defaultMessage:"Shop feedback"}),name:"whenToAutoSync",initialValue:"generated",children:(0,n.jsxs)(r.default,{dropdownMatchSelectWidth:!1,children:[(0,n.jsx)(l,{value:"in_transit",children:(0,n.jsx)(o.Z,{id:"marketList.modal.step2.sync-back-in-transit",defaultMessage:'Set order status to "fulfilled" at point in time when parcel status is In transit'})}),(0,n.jsx)(l,{value:"generated",children:(0,n.jsx)(o.Z,{id:"marketList.modal.step2.sync-back-generated",defaultMessage:'Set order status to "fulfilled" at point in time when label is generated'})}),(0,n.jsx)(l,{value:"never",children:(0,n.jsx)(o.Z,{id:"marketList.modal.step2.sync-back-never",defaultMessage:"Never synchronize your orders back"})})]})}),p=e=>{let{label:t,id:s}=e;return(0,n.jsx)(h,{label:t,id:s,name:"notifications"})},u=e=>{let{label:t,id:s}=e;return(0,n.jsx)(h,{label:t,id:s,name:"trackExternallyHandled"})},h=e=>{let{label:t,id:s,name:r}=e;return(0,n.jsx)(a.Z.Item,{label:(0,n.jsx)("div",{children:" "}),name:r,valuePropName:"checked",colon:!1,children:(0,n.jsx)(i.Z,{id:s,children:t})})}},42405:(e,t,s)=>{"use strict";s.d(t,{j:()=>b});var r=s(49409),a=s(32787),i=s(27049),o=s(34041),n=s(71577),l=s(39563),d=s(50003),c=s(29323),p=s(67294),u=s(50049),h=s(86896),m=s(44012),g=s(43148),y=s(85893);const f=(0,u.vU)({labelApiUser:{id:"modal.integrations.stores.magento1.label.apiUser",defaultMessage:"Api user"},messageApiUser:{id:"modal.integrations.stores.magento1.message.apiUser",defaultMessage:"Enter your Api user"},labelApiKey:{id:"modal.integrations.stores.magento1.label.apiKey",defaultMessage:"Api key"},messageApiKey:{id:"modal.integrations.stores.magento1.message.apiKey",defaultMessage:"Enter your store Api key"},labelStoreUrl:{id:"modal.integrations.stores.magento1.label.storeUrl",defaultMessage:"Store url"},messageStoreUrl:{id:"modal.integrations.stores.magento1.message.storeUrl",defaultMessage:"Enter your store url"},tooltipCustomDelivery:{id:"modal.integrations.stores.magento1.message.customDelivery.tooltip",defaultMessage:"Click to synchronize and import the shipping methods present on the check-out page of your e-commerce. They will become the conditions used with the automaton rules"},customDeliveryLabel:{id:"modal.integrations.stores.magento1.label.customDelivery",defaultMessage:"Checkout shipping methods"},buttonDeliveryMessage:{id:"modal.integrations.stores.magento1.message.customDelivery.button",defaultMessage:"Synchronize"},deliveryMessagePlaceholder:{id:"modal.integrations.stores.magento1.message.customDelivery.placeholder",defaultMessage:"Synchronize your data"}}),b=(0,c.Pi)((e=>{let{formInstance:t}=e;const s=(0,h.Z)(),{marketplacesStore:c}=(0,d.o)(),[u,b]=(0,p.useState)(),[v,x]=(0,p.useState)(!(null!=t&&t.getFieldValue("url")&&null!=t&&t.getFieldValue("password")&&null!=t&&t.getFieldValue("api_user"))),[S,j]=(0,p.useState)(!1),[w,M]=(0,p.useState)(!1);(0,p.useEffect)((()=>{var e;const s=t&&(null===(e=t.getFieldValue("customSettings"))||void 0===e?void 0:e.deliveryMethods);if(s&&s.length>0){const e=s.map((e=>e.id));t&&t.setFieldsValue({...t,customDelivery:e}),b(e)}}),[t]);const[C,A]=(0,p.useState)([]);(0,p.useEffect)((()=>{let e=c.magento1CustomDeliveryArray;if(!e||0===e.length){var s;const r=t&&(null===(s=t.getFieldValue("customSettings"))||void 0===s?void 0:s.deliveryMethods);e=r&&r.map((e=>({id:e.id,name:e.name})))}A(e||[])}),[c.magento1CustomDeliveryArray,t]),(0,p.useEffect)((()=>{const e=c.magento1CustomDeliveryArray;let t=!1;e&&0!==e.length||0!==C.length||(t=!0),M(t)}),[c.magento1CustomDeliveryArray,C]);const T=()=>{x(!(null!=t&&t.getFieldValue("url")&&null!=t&&t.getFieldValue("password")&&null!=t&&t.getFieldValue("api_user")))};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"mb-2",children:(0,y.jsx)(l.xv,{type:"secondary",children:(0,y.jsx)(m.Z,{id:"integrations.stores.description",defaultMessage:"Enter the details requested below to connect the store."})})}),(0,y.jsx)(r.Z.Item,{label:(0,y.jsx)(m.Z,{id:"integrations.stores.selectedStore",defaultMessage:"Selected store"}),children:(0,y.jsxs)("div",{className:"flex align-center gap-1",children:[(0,y.jsx)(l.Ee,{src:"https://static-files-cdn.isendu.com/stores_logos/magento_1.png",width:40}),(0,y.jsx)(l.xv,{children:"Magento 1"})]})}),(0,y.jsx)(r.Z.Item,{name:"customName",label:(0,y.jsx)(m.Z,{id:"integrations.stores.storeDescription",defaultMessage:"Description"}),help:(0,y.jsx)(m.Z,{id:"integrations.stores.storeDescriptionHelp",defaultMessage:"This will help identify different accounts from the same store."}),children:(0,y.jsx)(a.default,{placeholder:s.formatMessage({id:"integrations.stores.storeDescriptionPlaceholder",defaultMessage:"Insert a description"})})}),(0,y.jsx)(i.Z,{className:"w-full"}),(0,y.jsx)("div",{className:"mb-2",children:(0,y.jsx)(l.xv,{type:"secondary",children:(0,y.jsx)(m.Z,{id:"integrations.credentials",defaultMessage:"Credentials"})})}),(0,y.jsx)(g.mq,{name:"api_user",label:s.formatMessage(f.labelApiUser),required:!0,message:s.formatMessage(f.messageApiUser),children:(0,y.jsx)(a.default,{onChange:()=>T()})}),(0,y.jsx)(g.mq,{name:"password",label:s.formatMessage(f.labelApiKey),required:!0,message:s.formatMessage(f.messageApiKey),children:(0,y.jsx)(a.default,{onChange:()=>T()})}),(0,y.jsx)(g.mq,{name:"url",label:s.formatMessage(f.labelStoreUrl),required:!0,message:s.formatMessage(f.messageStoreUrl),children:(0,y.jsx)(a.default,{onChange:()=>T()})}),(0,y.jsx)(i.Z,{className:"w-full"}),(0,y.jsx)("div",{className:"mb-2",children:(0,y.jsx)(l.xv,{type:"secondary",children:(0,y.jsx)(m.Z,{id:"integrations.customization",defaultMessage:"Customizations"})})}),t&&(0,y.jsxs)(r.Z.Item,{name:"customDelivery",label:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{style:{display:"flex",textAlign:"right",lineHeight:"14px"},children:(0,y.jsx)(l.xv,{style:{whiteSpace:"initial"},children:s.formatMessage(f.customDeliveryLabel)})}),(0,y.jsx)("span",{children:(0,y.jsx)(l.nw,{title:s.formatMessage(f.tooltipCustomDelivery),style:{alignSelf:"self-end"}})})]}),children:[(0,y.jsx)(o.default,{mode:"multiple",maxTagCount:2,showArrow:!0,style:{width:"60%",color:"black",background:"white"},options:C.map((e=>({key:e.id,value:e.id,label:e.name}))),onChange:e=>{null==t||t.setFieldsValue({...t,customDelivery:e}),b(e)},value:u,disabled:w,placeholder:s.formatMessage(f.deliveryMessagePlaceholder)}),(0,y.jsx)(n.Z,{onClick:async()=>await(async()=>{j(!0),await c.getMagento1CustomDelivery(null==t?void 0:t.getFieldValue("url"),null==t?void 0:t.getFieldValue("password"),null==t?void 0:t.getFieldValue("api_user")).finally((()=>j(!1)))})(),disabled:v,loading:S,className:"CustomizationsSyncButton",children:(0,y.jsx)("span",{children:S?`${s.formatMessage(f.buttonDeliveryMessage).substring(0,3)}...`:s.formatMessage(f.buttonDeliveryMessage)})})]})]})}))},40398:(e,t,s)=>{"use strict";s.d(t,{z:()=>b});var r=s(67294),a=s(43148),i=s(49409),o=s(32787),n=s(27049),l=s(34041),d=s(71577),c=s(39563),p=s(50049),u=s(86896),h=s(44012),m=s(29323),g=s(50003),y=s(85893);const f=(0,p.vU)({labelStoreUrl:{id:"modal.integrations.stores.magento2.label.storeUrl",defaultMessage:"Store url"},messageStoreUrl:{id:"modal.integrations.stores.magento2.message.storeUrl",defaultMessage:"Enter your store url"},labelAccessToken:{id:"modal.integrations.stores.magento2.label.accessToken",defaultMessage:"Access Token"},messageAccessToken:{id:"modal.integrations.stores.magento2.message.accessToken",defaultMessage:"Enter your Access Token"},tooltipCustomDelivery:{id:"modal.integrations.stores.magento2.message.customDelivery.tooltip",defaultMessage:"Click to synchronize and import the shipping methods present on the check-out page of your e-commerce. They will become the conditions used with the automaton rules"},customDeliveryLabel:{id:"modal.integrations.stores.magento2.label.customDelivery",defaultMessage:"Checkout shipping methods"},buttonDeliveryMessage:{id:"modal.integrations.stores.magento2.message.customDelivery.button",defaultMessage:"Synchronize"},deliveryMessagePlaceholder:{id:"modal.integrations.stores.magento2.message.customDelivery.placeholder",defaultMessage:"Synchronize your data"}}),b=(0,m.Pi)((e=>{let{formInstance:t}=e;const s=(0,u.Z)(),{marketplacesStore:p}=(0,g.o)(),[m,b]=(0,r.useState)(),[v,x]=(0,r.useState)(!(null!=t&&t.getFieldValue("url")&&null!=t&&t.getFieldValue("accessToken"))),[S,j]=(0,r.useState)(!1),[w,M]=(0,r.useState)(!1);(0,r.useEffect)((()=>{var e;const s=t&&(null===(e=t.getFieldValue("customSettings"))||void 0===e?void 0:e.deliveryMethods);if(s&&s.length>0){const e=s.map((e=>e.id));t&&t.setFieldsValue({...t,customDelivery:e}),b(e)}}),[t]);const[C,A]=(0,r.useState)([]);(0,r.useEffect)((()=>{let e=p.magento2CustomDeliveryArray;if(!e||0===e.length){var s;const r=t&&(null===(s=t.getFieldValue("customSettings"))||void 0===s?void 0:s.deliveryMethods);e=r&&r.map((e=>({id:e.id,name:e.name})))}A(e||[])}),[p.magento2CustomDeliveryArray,t]),(0,r.useEffect)((()=>{const e=p.magento2CustomDeliveryArray;let t=!1;e&&0!==e.length||0!==C.length||(t=!0),M(t)}),[p.magento2CustomDeliveryArray,C]);const T=()=>{x(!(null!=t&&t.getFieldValue("url")&&null!=t&&t.getFieldValue("accessToken")))};return(0,y.jsxs)(y.Fragment,{children:[" ",(0,y.jsx)("div",{className:"mb-2",children:(0,y.jsx)(c.xv,{type:"secondary",children:(0,y.jsx)(h.Z,{id:"integrations.stores.description",defaultMessage:"Enter the details requested below to connect the store."})})}),(0,y.jsx)(i.Z.Item,{label:(0,y.jsx)(h.Z,{id:"integrations.stores.selectedStore",defaultMessage:"Selected store"}),children:(0,y.jsxs)("div",{className:"flex align-center gap-1",children:[(0,y.jsx)(c.Ee,{src:"https://static-files-cdn.isendu.com/stores_logos/magento_2.png",width:40}),(0,y.jsx)(c.xv,{children:"Magento 2"})]})}),(0,y.jsx)(i.Z.Item,{name:"customName",label:(0,y.jsx)(h.Z,{id:"integrations.stores.storeDescription",defaultMessage:"Description"}),help:(0,y.jsx)(h.Z,{id:"integrations.stores.storeDescriptionHelp",defaultMessage:"This will help identify different accounts from the same store."}),children:(0,y.jsx)(o.default,{placeholder:s.formatMessage({id:"integrations.stores.storeDescriptionPlaceholder",defaultMessage:"Insert a description"})})}),(0,y.jsx)(n.Z,{className:"w-full"}),(0,y.jsx)("div",{className:"mb-2",children:(0,y.jsx)(c.xv,{type:"secondary",children:(0,y.jsx)(h.Z,{id:"integrations.credentials",defaultMessage:"Credentials"})})}),(0,y.jsx)(a.mq,{name:"accessToken",label:s.formatMessage(f.labelAccessToken),required:!0,message:s.formatMessage(f.messageAccessToken),children:(0,y.jsx)(o.default.Password,{onChange:()=>T()})}),(0,y.jsx)(a.mq,{name:"url",label:s.formatMessage(f.labelStoreUrl),required:!0,message:s.formatMessage(f.messageStoreUrl),children:(0,y.jsx)(o.default,{onChange:()=>T()})}),(0,y.jsx)(n.Z,{className:"w-full"}),(0,y.jsx)("div",{className:"mb-2",children:(0,y.jsx)(c.xv,{type:"secondary",children:(0,y.jsx)(h.Z,{id:"integrations.customization",defaultMessage:"Customizations"})})}),t&&(0,y.jsxs)(i.Z.Item,{name:"customDelivery",label:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{style:{display:"flex",textAlign:"right",lineHeight:"14px"},children:(0,y.jsx)(c.xv,{style:{whiteSpace:"initial"},children:s.formatMessage(f.customDeliveryLabel)})}),(0,y.jsx)("span",{children:(0,y.jsx)(c.nw,{title:s.formatMessage(f.tooltipCustomDelivery),style:{alignSelf:"self-end"}})})]}),children:[(0,y.jsx)(l.default,{mode:"multiple",maxTagCount:2,showArrow:!0,style:{width:"60%",color:"black",background:"white"},options:C.map((e=>({key:e.id,value:e.id,label:e.name}))),onChange:e=>{null==t||t.setFieldsValue({...t,customDelivery:e}),b(e)},value:m,disabled:w,placeholder:s.formatMessage(f.deliveryMessagePlaceholder)}),(0,y.jsx)(d.Z,{onClick:async()=>await(async()=>{j(!0),await p.getMagento2CustomDelivery(null==t?void 0:t.getFieldValue("url"),null==t?void 0:t.getFieldValue("accessToken")).finally((()=>j(!1)))})(),disabled:v,loading:S,className:"CustomizationsSyncButton",children:(0,y.jsx)("span",{children:S?`${s.formatMessage(f.buttonDeliveryMessage).substring(0,3)}...`:s.formatMessage(f.buttonDeliveryMessage)})})]})]})}))},8705:(e,t,s)=>{"use strict";s.d(t,{C:()=>h});var r=s(43148),a=s(49409),i=s(32787),o=s(27049),n=s(39563),l=s(50049),d=s(86896),c=s(44012),p=s(85893);const u=(0,l.vU)({labelApiKey:{id:"modal.integrations.stores.opencart.label.apiKey",defaultMessage:"Api key"},messageApiKey:{id:"modal.integrations.stores.opencart.message.apiKey",defaultMessage:"Enter your Api key"},labelApiName:{id:"modal.integrations.stores.opencart.label.apiName",defaultMessage:"Api name"},messageApiName:{id:"modal.integrations.stores.opencart.message.apiName",defaultMessage:"Enter your Api name"},labelStoreUrl:{id:"modal.integrations.stores.opencart.label.storeUrl",defaultMessage:"Store url"},messageStoreUrl:{id:"modal.integrations.stores.opencart.message.storeUrl",defaultMessage:"Enter your store url"}}),h=()=>{const e=(0,d.Z)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(n.xv,{type:"secondary",children:(0,p.jsx)(c.Z,{id:"integrations.stores.description",defaultMessage:"Enter the details requested below to connect the store."})})}),(0,p.jsx)(a.Z.Item,{label:(0,p.jsx)(c.Z,{id:"integrations.stores.selectedStore",defaultMessage:"Selected store"}),children:(0,p.jsxs)("div",{className:"flex align-center gap-1",children:[(0,p.jsx)(n.Ee,{src:"https://static-files-cdn.isendu.com/stores_logos/opencart_2.svg",width:40}),(0,p.jsx)(n.xv,{children:"Opencart 2"})]})}),(0,p.jsx)(a.Z.Item,{name:"customName",label:(0,p.jsx)(c.Z,{id:"integrations.stores.storeDescription",defaultMessage:"Description"}),help:(0,p.jsx)(c.Z,{id:"integrations.stores.storeDescriptionHelp",defaultMessage:"This will help identify different accounts from the same store."}),children:(0,p.jsx)(i.default,{placeholder:e.formatMessage({id:"integrations.stores.storeDescriptionPlaceholder",defaultMessage:"Insert a description"})})}),(0,p.jsx)(o.Z,{className:"w-full"}),(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(n.xv,{type:"secondary",children:(0,p.jsx)(c.Z,{id:"integrations.credentials",defaultMessage:"Credentials"})})}),(0,p.jsx)(r.mq,{name:"api_key",label:e.formatMessage(u.labelApiKey),required:!0,message:e.formatMessage(u.messageApiKey),children:(0,p.jsx)(i.default,{})}),(0,p.jsx)(r.mq,{name:"api_name",label:e.formatMessage(u.labelApiName),required:!0,message:e.formatMessage(u.messageApiName),children:(0,p.jsx)(i.default,{})}),(0,p.jsx)(r.mq,{name:"url",label:e.formatMessage(u.labelStoreUrl),required:!0,message:e.formatMessage(u.messageStoreUrl),children:(0,p.jsx)(i.default,{})})]})}},85684:(e,t,s)=>{"use strict";s.d(t,{O:()=>C});var r=s(67294),a=s(50146),i=s(49409),o=s(32787),n=s(27049),l=s(71577),d=s(34041),c=s(39563),p=s(50049),u=s(86896),h=s(44012),m=s(29323),g=s(50003),y=s(91894),f=s(6129),b=s(71230),v=s(15746),x=s(77933),S=s(85893);const j=(0,m.Pi)((e=>{let{onSubmit:t,onBack:s,isLoading:a,url:i,customSettings:o}=e;const n=(0,u.Z)(),d=(0,p.vU)({editError:{id:"marketsList.step.three.prestashop.editError",defaultMessage:"Editing error"},retrieveOrdersErrorTitle:{id:"marketsList.step.three.prestashop.retrieveOrders.title",defaultMessage:"Ooops! Connection error"},retrieveOrdersErrorSubtitle:{id:"marketsList.step.three.prestashop.retrieveOrders.subtitle",defaultMessage:"check your credentials and retry"},transferTitleLeft:{id:"marketsList.step.three.prestashop.transfer.column.left",defaultMessage:"List of statuses"},transferTitleRight:{id:"marketsList.step.three.prestashop.transfer.column.right",defaultMessage:"Statuses to import"},transferSearchPlaceholder:{id:"marketsList.step.three.prestashop.transfer.searchPlaceholder",defaultMessage:"search for..."},transferCloseButton:{id:"marketsList.step.three.close",defaultMessage:"Close"},transferSaveButton:{id:"marketsList.step.three.save",defaultMessage:"Save"},transferCancelButton:{id:"marketsList.step.three.cancel",defaultMessage:"Cancel"},transferSelectAll:{id:"marketsList.step.three.prestashop.transfer.selectAll.label",defaultMessage:"Select all"},transferInvertSelection:{id:"marketsList.step.three.prestashop.transfer.invertSelection.label",defaultMessage:"Invert selection"}}),{marketplacesStore:h}=(0,g.o)(),[m,j]=(0,r.useState)([]),[w,M]=(0,r.useState)([]);return(0,r.useEffect)((()=>{if(!a){var e;const t=[],s=[],r=null===(e=h.prestashopCustomStatuses.get(i))||void 0===e?void 0:e.customStatuses;r&&r.length>0&&r.forEach((e=>{e.isForbidden||t.push({key:e.id,title:`${e.id} - ${e.name}`,description:`${e.name}`}),o?o.includes(e.id)&&s.push(e.id):e.isDefault&&s.push(e.id)})),j(t.sort(((e,t)=>Number(e.key)-Number(t.key)))),M(s.sort(((e,t)=>Number(e)-Number(t))))}}),[h.isLoading,h.prestashopCustomStatuses,a,o,i]),(0,S.jsx)(S.Fragment,{children:a?(0,S.jsx)(y.Z,{loading:h.isLoading,bordered:!1}):0===m.length?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(f.ZP,{status:"warning",title:n.formatMessage(d.retrieveOrdersErrorTitle),subTitle:n.formatMessage(d.retrieveOrdersErrorSubtitle)}),(0,S.jsx)(b.Z,{gutter:8,children:(0,S.jsx)(v.Z,{span:24,className:"text-align-center",children:(0,S.jsx)(l.Z,{onClick:s,children:n.formatMessage(d.transferCloseButton)})})})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(x.Z,{titles:[n.formatMessage(d.transferTitleLeft),n.formatMessage(d.transferTitleRight)],showSearch:!0,dataSource:m,targetKeys:w,onChange:e=>{e=e.sort(((e,t)=>Number(e)-Number(t))),M(e)},filterOption:(e,t)=>t.title.indexOf(e)>-1,render:e=>(0,S.jsx)(c.xv,{title:e.description,children:e.title}),listStyle:{minWidth:"45%",minHeight:"350px"},locale:{itemUnit:void 0,itemsUnit:void 0,searchPlaceholder:n.formatMessage(d.transferSearchPlaceholder),notFoundContent:void 0,selectAll:n.formatMessage(d.transferSelectAll),selectInvert:n.formatMessage(d.transferInvertSelection)}}),(0,S.jsx)("br",{}),(0,S.jsxs)(b.Z,{gutter:8,children:[(0,S.jsx)(v.Z,{span:12,className:"text-align-right",children:(0,S.jsx)(l.Z,{type:"primary",onClick:()=>t(w),disabled:!(w&&w.length>0),children:n.formatMessage(d.transferSaveButton)})}),(0,S.jsx)(v.Z,{span:12,className:"text-align-left",children:(0,S.jsx)(l.Z,{onClick:s,children:n.formatMessage(d.transferCancelButton)})})]})]})})}));var w=s(43148);const M=(0,p.vU)({labelApiKey:{id:"modal.integrations.stores.prestashop.label.apiKey",defaultMessage:"Api key"},messageApiKey:{id:"modal.integrations.stores.prestashop.message.apiKey",defaultMessage:"Enter your store Api key"},labelStoreUrl:{id:"modal.integrations.stores.prestashop.label.storeUrl",defaultMessage:"Store url"},messageStoreUrl:{id:"modal.integrations.stores.prestashop.message.storeUrl",defaultMessage:"Enter your store url"},labelCustomSettings:{id:"modal.integrations.stores.prestashop.label.customSettings",defaultMessage:"Statuses to import"},tooltipCustomSettings:{id:"modal.integrations.stores.prestashop.tooltip.customSettings",defaultMessage:"Orders with selected statuses will be imported from your store"},tooltipCustomDelivery:{id:"modal.integrations.stores.prestashop.message.customDelivery.tooltip",defaultMessage:"Click to synchronize and import the shipping methods present on the check-out page of your e-commerce. They will become the conditions used with the automaton rules"},messageCustomSettings:{id:"modal.integrations.stores.prestashop.message.customSettings",defaultMessage:"Select at least one status to import"},buttonMessage:{id:"modal.integrations.stores.prestashop.button.message",defaultMessage:"Change"},customDeliveryLabel:{id:"modal.integrations.stores.prestashop.label.customDelivery",defaultMessage:"Checkout shipping methods"},buttonDeliveryMessage:{id:"modal.integrations.stores.prestashop.message.customDelivery.button",defaultMessage:"Synchronize"},deliveryMessagePlaceholder:{id:"modal.integrations.stores.prestashop.message.customDelivery.placeholder",defaultMessage:"Synchronize your data"},modalTitle:{id:"modal.integrations.stores.prestashop.modal.title",defaultMessage:"Prestashop: statuses selection"}}),C=(0,m.Pi)((e=>{let{formInstance:t}=e;const s=(0,u.Z)(),{marketplacesStore:p}=(0,g.o)(),[m,y]=(0,r.useState)(),[f,b]=(0,r.useState)(),[v,x]=(0,r.useState)(!(null!=t&&t.getFieldValue("url")&&null!=t&&t.getFieldValue("key"))),[C,A]=(0,r.useState)(!1),[T,O]=(0,r.useState)(!1),[P,N]=(0,r.useState)(!1),[_,Z]=(0,r.useState)(!1),[I,D]=(0,r.useState)(""),[E,k]=(0,r.useState)(!1);(0,r.useEffect)((()=>{k(!!/^1\.[7-8]\.[0-9]+\.[0-9]+/.exec(I))}),[I]),(0,r.useEffect)((()=>{var e;t&&D(null===(e=t.getFieldValue("customSettings"))||void 0===e?void 0:e.version)}),[t]),(0,r.useEffect)((()=>{var e;const s=t&&(null===(e=t.getFieldValue("customSettings"))||void 0===e?void 0:e.trackExternallyHandled)||!1;null==t||t.setFieldsValue({trackExternallyHandled:s})}),[t]),(0,r.useEffect)((()=>{var e,s;let r=[];const a=t&&(null===(e=t.getFieldValue("customSettings"))||void 0===e||null===(s=e.statuses)||void 0===s?void 0:s.pending);if(a&&a.length>0)r=[...a],t&&t.setFieldsValue({...t,customStatuses:a});else{var i,o;const e=null===(i=p.prestashopCustomStatuses)||void 0===i||null===(o=i.get("-1"))||void 0===o?void 0:o.defaultStatuses;e&&e.length>0&&(r=e,t&&t.setFieldsValue({...t,customStatuses:e}))}y(r)}),[t,p.prestashopCustomStatuses]),(0,r.useEffect)((()=>{var e;const s=t&&(null===(e=t.getFieldValue("customSettings"))||void 0===e?void 0:e.deliveryMethods);if(s&&s.length>0){const e=s.map((e=>e.id));t&&t.setFieldsValue({...t,customDelivery:e}),b(e)}}),[t]);const[L,R]=(0,r.useState)([]);(0,r.useEffect)((()=>{let e=p.prestashopCustomDeliveryArray;if(!e||0===e.length){var s;const r=t&&(null===(s=t.getFieldValue("customSettings"))||void 0===s?void 0:s.deliveryMethods);e=r&&r.map((e=>({id:e.id,name:e.name,active:!0,disabled:!1})))}R(e||[])}),[p.prestashopCustomDeliveryArray,t]),(0,r.useEffect)((()=>{const e=p.prestashopCustomDeliveryArray;let t=!1;e&&0!==e.length||0!==L.length||(t=!0),O(t)}),[p.prestashopCustomDeliveryArray,L]);const F=()=>{x(!(null!=t&&t.getFieldValue("url")&&null!=t&&t.getFieldValue("key")))};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(a.default,{centered:!0,open:P,destroyOnClose:!0,onCancel:()=>N(!1),closable:!0,maskClosable:!1,footer:null,title:s.formatMessage(M.modalTitle),children:(0,S.jsx)(j,{onSubmit:e=>{null==t||t.setFieldsValue({...t,customStatuses:e}),y(e),N(!1)},onBack:()=>N(!1),isLoading:_,url:null==t?void 0:t.getFieldValue("url"),customSettings:m||[]})}),(0,S.jsx)("div",{className:"mb-2",children:(0,S.jsx)(c.xv,{type:"secondary",children:(0,S.jsx)(h.Z,{id:"integrations.stores.description",defaultMessage:"Enter the details requested below to connect the store."})})}),(0,S.jsx)(i.Z.Item,{label:(0,S.jsx)(h.Z,{id:"integrations.stores.selectedStore",defaultMessage:"Selected store"}),children:(0,S.jsxs)("div",{className:"flex align-center gap-1",children:[(0,S.jsx)(c.Ee,{src:"https://static-files-cdn.isendu.com/stores_logos/prestashop.svg",width:40}),(0,S.jsx)(c.xv,{children:"Prestashop"})]})}),(0,S.jsx)(i.Z.Item,{name:"customName",label:(0,S.jsx)(h.Z,{id:"integrations.stores.storeDescription",defaultMessage:"Description"}),help:(0,S.jsx)(h.Z,{id:"integrations.stores.storeDescriptionHelp",defaultMessage:"This will help identify different accounts from the same store."}),children:(0,S.jsx)(o.default,{placeholder:s.formatMessage({id:"integrations.stores.storeDescriptionPlaceholder",defaultMessage:"Insert a description"})})}),(0,S.jsx)(n.Z,{className:"w-full"}),(0,S.jsx)("div",{className:"mb-2",children:(0,S.jsx)(c.xv,{type:"secondary",children:(0,S.jsx)(h.Z,{id:"integrations.credentials",defaultMessage:"Credentials"})})}),(0,S.jsx)(i.Z.Item,{name:"url",label:s.formatMessage(M.labelStoreUrl),rules:[{required:!0,message:s.formatMessage(M.messageStoreUrl)}],children:(0,S.jsx)(o.default,{onChange:()=>F()})}),(0,S.jsx)(i.Z.Item,{name:"key",label:s.formatMessage(M.labelApiKey),rules:[{required:!0,message:s.formatMessage(M.messageApiKey)}],children:(0,S.jsx)(o.default.Password,{onChange:()=>F()})}),t&&(0,S.jsxs)(i.Z.Item,{name:"customStatuses",label:(0,S.jsxs)("span",{children:[s.formatMessage(M.labelCustomSettings),(0,S.jsx)(c.nw,{title:s.formatMessage(M.tooltipCustomSettings)})]}),rules:[{required:!0,message:s.formatMessage(M.messageCustomSettings)}],children:[(0,S.jsx)(o.default,{disabled:!0,style:{width:"60%",color:"black",background:"white"},value:m}),(0,S.jsx)(l.Z,{className:"CustomizationsChangeButton",onClick:async()=>{Z(!0),N(!0);const e=t&&t.getFieldValue("url"),s=t&&t.getFieldValue("key");await p.getPrestashopCustomStatuses(e,s),Z(!1)},disabled:v,children:s.formatMessage(M.buttonMessage)})]}),t&&(0,S.jsxs)(i.Z.Item,{name:"customDelivery",label:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{style:{display:"flex",textAlign:"right",lineHeight:"14px"},children:(0,S.jsx)(c.xv,{style:{whiteSpace:"initial"},children:s.formatMessage(M.customDeliveryLabel)})}),(0,S.jsx)("span",{children:(0,S.jsx)(c.nw,{title:s.formatMessage(M.tooltipCustomDelivery),style:{alignSelf:"self-end"}})})]}),children:[(0,S.jsx)(d.default,{mode:"multiple",maxTagCount:2,showArrow:!0,style:{width:"60%",color:"black",background:"white"},options:L.filter((e=>e.active&&!e.deleted)).map((e=>({key:e.id,value:e.id,label:e.id+" - "+e.name}))),onChange:e=>{t.setFieldsValue({...t,customDelivery:e}),b(e)},value:f,disabled:T,placeholder:s.formatMessage(M.deliveryMessagePlaceholder)}),(0,S.jsx)(l.Z,{onClick:async()=>await(async()=>{A(!0),await p.getPrestashopCustomDelivery(null==t?void 0:t.getFieldValue("url"),null==t?void 0:t.getFieldValue("key")).finally((()=>A(!1)))})(),disabled:v,loading:C,className:"CustomizationsSyncButton",children:(0,S.jsx)("span",{children:C?`${s.formatMessage(M.buttonDeliveryMessage).substring(0,3)}...`:s.formatMessage(M.buttonDeliveryMessage)})})]}),E&&(0,S.jsx)(w.Xu,{label:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h.Z,{id:"marketList.modal.step2.label.externallyHandled",defaultMessage:"Track externally handled orders"}),(0,S.jsx)(c.nw,{title:(0,S.jsx)(h.Z,{id:"marketList.modal.step2.label.externallyHandled.tooltip",defaultMessage:"Check this to make isendu track your externally handled orders"}),id:"marketList.modal.step2.shopify.externallyHandled.checkbox"})]})})]})}))},87231:(e,t,s)=>{"use strict";s.d(t,{v:()=>h});var r=s(43148),a=s(49409),i=s(32787),o=s(27049),n=s(39563),l=s(50049),d=s(86896),c=s(44012),p=s(85893);const u=(0,l.vU)({labelInstance:{id:"modal.integrations.stores.storeden.label.instance",defaultMessage:"Instance"},messageInstance:{id:"modal.integrations.stores.storeden.message.instance",defaultMessage:"Enter Instance"},labelKey:{id:"modal.integrations.stores.storeden.label.key",defaultMessage:"Key"},messageKey:{id:"modal.integrations.stores.storeden.message.key",defaultMessage:"Enter your key"},labelExchange:{id:"modal.integrations.stores.storeden.label.exchange",defaultMessage:"Enter Exchange"},messageExchange:{id:"modal.integrations.stores.storeden.message.exchange",defaultMessage:"Enter your store url"}}),h=()=>{let e=sessionStorage.getItem("storedenCredentials")||null;"string"==typeof e&&(e=JSON.parse(e));const t=(0,d.Z)();return(0,p.jsxs)(p.Fragment,{children:[" ",(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(n.xv,{type:"secondary",children:(0,p.jsx)(c.Z,{id:"integrations.stores.description",defaultMessage:"Enter the details requested below to connect the store."})})}),(0,p.jsx)(a.Z.Item,{label:(0,p.jsx)(c.Z,{id:"integrations.stores.selectedStore",defaultMessage:"Selected store"}),children:(0,p.jsxs)("div",{className:"flex align-center gap-1",children:[(0,p.jsx)(n.Ee,{src:"https://static-files-cdn.isendu.com/stores_logos/storeden.svg",width:40}),(0,p.jsx)(n.xv,{children:"Storeden"})]})}),(0,p.jsx)(a.Z.Item,{name:"customName",label:(0,p.jsx)(c.Z,{id:"integrations.stores.storeDescription",defaultMessage:"Description"}),help:(0,p.jsx)(c.Z,{id:"integrations.stores.storeDescriptionHelp",defaultMessage:"This will help identify different accounts from the same store."}),children:(0,p.jsx)(i.default,{placeholder:t.formatMessage({id:"integrations.stores.storeDescriptionPlaceholder",defaultMessage:"Insert a description"})})}),(0,p.jsx)(o.Z,{className:"w-full"}),(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(n.xv,{type:"secondary",children:(0,p.jsx)(c.Z,{id:"integrations.credentials",defaultMessage:"Credentials"})})}),(0,p.jsx)(r.mq,{name:"instance",label:t.formatMessage(u.labelInstance),required:!0,message:t.formatMessage(u.messageInstance),initialValue:e&&e.instance?e.instance:null,children:(0,p.jsx)(i.default,{})}),(0,p.jsx)(r.mq,{name:"key",label:t.formatMessage(u.labelKey),required:!0,message:t.formatMessage(u.messageKey),initialValue:e&&e.key?e.key:null,children:(0,p.jsx)(i.default,{})}),(0,p.jsx)(r.mq,{name:"exchange",label:t.formatMessage(u.labelExchange),required:!0,message:t.formatMessage(u.messageExchange),initialValue:e&&e.exchange?e.exchange:null,children:(0,p.jsx)(i.default,{})})]})}},23200:(e,t,s)=>{"use strict";s.d(t,{e:()=>f});var r=s(67294),a=s(49409),i=s(32787),o=s(27049),n=s(34041),l=s(71577),d=s(39563),c=s(50049),p=s(86896),u=s(44012),h=s(29323),m=s(50003),g=s(85893);const y=(0,c.vU)({labelConsumerKey:{id:"modal.integrations.stores.wcmarketplace.label.consumerKey",defaultMessage:"Consumer key"},messageConsumerKey:{id:"modal.integrations.stores.wcmarketplace.message.consumerKey",defaultMessage:"Enter your Consumer key"},labelConsumerSecret:{id:"modal.integrations.stores.wcmarketplace.label.consumerSecret",defaultMessage:"Consumer secret"},messageConsumerSecret:{id:"modal.integrations.stores.wcmarketplace.message.consumerSecret",defaultMessage:"Enter your Consumer secret"},labelStoreUrl:{id:"modal.integrations.stores.wcmarketplace.label.storeUrl",defaultMessage:"Store url"},messageStoreUrl:{id:"modal.integrations.stores.wcmarketplace.message.storeUrl",defaultMessage:"Enter your store url"},labelUsername:{id:"modal.integrations.stores.wcmarketplace.label.username",defaultMessage:"Username"},messageUsername:{id:"modal.integrations.stores.wcmarketplace.message.username",defaultMessage:"Enter your username"},labelPassword:{id:"modal.integrations.stores.wcmarketplace.label.password",defaultMessage:"Password"},messagePassword:{id:"modal.integrations.stores.wcmarketplace.message.password",defaultMessage:"Enter your password"},tooltipCustomDelivery:{id:"modal.integrations.stores.wcmarketplace.message.customDelivery.tooltip",defaultMessage:"Click to synchronize and import the shipping methods present on the check-out page of your e-commerce. They will become the conditions used with the automaton rules"},customDeliveryLabel:{id:"modal.integrations.stores.wcmarketplace.label.customDelivery",defaultMessage:"Checkout shipping methods"},buttonDeliveryMessage:{id:"modal.integrations.stores.wcmarketplace.message.customDelivery.button",defaultMessage:"Synchronize"},deliveryMessagePlaceholder:{id:"modal.integrations.stores.wcmarketplace.message.customDelivery.placeholder",defaultMessage:"Synchronize your data"}}),f=(0,h.Pi)((e=>{let{formInstance:t}=e;const s=(0,p.Z)(),{marketplacesStore:c}=(0,m.o)(),[h,f]=(0,r.useState)(),[b,v]=(0,r.useState)(!(null!=t&&t.getFieldValue("url")&&null!=t&&t.getFieldValue("consumer_key")&&null!=t&&t.getFieldValue("consumer_secret")&&null!=t&&t.getFieldValue("username")&&null!=t&&t.getFieldValue("password"))),[x,S]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!1);(0,r.useEffect)((()=>{var e;const s=t&&(null===(e=t.getFieldValue("customSettings"))||void 0===e?void 0:e.deliveryMethods);if(s&&s.length>0){const e=s.map((e=>e.id));t&&t.setFieldsValue({...t,customDelivery:e}),f(e)}}),[t]);const[M,C]=(0,r.useState)([]);(0,r.useEffect)((()=>{let e=c.woocommerceCustomDeliveryArray;if(!e||0===e.length){var s;const r=t&&(null===(s=t.getFieldValue("customSettings"))||void 0===s?void 0:s.deliveryMethods);e=r&&r.map((e=>({id:e.id,name:e.name})))}C(e||[])}),[c.woocommerceCustomDeliveryArray,t]),(0,r.useEffect)((()=>{const e=c.woocommerceCustomDeliveryArray;let t=!1;e&&0!==e.length||0!==M.length||(t=!0),w(t)}),[c.woocommerceCustomDeliveryArray,M]);const A=()=>{v(!(null!=t&&t.getFieldValue("url")&&null!=t&&t.getFieldValue("consumer_key")&&null!=t&&t.getFieldValue("consumer_secret")&&null!=t&&t.getFieldValue("username")&&null!=t&&t.getFieldValue("password")))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"mb-2",children:(0,g.jsx)(d.xv,{type:"secondary",children:(0,g.jsx)(u.Z,{id:"integrations.stores.description",defaultMessage:"Enter the details requested below to connect the store."})})}),(0,g.jsx)(a.Z.Item,{label:(0,g.jsx)(u.Z,{id:"integrations.stores.selectedStore",defaultMessage:"Selected store"}),children:(0,g.jsxs)("div",{className:"flex align-center gap-1",children:[(0,g.jsx)(d.Ee,{src:d.x7,width:40}),(0,g.jsx)(d.xv,{children:"WCFM Marketplace"})]})}),(0,g.jsx)(a.Z.Item,{name:"customName",label:(0,g.jsx)(u.Z,{id:"integrations.stores.storeDescription",defaultMessage:"Description"}),help:(0,g.jsx)(u.Z,{id:"integrations.stores.storeDescriptionHelp",defaultMessage:"This will help identify different accounts from the same store."}),children:(0,g.jsx)(i.default,{placeholder:s.formatMessage({id:"integrations.stores.storeDescriptionPlaceholder",defaultMessage:"Insert a description"})})}),(0,g.jsx)(o.Z,{className:"w-full"}),(0,g.jsx)("div",{className:"mb-2",children:(0,g.jsx)(d.xv,{type:"secondary",children:(0,g.jsx)(u.Z,{id:"integrations.credentials",defaultMessage:"Credentials"})})}),(0,g.jsx)(a.Z.Item,{name:"url",label:s.formatMessage(y.labelStoreUrl),rules:[{required:!0,message:s.formatMessage(y.messageStoreUrl)}],children:(0,g.jsx)(i.default,{onChange:()=>A()})}),(0,g.jsx)(a.Z.Item,{name:"consumer_key",label:s.formatMessage(y.labelConsumerKey),rules:[{required:!0,message:s.formatMessage(y.messageConsumerKey)}],children:(0,g.jsx)(i.default,{onChange:()=>A()})}),(0,g.jsx)(a.Z.Item,{name:"consumer_secret",label:s.formatMessage(y.labelConsumerSecret),rules:[{required:!0,message:s.formatMessage(y.messageConsumerSecret)}],children:(0,g.jsx)(i.default.Password,{onChange:()=>A()})}),(0,g.jsx)(a.Z.Item,{name:"username",label:s.formatMessage(y.labelUsername),rules:[{required:!0,message:s.formatMessage(y.messageUsername)}],children:(0,g.jsx)(i.default,{onChange:()=>A()})}),(0,g.jsx)(a.Z.Item,{name:"password",label:s.formatMessage(y.labelPassword),rules:[{required:!0,message:s.formatMessage(y.messagePassword)}],children:(0,g.jsx)(i.default.Password,{onChange:()=>A()})}),t&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.Z,{className:"w-full"}),(0,g.jsx)("div",{className:"mb-2",children:(0,g.jsx)(d.xv,{type:"secondary",children:(0,g.jsx)(u.Z,{id:"integrations.customization",defaultMessage:"Customizations"})})}),(0,g.jsxs)(a.Z.Item,{name:"customDelivery",label:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{style:{display:"flex",textAlign:"right",lineHeight:"14px"},children:(0,g.jsx)(d.xv,{style:{whiteSpace:"initial"},children:s.formatMessage(y.customDeliveryLabel)})}),(0,g.jsx)("span",{children:(0,g.jsx)(d.nw,{title:s.formatMessage(y.tooltipCustomDelivery),style:{alignSelf:"self-end"}})})]}),children:[(0,g.jsx)(n.default,{mode:"multiple",maxTagCount:2,showArrow:!0,style:{width:"60%",color:"black",background:"white"},options:M.map((e=>({key:e.id,value:e.id,label:e.id+" - "+e.name}))),onChange:e=>{null==t||t.setFieldsValue({...t,customDelivery:e}),f(e)},value:h,disabled:j,placeholder:s.formatMessage(y.deliveryMessagePlaceholder)}),(0,g.jsx)(l.Z,{onClick:async()=>await(async()=>{S(!0),await c.getWoocommerceCustomDelivery(null==t?void 0:t.getFieldValue("url"),null==t?void 0:t.getFieldValue("consumer_key"),null==t?void 0:t.getFieldValue("consumer_secret"),"v2").finally((()=>S(!1)))})(),disabled:b,loading:x,className:"CustomizationsSyncButton",children:(0,g.jsx)("span",{children:x?`${s.formatMessage(y.buttonDeliveryMessage).substring(0,3)}...`:s.formatMessage(y.buttonDeliveryMessage)})})]})]})]})}))},62184:(e,t,s)=>{"use strict";s.d(t,{_:()=>x,k:()=>S});var r=s(51066),a=s(57458),i=s(82272),o=s(50003),n=s(29323),l=s(27484),d=s.n(l),c=s(67294),p=s(85893);function u(){let e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=0;s<6;s++)e+=t.charAt(Math.floor(62*Math.random()));return e}a.Zx.register({family:"Oswald",src:"https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf"});const h=a.mM.create({body:{padding:30},h1:{fontSize:24,textAlign:"left",marginTop:10},h2:{fontSize:16,textAlign:"left",color:"#aaa"},h3:{fontSize:14,marginTop:10,textAlign:"left"},timeSection:{fontSize:14,textAlign:"right",marginTop:10,color:"#aaa"},titleTable:{marginTop:20,marginBottom:10,width:"100%"},table:{marginTop:30,marginBottom:40,width:"100%"},tableRow:{margin:"auto",flexDirection:"row"},tableCellHeader:{margin:5,fontSize:12,fontWeight:500},tableCell:{margin:5,fontSize:10},tableColHeaderGen:{borderStyle:"solid",borderBottomColor:"#000",borderWidth:2,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:0},tableColContent:{borderStyle:"solid",borderWidth:0,borderBottomWidth:1,alignItems:"flex-start",justifyContent:"flex-start"},tableColFooter:{borderStyle:"solid",borderWidth:0,borderTopWidth:1},orderText:{fontSize:12}}),m=(0,p.jsx)(a.G7,{style:{padding:2,height:19,width:19},children:(0,p.jsx)(a.ny,{viewBox:"0 0 15 15",children:(0,p.jsx)(a.UL,{x:"1",y:"1",width:"14",height:"14",stroke:"black","stroke-width":"1",fill:"none"})})}),g=(e,t)=>e.name&&t.name?e.name.toUpperCase()<t.name.toUpperCase()?-1:e.name.toUpperCase()>t.name.toUpperCase()?1:0:0,y=(0,c.memo)((e=>{const{labels:t,companyName:s,ordering:r}=e,i=d()().format("DD/MM/YYYY"),o=d()().format("hh:mm a");return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.G7,{style:h.titleTable,children:(0,p.jsxs)(a.G7,{style:h.tableRow,children:[(0,p.jsx)(a.G7,{style:{width:"50%",textAlign:"left"},children:(0,p.jsx)(a.xv,{style:h.h1,children:"Picking List"})}),(0,p.jsx)(a.G7,{style:{width:"50%",textAlign:"right"},children:(0,p.jsxs)(a.xv,{style:h.timeSection,children:[t.printed,": ",i," ",t.at," ",o]})})]})},"table-header"),(0,p.jsx)(a.G7,{children:(0,p.jsx)(a.xv,{style:h.h2,children:s})}),(0,p.jsx)(a.G7,{children:(0,p.jsx)(a.xv,{style:h.h3,children:r===x.AggregatedByItem?t.byItem:t.byOrder})})]})})),f=(0,c.memo)((e=>{const{labels:t,totalQty:s,ordering:r}=e;return(0,p.jsx)(a.G7,{children:(0,p.jsxs)(a.xv,{children:[t.totalQty,": ",s," ",r===x.AggregatedByItem?t.items.toLowerCase():t.orders.toLowerCase()]})})})),b=(0,c.memo)((e=>{const{labels:t,selectedOrders:s,ordering:r}=e,i={};let o=0;s.map((e=>{const t=e.order;e.items.map((async e=>{if("0"!==e.productId){const s=u(),r=`${e.sku}_${e.name}`,a=`__NO-SKU__${s}_${e.name}`,n=e.sku?r:a;if(i[n]){const s=i[n];let r=s.aggregator;t.storeOrderId&&(r.includes(`#${t.storeOrderId} (${s.quantity})`)?r=r.map((r=>{if(r===`#${t.storeOrderId} (${s.quantity})`){const r=s.quantity+e.quantity;return`#${t.storeOrderId} (${r})`}return r})):r.push(`#${t.storeOrderId} (${e.quantity})`)),s.quantity+=e.quantity,r=r.sort(),s.aggregator=r,i[n]=s,o+=e.quantity}else i[n]={id:e.id,name:e.name,sku:e.sku,quantity:e.quantity,aggregator:[`#${t.storeOrderId} (${e.quantity})`||""],image:e.imageUrl},o+=e.quantity}}))}));const n=Object.keys(i).filter((e=>!e.startsWith("__NO-SKU__"))),l=Object.keys(i).filter((e=>e.startsWith("__NO-SKU__"))),d=n.sort(((e,t)=>e.toUpperCase()<t.toUpperCase()?-1:e.toUpperCase()>t.toUpperCase()?1:0)).reduce(((e,t)=>(e[t]=i[t],e)),{}),c=l.reduce(((e,t)=>(e[t]=i[t],e)),{}),y=e=>{let{item:t,itemIndex:s}=e;return(0,p.jsxs)(a.G7,{style:[h.tableRow,{backgroundColor:s%2!=0?"#eee":""}],children:[(0,p.jsx)(a.G7,{style:[h.tableColContent,{width:"44%"}],children:(0,p.jsx)(a.xv,{style:h.tableCell,children:t.name})}),(0,p.jsx)(a.G7,{style:[h.tableColContent,{width:"20%"}],children:(0,p.jsx)(a.xv,{style:h.tableCell,children:t.sku})}),(0,p.jsx)(a.G7,{style:[h.tableColContent,{width:"7%"}],children:(0,p.jsx)(a.xv,{style:h.tableCell,children:t.quantity})}),(0,p.jsx)(a.G7,{style:[h.tableColContent,{width:"21%"}],children:(0,p.jsx)(a.xv,{style:h.tableCell,children:t.aggregator.join(", ")})}),(0,p.jsx)(a.G7,{style:[h.tableColContent,{width:"8%"}],children:m})]})};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(a.G7,{style:h.table,children:[(0,p.jsxs)(a.G7,{style:h.tableRow,children:[(0,p.jsx)(a.G7,{style:[h.tableColHeaderGen,{width:"44%",textAlign:"left"}],children:(0,p.jsx)(a.xv,{style:h.tableCellHeader,children:t.item})}),(0,p.jsx)(a.G7,{style:[h.tableColHeaderGen,{width:"20%",textAlign:"left"}],children:(0,p.jsx)(a.xv,{style:h.tableCellHeader,children:t.sku})}),(0,p.jsx)(a.G7,{style:[h.tableColHeaderGen,{width:"7%",textAlign:"left"}],children:(0,p.jsx)(a.xv,{style:h.tableCellHeader,children:t.qty})}),(0,p.jsx)(a.G7,{style:[h.tableColHeaderGen,{width:"21%",textAlign:"left"}],children:(0,p.jsx)(a.xv,{style:h.tableCellHeader,children:t.orders})}),(0,p.jsx)(a.G7,{style:[h.tableColHeaderGen,{width:"8%",textAlign:"center"}],children:(0,p.jsx)(a.xv,{})})]}),Object.values(d).map(((e,t)=>(0,p.jsx)(y,{item:e,itemIndex:t},`${t}`))),Object.values(c).sort(g).map(((e,t)=>(0,p.jsx)(y,{item:e,itemIndex:t},`${t}`)))]}),(0,p.jsx)(f,{labels:t,totalQty:o,ordering:r})]})})),v=e=>{const{sortOrder:t,labels:s,selectedOrders:i}=e,n=[];let l=0;i.sort(((e,s)=>{var a,i,n,l,d,c,p,u;const h=e.order.storeCreationDate||e.order.created||0,m=s.order.storeCreationDate||s.order.created||0;if((null===(a=o.rootStore.marketplacesStore)||void 0===a||null===(i=a.selectedMarketplaces)||void 0===i||null===(n=i.data[String(e.order.selectedStoreId)])||void 0===n||null===(l=n.store)||void 0===l?void 0:l.internalCode)===r.availableStores.amazon.internalCode&&(null===(d=o.rootStore.marketplacesStore)||void 0===d||null===(c=d.selectedMarketplaces)||void 0===c||null===(p=c.data[String(s.order.selectedStoreId)])||void 0===p||null===(u=p.store)||void 0===u?void 0:u.internalCode)===r.availableStores.amazon.internalCode&&h===m)switch(t){case"ascend":return(e.order.created||0)-(s.order.created||0);case"descend":return(s.order.created||0)-(e.order.created||0);default:return 0}else switch(t){case"ascend":return h-m;case"descend":return m-h;default:return 0}})).forEach((e=>{const t=e.order.id;if(t&&e.order.storeOrderId){var s,r,a;const i=[];for(const t of e.items){const e=u(),s=`${t.sku}_${t.name}`,r=`__NO-SKU__${e}_${t.name}`,a=t.sku?s:r;if(i.find((e=>e.key===a))){for(const e of i)if(e.key===a){e.quantity+=t.quantity;break}}else i.push({key:a,name:t.name,sku:t.sku,productId:t.productId,quantity:t.quantity})}n.push({id:t,name:`#${e.order.storeOrderId}`,receiver:(null===(s=e.order.addressTo)||void 0===s?void 0:s.name)||"",note:(null===(r=e.order.shippingInformation)||void 0===r||null===(a=r.shipmentDetails)||void 0===a?void 0:a.description)||e.order.customerNote||"",items:i}),l+=e.items.reduce(((e,t)=>e+t.quantity),0)}}));const d={borderBottomWidth:3};return(0,p.jsxs)(a.G7,{style:h.table,children:[(0,p.jsxs)(a.G7,{style:h.tableRow,children:[(0,p.jsx)(a.G7,{style:[h.tableColHeaderGen,d,{width:"20%",textAlign:"left"}],children:(0,p.jsx)(a.xv,{style:h.tableCellHeader,children:s.order})}),(0,p.jsx)(a.G7,{style:[h.tableColHeaderGen,d,{width:"15%",textAlign:"left"}],children:(0,p.jsx)(a.xv,{style:h.tableCellHeader,children:s.receiver})}),(0,p.jsx)(a.G7,{style:[h.tableColHeaderGen,d,{width:"15%",textAlign:"left"}],children:(0,p.jsx)(a.xv,{style:h.tableCellHeader,children:s.note})}),(0,p.jsx)(a.G7,{style:[h.tableColHeaderGen,d,{width:"25%",textAlign:"left"}],children:(0,p.jsx)(a.xv,{style:h.tableCellHeader,children:s.item})}),(0,p.jsx)(a.G7,{style:[h.tableColHeaderGen,d,{width:"10%",textAlign:"left"}],children:(0,p.jsx)(a.xv,{style:h.tableCellHeader,children:s.sku})}),(0,p.jsx)(a.G7,{style:[h.tableColHeaderGen,d,{width:"10%",textAlign:"center"}],children:(0,p.jsx)(a.xv,{style:h.tableCellHeader,children:s.qty})}),(0,p.jsx)(a.G7,{style:[h.tableColHeaderGen,d,{width:"5%",textAlign:"center"}],children:(0,p.jsx)(a.xv,{})})]}),n.map(((e,t)=>(0,p.jsxs)(c.Fragment,{children:[(0,p.jsxs)(a.G7,{style:[h.tableRow,{backgroundColor:t%2==0?"#eee":""}],children:[(0,p.jsx)(a.G7,{style:[h.tableColContent,{borderBottomWidth:0},{width:"20%"}],children:(0,p.jsx)(a.xv,{style:[h.tableCell,h.orderText],children:e.name})}),(0,p.jsx)(a.G7,{style:[h.tableColContent,{borderBottomWidth:0},{width:"15%"}],children:(0,p.jsx)(a.xv,{style:[h.tableCell,h.orderText],children:e.receiver})}),(0,p.jsx)(a.G7,{style:[h.tableColContent,{borderBottomWidth:0},{width:"15%"}],children:(0,p.jsx)(a.xv,{style:[h.tableCell],children:e.note})}),(0,p.jsx)(a.G7,{style:[h.tableColContent,{borderBottomWidth:0},{width:"45%"}],children:(0,p.jsx)(a.xv,{style:h.tableCell})}),(0,p.jsx)(a.G7,{style:[h.tableColContent,{borderBottomWidth:0},{width:"5%",alignItems:"center"}],children:(0,p.jsx)(a.xv,{style:h.tableCell})})]},`pickListOrderRow${t}`),e.items.map(((s,r)=>{const i=r===e.items.length-1,o=i?{borderBottomWidth:2}:{borderBottomWidth:1,borderStyle:"dotted",borderColor:"#999"},n=i?{borderBottomWidth:2}:{borderBottomWidth:0};return(0,p.jsxs)(a.G7,{style:[h.tableRow,{backgroundColor:t%2==0?"#eee":""}],children:[(0,p.jsx)(a.G7,{style:[h.tableColContent,n,{width:"50%"}],children:(0,p.jsx)(a.xv,{style:h.tableCell})}),(0,p.jsx)(a.G7,{style:[h.tableColContent,o,{width:"25%"}],children:(0,p.jsx)(a.xv,{style:h.tableCell,children:s.name})}),(0,p.jsx)(a.G7,{style:[h.tableColContent,o,{width:"10%"}],children:(0,p.jsx)(a.xv,{style:h.tableCell,children:s.sku})}),(0,p.jsx)(a.G7,{style:[h.tableColContent,o,{width:"10%",alignItems:"center"}],children:(0,p.jsx)(a.xv,{style:h.tableCell,children:s.quantity})}),(0,p.jsx)(a.G7,{style:[h.tableColContent,o,{width:"5%",alignItems:"center"}],children:m})]},`pickListOrderItemRow${r}`)}))]},`pickListOrdMain${t}`))),(0,p.jsx)(a.G7,{style:{position:"absolute",right:-20,bottom:-25},fixed:!0,render:e=>{let{pageNumber:t}=e;return(0,p.jsxs)(a.xv,{children:["pag ",t]})}}),(0,p.jsxs)(a.G7,{style:[h.tableRow],children:[(0,p.jsx)(a.G7,{style:[h.tableColFooter,{width:"85%",alignItems:"flex-end"}],children:(0,p.jsx)(a.xv,{style:h.tableCell,children:s.total})}),(0,p.jsx)(a.G7,{style:[h.tableColFooter,{width:"10%",alignItems:"center"}],children:(0,p.jsx)(a.xv,{style:h.tableCell,children:l})}),(0,p.jsx)(a.G7,{style:[h.tableColFooter,{width:"5%",alignItems:"center"}],children:(0,p.jsx)(a.xv,{style:h.tableCell})})]})]})};let x=function(e){return e[e.AggregatedByOrder=0]="AggregatedByOrder",e[e.AggregatedByItem=1]="AggregatedByItem",e}({});const S=(0,n.Pi)((e=>{let{sortOrder:t,selectedOrdersIds:s,companyName:n,labels:l,order:d,ordering:c=x.AggregatedByItem,onSuccess:u,fileName:m}=e;const{ordersStore:g}=(0,o.o)(),f=g.orders,S=[];return d&&d.order.status!==r.OrderStatuses.EXTERNALLY_HANDLED?S.push(d):f&&(null==s||s.forEach((e=>{const t=f.get(e);(null==t?void 0:t.order.status)!==r.OrderStatuses.EXTERNALLY_HANDLED&&t&&S.push(t)}))),(0,p.jsx)(a.WD,{style:{display:"none"},fileName:m,document:(0,p.jsx)(a.BB,{onRender:e=>{if(g.downloadLock)return;g.setDownloadLock(!0);const t=window.URL.createObjectURL(e.blob);(0,i.kB)(t,`picking-list-${(new Date).toISOString()}.pdf`),u()},children:(0,p.jsxs)(a.T3,{size:"A4",orientation:"landscape",style:h.body,children:[(0,p.jsx)(y,{labels:l,companyName:n,ordering:c}),c===x.AggregatedByItem&&(0,p.jsx)(b,{labels:l,selectedOrders:S,ordering:c}),c===x.AggregatedByOrder&&(0,p.jsx)(v,{labels:l,selectedOrders:S,ordering:c,sortOrder:t})]})})})}))},97516:(e,t,s)=>{"use strict";s.d(t,{O:()=>c});var r=s(34041),a=s(19650),i=s(51890),o=s(39563),n=s(19006),l=s(67294),d=s(85893);const c=e=>{let{defaultValue:t,onChange:s,disabled:c,avatarShape:p="circle",...u}=e;const[h,m]=(0,l.useState)(n.countriesArray),g=(0,l.useCallback)((e=>{m(n.countriesArray.filter((t=>t.name.toLowerCase().includes(e.toLowerCase()))))}),[]);return(0,d.jsx)(r.default,{showSearch:!0,onSearch:g,onChange:s,filterOption:!1,defaultValue:null==t?void 0:t.toUpperCase(),getPopupContainer:e=>e||document.body,options:h.map((e=>({label:(0,d.jsxs)(a.Z,{direction:"horizontal",children:[(0,d.jsx)(i.C,{size:"small",shape:p,src:(0,o.$6)(e.alpha2)}),(0,d.jsx)(o.xv,{children:e.name})]}),value:e.alpha2}))),disabled:c,...u})}},1407:(e,t,s)=>{"use strict";s.d(t,{K:()=>x});var r,a,i,o,n,l,d,c,p,u,h=s(43269),m=s(53229),g=s(19959),y=s(50003),f=s(98933),b=s(68949),v=s(25108);const x=new(r=class{async openManageTagsModal(e){this.isManageTagsModalOpen=!0,this.selectedOrder=e,e.orderTags&&this.setTags(e.orderTags);try{await this.getAvailableTags()}catch(e){v.error(e)}}async openMassiveAddTagsModal(e){this.isMassiveAddTagsModalOpen=!0,this.setSelectedOrdersIds(e);try{await this.getAvailableTags()}catch(e){v.error(e)}}openMassiveRemoveTagsModal(e){this.isMassiveRemoveTagsModalOpen=!0,this.setSelectedOrdersIds(e);const t=e.map((e=>this.ordersStore.orders.get(e)));if(t.length){const e=t.map((e=>{var t;return null==e||null===(t=e.order)||void 0===t?void 0:t.orderTags})).flat().filter(Boolean).sort(),s=Array.from(new Set(e));this.hasNoTags=0===s.length,this.setTags(s)}}closeManageTagsModal(){this.isManageTagsModalOpen=!1,this.reset()}closeMassiveAddTagsModal(){this.isMassiveAddTagsModalOpen=!1,this.reset()}closeMassiveRemoveTagsModal(){this.isMassiveRemoveTagsModalOpen=!1,this.reset()}setSelectedOrder(e){this.selectedOrder=e}setSelectedOrdersIds(e){this.selectedOrdersIds=e}setTags(e){this.tags=[...e]}setAvailableTags(e){this.availableTags=e}setRemovableTag(e){this.removableTags=[...this.removableTags,e]}async getAvailableTags(){try{const e=(await this.ordersStore.getAvailableOrderTags()).map((e=>{let{tag:t}=e;return t})).sort();this.setAvailableTags(e)}catch(e){v.error(e),g.T.error({message:f.G.instance.formatMessage({id:"generic.error",defaultMessage:"Error"})})}}async addTagsToSingleOrder(){var e;if(null!==(e=this.selectedOrder)&&void 0!==e&&e.id)try{await this.ordersStore.updateSingleOrder(this.selectedOrder.id,this.tags),this.closeManageTagsModal(),g.T.success({message:f.G.instance.formatMessage({id:"orders.tags.updatedSuccessfully.singleOrder",defaultMessage:"Order tags updated successfully"})})}catch(e){v.error(e),g.T.error({message:f.G.instance.formatMessage({id:"generic.error",defaultMessage:"Error"})})}}async addMultipleOrdersTags(){if(!this.tags.length||!this.selectedOrdersIds.length)return g.T.error({message:f.G.instance.formatMessage({id:"orders.tags.noTagsOrSelectedOrder",defaultMessage:"No order tags or selected order"})});try{await this.ordersStore.addOrdersTags(this.selectedOrdersIds,this.tags),this.closeMassiveAddTagsModal(),g.T.success({message:f.G.instance.formatMessage({id:"orders.tags.updatedSuccessfully.multipleOrders",defaultMessage:"Orders tags updated successfully"})})}catch(e){v.error(e),g.T.error({message:f.G.instance.formatMessage({id:"generic.error",defaultMessage:"Error"})})}}async removeMultipleOrdersTags(){if(!this.removableTags.length)return g.T.error({message:f.G.instance.formatMessage({id:"orders.tags.noTagsRemoved",defaultMessage:"You have not selected any tags to remove"})});try{await this.ordersStore.removeOrdersTags(this.selectedOrdersIds,this.removableTags),this.closeMassiveRemoveTagsModal(),g.T.success({message:f.G.instance.formatMessage({id:"orders.tags.removedSuccessfully.multipleOrders",defaultMessage:"Orders tags removed successfully"})})}catch(e){v.error(e),g.T.error({message:f.G.instance.formatMessage({id:"generic.error",defaultMessage:"Error"})})}}reset(){this.tags=[],this.selectedOrder=null,this.selectedOrdersIds=[],this.hasNoTags=!1,this.removableTags=[]}constructor(e){(0,h.Z)(this,"availableTags",a,this),(0,h.Z)(this,"tags",i,this),(0,h.Z)(this,"removableTags",o,this),(0,h.Z)(this,"hasNoTags",n,this),(0,h.Z)(this,"isManageTagsModalOpen",l,this),(0,h.Z)(this,"isMassiveAddTagsModalOpen",d,this),(0,h.Z)(this,"isMassiveRemoveTagsModalOpen",c,this),(0,h.Z)(this,"selectedOrder",p,this),(0,h.Z)(this,"selectedOrdersIds",u,this),this.ordersStore=e,(0,b.rC)(this)}},a=(0,m.Z)(r.prototype,"availableTags",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,m.Z)(r.prototype,"tags",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=(0,m.Z)(r.prototype,"removableTags",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),n=(0,m.Z)(r.prototype,"hasNoTags",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=(0,m.Z)(r.prototype,"isManageTagsModalOpen",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=(0,m.Z)(r.prototype,"isMassiveAddTagsModalOpen",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=(0,m.Z)(r.prototype,"isMassiveRemoveTagsModalOpen",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=(0,m.Z)(r.prototype,"selectedOrder",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=(0,m.Z)(r.prototype,"selectedOrdersIds",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,m.Z)(r.prototype,"openManageTagsModal",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"openManageTagsModal"),r.prototype),(0,m.Z)(r.prototype,"openMassiveAddTagsModal",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"openMassiveAddTagsModal"),r.prototype),(0,m.Z)(r.prototype,"openMassiveRemoveTagsModal",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"openMassiveRemoveTagsModal"),r.prototype),(0,m.Z)(r.prototype,"closeManageTagsModal",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"closeManageTagsModal"),r.prototype),(0,m.Z)(r.prototype,"closeMassiveAddTagsModal",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"closeMassiveAddTagsModal"),r.prototype),(0,m.Z)(r.prototype,"closeMassiveRemoveTagsModal",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"closeMassiveRemoveTagsModal"),r.prototype),(0,m.Z)(r.prototype,"setSelectedOrder",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedOrder"),r.prototype),(0,m.Z)(r.prototype,"setSelectedOrdersIds",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedOrdersIds"),r.prototype),(0,m.Z)(r.prototype,"setTags",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"setTags"),r.prototype),(0,m.Z)(r.prototype,"setAvailableTags",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"setAvailableTags"),r.prototype),(0,m.Z)(r.prototype,"setRemovableTag",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"setRemovableTag"),r.prototype),(0,m.Z)(r.prototype,"getAvailableTags",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"getAvailableTags"),r.prototype),(0,m.Z)(r.prototype,"addTagsToSingleOrder",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"addTagsToSingleOrder"),r.prototype),(0,m.Z)(r.prototype,"addMultipleOrdersTags",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"addMultipleOrdersTags"),r.prototype),(0,m.Z)(r.prototype,"removeMultipleOrdersTags",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"removeMultipleOrdersTags"),r.prototype),(0,m.Z)(r.prototype,"reset",[b.aD],Object.getOwnPropertyDescriptor(r.prototype,"reset"),r.prototype),r)(y.rootStore.ordersStore)},32895:(e,t,s)=>{"use strict";s.d(t,{l:()=>y});var r=s(49409),a=s(50146),i=s(47933),o=s(71230),n=s(15746),l=s(94184),d=s.n(l),c=s(67294),p=s(50049),u=s(86896),h=s(44012),m=s(85893);const g=(0,p.vU)({modalPrintButton:{id:"brt.position.modal.button.print",defaultMessage:"Print"},modalCancelButton:{id:"generic.cancel",defaultMessage:"Cancel"}}),y=e=>{const{visible:t,onDone:s,onCancel:l,onlySeur:p}=e,[y]=r.Z.useForm(),[f,b]=(0,c.useState)(null),v=(0,u.Z)(),[x,S]=(0,c.useState)(!1);return(0,m.jsxs)(a.default,{centered:!0,title:(0,m.jsx)(h.Z,{id:"seur.position.modal.title",defaultMessage:"Seur Labels Printing"}),open:t,onCancel:()=>{l(),b(null)},okButtonProps:{disabled:null===f,loading:x},okText:v.formatMessage(g.modalPrintButton),cancelText:v.formatMessage(g.modalCancelButton),onOk:async()=>{f?(S(!0),await s(f),y.resetFields(),S(!1),b(null)):y.validateFields()},bodyStyle:{paddingTop:"5px",paddingBottom:"5px"},children:[!p&&(0,m.jsx)("div",{className:"label-not-alone",children:(0,m.jsx)(h.Z,{id:"seur.position.modal.label.onlySeur",defaultMessage:"You have a Seur label request."})}),(0,m.jsx)(r.Z,{requiredMark:!1,layout:"vertical",form:y,className:"label-position-container",children:(0,m.jsx)(r.Z.Item,{name:"position",label:(0,m.jsx)(h.Z,{id:"seur.position.modal.label.select",defaultMessage:"Please select below where the first label should be placed in the standard printing template provided by Seur carrier."}),rules:[{required:!0,message:(0,m.jsx)(h.Z,{id:"form.validation.input.required",defaultMessage:"Required"})}],children:(0,m.jsx)(i.ZP.Group,{size:"middle",children:(0,m.jsx)(o.Z,{children:Array.from({length:3},((e,t)=>t+1)).map((e=>(0,m.jsx)(n.Z,{span:24,className:d()({"border-bottom":e<3}),children:(0,m.jsx)(i.ZP.Button,{onChange:()=>{b(e)},className:"label-position "+(f?f<=e?"position-selected":"position-not-selected":""),value:e,children:e})},`radioNum${e}`)))})})})})]})};y.displayName="SeurLabelPositionModal"},35677:(e,t,s)=>{"use strict";s.d(t,{p:()=>m});var r=s(49409),a=s(50146),i=s(47933),o=s(71230),n=s(15746),l=s(67294),d=s(50049),c=s(86896),p=s(44012),u=s(85893);const h=(0,d.vU)({modalPrintButton:{id:"brt.position.modal.button.print",defaultMessage:"Print"},modalCancelButton:{id:"brt.position.modal.button.cancel",defaultMessage:"Cancel"}}),m=e=>{const{visible:t,onDone:s,onCancel:d,onlyBRT:m}=e,[g]=r.Z.useForm(),[y,f]=(0,l.useState)(null),b=(0,c.Z)(),[v,x]=(0,l.useState)(!1);return(0,u.jsxs)(a.default,{centered:!0,title:(0,u.jsx)(p.Z,{id:"brt.position.modal.title",defaultMessage:"BRT Labels Printing"}),open:t,onCancel:()=>{d(),f(null)},okButtonProps:{disabled:null===y,loading:v},okText:b.formatMessage(h.modalPrintButton),cancelText:b.formatMessage(h.modalCancelButton),onOk:async()=>{y?(x(!0),await s(y),g.resetFields(),x(!1),f(null)):g.validateFields()},bodyStyle:{paddingTop:"5px",paddingBottom:"5px"},children:[!1===m&&(0,u.jsx)("div",{className:"label-not-alone",children:(0,u.jsx)(p.Z,{id:"brt.position.modal.label.onlyBrt",defaultMessage:"We’ve noticed that among others there is a BRT labels printing request."})}),(0,u.jsx)(r.Z,{requiredMark:!1,layout:"vertical",form:g,className:"label-position-container",children:(0,u.jsx)(r.Z.Item,{name:"position",label:(0,u.jsx)(p.Z,{id:"brt.position.modal.label.select",defaultMessage:"Please select below where the first label should be placed in the standard printing template provided by BRT carrier."}),rules:[{required:!0,message:(0,u.jsx)(p.Z,{id:"form.validation.input.required",defaultMessage:"Required"})}],children:(0,u.jsx)(i.ZP.Group,{size:"middle",children:(0,u.jsx)(o.Z,{children:Array.from({length:8},((e,t)=>t+1)).map((e=>(0,u.jsx)(n.Z,{span:12,className:(e%2==1?"border-right":"")+" "+(e<7?"border-bottom":""),children:(0,u.jsx)(i.ZP.Button,{onChange:()=>{f(e)},className:"label-position "+(y?y<=e?"position-selected":"position-not-selected":""),value:e,children:e})},`radioNum${e}`)))})})})})]})};m.displayName="BRTLabelPositionModal"},59102:(e,t,s)=>{"use strict";s.d(t,{AU:()=>h,H:()=>x,fB:()=>S,pM:()=>m,qw:()=>v});var r=s(52861),a=s(19959),i=s(60843),o=s(82272),n=s(50003),l=s(35823),d=s.n(l),c=s(68607),p=s.n(c),u=s(25108);const h=(e,t)=>e.ordersArray.filter((e=>{if(e.order&&e.order.id)return t.includes(e.order.id)})),m=e=>{const{selectedOrders:t,sortOrder:s,sortColumnKey:r}=e;return s?t.sort(((e,t)=>{const a=e.order.storeCreationDate||e.order.created||0,i=t.order.storeCreationDate||t.order.created||0;return"orderId"===r?"ascend"===s?i-a:a-i:i-a})).reduce(((e,t)=>(t.order.id&&e.push(t.order.id),e)),[]):t.reduce(((e,t)=>(t.order.id&&e.push(t.order.id),e)),[])},{companiesStore:g,zebraPrintersStore:y,ordersStore:f}=n.rootStore;function b(e,t,s){var r;if(t||s)return!1;const a=e.map((e=>{const t=f.allOrders.get(e);return t||(f.getOrderById(e),f.selectedOrder)})).some((e=>{var t,s,r,a,i;return"shipment"in e?e.shipment&&["ZPL","ZPLII"].includes(null===(t=e.shipment)||void 0===t||null===(s=t.responses[0].labelType)||void 0===s?void 0:s.toUpperCase()):"shipments"in e&&(e.shipments&&["ZPL","ZPLII"].includes(null===(r=e.shipments[e.shipments.length-1])||void 0===r||null===(a=r.responses[0])||void 0===a||null===(i=a.labelType)||void 0===i?void 0:i.toUpperCase()))})),i=y.zebraPrinters.length>0,o=!(null!==(r=g.companyInfo)&&void 0!==r&&r.zplToPdf);return a&&i&&o}const v=async e=>{let{ids:t=[],onError:s,labelType:r,startPosition:a,directPrinting:i=!1,printCustomsDocuments:o=!1,isReturnOrder:l=!1,skipZplCheck:d=!1,useZebraBrowserPrinter:c=!1,items:p}=e;try{if(b(t,d,l)&&y.onlinePrinters.length>1)return void y.showPrinterSelectionModal(t);const e=await n.rootStore.ordersStore.getLabels({ids:t,labelType:r,isAdmin:"true"===localStorage.getItem("isAdmin"),startPosition:a,printCustomsDocuments:o,isReturnOrder:l,skipZplCheck:d,useZebraBrowserPrinter:c,items:p});if(!e)return;const s=b(t,d,l)&&c;if(Array.isArray(e.file))for(const t of e.file)S(i,t,o,null==e?void 0:e.customsDocuments,s);else S(i,e,o,null==e?void 0:e.customsDocuments,s)}catch(e){u.error(e),s(e)}},x=(e,t)=>e.some((e=>{var s,r,a,o,n,l,d,c,p,u,h;if(!e||!e.order||null===(s=e.order.shippingInformation)||void 0===s||!s.selectedCarrierId)return!1;const m=null===(r=e.order.shippingInformation)||void 0===r?void 0:r.selectedCarrierId,g=t.allAvailableCarriersMap.data[m],y=null==g||null===(a=g.customSettings)||void 0===a?void 0:a.widePrintPDF,f="PDF"===(null==e||null===(o=e.shipment)||void 0===o||null===(n=o.request)||void 0===n||null===(l=n.shipmentDetails)||void 0===l||null===(d=l.label)||void 0===d?void 0:d.format)||"PDF"===(null==g||null===(c=g.customSettings)||void 0===c||null===(p=c.label)||void 0===p?void 0:p.format),b=(null===(u=g.carrier)||void 0===u?void 0:u.internalCode)===i._.BRT||(null===(h=g.carrier)||void 0===h?void 0:h.internalCode)===i._.SEUR;return y&&f&&b})),S=function(e,t,s,r){var a;arguments.length>4&&void 0!==arguments[4]&&!arguments[4]?e&&"pdf"===(null==t||null===(a=t.type)||void 0===a?void 0:a.toLowerCase())?w(t,s,r):M(t,s,r):j(t)},j=e=>{const t=(0,o.Mi)(null==e?void 0:e.file,"buffer");let s="";r.Z.get("http://localhost:9100/default",{headers:{"Content-Type":"text/plain;charset=UTF-8"}}).then((e=>{const t=/Name: (.*)\n/gm.exec(e.data);t&&t[1]&&(s=t[1])})).catch((e=>{u.error("Failed to fetch default printer",e)})),r.Z.get("http://localhost:9100/available",{headers:{"Content-Type":"text/plain;charset=UTF-8"}}).then((e=>{let t=0;return e.data.printer.forEach((r=>{r.name===s&&(t=e.data.printer.indexOf(r))})),e.data&&e.data.printer&&e.data.printer[t]})).then((e=>{e?t.text().then((t=>{const s={data:t,device:e};r.Z.post("http://localhost:9100/write",s,{headers:{"Content-Type":"text/plain;charset=UTF-8"}})})):u.error("No Zebra printer found")})).catch((e=>{u.error("Failed to fetch available printers",e)}))},w=(e,t,s)=>{t&&s?p()({printable:null==e?void 0:e.file,type:"pdf",base64:!0,onPrintDialogClose:()=>{var e;d()((0,o.Mi)(null==s?void 0:s.file,"buffer"),`${null==s?void 0:s.name}.${null==s||null===(e=s.type)||void 0===e?void 0:e.toLowerCase()}`),a.T.template("PRINTED_LABEL")}}):p()({printable:null==e?void 0:e.file,type:"pdf",base64:!0,onPrintDialogClose:()=>{a.T.template("PRINTED_LABEL")}})},M=(e,t,s)=>{var r,i;e&&(d()((0,o.Mi)(null==e?void 0:e.file,"buffer"),`${null==e?void 0:e.name}.${null==e||null===(r=e.type)||void 0===r?void 0:r.toLowerCase()}`),a.T.template("DOWNLOADED_LABEL"));t&&s&&d()((0,o.Mi)(null==s?void 0:s.file,"buffer"),`${null==s?void 0:s.name}.${null==s||null===(i=s.type)||void 0===i?void 0:i.toLowerCase()}`)}},22703:(e,t,s)=>{"use strict";s.d(t,{s:()=>r});const r=(0,s(50049).vU)({resetTitle:{id:"upgrade.plan.modal.reset.title",defaultMessage:"Are you sure you want to reset your current plan?"},resetBody:{id:"upgrade.plan.modal.reset.body",defaultMessage:"It will immediately restart your plan and subsequently create a new billing cycle."},resetOk:{id:"upgrade.plan.modal.reset.ok",defaultMessage:"Yes, reset"},confirmCancel:{id:"upgrade.plan.modal.confirm.cancel",defaultMessage:"No, cancel"},resetAddonErrorMessage:{id:"upgrade.plan.modal.reset.error.message",defaultMessage:"Error"},resetAddonErrorDescription:{id:"upgrade.plan.modal.reset.error.description",defaultMessage:"Something went wrong, try again"},deleteTitle:{id:"upgrade.plan.modal.delete.title.actual",defaultMessage:"Are you sure you want to delete your plan subscription?"},deleteBody:{id:"upgrade.plan.modal.delete.body.actual",defaultMessage:"It will be effectively deleted at the end of the current billing cycle."},deleteOk:{id:"upgrade.plan.modal.delete.ok",defaultMessage:"Yes, delete"},cancelAddonErrorMessage:{id:"upgrade.plan.modal.delete.error.message",defaultMessage:"Error"},cancelAddonErrorDescription:{id:"upgrade.plan.modal.delete.error.description",defaultMessage:"Something went wrong, try again"},deleteFutureTitle:{id:"upgrade.plan.modal.delete.title.future",defaultMessage:"Are you sure you want to delete your future plan subscription?"},deleteFutureBody:{id:"upgrade.plan.modal.delete.body.future",defaultMessage:"It will be immediately effective"},savePlanErrorTitle:{id:"settings.billings.plans.modal.error.title",defaultMessage:"Error"},savePlanErrorMessage:{id:"settings.billings.plans.modal.error.message",defaultMessage:"Error changing plan"},getAddOnsErrorMessage:{id:"settings.addons.get.error",defaultMessage:"Error during add-ons loading"},settingsBillingsLink:{id:"settingsBillings.link",defaultMessage:"Settings > Billings"},createAddonErrorMessage:{id:"addons.whatsappModal.createAddon.error.message",defaultMessage:"Error"},createAddonErrorDescription:{id:"addons.whatsappModal.createAddon.error.description",defaultMessage:"Error creating add-on"},createAddonErrorMissingPayment:{id:"addons.whatsappModal.createAddon.error.missingPayment",defaultMessage:"Payment method not defined. Please add one in {link}"},track2talk:{id:"settings.billings.addons.whatsapp.plan.track2talk",defaultMessage:"Track 2 Talk"},talkAndReview:{id:"settings.billings.addons.whatsapp.plan.talkReview",defaultMessage:"Talk & Review"}})},29143:(e,t,s)=>{"use strict";s.d(t,{H1:()=>qe,rJ:()=>Ke,_Q:()=>Ye});var r=s(273),a=s(71577),i=s(53886),o=s(67294),n=s(44012),l=s(92048),d=s(39563),c=s(29323),p=s(76772),u=s(9676),h=s(79655),m=s(70506),g=s(40847),y=s(85893);const f=()=>{const{showAddonsDisclaimer:e,toggleAddonsDisclaimer:t}=(0,o.useContext)(W);return e?(0,y.jsx)(p.Z,{style:{backgroundColor:"#f8fafb"},type:"info",className:"addons-whatsappModal-content-alert",message:(0,y.jsx)(n.Z,{id:"addons.whatsappModal.info.title",defaultMessage:"Important info"}),description:(0,y.jsxs)("div",{className:"flex flex-column",children:[(0,y.jsx)("div",{className:"mb-3",children:(0,y.jsx)(d.xv,{type:"secondary",children:(0,y.jsx)(n.Z,{id:"addons.whatsappModal.info.message",defaultMessage:"If you have finished the notifications provided by your plan, we will continue to send notifications for each shipment at the price of 0,20€ for each message. You can switch off this feature anytime from your <link>Transactional Notifications</link> section in your Settings page.",values:{link:e=>(0,y.jsx)(h.rU,{to:`${m.H.trackingNotifications.root}`,children:e})}})})}),(0,y.jsx)(u.Z,{onChange:t,children:(0,y.jsx)(d.xv,{type:"secondary",children:(0,y.jsx)(n.Z,{id:"addons.whatsappModal.info.checkbox",defaultMessage:"I've read and accepted it"})})})]}),showIcon:!0,icon:(0,y.jsx)(g.Z,{})}):(0,y.jsx)(y.Fragment,{})};var b=s(95562),v=s(55222),x=s(84403),S=s(82272),j=s(79283);function w(e,t){const s=t?12:1;return(0,y.jsx)(y.Fragment,{children:e.price?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(d.xv,{children:[(0,y.jsx)(v.x,{currency:e.currency_code,value:Number((e.price/100/s).toFixed(2))}),"/",(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.addons.month",defaultMessage:"Month"})]}),t&&(0,y.jsx)("small",{children:(0,y.jsxs)(d.xv,{type:"secondary",children:[" ",(0,y.jsx)(n.Z,{id:"addons.whatsapp.bundle.table.columns.text.price",defaultMessage:"{currencyValue}/year",values:{currencyValue:(0,y.jsx)(v.x,{currency:e.currency_code,value:Number((e.price/100/s*12).toFixed(2))})}})]})})]}):(0,y.jsx)(d.xv,{children:"-"})})}function M(e){var t;const s=null===(t=e.item_id)||void 0===t?void 0:t.split(x._.splitAddons);if(s&&Array.isArray(s)&&4===s.length){const t="2s"===s[1]?2:1;let r=s[3];try{r=Number(r)}catch(e){}if((0,j.h)(r))return(0,y.jsx)(d.xv,{type:"secondary",children:e.price?(0,y.jsx)(v.x,{currency:e.currency_code,value:Number((0,S.pd)(e.price/100/r/t)),maximumFractionDigits:2,minimumFractionDigits:2}):"-"})}return(0,y.jsx)(y.Fragment,{})}function C(e){const t=null==e?void 0:e.split(x._.splitAddons);if(t&&Array.isArray(t)&&t.length>0){let e=t.pop();try{e=Number(e)}catch(e){}if((0,j.h)(e))return(0,y.jsx)(d.xv,{children:e})}return(0,y.jsx)(y.Fragment,{})}function A(e){return"YEARLY"===e}function T(e){return"MONTHLY"===e}const O=(e,t)=>{const s=e.item_id,r=t.item_id,a=s.split(x._.splitAddons),i=r.split(x._.splitAddons);let o=0,n=0;if(a&&Array.isArray(a)&&a.length>0){const e=a.pop();try{o=Number(e)}catch(e){o=0}(0,j.h)(o)||(o=0)}if(i&&Array.isArray(i)&&i.length>0){const e=i.pop();try{n=Number(e)}catch(e){n=0}(0,j.h)(n)||(n=0)}return o-n};const P=e=>{const{selectedAddonId:t,selectAddon:s,currentlyActiveAddon:r,currentPlanType:i}=(0,o.useContext)(W),{addons:l}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"AddonsTable__Table__Header pl-1",children:(0,y.jsx)(d.Dx,{level:5,children:"YEARLY"===i?(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.addons.annualShipments",defaultMessage:"Annual shipments"}):(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.addons.monthlyShipments",defaultMessage:"Monthly shipments"})})}),l.map((e=>(0,y.jsxs)("div",{className:"AddonsTable__Table__Header "+(t===e.id||r.itemPriceId===e.id?"plan-active":""),children:[(0,y.jsx)(d.Dx,{level:5,children:C(e.item_id)}),(0,y.jsx)(a.Z,{className:"AddonsTable__Table__SelectionButton "+(t===e.id||r.itemPriceId===e.id?"AddonsTable__Table__SelectionButton--selected":""),onClick:()=>s(e),children:r.itemPriceId===e.id?(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.active",defaultMessage:"Active"}):t===e.id?(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.selected",defaultMessage:"Selected"}):(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.select",defaultMessage:"Select"})})]},e.name+e.period_unit+"_header")))]})};const N=e=>{const{description:t,children:s,rowKey:r,type:a}=e,{trackToTalkPlans:i,talkAndReviewPlans:n,selectedAddonId:l,currentlyActiveAddon:d}=(0,o.useContext)(W),c="trackToTalk"===a?i:n;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"AddonsTable__Table__FeatureDescription",children:t}),c.map((e=>(0,y.jsx)("div",{className:"AddonsTable__Table__Cell "+(l===e.id||d.itemPriceId===e.id?"plan-active":""),children:s(e)},e.name+e.period_unit+r)))]})};const _=e=>{let{active:t}=e;return(0,y.jsx)("svg",{version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"15px",height:"16px",xmlns:"http://www.w3.org/2000/svg",children:(0,y.jsx)("g",{transform:"matrix(1 0 0 1 -681 -245 )",children:(0,y.jsx)("path",{d:"M 8.09375 9.370000000000001  C 7.93402777777778 9.523333333333333  7.7361111111111125 9.6  7.5 9.6  C 7.263888888888889 9.6  7.065972222222221 9.523333333333333  6.90625 9.370000000000001  C 6.746527777777778 9.216666666666667  6.666666666666666 9.026666666666667  6.666666666666666 8.8  C 6.666666666666666 8.573333333333334  6.746527777777778 8.383333333333335  6.90625 8.23  C 7.065972222222221 8.076666666666666  7.263888888888889 8  7.5 8  C 7.7361111111111125 8  7.93402777777778 8.076666666666666  8.09375 8.23  C 8.253472222222223 8.383333333333335  8.333333333333334 8.573333333333334  8.333333333333334 8.8  C 8.333333333333334 9.026666666666667  8.253472222222223 9.216666666666667  8.09375 9.370000000000001  Z M 4.760416666666667 9.370000000000001  C 4.600694444444446 9.523333333333333  4.4027777777777795 9.6  4.166666666666667 9.6  C 3.9305555555555562 9.6  3.7326388888888893 9.523333333333333  3.5729166666666665 9.370000000000001  C 3.4131944444444446 9.216666666666667  3.333333333333333 9.026666666666667  3.333333333333333 8.8  C 3.333333333333333 8.573333333333334  3.4131944444444446 8.383333333333335  3.5729166666666665 8.23  C 3.7326388888888893 8.076666666666666  3.9305555555555562 8  4.166666666666667 8  C 4.4027777777777795 8  4.600694444444446 8.076666666666666  4.760416666666667 8.23  C 4.920138888888891 8.383333333333335  5 8.573333333333334  5 8.8  C 5 9.026666666666667  4.920138888888891 9.216666666666667  4.760416666666667 9.370000000000001  Z M 11.427083333333332 9.370000000000001  C 11.267361111111112 9.523333333333333  11.069444444444446 9.6  10.833333333333334 9.6  C 10.597222222222223 9.6  10.399305555555557 9.523333333333333  10.239583333333334 9.370000000000001  C 10.079861111111112 9.216666666666667  10.000000000000002 9.026666666666667  10 8.8  C 10.000000000000002 8.573333333333334  10.079861111111112 8.383333333333335  10.239583333333334 8.23  C 10.399305555555557 8.076666666666666  10.597222222222223 8  10.833333333333334 8  C 11.069444444444446 8  11.267361111111112 8.076666666666666  11.427083333333332 8.23  C 11.586805555555557 8.383333333333335  11.666666666666666 8.573333333333334  11.666666666666666 8.8  C 11.666666666666666 9.026666666666667  11.586805555555557 9.216666666666667  11.427083333333332 9.370000000000001  Z M 8.09375 12.569999999999999  C 7.93402777777778 12.723333333333334  7.7361111111111125 12.8  7.5 12.8  C 7.263888888888889 12.8  7.065972222222221 12.723333333333334  6.90625 12.569999999999999  C 6.746527777777778 12.416666666666668  6.666666666666666 12.226666666666668  6.666666666666666 12  C 6.666666666666666 11.773333333333335  6.746527777777778 11.583333333333334  6.90625 11.430000000000001  C 7.065972222222221 11.276666666666667  7.263888888888889 11.2  7.5 11.2  C 7.7361111111111125 11.2  7.93402777777778 11.276666666666667  8.09375 11.430000000000001  C 8.253472222222223 11.583333333333334  8.333333333333334 11.773333333333335  8.333333333333334 12  C 8.333333333333334 12.226666666666668  8.253472222222223 12.416666666666668  8.09375 12.569999999999999  Z M 4.760416666666667 12.569999999999999  C 4.600694444444446 12.723333333333334  4.4027777777777795 12.8  4.166666666666667 12.8  C 3.9305555555555562 12.8  3.7326388888888893 12.723333333333334  3.5729166666666665 12.569999999999999  C 3.4131944444444446 12.416666666666668  3.333333333333333 12.226666666666668  3.333333333333333 12  C 3.333333333333333 11.773333333333335  3.4131944444444446 11.583333333333334  3.5729166666666665 11.430000000000001  C 3.7326388888888893 11.276666666666667  3.9305555555555562 11.2  4.166666666666667 11.2  C 4.4027777777777795 11.2  4.600694444444446 11.276666666666667  4.760416666666667 11.430000000000001  C 4.920138888888891 11.583333333333334  5 11.773333333333335  5 12  C 5 12.226666666666668  4.920138888888891 12.416666666666668  4.760416666666667 12.569999999999999  Z M 11.427083333333332 12.569999999999999  C 11.267361111111112 12.723333333333334  11.069444444444446 12.8  10.833333333333334 12.8  C 10.597222222222223 12.8  10.399305555555557 12.723333333333334  10.239583333333334 12.569999999999999  C 10.079861111111112 12.416666666666668  10.000000000000002 12.226666666666668  10 12  C 10.000000000000002 11.773333333333335  10.079861111111112 11.583333333333334  10.239583333333334 11.430000000000001  C 10.399305555555557 11.276666666666667  10.597222222222223 11.2  10.833333333333334 11.2  C 11.069444444444446 11.2  11.267361111111112 11.276666666666667  11.427083333333332 11.430000000000001  C 11.586805555555557 11.583333333333334  11.666666666666666 11.773333333333335  11.666666666666666 12  C 11.666666666666666 12.226666666666668  11.586805555555557 12.416666666666668  11.427083333333332 12.569999999999999  Z M 13.75 16  L 1.25 16  C 0.9166666666666663 16  0.625 15.88  0.3750000000000001 15.64  C 0.12499999999999992 15.400000000000002  0 15.120000000000001  0 14.8  L 0 2.4  C 0 2.0800000000000005  0.12499999999999992 1.8000000000000007  0.3750000000000001 1.56  C 0.625 1.3200000000000003  0.9166666666666663 1.2  1.25 1.2  L 2.6041666666666665 1.2  L 2.6041666666666665 0  L 3.9583333333333335 0  L 3.9583333333333335 1.2  L 11.041666666666668 1.2  L 11.041666666666668 0  L 12.395833333333332 0  L 12.395833333333332 1.2  L 13.75 1.2  C 14.083333333333336 1.2  14.375 1.3200000000000003  14.625000000000002 1.56  C 14.875 1.8000000000000007  15 2.0800000000000005  15 2.4  L 15 14.8  C 15 15.120000000000001  14.875 15.400000000000002  14.625000000000002 15.64  C 14.375 15.88  14.083333333333336 16  13.75 16  Z M 1.25 14.8  L 13.75 14.8  L 13.75 6.2  L 1.25 6.2  L 1.25 14.8  Z M 1.25 2.4  L 1.25 5  L 13.75 5  L 13.75 2.4  L 1.25 2.4  Z M 1.25 2.4  L 1.25 5  L 1.25 2.4  Z ",fillRule:"nonzero",fill:t?"white":"#555a64",stroke:"none",transform:"matrix(1 0 0 1 681 245 )"})})})},Z=e=>{let{active:t}=e;return(0,y.jsx)("svg",{version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"14px",height:"16px",xmlns:"http://www.w3.org/2000/svg",children:(0,y.jsx)("g",{transform:"matrix(1 0 0 1 -811 -245 )",children:(0,y.jsx)("path",{d:"M 5.872222222222224 10.84  C 5.5092592592592595 11.213333333333333  5.062037037037037 11.4  4.530555555555555 11.4  C 3.9990740740740733 11.4  3.551851851851852 11.213333333333333  3.188888888888888 10.84  C 2.825925925925926 10.466666666666667  2.644444444444445 10.006666666666666  2.644444444444445 9.459999999999999  C 2.644444444444445 8.913333333333334  2.825925925925926 8.453333333333335  3.188888888888888 8.08  C 3.551851851851852 7.706666666666668  3.9990740740740733 7.520000000000001  4.530555555555555 7.5200000000000005  C 5.062037037037037 7.520000000000001  5.5092592592592595 7.706666666666668  5.872222222222224 8.08  C 6.235185185185186 8.453333333333335  6.416666666666666 8.913333333333334  6.416666666666666 9.459999999999999  C 6.416666666666666 10.006666666666666  6.235185185185186 10.466666666666667  5.872222222222224 10.84  Z M 12.833333333333332 16  L 1.1666666666666665 16  C 0.8555555555555552 16  0.5833333333333333 15.88  0.3500000000000001 15.64  C 0.11666666666666659 15.400000000000002  0 15.120000000000001  0 14.8  L 0 2.4  C 0 2.0800000000000005  0.11666666666666659 1.8000000000000007  0.3500000000000001 1.56  C 0.5833333333333333 1.3200000000000003  0.8555555555555552 1.2  1.1666666666666665 1.2  L 2.4305555555555554 1.2  L 2.4305555555555554 0  L 3.6944444444444446 0  L 3.6944444444444446 1.2  L 10.305555555555557 1.2  L 10.305555555555557 0  L 11.569444444444443 0  L 11.569444444444443 1.2  L 12.833333333333332 1.2  C 13.144444444444446 1.2  13.416666666666668 1.3200000000000003  13.650000000000002 1.56  C 13.883333333333333 1.8000000000000007  14 2.0800000000000005  14 2.4  L 14 14.8  C 14 15.120000000000001  13.883333333333333 15.400000000000002  13.650000000000002 15.64  C 13.416666666666668 15.88  13.144444444444446 16  12.833333333333332 16  Z M 1.1666666666666665 14.8  L 12.833333333333332 14.8  L 12.833333333333332 6.2  L 1.1666666666666665 6.2  L 1.1666666666666665 14.8  Z M 1.1666666666666665 2.4  L 1.1666666666666665 5  L 12.833333333333332 5  L 12.833333333333332 2.4  L 1.1666666666666665 2.4  Z M 1.1666666666666665 2.4  L 1.1666666666666665 5  L 1.1666666666666665 2.4  Z ",fillRule:"nonzero",fill:t?"white":"#555a64",stroke:"none",transform:"matrix(1 0 0 1 811 245 )"})})})};const I=(0,o.memo)((()=>(0,y.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"125",height:"36",viewBox:"0 0 247.984 73.115",children:[(0,y.jsxs)("defs",{children:[(0,y.jsx)("clipPath",{id:"clip-path",children:(0,y.jsx)("rect",{id:"Rettangolo_2613","data-name":"Rettangolo 2613",width:"129.966",height:"41.062",transform:"translate(0 0)",fill:"#26282e"})}),(0,y.jsx)("clipPath",{id:"clip-path-2",children:(0,y.jsx)("rect",{id:"Rettangolo_2612","data-name":"Rettangolo 2612",width:"138.939",height:"58.915",fill:"#f46d5b"})})]}),(0,y.jsxs)("g",{id:"Raggruppa_10111","data-name":"Raggruppa 10111",transform:"translate(-803.016 -992.3)",children:[(0,y.jsx)("g",{id:"Raggruppa_9518","data-name":"Raggruppa 9518",transform:"translate(932.013 1057.595) rotate(-173)",children:(0,y.jsxs)("g",{id:"Raggruppa_9517","data-name":"Raggruppa 9517",transform:"translate(0 0)",clipPath:"url(#clip-path)",children:[(0,y.jsx)("path",{id:"Tracciato_7085","data-name":"Tracciato 7085",d:"M9.331,11.8a3.075,3.075,0,0,1,.342-1.6,21.154,21.154,0,0,0,1.982-4.229q1.028-2.793.6-3.308-.223-.27-3.05.316T3.474,4.048Q.566,4.535.151,4.032T.462,2.913q1.33-1.129,7-2.186C7.624.7,7.852.656,8.14.606Q13.676-.507,14.446.425a2.883,2.883,0,0,1,.42,2.105,22.286,22.286,0,0,1-1.522,5.883,11.923,11.923,0,0,1-2.894,4.669q-.556.472-.88.079A2.415,2.415,0,0,1,9.331,11.8",transform:"translate(112.231 4.41)",fill:"#26282e"}),(0,y.jsx)("path",{id:"Tracciato_7086","data-name":"Tracciato 7086",d:"M112.3,3.615c-.119.082-1.561,1.1-4.057,2.784s-6.051,4.026-10.457,6.646a166.809,166.809,0,0,1-15.573,8.2c-2.96,1.327-6.045,2.668-9.273,3.856-1.6.63-3.254,1.167-4.9,1.75-.829.277-1.67.531-2.508.8s-1.677.535-2.531.765A125.6,125.6,0,0,1,42.4,32.589a123.573,123.573,0,0,1-19.057.72l-2.123-.1-1.034-.049-1.013-.086-3.847-.333-3.482-.44-1.6-.207-1.488-.252c-3.841-.607-6.516-1.27-7.713-1.572-1.252-.329-1.53-.749.012-.561,1.237.136,3.938.645,7.777,1.092L10.319,31l1.593.15,3.464.327,3.816.219,1,.059,1.023.023,2.1.043a126.633,126.633,0,0,0,18.759-1.1,125.494,125.494,0,0,0,20.164-4.44c.834-.238,1.654-.513,2.472-.787s1.638-.537,2.449-.819c1.607-.6,3.224-1.144,4.782-1.786,3.15-1.209,6.159-2.569,9.047-3.908a166.277,166.277,0,0,0,15.2-8.245c4.3-2.63,7.784-4.981,10.234-6.669s3.873-2.717,3.991-2.8c3.957-2.8,5.873-.468,1.889,2.351",transform:"translate(10.536 6.799)",fill:"#26282e"})]})}),(0,y.jsx)("g",{id:"Raggruppa_9516","data-name":"Raggruppa 9516",transform:"matrix(0.995, 0.105, -0.105, 0.995, 912.822, 992.3)",children:(0,y.jsxs)("g",{id:"Raggruppa_9515","data-name":"Raggruppa 9515",clipPath:"url(#clip-path-2)",children:[(0,y.jsx)("path",{id:"Tracciato_7081","data-name":"Tracciato 7081",d:"M.046,114.67a1.978,1.978,0,0,1,.568-1.941,5.951,5.951,0,0,1,1.767-1.095l18.02-4.991a6.333,6.333,0,0,1,2.413.035,1.849,1.849,0,0,1,1.424,1.71,1.209,1.209,0,0,1-.336.886,7.275,7.275,0,0,1-.92.986,7.482,7.482,0,0,1-1.135.835,1.282,1.282,0,0,1-.931.273l-17.7,5.087a3.321,3.321,0,0,1-1.97-.3,1.928,1.928,0,0,1-1.2-1.486",transform:"translate(0 -67.063)",fill:"#f46d5b"}),(0,y.jsx)("path",{id:"Tracciato_7082","data-name":"Tracciato 7082",d:"M79.34,69.442a3.568,3.568,0,0,1,.082-1.188,7.618,7.618,0,0,1,.666-1.32q2.424-4.279,4.895-8.61a93.176,93.176,0,0,0,4.438-8.832,54.28,54.28,0,0,0,3.085-9.2,33.638,33.638,0,0,0,.837-9.715A8.232,8.232,0,0,0,88.23,32.64a40.47,40.47,0,0,0-4.107,4.176q-1.944,2.28-3.812,4.16a6.237,6.237,0,0,1-4.13,2.007,8.018,8.018,0,0,1-1.483-.065,5.529,5.529,0,0,1-1.5-.409,3.37,3.37,0,0,1-1.235-.918,2.423,2.423,0,0,1-.577-1.5l-.011-.2A10.477,10.477,0,0,1,72.9,37.3,26.743,26.743,0,0,1,75.132,34.8q1.213-1.2,2.439-2.257t2.163-1.9q1.31-1.257,3.009-2.635T86.3,25.4a23.22,23.22,0,0,1,3.878-2.091,12.221,12.221,0,0,1,4.089-.969q3.541-.2,5.041,1.937A10.566,10.566,0,0,1,101,29.854a37.929,37.929,0,0,1-1.5,12.86,76.1,76.1,0,0,1-4.7,12.151l.022.393-2.3,4.667.886-.05a51.041,51.041,0,0,1,8.677-4.481q4.678-1.89,9.241-3.231l.394-.022a6.577,6.577,0,0,1,2.983.425q1.213.524,1.334,2.687a4.239,4.239,0,0,1-.643,2.6q-.777.242-1.983.7a4.086,4.086,0,0,1-2.1.315l-9.445,3.982L86.586,72a6.981,6.981,0,0,1-3.1.963,3.981,3.981,0,0,1-2.719-.982,3.4,3.4,0,0,1-1.424-2.535",transform:"translate(-44.924 -14.05)",fill:"#f46d5b"}),(0,y.jsx)("path",{id:"Tracciato_7083","data-name":"Tracciato 7083",d:"M169.76,38.052a113.492,113.492,0,0,1,.936-13.059q.846-6.55,1.692-12.831a1.767,1.767,0,0,1,.452-1.3,11.759,11.759,0,0,0,.881-.964,1.1,1.1,0,0,1,.222-.431,1.124,1.124,0,0,0,.223-.431,15.238,15.238,0,0,1,5.4-6.49A13.29,13.29,0,0,1,187.521,0a11.779,11.779,0,0,1,4.005.651,8.062,8.062,0,0,1,2.8,1.773,13.791,13.791,0,0,1,2.133,2.741q.955,1.587,2.121,3.554a23.121,23.121,0,0,1,1.35,4.466,47.154,47.154,0,0,1,.744,5.109q.234,2.606.31,5.157t.045,4.719q-.267,3.576-.915,7.526a42.848,42.848,0,0,1-2,7.675,27.578,27.578,0,0,1-3.618,6.839,18.31,18.31,0,0,1-5.764,5.129,27.17,27.17,0,0,1-3.113,1.585,7.986,7.986,0,0,1-3.318.714,9.853,9.853,0,0,1-6.211-1.982,13.864,13.864,0,0,1-3.839-4.879,22.864,22.864,0,0,1-1.975-6.372,36.979,36.979,0,0,1-.511-6.353m8.075,4.448q.1.762.353,1.957a15,15,0,0,0,.727,2.4,7.248,7.248,0,0,0,1.22,2.077,2.469,2.469,0,0,0,1.94.894,3.525,3.525,0,0,0,1.687-.411,8.757,8.757,0,0,0,1.368-.849A16.763,16.763,0,0,0,189.7,43.42,27.039,27.039,0,0,0,192.336,37a37.678,37.678,0,0,0,1.178-6.926q.263-3.52.308-6.775c0-.288.01-.759.019-1.41s0-1.319-.027-2.007-.036-1.356-.027-2.007.014-1.084.017-1.3a28.386,28.386,0,0,0-.5-3.207,24.538,24.538,0,0,0-1.14-3.92A11.294,11.294,0,0,0,190.2,6.112a3.858,3.858,0,0,0-2.963-1.45,5.632,5.632,0,0,0-2.286.566,12.888,12.888,0,0,0-2.46,1.431,9.347,9.347,0,0,0-1.98,1.98,3.84,3.84,0,0,0-.843,2.212,2.023,2.023,0,0,0,.469,1.417,2.368,2.368,0,0,1,.466,1.633l-.016,1.193a19.169,19.169,0,0,0-.405,1.893q-.293,1.57-.641,3.3t-.641,3.3q-.293,1.569-.405,1.892A39.636,39.636,0,0,0,177.936,31q-.094,2.821-.127,5.422,0,.325-.016,1.193c-.008.58,0,1.193.029,1.844s.037,1.267.029,1.845-.013.976-.016,1.193",transform:"translate(-106.852 0)",fill:"#f46d5b"}),(0,y.jsx)("path",{id:"Tracciato_7084","data-name":"Tracciato 7084",d:"M296.473,23.48a2.681,2.681,0,0,1,1-1.2,1.945,1.945,0,0,1,1.291-.258,3.387,3.387,0,0,1,.608.148,2.384,2.384,0,0,1,.645.346l1.088.761a2.959,2.959,0,0,1,1.088,1.115,2.243,2.243,0,0,1,.218,1.351,3.526,3.526,0,0,1-.342,1.081q-1.691,3.41-3.4,6.719t-3.523,6.67a2.3,2.3,0,0,0-.3.8q-.074.538.369.6a1.819,1.819,0,0,0,1.109-.332,15.209,15.209,0,0,1,3.828-1.248,12.393,12.393,0,0,1,3.961-.1,8.309,8.309,0,0,1,3.7,1.36,8.223,8.223,0,0,1,2.4,2.568,9.551,9.551,0,0,1,1.189,3.32,12.165,12.165,0,0,1,.049,3.647,11.143,11.143,0,0,1-1.456,4.279,10.659,10.659,0,0,1-2.794,3.113,10.826,10.826,0,0,1-3.707,1.781,10.486,10.486,0,0,1-4.158.252,8.657,8.657,0,0,1-3.411-1.208,8.858,8.858,0,0,1-2.6-2.433,9.826,9.826,0,0,1-1.521-3.365,10.562,10.562,0,0,1-.177-4,10.978,10.978,0,0,1,.257-1.286q.169-.654.351-1.273l.47-1.547-.181-.089q-2.745,5.23-5.478,10.366t-5.356,10.415a2.154,2.154,0,0,1-2.325,1.454,3.141,3.141,0,0,1-1.317-.5l-1.056-.757a2.433,2.433,0,0,1-1.274-2.462,2.906,2.906,0,0,1,.373-1.077q2.534-5.1,5.146-10.056t5.3-9.972l.245-.5a1.322,1.322,0,0,0,.133-.384.283.283,0,0,0-.273-.36,2.532,2.532,0,0,0-1.1.237,9.527,9.527,0,0,1-4.953.643,7.251,7.251,0,0,1-2.92-1.028,6.984,6.984,0,0,1-2.093-2.01,7.594,7.594,0,0,1-1.138-2.749,9.529,9.529,0,0,1-.087-3.25,9.426,9.426,0,0,1,.341-1.548,13.17,13.17,0,0,1,.487-1.319q.258-.593.493-1.012t.36-.627a4.635,4.635,0,0,0,.35-.677,2.083,2.083,0,0,0,.126-.45.313.313,0,0,0-.033-.23.309.309,0,0,1-.033-.23,1,1,0,0,1,.324-.487,3.646,3.646,0,0,1,.888-.6,10.779,10.779,0,0,1,2.989-1.009,9.477,9.477,0,0,1,2.959-.078,8.761,8.761,0,0,1,3.008.975,7.64,7.64,0,0,1,2.37,1.984,8.087,8.087,0,0,1,1.439,2.9,9.228,9.228,0,0,1,.182,3.73c-.006.042.081-.086.262-.383s.4-.67.668-1.117.539-.919.822-1.418.514-.928.692-1.291q.875-1.684,1.729-3.339t1.7-3.344m-16.062,9.3a6.916,6.916,0,0,0-.044,1.267,5.227,5.227,0,0,0,.236,1.337,2.888,2.888,0,0,0,.652,1.121,1.958,1.958,0,0,0,1.209.584,1.531,1.531,0,0,0,1.495-.681,4.058,4.058,0,0,0,.764-1.941,4.935,4.935,0,0,0-.015-1.42,3.819,3.819,0,0,0-.448-1.318,3.327,3.327,0,0,0-.922-1.028,3.072,3.072,0,0,0-1.439-.551.674.674,0,0,0-.612.239,2.283,2.283,0,0,0-.436.714,6.357,6.357,0,0,0-.284.9c-.074.312-.127.574-.156.784M301.1,55.139a3.244,3.244,0,0,0,1.786-.223,3.879,3.879,0,0,0,1.38-1.019,5.557,5.557,0,0,0,.937-1.547,7.361,7.361,0,0,0,.488-1.8,5.377,5.377,0,0,0-.089-2.058,4.725,4.725,0,0,0-.77-1.668,4.42,4.42,0,0,0-1.3-1.177,4.465,4.465,0,0,0-1.692-.586,5.442,5.442,0,0,0-.978-.037,4.9,4.9,0,0,0-1.053.162,3.747,3.747,0,0,0-.957.4,1.5,1.5,0,0,0-.621.656.982.982,0,0,1,.074.4,2.289,2.289,0,0,1-.128.466q-.1.276-.222.679a5.012,5.012,0,0,0-.175.572,6.856,6.856,0,0,0-.129.707,7.218,7.218,0,0,0,.009,1.934,6.145,6.145,0,0,0,.562,1.9,4.542,4.542,0,0,0,1.149,1.494,3.3,3.3,0,0,0,1.733.753",transform:"translate(-172.625 -13.849)",fill:"#f46d5b"})]})})]})]})));const D=(0,o.memo)((()=>{const{currentPlanType:e,setCurrentPlanType:t}=(0,o.useContext)(W);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"flex justify-center gap-1 mt-1",children:[(0,y.jsxs)("button",{className:"PlansDataDrawer__RecurrencySelectorButton "+(A(e)?"active":""),onClick:()=>t("YEARLY"),children:[(0,y.jsx)("div",{children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.annual",defaultMessage:"Annual"})}),(0,y.jsx)(_,{active:"YEARLY"===e})]}),(0,y.jsxs)("button",{className:"PlansDataDrawer__RecurrencySelectorButton "+(T(e)?"active":""),onClick:()=>t("MONTHLY"),children:[(0,y.jsx)("div",{children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.monthly",defaultMessage:"Monthly"})}),(0,y.jsx)(Z,{active:T(e)})]})]}),(0,y.jsxs)("div",{className:"text-center relative",children:[(0,y.jsx)(d.Dx,{className:"mt-2 mb-1",level:5,children:A(e)?(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.yearlyPlan",defaultMessage:"Annual plan"}):(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.monthlyPlan",defaultMessage:"Monthly plan"})}),(0,y.jsx)("div",{className:"PlansDataDrawer__DiscountImgAddon",hidden:T(e),children:(0,y.jsx)(I,{})})]})]})}));const E=(0,o.memo)((()=>{const{talkAndReviewPlans:e,currentPlanType:t}=(0,o.useContext)(W);return(0,y.jsxs)("div",{className:"flex flex-column justify-center p-1",children:[(0,y.jsx)("div",{className:"text-center mb-1",children:(0,y.jsx)(d.xv,{type:"secondary",children:(0,y.jsx)(n.Z,{id:"addons.whatsappModal.tab.content.bundle2",defaultMessage:"With this plan you'll send one <b>tracking notification</b> for each shipping and, as soon as the package is delivered, a message asking to your customer to <b>leave a review</b>.",values:{b:e=>(0,y.jsx)("b",{children:e})}})})}),(0,y.jsx)(D,{}),(0,y.jsxs)("div",{className:"AddonsTable__Table mt-2",style:{gridTemplateColumns:`130px repeat(${e.length}, 1fr)`},children:[(0,y.jsx)(P,{addons:e}),(0,y.jsx)(N,{description:(0,y.jsxs)("span",{children:[(0,y.jsx)("sup",{children:"*"}),(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.priceLabel",defaultMessage:"Price"})]}),type:"talkAndReview",rowKey:"price",children:e=>w(e,"YEARLY"===t)},"price"),(0,y.jsx)(N,{description:(0,y.jsxs)("span",{children:[(0,y.jsx)("sup",{children:"*"}),(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.addons.pricePerNotification",defaultMessage:"Price per notification"})]}),type:"talkAndReview",rowKey:"pricePerNotification",children:e=>M(e)},"pricePerNotification")]})]})}));const k=()=>{const{trackToTalkPlans:e,currentPlanType:t}=(0,o.useContext)(W);return(0,y.jsxs)("div",{className:"flex flex-column justify-center p-2",children:[(0,y.jsx)("div",{className:"text-center mb-1",children:(0,y.jsx)(d.xv,{type:"secondary",children:(0,y.jsx)(n.Z,{id:"addons.whatsappModal.tab.content.bundle1",defaultMessage:"With this plan you'll send <b>one tracking notification to your customer</b>, as soon as the package will be shipped.",values:{b:e=>(0,y.jsx)("b",{children:e})}})})}),(0,y.jsx)(D,{}),(0,y.jsxs)("div",{className:"AddonsTable__Table mt-2",style:{gridTemplateColumns:`130px repeat(${e.length}, 1fr)`},children:[(0,y.jsx)(P,{addons:e}),(0,y.jsx)(N,{description:(0,y.jsxs)("span",{children:[(0,y.jsx)("sup",{children:"*"}),(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.priceLabel",defaultMessage:"Price"})]}),type:"trackToTalk",rowKey:"price",children:e=>w(e,"YEARLY"===t)},"price"),(0,y.jsx)(N,{description:(0,y.jsxs)("span",{children:[(0,y.jsx)("sup",{children:"*"}),(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.addons.pricePerNotification",defaultMessage:"Price per notification"})]}),type:"trackToTalk",rowKey:"pricePerNotification",children:e=>M(e)},"pricePerNotification")]})]})};const L=()=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"AddonsTable",children:(0,y.jsxs)(b.default,{defaultActiveKey:"trackToTalk",centered:!0,children:[(0,y.jsx)(d.Jm,{tab:"Track to Talk",children:(0,y.jsx)(k,{})},"trackToTalk"),(0,y.jsx)(d.Jm,{tab:"Talk & Review",children:(0,y.jsx)(E,{})},"talkAndReview")]})}),(0,y.jsx)("small",{children:(0,y.jsx)(n.Z,{id:"addons.whatsappModal.tab.content.disclaimer.noVat",defaultMessage:"<sup>*</sup> All prices are excluding VAT",values:{sup:e=>(0,y.jsx)("sup",{children:e})}})}),(0,y.jsx)("div",{className:"text-center mt-2 mb-5",children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.addons.talkToTeamSales",defaultMessage:"For any doubts speak to our {teamSalesAnchor}",values:{teamSalesAnchor:(0,y.jsx)("a",{href:"https://api.whatsapp.com/send?phone=+393355911318&text=Ciao,+ho+bisogno+di+info+in+più+sui+prezzi+e+le+funzionalità+di+isendu",target:"_blank",rel:"noreferrer",children:"team sales"})}})})]});const R=(0,o.memo)((()=>(0,y.jsx)("div",{className:"PlansDataDrawer__CurrentPlan",children:(0,y.jsxs)("div",{className:"flex flex-column align-center pb-2 pt-2",children:[(0,y.jsxs)(d.Dx,{level:5,className:"mb-0",children:[(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.addons.bannerTitle",defaultMessage:"Give your plan a boost"})," "]}),(0,y.jsx)(d.xv,{type:"secondary",children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.addons.bannerSubtitle",defaultMessage:" With Whatsapp notifications your customers will receive updates directly on their smartphone"})})]})})));var F=s(51066),U=s(19959),G=s(50003),B=s(86896),$=s(22703),z=s(25108);const W=(0,o.createContext)({}),H=(0,c.Pi)((0,o.forwardRef)(((e,t)=>{const{activeAddon:s,currentStep:r,closeModal:a}=e,i=function(e,t,s){const r=(0,B.Z)(),{paymentSubscriptionsStore:a,financeStore:i,paymentMethodsStore:n,trackingNotificationsStore:l}=(0,G.o)(),[d,c]=(0,o.useState)(null),[p,u]=(0,o.useState)((null==s?void 0:s.recurringType)||"YEARLY"),[g,f]=(0,o.useState)(!1),{setEditState:b}=(0,o.useContext)(Ye),v=(0,o.useRef)(),x={...s};(0,o.useImperativeHandle)(e,(()=>({onNext:async()=>{if(d)return new Promise(((e,t)=>{M().then((()=>e(!0))).catch((e=>t(e)))}))},resetContext:T,getSelectedAddonId:()=>d,resetSelectedAddonId:()=>c(null),getSelectedAddon:()=>v.current}))),(0,o.useEffect)((function(){b((e=>({...e,hasModifiedAddon:!!d&&d!==(null==s?void 0:s.itemPriceId)})))}),[d,s,b]);const S=(0,o.useMemo)((()=>i.selectableWhatsappPrices.filter((e=>{var t;const s="YEARLY"===p?"year"===e.period_unit:"month"===e.period_unit,r=null===(t=e.id)||void 0===t?void 0:t.startsWith(F.Subscriptions.subscriptionPrefixWhatsApp1);return s&&r})).sort(O)),[i.selectableWhatsappPrices,p]),j=(0,o.useMemo)((()=>i.selectableWhatsappPrices.filter((e=>{var t;const s="YEARLY"===p?"year"===e.period_unit:"month"===e.period_unit,r=null===(t=e.id)||void 0===t?void 0:t.startsWith(F.Subscriptions.subscriptionPrefixWhatsApp2);return s&&r})).sort(O)),[i.selectableWhatsappPrices,p]),w=(0,o.useCallback)((e=>{var t;c((t=>t!==e.id?e.id:null)),v.current=(null===(t=v.current)||void 0===t?void 0:t.id)===e.id?null:e;const s=document.querySelector(".ant-drawer-body");s&&setTimeout((()=>s.scrollTo({top:400,behavior:"smooth"})),200)}),[c]),M=async()=>{if(0!==n.paymentMethodsArray.length){if(f(!0),d)try{var e,t;s?await a.changeAddon({type:"whatsapp",itemPriceId:d}):await a.createAddon({type:"whatsapp",itemPriceId:d}),null!=l&&null!==(e=l.allSettings)&&void 0!==e&&null!==(t=e.companySettings)&&void 0!==t&&t.whatsappEnabled||l.updateWhatsappEnabledTrackingNotification({enabled:!0}).catch((e=>{z.log(e)}))}catch(e){U.T.error({message:r.formatMessage($.s.createAddonErrorMessage),description:r.formatMessage($.s.createAddonErrorDescription)})}finally{f(!1)}}else{const e=r.formatMessage($.s.settingsBillingsLink);U.T.error({message:r.formatMessage($.s.createAddonErrorMessage),description:r.formatMessage($.s.createAddonErrorMissingPayment,{link:(0,y.jsx)(h.rU,{to:`/${m.H.settings.root}/${m.H.settings.billings}`,children:e})})})}},C=!!d&&d!==x.itemPriceId,A=(0,o.useCallback)((e=>{const t=e.target.checked;b((e=>({...e,hasAcceptedDisclaimer:t})))}),[b]),T=(0,o.useCallback)((()=>{u("YEARLY"),c(null)}),[]);return{selectedAddonId:d,setSelectedAddonId:c,currentlyActiveAddon:x,trackToTalkPlans:S,talkAndReviewPlans:j,currentPlanType:p,setCurrentPlanType:u,isLoading:g,buyAddon:M,resetContext:T,isOncomingAddon:"FUTURE"===(null==x?void 0:x.status),showAddonsDisclaimer:C,toggleAddonsDisclaimer:A,selectAddon:w}}(t,0,s);return r!==qe.AddonsDetails?(0,y.jsx)(y.Fragment,{}):(0,y.jsxs)(W.Provider,{value:i,children:[(0,y.jsx)(R,{}),(0,y.jsxs)(V,{children:[(0,y.jsx)(d.Dx,{level:3,children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.addons.titleNew",defaultMessage:"Add Whatsapp notifications"})}),(0,y.jsx)(L,{}),(0,y.jsx)(f,{})]})]})}))),V=e=>(0,y.jsx)("div",{className:"PlansDataDrawer__Content",children:e.children});var q=s(35431);const Y=()=>(0,y.jsx)("div",{className:"PlansDataDrawer__CurrentPlan",children:(0,y.jsxs)("div",{className:"flex flex-column align-center pb-2 pt-2",children:[(0,y.jsx)(d.Dx,{level:5,className:"mb-0",children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.billings.title",defaultMessage:"Add payment data"})}),(0,y.jsx)(d.xv,{type:"secondary",children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.billings.subtitle",defaultMessage:"In order to proceed with the purchase please provide your billing details and choose your preferred payment method"})})]})});var K=s(49409),X=s(71230),Q=s(15746),J=s(32787),ee=s(48170),te=s(42513),se=s(97516),re=s(50049),ae=s(25108);const ie=(0,re.vU)({vatCountryMismatch:{id:"billing.address.form.content.vat.country.mismatch",defaultMessage:"Country codes are not the same"},vatError:{id:"billing.address.form.content.vatNumber.vat.error",defaultMessage:"Error checking vat number"}}),oe=(0,c.Pi)((e=>{var t,s,r;const{companiesStore:a}=(0,G.o)(),{formInstance:i}=e,l=(0,B.Z)(),[c,p]=(0,o.useState)((null===(t=a.companyInfo)||void 0===t||null===(s=t.billingAddress)||void 0===s?void 0:s.countryIsoCode)||""),u=null===(r=a.companyInfo)||void 0===r?void 0:r.isPrivate;return(0,y.jsx)("div",{className:"BillingAddressForm",children:(0,y.jsxs)(K.Z,{layout:"vertical",form:i,children:[(0,y.jsxs)(X.Z,{gutter:16,children:[(0,y.jsx)(Q.Z,{span:12,children:(0,y.jsx)(K.Z.Item,{label:(0,y.jsx)(d.xv,{type:"secondary",children:(0,y.jsx)(n.Z,{id:"settings.tabs.company",defaultMessage:"Company"})}),name:"companyName",rules:[{required:!0,message:(0,y.jsx)(n.Z,{id:"form.validation.input.required",defaultMessage:"Required"})}],children:(0,y.jsx)(J.default,{})})}),(0,y.jsx)(Q.Z,{span:12,children:(0,y.jsx)(K.Z.Item,{name:"street",label:(0,y.jsx)(d.xv,{type:"secondary",children:(0,y.jsx)(n.Z,{id:"billing.address.form.content.label.street",defaultMessage:"Street"})}),rules:[{required:!0,message:(0,y.jsx)(n.Z,{id:"form.validation.input.required",defaultMessage:"Required"})}],children:(0,y.jsx)(ee.e,{onSelect:e=>{try{const t=JSON.parse(e);t&&i.setFieldsValue(t)}catch(e){ae.error(e)}}})})})]}),(0,y.jsxs)(X.Z,{gutter:16,children:[(0,y.jsx)(Q.Z,{span:6,children:(0,y.jsx)(K.Z.Item,{name:"zipCode",label:(0,y.jsx)(n.Z,{id:"billing.address.form.content.label.postal_code",defaultMessage:"Postal code"}),rules:[{required:!0,message:(0,y.jsx)(n.Z,{id:"form.validation.input.required",defaultMessage:"Required"})}],children:(0,y.jsx)(J.default,{})})}),(0,y.jsx)(Q.Z,{span:18,children:(0,y.jsx)(K.Z.Item,{name:"city",label:(0,y.jsx)(n.Z,{id:"billing.address.form.content.label.city",defaultMessage:"City"}),rules:[{required:!0,message:(0,y.jsx)(n.Z,{id:"form.validation.input.required",defaultMessage:"Required"})}],children:(0,y.jsx)(J.default,{})})})]}),(0,y.jsxs)(X.Z,{gutter:16,children:[(0,y.jsx)(Q.Z,{span:6,children:(0,y.jsx)(K.Z.Item,{name:"state",label:(0,y.jsx)(n.Z,{id:"billing.address.form.content.label.state",defaultMessage:"State"}),rules:[{required:"IT"===c,message:(0,y.jsx)(n.Z,{id:"form.validation.input.required",defaultMessage:"Required"})}],children:(0,y.jsx)(J.default,{})})}),(0,y.jsx)(Q.Z,{span:18,children:(0,y.jsx)(K.Z.Item,{name:"countryIsoCode",label:(0,y.jsx)(n.Z,{id:"billing.address.form.content.label.country",defaultMessage:"Country"}),dependencies:["vatNumber"],rules:[{required:!0,message:(0,y.jsx)(n.Z,{id:"form.validation.input.required",defaultMessage:"Required"})},e=>{let{getFieldValue:t}=e;return{validator(e,s){if(u)return Promise.resolve();{const e=t("vatNumber");if(e){const t=e.substring(0,2);return s&&t!==s?Promise.reject(l.formatMessage(ie.vatCountryMismatch)):Promise.resolve()}return Promise.resolve()}}}}],children:(0,y.jsx)(se.O,{onChange:e=>p(e)})})})]}),(0,y.jsxs)(X.Z,{gutter:16,children:[!u&&(0,y.jsx)(Q.Z,{span:12,children:(0,y.jsx)(K.Z.Item,{name:"vatNumber",label:(0,y.jsx)(n.Z,{id:"billing.address.form.content.label.vatNumber",defaultMessage:"VAT Number"}),dependencies:["countryIsoCode"],hasFeedback:!0,validateTrigger:["onChange","onFocus"],rules:[{required:!u,message:(0,y.jsx)(n.Z,{id:"form.validation.input.notValid",defaultMessage:"Not valid"}),len:c===te.nR.IT?13:void 0},()=>({async validator(e,t){try{if(t.substring(0,2)!==c)return Promise.reject(l.formatMessage(ie.vatCountryMismatch))}catch(e){return Promise.reject(l.formatMessage(ie.vatError))}}})],children:(0,y.jsx)(J.default,{placeholder:"IT12345678901"})})}),!u&&"IT"===c&&(0,y.jsx)(Q.Z,{span:12,children:(0,y.jsx)(K.Z.Item,{name:"uniqueCode",label:(0,y.jsx)(n.Z,{id:"billing.address.form.content.label.uniqueCode",defaultMessage:"Unique Code"}),normalize:e=>e.toString().toUpperCase(),rules:[{pattern:/(^[A-Z0-9]{7}$)|(^$)/,message:(0,y.jsx)(n.Z,{id:"form.validation.input.len7",defaultMessage:"Must be 7 characters (digits or uppercase letters)"})}],children:(0,y.jsx)(J.default,{})})})]}),(0,y.jsx)(X.Z,{gutter:16,children:(0,y.jsx)(Q.Z,{span:24,children:(0,y.jsx)(K.Z.Item,{name:"email",label:(0,y.jsx)(n.Z,{id:"billing.address.form.content.label.email",defaultMessage:"Email/PEC"}),rules:[{type:"email",message:(0,y.jsx)(n.Z,{id:"form.validation.input.formatNotValid",defaultMessage:"Not valid"})}],children:(0,y.jsx)(J.default,{})})})})]})})}));var ne=s(90860),le=s(73615);const de=(0,re.vU)({cardPlaceholderCardNumber:{id:"chargebee.card.component.placeholder.cardNumber",defaultMessage:"0000 0000 0000 0000"},cardPlaceholderExpiry:{id:"chargebee.card.component.placeholder.expiry",defaultMessage:"MM / YY"},cardPlaceholderCvc:{id:"chargebee.card.component.placeholder.cvc",defaultMessage:"000"},cardVerificationErrorDescription:{id:"chargebee.card.component.card.verification.error",defaultMessage:"Card verification didn't go through. Please try again."}}),ce=(0,c.Pi)((e=>{let{cardRef:t,isRequired:s=!0,cardError:r,verticalLayout:a}=e;const[i,l]=(0,o.useState)(!0),d=(0,B.Z)(),c={classes:{focus:"focus",invalid:"invalid",empty:"empty",complete:"complete"},style:{base:{border:"1px solid #d9d9d9",margin:"11px"},invalid:{color:"#e41029",":focus":{color:"#e44d5f"},"::placeholder":{color:"#FFCCA5"}}},placeholder:{number:d.formatMessage(de.cardPlaceholderCardNumber),expiry:d.formatMessage(de.cardPlaceholderExpiry),cvv:d.formatMessage(de.cardPlaceholderCvc)}},u=a?{layout:"vertical"}:{labelCol:{span:6}};return(0,y.jsx)(y.Fragment,{children:window.Chargebee&&(0,y.jsx)(X.Z,{className:"chargebee-card-component-row-cardComponent-container",hidden:i,children:(0,y.jsxs)(Q.Z,{span:24,children:[(0,y.jsx)(X.Z,{children:(0,y.jsxs)(Q.Z,{span:24,children:[i&&(0,y.jsx)(ne.Z,{}),r&&(0,y.jsx)(p.Z,{className:"chargebee-card-component-alert-error",message:r,type:"error"})]})}),(0,y.jsx)(X.Z,{children:(0,y.jsx)(Q.Z,{span:24,children:(0,y.jsx)(le.Ak,{ref:t,className:"fieldset field",styles:c.style,classes:c.classes,placeholder:c.placeholder,onReady:()=>{l(!1)},children:(0,y.jsxs)(K.Z,{...u,children:[(0,y.jsx)(K.Z.Item,{name:"cardNumber",label:(0,y.jsx)(n.Z,{id:"chargebee.card.component.input.cardNumber",defaultMessage:"Card number"}),rules:[{required:s}],children:(0,y.jsx)(le.ZQ,{className:"chargebee-card-component-input"})}),(0,y.jsxs)(X.Z,{gutter:a?16:0,children:[(0,y.jsx)(Q.Z,{span:12,children:(0,y.jsx)(K.Z.Item,{labelCol:{span:12},name:"cardExpiry",label:(0,y.jsx)(n.Z,{id:"chargebee.card.component.input.expiry",defaultMessage:"Expiry"}),rules:[{required:s}],children:(0,y.jsx)(le.rw,{className:"chargebee-card-component-input"})})}),(0,y.jsx)(Q.Z,{span:12,children:(0,y.jsx)(K.Z.Item,{labelCol:{span:10},name:"cardCvc",label:(0,y.jsx)(n.Z,{id:"chargebee.card.component.input.cvc",defaultMessage:"CVC"}),rules:[{required:s}],children:(0,y.jsx)(le.mX,{className:"chargebee-card-component-input"})})})]})]})})})})]})})})}));var pe=s(4799),ue=s.n(pe),he=s(88630),me=s(46842);const ge=(0,re.vU)({ibanNotValid:{id:"sepa.form.component.iban.notValid",defaultMessage:"IBAN not valid"}}),ye=(0,c.Pi)((e=>{var t,s,r,a,i;let{formInstance:o,isRequired:l=!0}=e;const{usersStore:c}=(0,G.o)(),p=(0,B.Z)();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(K.Z,{form:o,labelCol:{span:6},children:[(0,y.jsx)(K.Z.Item,{name:"firstName",label:(0,y.jsx)(n.Z,{id:"sepa.form.component.ownerFirstName",defaultMessage:"Owner first name"}),initialValue:null!==(t=c.userInfo)&&void 0!==t&&t.firstName?`${null===(s=c.userInfo)||void 0===s?void 0:s.firstName}`:"",rules:[{required:l,message:(0,y.jsx)(n.Z,{id:"form.validation.input.required",defaultMessage:"Required"})}],children:(0,y.jsx)(J.default,{placeholder:"First name"})}),(0,y.jsx)(K.Z.Item,{name:"lastName",label:(0,y.jsx)(n.Z,{id:"sepa.form.component.ownerLastName",defaultMessage:"Owner last name"}),initialValue:null!==(r=c.userInfo)&&void 0!==r&&r.lastName?`${null===(a=c.userInfo)||void 0===a?void 0:a.lastName}`:"",hasFeedback:!1,rules:[{required:l,message:(0,y.jsx)(n.Z,{id:"form.validation.input.required",defaultMessage:"Required"})}],children:(0,y.jsx)(J.default,{placeholder:"Last name"})}),(0,y.jsx)(K.Z.Item,{name:"email",label:(0,y.jsx)(n.Z,{id:"sepa.form.component.email",defaultMessage:"Email"}),initialValue:null===(i=c.userInfo)||void 0===i?void 0:i.email,rules:[{required:l,message:(0,y.jsx)(n.Z,{id:"form.validation.input.required",defaultMessage:"Required"})},{type:"email",message:(0,y.jsx)(n.Z,{id:"sepa.form.component.email.formatNotValid",defaultMessage:"Email not valid"})}],children:(0,y.jsx)(J.default,{})}),(0,y.jsx)(K.Z.Item,{name:"iban",label:(0,y.jsx)(n.Z,{id:"sepa.form.component.iban",defaultMessage:"IBAN"}),rules:[{required:l,message:(0,y.jsx)(n.Z,{id:"form.validation.input.required",defaultMessage:"Required"})},()=>({validator:(e,t)=>t?ue().isValid(t)?Promise.resolve():Promise.reject(p.formatMessage(ge.ibanNotValid)):Promise.resolve()})],children:(0,y.jsx)(J.default,{addonBefore:(0,y.jsx)(he.Z,{}),placeholder:"IT00 A000 0000 0000 0000 0000",suffix:(0,y.jsx)(me.Z,{})})})]}),(0,y.jsx)(X.Z,{justify:"end",children:(0,y.jsx)(Q.Z,{span:18,children:(0,y.jsx)(d.xv,{type:"secondary",className:"sepa-form-component-disclaimer",children:(0,y.jsx)(n.Z,{id:"sepa.form.component.disclaimer",defaultMessage:"By providing your IBAN and confirming this payment, you authorise (A) isendu.com and Stripe, our payment service provider, to send instructions to your bank to debit your account and (B) your bank to debit your account in accordance with those instructions. You are entitled to a refund from your bank under the terms and conditions of your agreement with your bank. A refund must be claimed within 8 weeks starting from the date on which your account was debited."})})})})]})}));const fe=e=>{const{cardRef:t,sepaFormInstance:s,selectedTabKey:r,setSelectedTabKey:a}=e;return(0,y.jsx)("div",{className:"BillingPaymentMethodForm",children:(0,y.jsxs)(b.default,{defaultActiveKey:"card",onChange:e=>a(e),children:[(0,y.jsx)(d.Jm,{tab:(0,y.jsx)(n.Z,{id:"subscription.expired.modal.payment.method.radio.card",defaultMessage:"Credit card"}),children:(0,y.jsx)(ce,{cardError:"",cardRef:t,isRequired:"card"===r,verticalLayout:!0})},"card"),(0,y.jsx)(d.Jm,{tab:"Sepa",children:(0,y.jsx)(ye,{formInstance:s,isRequired:"sepa"===r})},"sepa")]})})};const be=(0,c.Pi)((0,o.forwardRef)(((e,t)=>{var s,r,a,i,l;const{companiesStore:c,paymentMethodsStore:p}=(0,G.o)(),{currentStep:u,hasExpiredPlan:h=!1}=e,{setupPlan:m}=(0,o.useContext)(Ye),g=(0,B.Z)(),f=(0,q.y)({...null===(s=c.companyInfo)||void 0===s?void 0:s.billingAddress,vatNumber:null===(r=c.companyInfo)||void 0===r?void 0:r.vatNumber,ssn:null===(a=c.companyInfo)||void 0===a?void 0:a.ssn,isPrivate:!(null===(i=c.companyInfo)||void 0===i||!i.isPrivate)}),b=(0,o.useRef)(),v=(0,q.y)(),[x,j]=(0,o.useState)("card");return(0,o.useImperativeHandle)(t,(()=>({onNext:async()=>{var e;let t,s;if(null===(e=c.companyInfo)||void 0===e||!e.billingAddress)try{const e=await f.validateFields(),s={...e,uniqueCode:"IT"!==e.countryIsoCode&&"SM"!==e.countryIsoCode?"xxxxxxx":e.uniqueCode};if(h)t=s;else try{await c.updateCompanyInfo({billingAddress:s})}catch(e){const t=(0,S.EB)(e.message);U.T.error({message:g.formatMessage({id:"settings.billings.company.address.saveError.message",defaultMessage:"Error"}),description:t})}}catch(e){return}if(!p.paymentMethodsArray.length)switch(x){case"card":try{const e=await b.current.tokenize();h?s=e:await p.addPaymentMethod({paymentId:e})}catch(e){return}break;case"sepa":try{const e=await v.validateFields();h?s=e:await p.addPaymentMethod({...e})}catch(e){return}}h&&m(t,s)}}))),u!==qe.BillingAddress?(0,y.jsx)(y.Fragment,{}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Y,{}),(0,y.jsxs)(ve,{children:[!(null!==(l=c.companyInfo)&&void 0!==l&&l.billingAddress)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.Dx,{level:3,children:(0,y.jsx)(n.Z,{id:"subscription.expired.modal.billing.details.title",defaultMessage:"Billings details"})}),(0,y.jsx)(oe,{formInstance:f})]}),!p.paymentMethodsArray.length&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.Dx,{level:3,className:"mt-3",children:(0,y.jsx)(n.Z,{id:"subscription.expired.modal.payment.method.title",defaultMessage:"Payment method"})}),(0,y.jsx)(fe,{cardRef:b,sepaFormInstance:v,selectedTabKey:x,setSelectedTabKey:j})]})]})]})}))),ve=e=>(0,y.jsx)("div",{className:"PlansDataDrawer__Content",children:e.children});const xe=()=>(0,y.jsx)("div",{className:"PlansDataDrawer__CurrentPlan",children:(0,y.jsxs)("div",{className:"flex flex-column align-center pb-2 pt-2",children:[(0,y.jsx)(d.Dx,{level:5,className:"mb-0",children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.bannerTitle",defaultMessage:"Activate a subscription to create shipments and make the most of isendu."})}),(0,y.jsx)(d.xv,{type:"secondary",children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.bannerSubtitle",defaultMessage:"Choose the most suitable shipping package for your e-commerce"})})]})});var Se=s(60331),je=s(27049),we=s(50573),Me=s(29865),Ce=s(25108);const Ae=()=>{const e=(0,o.useContext)(Ge),{confirmResetOnClick:t,confirmDeleteOnClick:s,isOncomingPlan:r}=e,i=(0,B.Z)(),l=e.currentlyActivePlan;return l?(0,y.jsx)("div",{className:"PlansDataDrawer__CurrentPlan",children:(0,y.jsxs)("div",{className:"PlansDataDrawer__CurrentPlan__Content",children:[(0,y.jsxs)("div",{children:[(0,y.jsxs)(d.Dx,{level:5,children:[(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.overviewTitle",defaultMessage:"Your {currentOrFuture} plan",values:{currentOrFuture:r?i.formatMessage({id:"settings.subscriptions.modal.plans.overviewFuture",defaultMessage:"future"}):i.formatMessage({id:"settings.subscriptions.modal.plans.overviewCurrent",defaultMessage:"current"})}}),": ",l.name]}),(0,y.jsxs)("div",{className:"flex align-center",children:[(0,y.jsxs)(Se.Z,{color:"active"===l.status?"green":"yellow",children:["active"===l.status?(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.overviewActive",defaultMessage:"ACTIVE"}):(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.overviewNotActive",defaultMessage:"NOT ACTIVE"})," "]}),(0,y.jsx)(je.Z,{type:"vertical",style:{height:"25px"}}),(0,y.jsx)("small",{children:(0,y.jsxs)(d.xv,{type:"secondary",children:[(0,y.jsx)(we.A,{currentPlan:l})," ",r?(0,y.jsxs)(y.Fragment,{children:["-"," ",(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.willBeActive",defaultMessage:"Will be active the "})," ",(0,Me.t6)(null==l?void 0:l.currentPeriodStart)]}):(0,y.jsxs)(y.Fragment,{children:["- ",(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.renew",defaultMessage:"Will renew the"})," ",(0,Me.t6)(null==l?void 0:l.currentPeriodEnd)]})]})})]})]}),(0,y.jsxs)("div",{children:[!r&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(a.Z,{type:"link",style:{fontWeight:400,padding:0},onClick:t,children:[(0,y.jsx)(n.Z,{id:"upgrade.plan.modal.reset.button.title",defaultMessage:"Reset plan"}),(0,y.jsx)(d.nw,{title:(0,y.jsx)(n.Z,{id:"upgrade.plan.modal.reset.tooltip",defaultMessage:"Reset your subscription billing cycle, in order to restart with your current plan"})})]}),(0,y.jsx)(je.Z,{type:"vertical",style:{height:"25px"}})]}),(0,y.jsxs)(a.Z,{type:"link",style:{color:"#ff4d4f",fontWeight:400,padding:0},onClick:s,children:[(0,y.jsx)(n.Z,{id:"settings.subscriptions.removePlan",defaultMessage:"Remove plan"}),(0,y.jsx)(d.nw,{title:Te(r)})]})]})]})}):(Ce.log("No active plan found."),(0,y.jsx)(y.Fragment,{}))},Te=e=>(0,y.jsx)(y.Fragment,{children:e?(0,y.jsx)(n.Z,{id:"upgrade.plan.modal.delete.tooltip.future",defaultMessage:"Delete your future plan subscription (immediately effective)"}):(0,y.jsx)(n.Z,{id:"upgrade.plan.modal.delete.tooltip.actual",defaultMessage:"Delete your plan subscription (it will be effective at the end of the current billing cycle)"})});var Oe=s(94184),Pe=s.n(Oe);const Ne=()=>{const{currentPlanType:e,setCurrentPlanType:t}=(0,o.useContext)(Ge);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"flex justify-center gap-1 mt-1",children:[(0,y.jsxs)("button",{className:Pe()("PlansDataDrawer__RecurrencySelectorButton",{active:"YEARLY"===e}),onClick:()=>t("YEARLY"),children:[(0,y.jsx)("div",{children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.annual",defaultMessage:"Annual"})}),(0,y.jsx)(_,{active:"YEARLY"===e})]}),(0,y.jsxs)("button",{className:Pe()("PlansDataDrawer__RecurrencySelectorButton",{active:"MONTHLY"===e}),onClick:()=>t("MONTHLY"),children:[(0,y.jsx)("div",{children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.monthly",defaultMessage:"Monthly"})}),(0,y.jsx)(Z,{active:"MONTHLY"===e})]})]}),(0,y.jsx)("div",{style:{position:"relative"},children:(0,y.jsx)(d.Dx,{className:"mt-1 mb-1",level:2,children:"YEARLY"===e?(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.yearlyPlan",defaultMessage:"Annual subscription"}):(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.monthlyPlan",defaultMessage:"Monthly subscription"})})})]})};var _e=s(15873),Ze=s(73218);const Ie=e=>{const{description:t,children:s,rowKey:r}=e,{plans:a,selectedPlan:i}=(0,o.useContext)(Ge);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"PlansTable__FeatureDescription",children:t}),a.map((e=>(0,y.jsx)("div",{className:"flex flex-column justify-center align-center "+(i.priceId===e.priceId?"plan-active":""),children:s(e)},e.name+e.type+r)))]})};const De=()=>{const{plans:e,selectedPlan:t,setSelectedPlan:s,currentlyActivePlan:r,isOncomingPlan:i}=(0,o.useContext)(Ge);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"PlansTable__Table__Header",children:" "}),e.map((e=>(0,y.jsxs)("div",{className:Pe()("PlansTable__Table__Header",{"plan-active":t.priceId===e.priceId}),children:[(0,y.jsx)(d.Dx,{level:5,children:e.name}),(0,y.jsx)(a.Z,{className:"PlansTable__Table__SelectionButton "+(t.priceId===e.priceId||(null==r?void 0:r.priceId)===e.priceId?"PlansTable__Table__SelectionButton--selected":""),onClick:()=>s({priceId:e.priceId,planId:e.planId}),children:Ee(r,t,e,i)})]},e.name+e.type+"_header")))]})};function Ee(e,t,s,r){return(null==e?void 0:e.priceId)===s.priceId?r?"In attivazione":(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.active",defaultMessage:"Active"}):t.priceId===s.priceId?(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.selected",defaultMessage:"Selected"}):(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.select",defaultMessage:"Select"})}const ke=()=>{const{currentPlanType:e}=(0,o.useContext)(Ge);return(0,y.jsx)("div",{className:"PlansTable",children:(0,y.jsxs)("div",{className:"PlansTable__Table",children:[(0,y.jsx)(De,{}),(0,y.jsx)(Ie,{description:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.priceLabel",defaultMessage:"Price"}),rowKey:"price",children:e=>"onDemand"===e.price?(0,y.jsx)("div",{children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.onDemand",defaultMessage:"On demand"})}):(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(d.xv,{children:[(0,y.jsx)(re.BK,{value:e.price})," €/","YEARLY"===e.type?(0,y.jsx)(n.Z,{id:"current.plan.interval.year",defaultMessage:"year"}):(0,y.jsx)(n.Z,{id:"current.plan.interval.month",defaultMessage:"month"})]})})}),(0,y.jsx)(Ie,{description:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.carrierShipLabel",defaultMessage:"Shipping with own carriers"}),rowKey:"carrierShip",children:e=>e.canShipWithOwnCarriers?(0,y.jsx)(_e.Z,{className:"GreenIcon"}):(0,y.jsx)(Ze.Z,{className:"RedIcon"})}),(0,y.jsx)(Ie,{description:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.carrierShipLimitLabel",defaultMessage:"Number of {type} shipments with own carrier contracts",values:{type:"MONTHLY"===e?(0,y.jsx)(n.Z,{id:"settings.subscriptions.monthly",defaultMessage:"monthly"}):(0,y.jsx)(n.Z,{id:"settings.subscriptions.annual",defaultMessage:"annual"})}}),rowKey:"carrierShipLimit",children:e=>(0,y.jsx)(y.Fragment,{children:e.ownCarriersShipmentsLimit?"unlimited"===e.ownCarriersShipmentsLimit?(0,y.jsx)(n.Z,{id:"settings.subscriptions.unlimited",defaultMessage:"Unlimited"}):e.ownCarriersShipmentsLimit:(0,y.jsx)(Ze.Z,{className:"RedIcon"})})}),(0,y.jsx)(Ie,{description:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.canShipWithIsenduCarriersLabel",defaultMessage:"Shipments with isendu carriers (unlimited)"}),rowKey:"isenduCarrier",children:e=>e.canShipWithIsenduCarriers?(0,y.jsx)(_e.Z,{className:"GreenIcon"}):(0,y.jsx)(Ze.Z,{className:"RedIcon"})}),(0,y.jsx)(Ie,{description:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.manualOrdersLabel",defaultMessage:"Manual orders"}),rowKey:"manualOrders",children:e=>"unlimited"===e.manualOrdersLimit?(0,y.jsx)(n.Z,{id:"settings.subscriptions.unlimited",defaultMessage:"Unlimited"}):(0,y.jsxs)("div",{children:[e.manualOrdersLimit," ",(0,y.jsx)(n.Z,{id:"settings.subscriptions.daily",defaultMessage:"/day"})]})}),(0,y.jsx)(Ie,{description:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.automationRulesLabel",defaultMessage:"Automation rules"}),rowKey:"automationRules",children:e=>e.hasAutomationRules?(0,y.jsx)(_e.Z,{className:"GreenIcon"}):(0,y.jsx)(Ze.Z,{className:"RedIcon"})}),(0,y.jsx)(Ie,{description:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.transactionEmailsLabel",defaultMessage:"Transactional emails"}),rowKey:"transactionalEmail",children:e=>e.hasTransactionalEmail?(0,y.jsx)(_e.Z,{className:"GreenIcon"}):(0,y.jsx)(Ze.Z,{className:"RedIcon"})}),(0,y.jsx)(Ie,{description:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.senderAddressesLabel",defaultMessage:"Mutiple sender addresses"}),rowKey:"senderAddress",children:e=>"unlimited"===e.senderAddressLimit?(0,y.jsx)(n.Z,{id:"settings.subscriptions.unlimited",defaultMessage:"Unlimited"}):e.senderAddressLimit}),(0,y.jsx)(Ie,{description:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.csvImportLabel",defaultMessage:"Import orders from .csv files"}),rowKey:"csvImport",children:e=>e.canImportCsv?(0,y.jsx)(_e.Z,{className:"GreenIcon"}):(0,y.jsx)(Ze.Z,{className:"RedIcon"})}),(0,y.jsx)(Ie,{description:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.supportLabel",defaultMessage:"Customer support"}),rowKey:"support",children:e=>function(e){switch(e){case"limited":return(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.limitedSupport",defaultMessage:"Limited"});case"priority":return(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.prioritySupport",defaultMessage:"Priority"});case"premium":return(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.premiumSupport",defaultMessage:"Premium"})}}(e.clientSupportType)})]})})};var Le=s(57119),Re=s(50146);const Fe=[{priceId:"Lite-mensile-EUR-Monthly",planId:"Lite-mensile",type:"MONTHLY",name:"Lite",price:79,priceWithDiscount:79,priceWithoutDiscount:79,canShipWithOwnCarriers:!0,ownCarriersShipmentsLimit:250,canShipWithIsenduCarriers:!0,manualOrdersLimit:"unlimited",hasWallet:!0,hasAutomationRules:!0,hasTransactionalEmail:!0,senderAddressLimit:"unlimited",canImportCsv:!0,clientSupportType:"priority"},{priceId:"Pro-mensile-EUR-Monthly",planId:"Pro-mensile",type:"MONTHLY",name:"Pro",price:129,priceWithDiscount:129,priceWithoutDiscount:129,canShipWithOwnCarriers:!0,ownCarriersShipmentsLimit:750,canShipWithIsenduCarriers:!0,manualOrdersLimit:"unlimited",hasWallet:!0,hasAutomationRules:!0,hasTransactionalEmail:!0,senderAddressLimit:"unlimited",canImportCsv:!0,clientSupportType:"priority"},{priceId:"Max-mensile-EUR-Monthly",planId:"Max-mensile",type:"MONTHLY",name:"Max",price:"onDemand",priceWithDiscount:"onDemand",priceWithoutDiscount:"onDemand",canShipWithOwnCarriers:!0,ownCarriersShipmentsLimit:"unlimited",canShipWithIsenduCarriers:!0,manualOrdersLimit:"unlimited",hasWallet:!0,hasAutomationRules:!0,hasTransactionalEmail:!0,senderAddressLimit:"unlimited",canImportCsv:!0,clientSupportType:"premium"},{priceId:"Lite-annuale-EUR-Yearly",planId:"Lite-annuale",type:"YEARLY",name:"Lite",price:948,priceWithDiscount:948,priceWithoutDiscount:948,canShipWithOwnCarriers:!0,ownCarriersShipmentsLimit:3e3,canShipWithIsenduCarriers:!0,manualOrdersLimit:"unlimited",hasWallet:!0,hasAutomationRules:!0,hasTransactionalEmail:!0,senderAddressLimit:"unlimited",canImportCsv:!0,clientSupportType:"priority"},{priceId:"Pro-annuale-EUR-Yearly",planId:"Pro-annuale",type:"YEARLY",name:"Pro",price:1548,priceWithDiscount:1548,priceWithoutDiscount:1548,canShipWithOwnCarriers:!0,ownCarriersShipmentsLimit:9e3,canShipWithIsenduCarriers:!0,manualOrdersLimit:"unlimited",hasWallet:!0,hasAutomationRules:!0,hasTransactionalEmail:!0,senderAddressLimit:"unlimited",canImportCsv:!0,clientSupportType:"priority"},{priceId:"Max-annuale-EUR-Yearly",planId:"Max-annuale",type:"YEARLY",name:"Max",price:"onDemand",priceWithDiscount:"onDemand",priceWithoutDiscount:"onDemand",canShipWithOwnCarriers:!0,ownCarriersShipmentsLimit:"unlimited",canShipWithIsenduCarriers:!0,manualOrdersLimit:"unlimited",hasWallet:!0,hasAutomationRules:!0,hasTransactionalEmail:!0,senderAddressLimit:"unlimited",canImportCsv:!0,clientSupportType:"premium"}];const{confirm:Ue}=Re.default;const Ge=(0,o.createContext)({}),Be=(0,c.Pi)((0,o.forwardRef)(((e,t)=>{const{activePlan:s,isSetup:r,currentStep:a,closeModal:i}=e,n=function(e,t,s){var r,a;const{paymentSubscriptionsStore:i,companiesStore:n}=(0,G.o)(),{setEditState:l}=(0,o.useContext)(Ye),c=(0,B.Z)();(0,o.useImperativeHandle)(e,(()=>({onNext:async()=>new Promise(((e,r)=>{if("Max-annuale"===p.planId||"Max-mensile"===p.planId)return void window.open("https://isendu.club/max_plan","_blank");const{planId:a,priceId:o}=p,[n,l]=p.planId.split("-");s&&"Free-Trial"!==s.plan.item_family_id?Ue({title:c.formatMessage({id:"settings.subscriptions.modal.plans.confirmTitle",defaultMessage:"Want to change your plan now?"}),content:c.formatMessage({id:"settings.subscriptions.modal.plans.confirmContent",defaultMessage:"You are moving from {activePlanName} to {planType} {planName}.Please note that discounts applied and shipments remaining in the previous plan will no longer be available."},{activePlanName:null==s?void 0:s.name,planType:l,planName:n}),onCancel:async()=>{try{await j({planId:a,priceId:o}),setTimeout((()=>{t();const e=i.paymentSubscriptionsArray.filter((e=>e.priceId===o))[0];U.T.template("PURCHASED_PLAN",{selectedPlanData:e})}),1500),e(!0)}catch(e){r(e)}},okText:c.formatMessage({id:"settings.subscriptions.modal.plans.noCancel",defaultMessage:"No, cancel"}),cancelText:c.formatMessage({id:"settings.subscriptions.modal.plans.yesConfirm",defaultMessage:"Yes, change plan"}),icon:(0,y.jsx)(Le.Z,{}),centered:!0,type:"warning"}):j({planId:a,priceId:o}).then((()=>e(!0))).catch((e=>r(e)))})),getSelectedPlan:()=>p,resetContext:M})));const[p,u]=(0,o.useState)({priceId:(null==s?void 0:s.plan.id)||null,planId:(null==s?void 0:s.plan.item_id)||null}),[h,m]=(0,o.useState)((null==s||null===(r=s.plan.metadata)||void 0===r?void 0:r.type)||"YEARLY"),[g,f]=(0,o.useState)(!1),b=(0,o.useMemo)((()=>"future"===(null==s?void 0:s.status)),[s]),v=s?{...s}:null,x=(0,o.useMemo)((()=>Fe.filter((e=>e.type===h))),[h]);(0,o.useEffect)((function(){const e=!!p.priceId&&p.priceId!==(null==s?void 0:s.plan.id),t="Max-annuale"===p.planId||"Max-mensile"===p.planId;l((s=>({...s,hasModifiedPlan:e,hasMaxPlan:t})))}),[p,s,l]);const S=(0,o.useCallback)((async()=>{Ue({title:(0,y.jsx)(d.xv,{className:"text-primary",children:b?c.formatMessage($.s.deleteFutureTitle):c.formatMessage($.s.deleteTitle)}),icon:(0,y.jsx)(Le.Z,{}),content:(0,y.jsx)(d.xv,{className:"thin",children:b?c.formatMessage($.s.deleteFutureBody):c.formatMessage($.s.deleteBody)}),cancelText:c.formatMessage($.s.deleteOk),okText:c.formatMessage($.s.confirmCancel),centered:!0,onCancel:async()=>{if(null!=s&&s.id)try{f(!0),await i.cancelPlan({planId:s.id}),f(!1),t()}catch(e){f(!1),U.T.error({message:c.formatMessage($.s.cancelAddonErrorMessage),description:c.formatMessage($.s.cancelAddonErrorDescription)})}}})}),[b,c,s,i,t]),j=(0,o.useCallback)((async e=>{var t;let{planId:s,priceId:r}=e;if(r&&null!=n&&null!==(t=n.companyInfo)&&void 0!==t&&t.stripeCustomerId)try{f(!0),await i.changePlan({planId:s,itemPriceId:r}),f(!1)}catch(e){U.T.error({message:c.formatMessage($.s.savePlanErrorTitle),description:c.formatMessage($.s.savePlanErrorMessage)}),f(!1)}}),[null==n||null===(a=n.companyInfo)||void 0===a?void 0:a.stripeCustomerId,c,i]),w=(0,o.useCallback)((async()=>{Ue({title:(0,y.jsx)(d.xv,{className:"text-primary",children:c.formatMessage($.s.resetTitle)}),icon:(0,y.jsx)(Le.Z,{}),content:(0,y.jsx)(d.xv,{className:"thin",children:c.formatMessage($.s.resetBody)}),cancelText:c.formatMessage($.s.resetOk),okText:c.formatMessage($.s.confirmCancel),centered:!0,onCancel:async()=>{try{f(!0),await i.resetPlan(),f(!1),t()}catch(e){f(!1),U.T.error({message:c.formatMessage($.s.resetAddonErrorMessage),description:c.formatMessage($.s.resetAddonErrorDescription)})}}})}),[c,i,t]),M=(0,o.useCallback)((()=>{m("YEARLY"),u({priceId:null,planId:null})}),[]);return{currentPlanType:h,setCurrentPlanType:m,selectedPlan:p,setSelectedPlan:u,plans:x,currentlyActivePlan:v,confirmDeleteOnClick:S,selectAndPayPlan:j,isLoading:g,confirmResetOnClick:w,isOncomingPlan:b}}(t,i,s);return a!==qe.PlanDetails?(0,y.jsx)(y.Fragment,{}):(0,y.jsxs)(Ge.Provider,{value:n,children:[r?(0,y.jsx)(xe,{}):(0,y.jsx)(Ae,{}),(0,y.jsxs)($e,{children:[!r&&(0,y.jsx)(ze,{}),(0,y.jsx)(Ne,{}),(0,y.jsx)(ke,{})]})]})}))),$e=e=>(0,y.jsx)("div",{className:"PlansDataDrawer__Content",children:e.children}),ze=(0,o.memo)((()=>(0,y.jsxs)("div",{className:"mb-2 text-center",children:[(0,y.jsx)(d.Dx,{level:5,children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.title",defaultMessage:"Update your plan"})}),(0,y.jsx)(d.xv,{type:"secondary",children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.plans.subtitle",defaultMessage:"Modify the plan to suit your needs. Choose between monthly or annual billing."})})]})));var We=s(89250);const He=(0,i.Pi)((e=>{var t,s,r,i;const{currentStep:o,plansStepRef:l,addonsStepRef:c,hasExpiredPlan:p}=e,{paymentSubscriptionsStore:u}=(0,G.o)(),h=(0,We.s0)();if(o!==qe.PlanUpdated)return(0,y.jsx)(y.Fragment,{});const m=u.paymentSubscriptionsArray.filter((e=>{var t;return e.priceId===(null===(t=l.current)||void 0===t?void 0:t.getSelectedPlan().priceId)}))[0],g=null===(t=c.current)||void 0===t?void 0:t.getSelectedAddon(),f=null!=g&&null!==(s=g.id)&&void 0!==s&&s.startsWith(F.Subscriptions.subscriptionPrefixWhatsApp1)?"Track to Talk":"Talk & Review";return(0,y.jsx)("div",{className:"PlansUpdatedStep",children:(0,y.jsxs)("div",{className:"PlansUpdatedStep__Content",children:[(0,y.jsx)(d.Dx,{level:3,children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.summary.title",defaultMessage:"Welcome! We are so glad you've joined us!"})}),(0,y.jsx)("div",{className:"mb-2",children:(0,y.jsx)(d.xv,{type:"secondary",children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.summary.success",defaultMessage:"The purchase was successful"})})}),(0,y.jsx)(d.Ee,{src:"https://static-files-cdn.isendu.com/notifications/plan-reactivated.svg",width:250,height:250}),m&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.Dx,{level:5,children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.summary.summary",defaultMessage:"Summary"})}),(0,y.jsxs)("div",{className:"PlansUpdatedStep__Content__PlanRecap",children:[(0,y.jsx)("div",{children:(0,y.jsxs)(d.xv,{strong:!0,children:[(0,y.jsx)(n.Z,{id:"subscription.expired.modal.success.your.isendu.plan",defaultMessage:"Your isendu plan"})," ",null==m?void 0:m.name]})}),(0,y.jsx)("div",{children:(0,y.jsxs)(d.xv,{type:"secondary",children:[(0,y.jsxs)("span",{children:[null==m||null===(r=m.plan)||void 0===r||null===(i=r.metadata)||void 0===i?void 0:i.amount," ",(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.summary.shipmentsMonth",defaultMessage:"shipments / month"})]})," ","- ",(0,y.jsx)(we.A,{currentPlan:m})]})})]})]}),g&&(0,y.jsxs)("div",{className:"PlansUpdatedStep__Content__PlanRecap mt-3",children:[(0,y.jsx)("div",{children:(0,y.jsxs)(d.xv,{strong:!0,children:[(0,y.jsx)(n.Z,{id:"subscription.expired.modal.success.your.addon.plan",defaultMessage:"Your addon plan"})," ",f," ","month"===(null==g?void 0:g.period_unit)?(0,y.jsx)(n.Z,{id:"settings.subscriptions.monthly",defaultMessage:"monthly"}):(0,y.jsx)(n.Z,{id:"settings.subscriptions.annual",defaultMessage:"yearly"})]})}),(0,y.jsx)("div",{children:(0,y.jsxs)(d.xv,{type:"secondary",children:[(0,y.jsxs)("span",{children:[C(null==g?void 0:g.item_id)," ",(0,y.jsx)(n.Z,{id:"settings.billings.upgrade.plan.modal.column.title.labels.limit.month",defaultMessage:"shipments / month"})]})," ","- ",w(g,"year"===(null==g?void 0:g.period_unit))]})})]}),(0,y.jsx)("div",{className:"mt-2",children:(0,y.jsxs)(d.xv,{type:"secondary",children:[(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.summary.clickToEnter",defaultMessage:"Now you can use isendu. Click on the botton below and start shipping!"})," "]})}),(0,y.jsx)(a.Z,{type:"primary",className:"mt-2",onClick:()=>p?location.reload():h("/"),children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.summary.backToIsendu",defaultMessage:"Back to isendu"})})]})})})),Ve={hasModifiedPlan:!1,hasModifiedAddon:!1,hasMaxPlan:!1,hasAcceptedDisclaimer:!1};let qe=function(e){return e[e.PlanDetails=0]="PlanDetails",e[e.AddonsDetails=1]="AddonsDetails",e[e.BillingAddress=2]="BillingAddress",e[e.PlanUpdated=3]="PlanUpdated",e}({});const Ye=(0,o.createContext)({}),Ke=(0,i.Pi)((e=>{const{modalMode:t,setModalMode:s,currentPlan:a,currentAddon:i,hasExpiredPlan:d=!1}=e,{currentStep:c,isSetup:p,onBack:u,onNext:h,editState:m,setEditState:g,plansSubscriptionStepRef:f,addonsSubscriptionStepRef:b,billingsDataStepRef:v,closeModal:x,isLoading:S,setupPlan:j}=function(e,t,s){var r,a;const{companiesStore:i,paymentMethodsStore:n,paymentSubscriptionsStore:d}=(0,G.o)(),[c,p]=(0,o.useState)(qe.PlanDetails),[u,h]=(0,o.useState)(Ve),m=(0,o.useRef)(),g=(0,o.useRef)(),y=(0,o.useRef)(),f=(0,o.useRef)({});(0,o.useEffect)((()=>{p(e===l.$.AddOns?1:0)}),[e]);const b=-1===e,v=(0,o.useMemo)((()=>{var e,t;return!(null===(e=i.companyInfo)||void 0===e||!e.billingAddress)&&!(null===(t=i.companyInfo)||void 0===t||!t.vatNumber)&&n.paymentMethodsArray.length>0}),[null===(r=i.companyInfo)||void 0===r?void 0:r.billingAddress,null===(a=i.companyInfo)||void 0===a?void 0:a.vatNumber,n.paymentMethodsArray.length]),x=(0,o.useCallback)((()=>{var e,s;null===(e=m.current)||void 0===e||e.resetContext(),null===(s=g.current)||void 0===s||s.resetContext(),p(qe.PlanDetails),h(Ve),t(l.$.Hidden)}),[t,h]),S=(0,o.useCallback)((()=>{switch(c){case qe.PlanDetails:x();break;case qe.AddonsDetails:e!==l.$.FreeTrial&&x(),p(qe.PlanDetails);break;case qe.BillingAddress:p(qe.AddonsDetails);break;case qe.PlanUpdated:p(qe.BillingAddress)}}),[c,x,e]),j=(0,o.useCallback)((async(e,t)=>{await d.setup({selectedPlanId:f.current.selectedPlanId,selectedAddonId:f.current.selectedAddonId,billingAddress:e||void 0,paymentMethod:t||void 0}),setTimeout((async()=>await d.getPaymentSubscriptions()),3e3),setTimeout((()=>p(qe.PlanUpdated)),3500)}),[d]),w=(0,o.useCallback)((async e=>{var t;switch(c){case qe.PlanDetails:if(b){const e=m.current.getSelectedPlan();if("Max-mensile"===e.planId||"Max-annuale"===e.planId)return void window.open("https://isendu.club/max_plan","_blank");f.current.selectedPlanId=e.priceId,p(qe.AddonsDetails)}else{var r;await(null===(r=m.current)||void 0===r?void 0:r.onNext()),x()}break;case qe.AddonsDetails:if(b){if(e)g.current.resetSelectedAddonId(),f.current.selectedAddonId=void 0;else{const e=g.current.getSelectedAddonId();f.current.selectedAddonId=e}var a,i;v?s?await j():(await(null===(a=m.current)||void 0===a?void 0:a.onNext()),await(null===(i=g.current)||void 0===i?void 0:i.onNext()),setTimeout((()=>p(qe.PlanUpdated)),300)):p(qe.BillingAddress)}else{var o;await(null===(o=g.current)||void 0===o?void 0:o.onNext()),x()}break;case qe.BillingAddress:await(null===(t=y.current)||void 0===t?void 0:t.onNext()),p(qe.PlanUpdated);break;case qe.PlanUpdated:x()}}),[c,b,x,v,s,j]);return{isSetup:b,onBack:S,onNext:w,currentStep:c,plansSubscriptionStepRef:m,addonsSubscriptionStepRef:g,billingsDataStepRef:y,editState:u,setEditState:h,closeModal:x,isLoading:n.isLoading||d.isLoading,setupPlan:j}}(t,s,d);return(0,y.jsx)(r.Z,{footer:c!==qe.PlanUpdated&&(0,y.jsx)(Xe,{onBack:u,onNext:h,isMaxPlan:m.hasMaxPlan,editState:m,isSetup:p,currentStep:c,isLoading:S}),title:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.title",defaultMessage:"Manage your plan"}),className:"PlansDataDrawer",placement:"bottom",onClose:x,open:t!==l.$.Hidden,height:"100%",destroyOnClose:!0,children:(0,y.jsxs)(Ye.Provider,{value:{setEditState:g,setupPlan:j},children:[(0,y.jsx)(Be,{activePlan:a,isSetup:p,ref:f,currentStep:c,closeModal:x}),(0,y.jsx)(H,{ref:b,activeAddon:i,currentStep:c,closeModal:x}),(0,y.jsx)(be,{currentStep:c,ref:v}),(0,y.jsx)(He,{currentStep:c,plansStepRef:f,addonsStepRef:b,hasExpiredPlan:d})]})})})),Xe=e=>{let{onBack:t,onNext:s,editState:r,isMaxPlan:i,isSetup:l,currentStep:d,isLoading:c}=e;const p=(0,o.useMemo)((()=>{switch(d){case qe.PlanDetails:return!r.hasModifiedPlan;case qe.AddonsDetails:return!r.hasModifiedAddon||!r.hasAcceptedDisclaimer}}),[r,d]);return(0,y.jsxs)("div",{className:"PlansDataDrawer__Footer",style:{justifyContent:d===qe.AddonsDetails&&l?"space-between":"end"},children:[d===qe.AddonsDetails&&l&&(0,y.jsx)(a.Z,{type:"link",className:"PlansDataDrawer__Footer__Button",onClick:()=>s(!0),children:(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.skipStep",defaultMessage:"Skip step"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(a.Z,{className:"PlansDataDrawer__Footer__Button mr-1",onClick:t,loading:c,children:l?(0,y.jsx)(n.Z,{id:"generic.back",defaultMessage:"Back"}):(0,y.jsx)(n.Z,{id:"generic.cancel",defaultMessage:"Cancel"})}),(0,y.jsx)(a.Z,{type:"primary",className:"PlansDataDrawer__Footer__Button",onClick:()=>s(),disabled:p,loading:c,children:i&&d===qe.PlanDetails?(0,y.jsx)(n.Z,{id:"generic.contactUs",defaultMessage:"Contact us"}):l?(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.next",defaultMessage:"Next"}):(0,y.jsx)(n.Z,{id:"settings.subscriptions.modal.saveChanges",defaultMessage:"Save changes"})})]})]})}},92048:(e,t,s)=>{"use strict";s.d(t,{$:()=>J,Z:()=>ee});var r=s(27049),a=s(39563),i=s(70506),o=s(50003),n=s(53886),l=s(67294),d=s(44012),c=s(89250),p=s(93227),u=s(71230),h=s(15746),m=s(38272),g=s(85893);const y=(0,n.Pi)((()=>{const{financeStore:e}=(0,o.o)(),t=(0,l.useMemo)((()=>{let t=0;for(const s of e.promotionalCreditsArray)t+="increment"===s.type?+s.amount:-s.amount;return(t/100).toFixed(2)}),[e.promotionalCreditsArray]);return(0,g.jsx)(u.Z,{className:"billings-promotional_credits-row",children:(0,g.jsxs)(h.Z,{className:"billings-promotional_credits-col",span:24,children:[(0,g.jsx)(m.ZP,{loading:e.isLoading,header:(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(u.Z,{children:(0,g.jsx)(h.Z,{span:16,children:(0,g.jsx)(a.xv,{className:"settings-title",children:(0,g.jsx)(d.Z,{id:"settings.billings.promotionalCredit.title",defaultMessage:"Promotional credits"})})})})}),dataSource:e.promotionalCreditsArray,renderItem:e=>(0,g.jsx)(m.ZP.Item,{actions:[(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(a.xv,{type:"secondary",children:`${"increment"===e.type?"+":"-"} ${(e.amount/100).toFixed(2)} ${"EUR"===e.currency_code?"€":e.currency_code}`})})],children:(0,g.jsx)(u.Z,{children:(0,g.jsx)(h.Z,{children:(0,g.jsx)(a.Qg,{image:(0,g.jsx)("div",{className:"billings_promotional_credits_wrapper",children:(0,g.jsx)(p.Z,{})}),primaryRow1:e.description})})})})}),(0,g.jsx)(r.Z,{}),(0,g.jsxs)(u.Z,{style:{paddingTop:"12px"},children:[(0,g.jsx)(h.Z,{span:12,style:{textAlign:"left"},children:(0,g.jsx)(a.xv,{children:(0,g.jsx)(d.Z,{id:"settings.billings.promotionalCredit.total",defaultMessage:"Total"})})}),(0,g.jsx)(h.Z,{span:12,style:{textAlign:"right",paddingRight:"8px"},children:(0,g.jsxs)(a.xv,{children:[" ",`${t} €`]})})]})]})})}));var f=s(49101),b=s(11382),v=s(71577),x=s(19959),S=s(29323),j=s(50049),w=s(86896),M=s(50146),C=s(54458),A=s(19650),T=s(57119),O=s(7085),P=s(21796),N=s(55222),_=s(29865);const Z=e=>{let t,s,r,{status:i,renewDate:o}=e;switch(i){case"FUTURE":t="processing",s=(0,g.jsx)(d.Z,{id:"addon.statustext.future",defaultMessage:"Next activation"}),r=(0,g.jsx)(d.Z,{id:"addon.statustext.starts.on",defaultMessage:"Starts on "});break;case"IN_TRIAL":t="success",s=(0,g.jsx)(d.Z,{id:"addon.statustext.trial",defaultMessage:"Trial"});break;case"ACTIVE":t="success",s=(0,g.jsx)(d.Z,{id:"addon.statustext.active",defaultMessage:"Active"});break;case"NONRENEWING":t="warning",s=(0,g.jsx)(d.Z,{id:"addon.statustext.non.renewing",defaultMessage:"Non renewing"}),r=(0,g.jsx)(d.Z,{id:"addon.statustext.ends.on",defaultMessage:"Ends on "});break;case"PAUSED":t="warning",s=(0,g.jsx)(d.Z,{id:"addon.statustext.paused",defaultMessage:"Paused"});break;case"CANCELLED":t="error",s=(0,g.jsx)(d.Z,{id:"addon.statustext.canceled",defaultMessage:"Canceled"});break;case"_UNKNOWN":t="error",s=(0,g.jsx)(d.Z,{id:"addon.statustext.unknown",defaultMessage:"Unknown"});break;default:t="default",s=(0,g.jsx)(d.Z,{id:"addon.statustext.unknown",defaultMessage:"Unknown"})}return(0,g.jsx)(a.D_,{badgeStatus:t,primaryRow:(0,g.jsx)(a.Dx,{level:5,children:s}),secondaryRow:(0,g.jsxs)(a.xv,{children:[r?(0,g.jsx)(g.Fragment,{children:r}):(0,g.jsx)(d.Z,{id:"addon.statustext.renews.on",defaultMessage:"Renews on "}),(0,_.t6)(o)||"-"]})})};var I=s(82272),D=s(84403),E=s(51066),k=s(25142);const{confirm:L}=M.default,R=(0,j.vU)({track2talk:{id:"settings.billings.addons.whatsapp.plan.track2talk",defaultMessage:"Track 2 Talk"},talkAndReview:{id:"settings.billings.addons.whatsapp.plan.talkReview",defaultMessage:"Talk & Review"},shipments:{id:"settings.billings.addons.whatsapp.shipments",defaultMessage:" shipm. "},year:{id:"settings.billings.addons.whatsapp.year",defaultMessage:" year"},month:{id:"settings.billings.addons.whatsapp.month",defaultMessage:" month"},notificationTitle:{id:"settings.billings.addons.whatsapp.notifications",defaultMessage:"WhatsApp Notifications"},notificationTitleFreeTrial:{id:"settings.billings.addons.whatsapp.notifications.freeTrial",defaultMessage:"Free Trial - WhatsApp"},limitExceededMessage:{id:"settings.billings.addons.whatsapp.notifications.extra.fees",defaultMessage:"In case the limit is exceeded extra fees will be applied"},limitExceededMessageFreeTrial:{id:"settings.billings.addons.whatsapp.notifications.free.trial.limit.exceeded",defaultMessage:"In case the limit is exceeded no more notifications will be sent"},resetTitle:{id:"upgrade.plan.modal.reset.title",defaultMessage:"Are you sure you want to reset your current plan?"},resetBody:{id:"upgrade.plan.modal.reset.body",defaultMessage:"It will immediately restart your plan and subsequently create a new billing cycle."},resetOk:{id:"upgrade.plan.modal.reset.ok",defaultMessage:"Yes, reset"},confirmCancel:{id:"upgrade.plan.modal.confirm.cancel",defaultMessage:"No, cancel"},resetAddonErrorMessage:{id:"upgrade.plan.modal.reset.error.message",defaultMessage:"Error"},resetAddonErrorDescription:{id:"upgrade.plan.modal.reset.error.description",defaultMessage:"Something went wrong, try again"},deleteFutureTitle:{id:"upgrade.plan.modal.delete.title.future",defaultMessage:"Are you sure you want to delete your future plan subscription?"},deleteFutureBody:{id:"upgrade.plan.modal.delete.body.future",defaultMessage:"It will be immediately effective"},deleteTitle:{id:"upgrade.plan.modal.delete.title.actual",defaultMessage:"Are you sure you want to delete your plan subscription?"},deleteBody:{id:"upgrade.plan.modal.delete.body.actual",defaultMessage:"It will be effectively deleted at the end of the current billing cycle."},deleteOk:{id:"upgrade.plan.modal.delete.ok",defaultMessage:"Yes, delete"},cancelAddonErrorMessage:{id:"upgrade.plan.modal.delete.error.message",defaultMessage:"Error"},cancelAddonErrorDescription:{id:"upgrade.plan.modal.delete.error.description",defaultMessage:"Something went wrong, try again"}}),F=(0,S.Pi)((e=>{var t;let{addOn:s,futureExists:n,onChangeTab:c,onOpenModal:p}=e;const m=(0,w.Z)(),{paymentSubscriptionsStore:y}=(0,o.o)(),{maxPlanCount:f,recurringType:b,currency:v,status:S,startPlanDateTime:j,endPlanDateTime:M,subscriptionId:_,itemPriceId:F,currentCount:G}=s,B=/wa-([0-9])s-FT-([0-9]+)/.test(F),$=(0,l.useMemo)((()=>{var e;return(null===(e=y.activeWhatsAppSubscriptions.find((e=>e.priceId===F)))||void 0===e?void 0:e.plan.amount)||0}),[F,y.activeWhatsAppSubscriptions]);let z=!1;const W=F.split(D._.splitAddons);Array.isArray(W)&&W.length>=4&&(z=W[1]===E.Subscriptions.subscriptionWhatsAppGroup2);const H=f*(z?2:1),V=G>=H;let q=!1;V||(q=G/H>=k.LH);let Y="";B||(Y+="/",Y+=`${b===D._.addonsRecurringTypeYearly?m.formatMessage(R.year):m.formatMessage(R.month)}`);let K="";K+=z?m.formatMessage(R.talkAndReview):m.formatMessage(R.track2talk),K+=` - ${f}`,K+=`${m.formatMessage(R.shipments)}`,K+=Y;const X=(0,l.useCallback)((e=>{let{addonId:t,isFuture:s}=e;L({title:(0,g.jsx)(a.xv,{className:"text-primary",children:s?m.formatMessage(R.deleteFutureTitle):m.formatMessage(R.deleteTitle)}),icon:(0,g.jsx)(T.Z,{}),content:(0,g.jsx)(a.xv,{className:"thin",children:s?m.formatMessage(R.deleteFutureBody):m.formatMessage(R.deleteBody)}),centered:!0,cancelText:m.formatMessage(R.deleteOk),okText:m.formatMessage(R.confirmCancel),onCancel:async()=>{if(t)try{await y.cancelAddon({type:"whatsapp",id:t})}catch(e){x.T.error({message:m.formatMessage(R.cancelAddonErrorMessage),description:m.formatMessage(R.cancelAddonErrorDescription)})}}})}),[m,y]);return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(h.Z,{span:24,className:"settings-billings-addons-whatsapp-addon",children:(0,g.jsxs)(u.Z,{gutter:20,children:[(0,g.jsx)(h.Z,{span:6,children:(0,g.jsxs)(u.Z,{align:"middle",gutter:10,children:[(0,g.jsx)(h.Z,{span:4,children:(0,g.jsx)(a.Ee,{src:`${a.xr}`,className:"settings-billings-addons-whatsapp-icon"})}),(0,g.jsxs)(h.Z,{span:20,children:[(0,g.jsx)(a.xv,{className:"billings-text-title",children:(0,g.jsx)(d.Z,{id:"settings.billings.addons.whatsapp.addon",defaultMessage:"Add-on"})}),s?(0,g.jsx)(a.D_,{primaryRow:(0,g.jsx)(a.Dx,{level:5,children:B?m.formatMessage(R.notificationTitleFreeTrial):m.formatMessage(R.notificationTitle)}),secondaryRow:(0,g.jsxs)(a.xv,{title:K,children:[K,(0,g.jsx)("br",{}),(0,g.jsx)(N.x,{value:$/100,currency:(0,I.TA)(v)}),Y]})}):(0,g.jsx)(a.D_,{primaryRow:(0,g.jsx)(O.Z,{})})]})]})}),(0,g.jsxs)(h.Z,{span:6,children:[(0,g.jsx)(a.xv,{className:"billings-text-title",children:(0,g.jsx)(d.Z,{id:"settings.billings.addons.whatsapp.status",defaultMessage:"Status"})}),(0,g.jsx)(Z,{status:S,renewDate:(null==s||null===(t=s.status)||void 0===t?void 0:t.toLowerCase())===E.Subscriptions.subscriptionGatewayStatusFuture?j:M})]}),(0,g.jsxs)(h.Z,{span:6,children:[(0,g.jsx)(a.xv,{className:"billings-text-title",children:(0,g.jsx)(d.Z,{id:"settings.billings.addons.whatsapp.notifications.sent",defaultMessage:"Notifications sent"})}),(0,g.jsx)("br",{}),(0,g.jsx)(C.Z,{className:"w-150 mt-5px",percent:100*G/H,status:G>H?"exception":"normal",format:()=>V?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a.xv,{className:"whatsapp-addon-finished-count",children:G}),"/",`${H}`]}):q?(0,g.jsxs)(A.Z,{children:[`${G}/${H}`,(0,g.jsx)(a.xv,{className:"whatsapp-addon-almost-count",children:(0,g.jsx)(P.Z,{})})]}):`${G}/${H}`}),(0,g.jsx)("br",{}),(0,g.jsx)(a.xv,{className:"whatsapp-addon-not-ellipsis",children:V?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a.xv,{strong:!0,children:(0,g.jsx)(d.Z,{id:"settings.billings.addons.whatsapp.notifications.finished.extra.fees",defaultMessage:"Extra fees will be applied"})}),(0,g.jsx)("br",{}),(0,g.jsx)(a.xv,{children:(0,g.jsx)(d.Z,{id:"settings.billings.addons.whatsapp.notifications.finished.upgradeSuspend",defaultMessage:"<link1>Upgrade your plan</link1> or <link2>suspend notifications</link2> to avoid them",values:{link1:e=>(0,g.jsx)(a.rU,{onClick:()=>{p()},children:e}),link2:e=>(0,g.jsx)(a.rU,{onClick:()=>{c&&c(i.k.TRACKING_NOTIFICATIONS)},children:e})}})})]}):B?m.formatMessage(R.limitExceededMessageFreeTrial):m.formatMessage(R.limitExceededMessage)})]}),(0,g.jsx)(h.Z,{span:6,className:"pt-23",style:{textAlign:"center"},children:(0,g.jsxs)("div",{style:{marginTop:"12px"},children:[(0,g.jsx)(a.xv,{style:{cursor:"pointer"},onClick:()=>p(),children:(0,g.jsx)(d.Z,{id:"settings.subscriptions.manage",defaultMessage:"Manage"})}),(0,g.jsx)(r.Z,{type:"vertical",style:{height:"25px"}}),(0,g.jsxs)(a.xv,{type:"danger",style:{cursor:"pointer"},onClick:()=>X({addonId:_,isFuture:n||!1}),children:[(0,g.jsx)(d.Z,{id:"whatsapp.edit.delete.button.link",defaultMessage:"Remove"}),(0,g.jsx)(a.nw,{title:U(n||!1)})]})]})})]})})})})),U=e=>(0,g.jsx)(g.Fragment,{children:e?(0,g.jsx)(d.Z,{id:"whatsapp.edit.delete.tooltip.future",defaultMessage:"Delete your future add-on subscription (immediately effective)"}):(0,g.jsx)(d.Z,{id:"whatsapp.edit.delete.tooltip.actual",defaultMessage:"Delete your add-on subscription (it will be effective at the end of the current billing cycle)"})});const G=(0,j.vU)({getAddOnsErrorMessage:{id:"settings.addons.get.error",defaultMessage:"Error during add-ons loading"}}),B=(0,S.Pi)((e=>{const{onChangeTab:t,setCurrentAddon:s,setVisibleSubscriptionModalSteps:r}=e,i=(0,w.Z)(),{paymentSubscriptionsStore:n}=(0,o.o)();(0,l.useEffect)((()=>{n.addOnsArray||n.getAddonsWithInfo().catch((e=>{x.T.error({message:i.formatMessage(G.getAddOnsErrorMessage),description:(null==e?void 0:e.message)||""})}))}),[i,n,n.addOnsArray]);const c=n.filteredAddons;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(u.Z,{className:"add-ons-row",children:[(0,g.jsx)(h.Z,{span:24,className:"mb-10",children:(0,g.jsx)(a.xv,{className:"settings-title",children:(0,g.jsx)(d.Z,{id:"settings.addons.title",defaultMessage:"Add-ons"})})}),n.isAddonsLoading?(0,g.jsx)(h.Z,{span:24,className:"text-center",children:(0,g.jsx)(b.Z,{})}):c.length>0?c.map((e=>{if("WHATSAPP"===e.addonName){const a=n.addOnsArray.find((e=>"WHATSAPP"===e.addonName&&"FUTURE"===e.status));return(0,g.jsx)(F,{addOn:e,futureExists:!!a,onChangeTab:t,onOpenModal:()=>(s(e),void r(J.AddOns))})}return(0,g.jsx)(g.Fragment,{})})):(0,g.jsx)(h.Z,{children:(0,g.jsx)(d.Z,{id:"settings.billings.addons.empty.text",defaultMessage:"Send tracking notifications and collect reviews from your customers to improve your e-commerce, all via WhatsApp. Find out our notifications services <b>Track 2 Talk</b> and <b>Talk & Review</b>",values:{b:e=>(0,g.jsx)("b",{children:e})}})})]}),!c.length&&(0,g.jsx)(u.Z,{justify:"center",align:"middle",className:"settings-billings-addons-button-viewAddons-row",children:(0,g.jsx)(h.Z,{children:(0,g.jsx)(v.Z,{onClick:()=>r(J.AddOns),id:"settings-billings-addons-button-viewAddons",icon:(0,g.jsx)(f.Z,{className:"mr-1"}),children:(0,g.jsx)(d.Z,{id:"settings.billings.addons.button.viewAddons",defaultMessage:"Add add-ons"})})})})]})}));var $=s(12044);const z=(0,n.Pi)((()=>{const{financeStore:e}=(0,o.o)();return(0,g.jsx)(u.Z,{className:"billings-coupons-row",children:(0,g.jsx)(h.Z,{className:"billings-coupons-col",span:24,children:(0,g.jsx)(m.ZP,{loading:e.isLoading,dataSource:e.couponsArray,header:(0,g.jsx)(a.xv,{className:"settings-title",children:(0,g.jsx)(d.Z,{id:"settings.billings.coupons.title",defaultMessage:"Coupons"})}),renderItem:e=>(0,g.jsx)(m.ZP.Item,{children:(0,g.jsx)(a.Qg,{image:(0,g.jsx)("div",{className:"coupons_tag_wrapper",children:(0,g.jsx)($.Z,{})}),primaryRow1:e.name,secondaryRow1:(0,g.jsx)(a.xv,{children:`${e.percent_off}% ${e.duration}`})})})})})})}));var W=s(50573);const H=e=>{let t,s,{status:r,renewDate:i,startDate:o}=e;switch(r){case"active":t="success",s=(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.active",defaultMessage:"Active"});break;case"future":t="processing",s=(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.future",defaultMessage:"Next activation"});break;case"nonrenewing":t="warning",s=(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.non.renewing",defaultMessage:"Non renewing"});break;case"canceled":t="error",s=(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.canceled",defaultMessage:"Canceled"});break;case"incomplete":t="warning",s=(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.incomplete",defaultMessage:"Incomplete"});break;case"incomplete_expired":t="warning",s=(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.incompleteExpired",defaultMessage:"Incomplete - Expired"});break;case"past_due":t="warning",s=(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.pastDue",defaultMessage:"Past due"});break;case"trialing":t="processing",s=(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.trialing",defaultMessage:"Trialing"});break;case"unpaid":t="error",s=(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.unpaid",defaultMessage:"Unpaid"});break;case"not_active":t="error",s=(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.not.active",defaultMessage:"Not active"});break;default:t="default",s=(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.unknown",defaultMessage:"Unknown"})}i&&10===`${i}`.length&&(i*=1e3);const n=(0,_.t6)(i);o&&10===`${o}`.length&&(o*=1e3);const l=(0,_.t6)(o);return(0,g.jsx)(a.D_,{badgeStatus:t,primaryRow:(0,g.jsx)(a.Dx,{level:5,children:s}),secondaryRow:"nonrenewing"===r?(0,g.jsxs)(a.xv,{children:[(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.expireOn",defaultMessage:"Expire on "}),i>0?(0,g.jsx)(a.xv,{title:n,children:n}):"-"]}):"future"===r?(0,g.jsxs)(a.xv,{children:[(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.startsOn",defaultMessage:"Starts on "}),o&&o>0?(0,g.jsx)(a.xv,{title:l,children:l}):"-"]}):(0,g.jsxs)(a.xv,{children:[(0,g.jsx)(d.Z,{id:"subscriptionStatus.text.renewsOn",defaultMessage:"Renews on "}),i>0?(0,g.jsx)(a.xv,{title:n,children:n}):"-"]})})};var V=s(15394);const q=e=>{const{shipmentCounterLoading:t,shipmentCounterError:s,shipmentCounterPercent:r,shipmentCounter:a,maxShipments:i}=e;return t?(0,g.jsx)("div",{className:"mt-5px",children:(0,g.jsx)(O.Z,{})}):s?(0,g.jsx)("div",{className:"mt-5px",children:(0,g.jsx)(V.Z,{type:"danger",children:(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.shipments.count.error",defaultMessage:"Error during shipments count retrieve"})})}):i===Number.MAX_SAFE_INTEGER?(0,g.jsx)("div",{className:"mt-5px",children:(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.shipments.count.unlimited",defaultMessage:"Unlimited shipping"})}):(0,g.jsx)(C.Z,{className:"w-150 mt-1",percent:r,format:()=>`${a}/${i}`})};var Y=s(22703);const{confirm:K}=M.default,X=(0,n.Pi)((e=>{var t,s,i,n,c,p,m;const{setPlansDetailsVisible:y,setSelectedPlan:f}=e,{usersStore:b,companiesStore:S,paymentSubscriptionsStore:j}=(0,o.o)(),[M,C]=(0,l.useState)(),[A,P]=(0,l.useState)(),[N,Z]=(0,l.useState)(!1),[I,E]=(0,l.useState)(!1),[k,L]=(0,l.useState)(0),[R,F]=(0,l.useState)(0),[U,G]=(0,l.useState)(0),[B,$]=(0,l.useState)(!1),z=(0,w.Z)();(0,l.useEffect)((function(){if(!j.isAddonsLoading&&(Z(!0),C(void 0),!j.isLoading&&j.paymentSubscriptionsArray)){const e=j.paymentSubscriptionsArray;e&&0!==e.length||(G(Number.MAX_SAFE_INTEGER),Z(!1));const t=e.filter((e=>{const t=e.plan;return"active"===e.status&&("SaaS-Recurring-Subscriptions"===t.item_family_id||"Free-Trial"===t.item_family_id||"Freemium"===t.item_family_id||"Beta-Tester"===t.item_family_id)}));C(e.filter((e=>{const t=e.plan;return"future"===e.status&&("SaaS-Recurring-Subscriptions"===t.item_family_id||"Free-Trial"===t.item_family_id||"Freemium"===t.item_family_id||"Beta-Tester"===t.item_family_id)}))[0]),t&&t.length>0&&(t.sort(((e,t)=>e.currentPeriodEnd-t.currentPeriodEnd)),f(t[0]),P(t[0]))}}),[j.isAddonsLoading,j.isLoading,j.paymentSubscriptionsArray,f,P]),(0,l.useEffect)((()=>{var e,t,s,r,a,i;if(A&&null!=S&&S.companyInfo)return null!=S&&null!==(e=S.companyInfo)&&void 0!==e&&e.earlyAdopter||null==A||null===(t=A.plan)||void 0===t||null===(s=t.metadata)||void 0===s||!s.amount||(null==A||null===(r=A.plan)||void 0===r||null===(a=r.metadata)||void 0===a?void 0:a.amount)<0?(G(Number.MAX_SAFE_INTEGER),void Z(!1)):void(null!=S&&null!==(i=S.companyInfo)&&void 0!==i&&i.id?j.getShipmentCounter().then((e=>{if(null==e||e<0)E(!0),Z(!1);else{var t,s;const r=(null===(t=A.plan)||void 0===t||null===(s=t.metadata)||void 0===s?void 0:s.amount)||0;G(r),F(100*e/r),L(e),E(!1),Z(!1)}})).catch((()=>{E(!0),Z(!1)})):(E(!0),Z(!1)))}),[A,null==S?void 0:S.companyInfo,j]),(0,l.useEffect)((()=>{var e;null!==(e=j.paymentSubscriptionsArray)&&void 0!==e&&e.length||j.getPaymentSubscriptions()}),[j]);const V=!M&&"Free-Trial"===(null==A||null===(t=A.plan)||void 0===t?void 0:t.item_family_id)&&!!A,X=!M;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"mb-2",children:[(0,g.jsx)(a.xv,{className:"settings-title",children:(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.title",defaultMessage:"Plan details"})}),(0,g.jsx)(a.nw,{title:(0,g.jsxs)("div",{className:"billings-plan-details-tooltip",children:[(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.title.tooltip.first",defaultMessage:"View our "}),(0,g.jsx)(a.rU,{href:D._.termsConditionUrl,target:"_blank",children:(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.title.tooltip.terms",defaultMessage:"terms of service"})}),(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.title.tooltip.second",defaultMessage:" and "}),(0,g.jsx)(a.rU,{href:D._.privacyPolicyUrl,target:"_blank",children:(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.title.tooltip.privacy",defaultMessage:"privacy policy"})})]})})]}),(0,g.jsxs)(u.Z,{gutter:30,children:[(0,g.jsxs)(h.Z,{span:3,children:[(0,g.jsx)(a.xv,{type:"secondary",children:(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.memberSince",defaultMessage:"Member since"})}),b.isLoading?(0,g.jsx)(a.D_,{primaryRow:(0,g.jsx)(O.Z,{})}):(0,g.jsx)(a.Dx,{level:5,title:(0,_.t6)(null==b||null===(s=b.userInfo)||void 0===s?void 0:s.created),className:"mt-0",children:(0,_.t6)(null==b||null===(i=b.userInfo)||void 0===i?void 0:i.created)})]}),(0,g.jsxs)(h.Z,{span:5,children:[(0,g.jsx)(a.xv,{type:"secondary",children:(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.currentPlan",defaultMessage:"Current plan"})}),null!==(n=S.companyInfo)&&void 0!==n&&n.earlyAdopter?(0,g.jsx)(a.D_,{primaryRow:(0,g.jsx)(a.Dx,{level:5,className:"mt-1",children:(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.betaTester",defaultMessage:"Beta-Tester"})})}):j.isLoading?(0,g.jsx)(a.D_,{primaryRow:(0,g.jsx)(O.Z,{})}):(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(a.D_,{primaryRow:(0,g.jsx)(a.Dx,{level:5,title:`${A?A.name:"-"}`,className:"mt-0",children:`${A?A.name:"-"}`}),secondaryRow:A&&A.plan&&(0,g.jsx)(a.xv,{children:(0,g.jsx)(W.A,{currentPlan:A})})})})]}),(0,g.jsxs)(h.Z,{span:5,children:[(0,g.jsx)(a.xv,{type:"secondary",children:(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.status",defaultMessage:"Status"})}),null!==(c=S.companyInfo)&&void 0!==c&&c.earlyAdopter?(0,g.jsx)(H,{status:"active",renewDate:0}):j.isLoading?(0,g.jsx)(a.D_,{primaryRow:(0,g.jsx)(O.Z,{})}):"nonrenewing"===(null==A?void 0:A.gatewayStatus)?(0,g.jsx)(H,{status:null==A?void 0:A.gatewayStatus,renewDate:(null==A?void 0:A.currentPeriodEnd)||0}):(0,g.jsx)(H,{status:null==A?void 0:A.status,renewDate:(null==A?void 0:A.currentPeriodEnd)||0})]}),(0,g.jsxs)(h.Z,{span:5,children:[(0,g.jsxs)(a.xv,{type:"secondary",children:[(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.shipments.sent",defaultMessage:"Shipments sent"}),(0,g.jsx)(a.nw,{title:(0,g.jsx)("div",{className:"billings-plan-details-shipments-sent-tooltip",children:(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.shipments.sent.tooltip",defaultMessage:"A shipment is equivalent to a generated label"})})})]}),(0,g.jsx)(q,{maxShipments:U,shipmentCounter:k,shipmentCounterError:I,shipmentCounterLoading:N,shipmentCounterPercent:R})]}),(0,g.jsx)(h.Z,{span:6,style:{textAlign:"center"},children:V?(0,g.jsx)(v.Z,{type:"primary",className:"mt-4",onClick:()=>y(J.FreeTrial),children:(0,g.jsx)(d.Z,{id:"settings.subscriptions.buyPlan",defaultMessage:"Buy plan"})}):X?(0,g.jsx)(v.Z,{type:"link",className:"mt-4",onClick:()=>y(J.Subscription),children:(0,g.jsx)(d.Z,{id:"settings.subscriptions.manage",defaultMessage:"Manage"})}):(0,g.jsx)(g.Fragment,{})})]}),M&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.Z,{}),(0,g.jsxs)(u.Z,{gutter:30,children:[(0,g.jsx)(h.Z,{span:3,children:" "}),(0,g.jsxs)(h.Z,{span:5,children:[(0,g.jsx)(a.xv,{type:"secondary",children:(0,g.jsx)(d.Z,{id:"settings.subscriptions.futurePlan",defaultMessage:"Future plan"})}),null!==(p=S.companyInfo)&&void 0!==p&&p.earlyAdopter?(0,g.jsx)(a.D_,{primaryRow:(0,g.jsx)(a.Dx,{level:5,className:"mt-1",children:(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.betaTester",defaultMessage:"Beta-Tester"})})}):j.isLoading?(0,g.jsx)(a.D_,{primaryRow:(0,g.jsx)(O.Z,{})}):(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(a.D_,{primaryRow:(0,g.jsx)(a.Dx,{level:5,title:`${(null==M?void 0:M.name)||"-"}`,className:"mt-0",children:`${(null==M?void 0:M.name)||"-"}`}),secondaryRow:M&&M.plan&&(0,g.jsx)(a.xv,{children:(0,g.jsx)(W.A,{currentPlan:M})})})})]}),(0,g.jsxs)(h.Z,{span:6,children:[(0,g.jsx)(a.xv,{type:"secondary",children:(0,g.jsx)(d.Z,{id:"settings.billings.planDetails.status",defaultMessage:"Status"})}),null!==(m=S.companyInfo)&&void 0!==m&&m.earlyAdopter?(0,g.jsx)(H,{status:"active",renewDate:0}):j.isLoading?(0,g.jsx)(a.D_,{primaryRow:(0,g.jsx)(O.Z,{})}):"nonrenewing"===(null==M?void 0:M.gatewayStatus)?(0,g.jsx)(H,{status:null==M?void 0:M.gatewayStatus,renewDate:(null==M?void 0:M.currentPeriodEnd)||0}):(0,g.jsx)(H,{status:null==M?void 0:M.status,startDate:(null==M?void 0:M.currentPeriodStart)||0,renewDate:(null==M?void 0:M.currentPeriodEnd)||0})]}),(0,g.jsx)(h.Z,{span:10,className:"flex justify-center align-center w-full",children:(0,g.jsx)(v.Z,{type:"link",style:{color:"#ff4d4f",fontWeight:400,padding:0},onClick:()=>{K({title:(0,g.jsx)(a.xv,{className:"text-primary",children:z.formatMessage(Y.s.deleteFutureTitle)}),icon:(0,g.jsx)(T.Z,{}),content:(0,g.jsx)(a.xv,{className:"thin",children:z.formatMessage(Y.s.deleteFutureBody)}),cancelText:z.formatMessage(Y.s.deleteOk),okText:z.formatMessage(Y.s.confirmCancel),centered:!0,onCancel:async()=>{if(null!=M&&M.id)try{$(!0),await j.cancelPlan({planId:M.id}),$(!1)}catch(e){$(!1),x.T.error({message:z.formatMessage(Y.s.cancelAddonErrorMessage),description:z.formatMessage(Y.s.cancelAddonErrorDescription)})}}})},loading:B,children:(0,g.jsx)(d.Z,{id:"settings.subscriptions.removePlan",defaultMessage:"Remove plan"})})})]})]})]})}));var Q=s(29143);let J=function(e){return e[e.Hidden=-2]="Hidden",e[e.FreeTrial=-1]="FreeTrial",e[e.Subscription=0]="Subscription",e[e.AddOns=1]="AddOns",e}({});const ee=(0,n.Pi)((function(){const{financeStore:e}=(0,o.o)(),t=(0,c.s0)(),[s,n]=(0,l.useState)(J.Hidden),[p,u]=(0,l.useState)(),[h,m]=(0,l.useState)();(0,l.useEffect)((()=>{e.getCoupons(),e.getPromotionalCredits()}),[e]);const f=(0,l.useCallback)((e=>{t(`/${i.H.settings.root}/${e}`)}),[t]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"Settings__TitleContainer",children:(0,g.jsx)(a.Dx,{level:2,children:(0,g.jsx)(a.xv,{className:"Settings__Title",children:(0,g.jsx)(d.Z,{id:"settings.screen.title",defaultMessage:"Settings"})})})}),(0,g.jsx)(r.Z,{className:"w-full"}),(0,g.jsx)(a.Dx,{level:5,children:(0,g.jsx)(d.Z,{id:"settings.subscriptions.title",defaultMessage:"Subscriptions"})}),(0,g.jsx)(a.xv,{className:"mb-4",type:"secondary",children:(0,g.jsx)(d.Z,{id:"settings.subscriptions.subtitle",defaultMessage:"Your plans and additional isendu services"})}),(0,g.jsx)(X,{setPlansDetailsVisible:n,setSelectedPlan:u}),(0,g.jsx)(r.Z,{}),(null==e?void 0:e.couponsArray.length)>0&&(0,g.jsx)(z,{}),(0,g.jsx)(B,{onChangeTab:f,setCurrentAddon:m,setVisibleSubscriptionModalSteps:n}),e.promotionalCreditsArray.length>0&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.Z,{className:"w-full"}),(0,g.jsx)(y,{})]}),(0,g.jsx)(Q.rJ,{modalMode:s,setModalMode:n,currentPlan:p,currentAddon:h})]})}))},16549:(e,t,s)=>{"use strict";s.d(t,{q:()=>f});var r=s(57458),a=s(50049),i=s(44012),o=s(29558),n=s(50003),l=s(51066),d=s(60843),c=s(58989),p=s(85893),u=s(25108);const h=r.mM.create({body:{padding:5},bodyBrt:{padding:5},h1:{fontSize:18,textAlign:"left",marginTop:5},h2:{fontSize:12,textAlign:"left",marginTop:2},textHeaderBrt:{fontFamily:"Helvetica",textAlign:"center",fontSize:12},textHeaderBrtBold:{fontFamily:"Helvetica-Bold",textAlign:"center",fontSize:12},table:{marginTop:5,marginBottom:5,width:"100%"},tableBrt:{marginTop:5,marginBottom:5,width:"100%"},headerBrt:{marginTop:0,marginBottom:20,width:"100%"},headerBrtRow:{margin:"auto",flexDirection:"row"},tableRow:{margin:"auto",flexDirection:"row"},tableRowBottomLine:{margin:"auto",flexDirection:"row",borderStyle:"solid",borderBottomColor:"#a6a1a1",borderWidth:1,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:0,borderBottomWidth:1},tableRowHeaderBrt:{flexDirection:"row"},tableColHeader:{width:"11%",borderStyle:"solid",borderBottomColor:"#000",borderWidth:1,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:0},tableColDotted:{width:"11%",borderStyle:"dotted",borderBottomColor:"#C8C8C8",borderWidth:1,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:0},tableColHeaderBrt:{width:"11%",borderStyle:"solid",borderBottomColor:"#000",borderTopColor:"#000",borderWidth:1,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:1,borderBottomStyle:"dotted"},tableCellBrt:{margin:7,fontFamily:"Helvetica",fontSize:9,fontWeight:500,textAlign:"left"},tableCellBrtRightAlign:{margin:7,fontFamily:"Helvetica",fontSize:9,fontWeight:500,textAlign:"right"},tableCol:{width:"11%",borderStyle:"solid"},tableColLastLine:{width:"11%",borderStyle:"solid",borderBottomColor:"#000",borderTopColor:"#000",borderWidth:0,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:1},brtHeaderTableCol:{width:"25%"},tableCellHeader:{margin:5,fontSize:9,fontWeight:500,textAlign:"left"},tableCellHeaderBrt:{margin:4,fontFamily:"Helvetica-Bold",fontSize:9,fontWeight:500,textAlign:"left"},tableCell:{margin:5,fontSize:9}}),m=e=>{var t;let{addressTo:s,orderName:i,orderId:o,tracking:n,created:l,parcelsCount:d,totalWeight:c,COD:u}=e;return(0,p.jsxs)(r.G7,{style:h.tableRow,children:[(0,p.jsx)(r.G7,{style:{...h.tableColDotted,width:"8%"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:(0,p.jsx)(a.Ji,{value:l,year:"numeric",month:"2-digit",day:"2-digit"})})}),(0,p.jsx)(r.G7,{style:h.tableColDotted,children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:i||o.slice(-8)})}),(0,p.jsx)(r.G7,{style:{...h.tableColDotted,width:"12%"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:null===(t=n.match(/.{1,15}/g))||void 0===t?void 0:t.join("\n")})}),(0,p.jsx)(r.G7,{style:h.tableColDotted,children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:s.name})}),(0,p.jsx)(r.G7,{style:h.tableColDotted,children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:s.city})}),(0,p.jsx)(r.G7,{style:h.tableColDotted,children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:s.street})}),(0,p.jsx)(r.G7,{style:h.tableColDotted,children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:s.state})}),(0,p.jsx)(r.G7,{style:{...h.tableColDotted,width:"8%"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:s.zipCode})}),(0,p.jsx)(r.G7,{style:{...h.tableColDotted,width:"5%"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:d})}),(0,p.jsx)(r.G7,{style:{...h.tableColDotted,width:"6%"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:c})}),(0,p.jsx)(r.G7,{style:{...h.tableColDotted,width:"8%"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:u?`${u} €`:""})})]})},g=e=>{let{addressTo:t,orderName:s,orderId:a,numericRef:o,parcelsCount:n,totalWeight:l,cashOnDelivery:d,totalInsuranceVal:c,mcParcels:u,serviceCode:m,priceCondCode:g,parcelNumberFrom:y,parcelNumberTo:f,isLastRow:b}=e;const v=t.companyName&&t.companyName.trim(),x=v?`${v} (${t.name})`:t.name;return s=s||a.slice(-8),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(r.G7,{style:h.tableRow,children:[(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"70px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt},children:s.length>10?function(e){var t;return null===(t=e.match(/.{1,10}/g))||void 0===t?void 0:t.join("\n")}(s):s})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"100px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt},children:x.toUpperCase().substr(0,35)})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"70px"},children:(0,p.jsx)(r.xv,{style:h.tableCellBrt,children:t.street})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"50px"},children:(0,p.jsx)(r.xv,{style:h.tableCellBrt,children:t.zipCode})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"50px"},children:(0,p.jsx)(r.xv,{style:h.tableCellBrt,children:t.city.toUpperCase()})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:Math.floor(900*Math.random()+100)})}),(0,p.jsx)(r.G7,{style:{...h.tableCol},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:`${o||0===o?o:" - "}`})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"20px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:"1"})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"20px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:c})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"70px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:d})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:n})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"40px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:l})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"50px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:u})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"70px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:Number(y)})})]},"row1"),(0,p.jsxs)(r.G7,{style:b?h.tableRow:h.tableRowBottomLine,children:[(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"170px"},children:(0,p.jsxs)(r.xv,{style:h.tableCellBrt,children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.serviceType",defaultMessage:"Service Type"})," ",m," ","     "," Cod. Tar. ",g]})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"70px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"50px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"50px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"30px"},children:(0,p.jsx)(r.xv,{style:h.tableCellBrt})}),(0,p.jsx)(r.G7,{style:{...h.tableCol},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"20px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"20px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"70px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"40px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"50px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"70px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:Number(f)})})]},"row2")]})},y=e=>{let{totalShipments:t,totalShipmentCODCount:s,totalShipmentCODValue:a,totalShipmentInsuranceCount:o,totalShipmentInsuranceValue:n,totalShipmentWeight:l,weightUnit:d,totalParcels:c}=e;return(0,p.jsxs)(r.G7,{children:[(0,p.jsx)(r.G7,{style:h.h2,children:(0,p.jsxs)(r.xv,{children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.totalShipments",defaultMessage:"Total shipments:"}),t]})}),(0,p.jsx)(r.G7,{style:h.h2,children:(0,p.jsxs)(r.xv,{children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.totalParcels",defaultMessage:"Total parcels: "})," ",c]})}),(0,p.jsx)(r.G7,{style:h.h2,children:(0,p.jsxs)(r.xv,{children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.totalRealWeight",defaultMessage:"Total real weight: "}),l.toFixed(1)," ",d]})}),(0,p.jsx)(r.G7,{style:h.h2,children:(0,p.jsx)(r.xv,{children:(0,p.jsx)(i.Z,{values:{count:s,value:a},id:"ordersList.manifest.totalCashOnDelivery",defaultMessage:"Total cash on delivery shipments (COD): {count} with total value {value}  Euro"})})}),(0,p.jsx)(r.G7,{style:h.h2,children:(0,p.jsxs)(r.xv,{children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.freePortTotalShipments",defaultMessage:"Total shipments in Free Port: "}),t]})}),(0,p.jsx)(r.G7,{style:h.h2,children:(0,p.jsxs)(r.xv,{children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.freightCollectionTotalShipments",defaultMessage:"Total shipments in Freight Collection: "}),"0"]})}),(0,p.jsx)(r.G7,{style:h.h2,children:(0,p.jsx)(r.xv,{children:(0,p.jsx)(i.Z,{values:{count:o,value:n},id:"ordersList.manifest.totalInsurance",defaultMessage:"Total shipments with insurance: {count} with total value {value} Euro"})})})]})},f=e=>{let{orders:t,carrierCode:s}=e;return u.log("OrdersManifestRendererWrapper",t,s),s===l.availableCarriers.brt.internalCode?(0,p.jsx)(v,{orders:t}):(0,p.jsx)(b,{orders:t})},b=e=>{var t;let{orders:s}=e;const l=[],u=(new Date).getTime(),g=s.length,{companiesStore:f,carriersStore:b}=(0,n.o)();let v,x=0,S=0,j=0,w=0,M=0,C=0,A="";function T(e){if(e){var t;return null===(t=e.match(/.{1,15}/g))||void 0===t?void 0:t.join("\n")}return e}return s.forEach((e=>{if(e.shipment){var t,s,r,a,i,o,n,c,u,h,g,y,f,O;const N=e.shipment,_=N.request||e.order.shippingInformation,Z=null===(t=_.parcels)||void 0===t?void 0:t.length,I=null===(s=_.parcels)||void 0===s?void 0:s.reduce(((e,t)=>e+Number(t.weight)+Number(t.isWeightDynamic&&t.packagingWeight||0)),0);null!==(r=_.additionalServices)&&void 0!==r&&null!==(a=r.cod)&&void 0!==a&&a.monetaryValue&&(null===(i=_.additionalServices)||void 0===i||null===(o=i.cod)||void 0===o?void 0:o.monetaryValue)>0&&(j+=1,w+=_.additionalServices.cod.monetaryValue),null!==(n=_.additionalServices)&&void 0!==n&&null!==(c=n.insurance)&&void 0!==c&&c.monetaryValue&&(null===(u=_.additionalServices)||void 0===u||null===(h=u.insurance)||void 0===h?void 0:h.monetaryValue)>0&&(M+=1,C+=_.additionalServices.insurance.monetaryValue),x+=Z,S+=I,A=_.parcels[0].weightUnit,l.push((0,p.jsx)(m,{addressTo:_.addressTo,orderName:T(e.order.storeOrderId)||"",orderId:e.order.id||"",tracking:(null===(g=N.responses[0])||void 0===g?void 0:g.shipmentRef)||"",created:_.created||0,parcelsCount:Z,totalWeight:`${I.toFixed(1)} ${A}`,COD:null==_||null===(y=_.additionalServices)||void 0===y||null===(f=y.cod)||void 0===f?void 0:f.monetaryValue},_.id));const D=b.selectedCarriersArray.find((t=>{var s,r;if(t.id&&null!==(s=e.order.shippingInformation)&&void 0!==s&&s.selectedCarrierId)return t.id===(null===(r=e.order.shippingInformation)||void 0===r?void 0:r.selectedCarrierId)}));var P;if((null==D||null===(O=D.carrier)||void 0===O?void 0:O.internalCode)===d._.GLS_ITALY)v=null==D||null===(P=D.credentials)||void 0===P?void 0:P.accountNumber}})),(0,p.jsx)(o.Z,{locale:c.X.language,messages:c.X.messages,children:(0,p.jsx)(r.BB,{children:(0,p.jsxs)(r.T3,{size:"A4",orientation:"landscape",style:h.body,children:[(0,p.jsx)(r.G7,{style:h.h1,children:(0,p.jsx)(r.xv,{children:Object.values({}).map((e=>e.name)).join(", ")})}),(0,p.jsx)(r.G7,{style:h.h1,children:(0,p.jsxs)(r.xv,{children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.creationShippingList",defaultMessage:"Shipping bill of: "}),(0,p.jsx)(a.Ji,{value:u,hour12:!1,year:"numeric",month:"2-digit",day:"2-digit"})]})}),(0,p.jsx)(r.G7,{style:h.h2,children:(0,p.jsxs)(r.xv,{children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.company",defaultMessage:"Company: "}),null==f||null===(t=f.companyInfo)||void 0===t?void 0:t.name]})}),v&&(0,p.jsx)(r.G7,{style:h.h2,children:(0,p.jsxs)(r.xv,{children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.clientCode",defaultMessage:"Client code: "}),v]})}),(0,p.jsxs)(r.G7,{style:h.table,children:[(0,p.jsxs)(r.G7,{style:h.tableRow,children:[(0,p.jsx)(r.G7,{style:{...h.tableColHeader,width:"8%"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.date",defaultMessage:"Date"})})}),(0,p.jsx)(r.G7,{style:h.tableColHeader,children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.orderId",defaultMessage:"Order Id"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeader,width:"12%"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.shipmentId",defaultMessage:"Shipment Id"})})}),(0,p.jsx)(r.G7,{style:h.tableColHeader,children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.recipient",defaultMessage:"Recipient"})})}),(0,p.jsx)(r.G7,{style:h.tableColHeader,children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.location",defaultMessage:"Location"})})}),(0,p.jsx)(r.G7,{style:h.tableColHeader,children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.address",defaultMessage:"Address"})})}),(0,p.jsx)(r.G7,{style:h.tableColHeader,children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.province",defaultMessage:"Province"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeader,width:"8%"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.postalCode",defaultMessage:"Postal Code"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeader,width:"5%"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.packages",defaultMessage:"Packages"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeader,width:"6%"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.weight",defaultMessage:"Weight"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeader,width:"8%"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeader,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.cashOnDelivery",defaultMessage:"Cash on Delivery"})})})]}),l]},"table-header"),(0,p.jsx)(y,{totalParcels:x,totalShipments:g,totalShipmentCODCount:j,totalShipmentCODValue:w,totalShipmentInsuranceCount:M,totalShipmentInsuranceValue:C,totalShipmentWeight:S,weightUnit:A})]})})})},v=e=>{let{orders:t}=e;const s=new Map,d=[],u=(new Date).getTime(),{carriersStore:m}=(0,n.o)();let y=0,f=0,b=0;const v=t.length;let x=0,S=0,j=0,w=0,M="",C="";return t.forEach((e=>{var t,r;if((null===(t=e.shipment)||void 0===t||null===(r=t.request.carrier)||void 0===r?void 0:r.internalCode)===l.availableCarriers.brt.internalCode){const t=m.selectedCarriersArray.find((t=>{var s,r,a;return t.id===(null===(s=e.shipment)||void 0===s||null===(r=s.request.carrier)||void 0===r?void 0:r.selectedCarrierId)||t.id===(null===(a=e.shipment)||void 0===a?void 0:a.request.selectedCarrierId)}));if(t&&t.credentials&&t.credentials.accountNumber){s.has(t.credentials.accountNumber)||s.set(t.credentials.accountNumber,[]);const r=s.get(t.credentials.accountNumber);r&&r.push(e),s.set(t.credentials.accountNumber,r||[])}}})),s.forEach(((e,t)=>{var s,a;d.push((0,p.jsxs)(r.G7,{style:{...h.tableRow,alignContent:"flex-start"},children:[(0,p.jsx)(r.G7,{style:{...h.tableCol,width:"300px"},children:(0,p.jsxs)(r.xv,{style:{...h.tableCellBrt,fontFamily:"Helvetica-Bold"},children:[" ",(0,p.jsx)(i.Z,{id:"settings.addresses.tabs.sender",defaultMessage:"Sender"})," ",t," ",null===(s=e[0].order.shippingInformation)||void 0===s||null===(a=s.addressFrom)||void 0===a?void 0:a.companyName]})}),(0,p.jsx)(r.G7,{style:{...h.tableCol}}),(0,p.jsx)(r.G7,{style:{...h.tableCol}})]},"sender")),null==e||e.forEach(((e,t,s)=>{if(e.shipment){var r,a,i,o,n,l,c,u,h,v,A,T,O,P,N,_,Z,I,D,E,k,L;const R=e.shipment,F=R.request||e.order.shippingInformation,U=null===(r=F.parcels)||void 0===r?void 0:r.length;y+=U;const G=null===(a=F.parcels)||void 0===a?void 0:a.reduce(((e,t)=>e+Number(t.weight)+Number(t.isWeightDynamic&&t.packagingWeight||0)),0),B=m.selectedCarriersArray.find((t=>{var s,r;return t.id===(null===(s=e.shipment)||void 0===s||null===(r=s.request)||void 0===r?void 0:r.selectedCarrierId)}));B&&B.credentials&&(C=null==B?void 0:B.credentials.pricingConditionCode),f+=G;let $=0;F.parcels.forEach((e=>{e.lengthUnit?$+=e.height/100*(e.length/100)*(e.width/100):$+=e.height*e.length*e.width,$=parseFloat($.toFixed(5))})),b+=$,null!==(i=F.additionalServices)&&void 0!==i&&null!==(o=i.cod)&&void 0!==o&&o.monetaryValue&&(null===(n=F.additionalServices)||void 0===n||null===(l=n.cod)||void 0===l?void 0:l.monetaryValue)>0&&(x+=1,S+=F.additionalServices.cod.monetaryValue),null!==(c=F.additionalServices)&&void 0!==c&&null!==(u=c.insurance)&&void 0!==u&&u.monetaryValue&&(null===(h=F.additionalServices)||void 0===h||null===(v=h.insurance)||void 0===v?void 0:v.monetaryValue)>0&&(j+=1,w+=F.additionalServices.insurance.monetaryValue),M=F.parcels[0].weightUnit,d.push((0,p.jsx)(g,{addressTo:F.addressTo,orderName:e.order.storeOrderId||"",orderId:e.order.id||"",numericRef:F.numericRef,alphanumericRef:F.alphanumericRef||"",parcelsCount:U,totalWeight:`${G.toFixed(1)} ${M}`,cashOnDelivery:(null===(A=F.additionalServices)||void 0===A||null===(T=A.cod)||void 0===T?void 0:T.monetaryValue)||0,totalInsuranceVal:(null===(O=F.additionalServices)||void 0===O||null===(P=O.insurance)||void 0===P?void 0:P.monetaryValue)||0,mcParcels:$,serviceCode:F.serviceCode||"",priceCondCode:C||"000",parcelNumberFrom:R.responses&&null!==(N=R.responses[0])&&void 0!==N&&null!==(_=N.extra)&&void 0!==_&&_.parcelNumberFrom?null===(Z=R.responses[0])||void 0===Z||null===(I=Z.extra)||void 0===I?void 0:I.parcelNumberFrom:"1",parcelNumberTo:R.responses&&null!==(D=R.responses[0])&&void 0!==D&&null!==(E=D.extra)&&void 0!==E&&E.parcelNumberTo?null===(k=R.responses[0])||void 0===k||null===(L=k.extra)||void 0===L?void 0:L.parcelNumberTo:"1",isLastRow:t===s.length-1},F.id))}}))})),(0,p.jsx)(o.Z,{locale:c.X.language,messages:c.X.messages,children:(0,p.jsx)(r.BB,{children:(0,p.jsxs)(r.T3,{size:"A4",orientation:"landscape",style:h.bodyBrt,children:[(0,p.jsx)(r.G7,{style:h.h1,children:(0,p.jsx)(r.xv,{children:Object.values({}).map((e=>e.name)).join(", ")})}),(0,p.jsx)(r.G7,{style:h.headerBrt,children:(0,p.jsxs)(r.G7,{style:h.headerBrtRow,children:[(0,p.jsx)(r.G7,{style:h.brtHeaderTableCol,children:(0,p.jsx)(r.xv,{style:h.h2})}),(0,p.jsx)(r.G7,{style:h.brtHeaderTableCol,children:(0,p.jsxs)(r.xv,{style:h.textHeaderBrtBold,children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.brt.manifestNumber",defaultMessage:"BRT manifest number "}),(0,p.jsx)(r.xv,{style:h.textHeaderBrt,children:"1"})]})}),(0,p.jsx)(r.G7,{style:h.brtHeaderTableCol,children:(0,p.jsxs)(r.xv,{style:h.textHeaderBrtBold,children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.brt.date",defaultMessage:"Of "}),(0,p.jsx)(r.xv,{style:h.textHeaderBrt,children:(0,p.jsx)(a.Ji,{value:u,hour12:!1,year:"numeric",month:"2-digit",day:"2-digit"})})]})}),(0,p.jsx)(r.G7,{style:h.brtHeaderTableCol,children:(0,p.jsxs)(r.xv,{style:h.textHeaderBrtBold,children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.brt.printDate",defaultMessage:"Print Date "}),(0,p.jsx)(r.xv,{style:h.textHeaderBrt,children:(0,p.jsx)(a.Ji,{value:u,hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]})})]})},"table-header1"),(0,p.jsxs)(r.G7,{style:h.tableBrt,children:[(0,p.jsxs)(r.G7,{style:h.tableRow,children:[(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"70px"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeaderBrt,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.orderId",defaultMessage:"Order Id"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"100px"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeaderBrt,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.recipient",defaultMessage:"Recipient"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"70px"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeaderBrt,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.address",defaultMessage:"Address"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"50px"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeaderBrt,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.postalCode",defaultMessage:"Postal Code"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"50px"},children:(0,p.jsx)(r.xv,{style:h.tableCellHeaderBrt,children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.location",defaultMessage:"Location"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"30px"},children:(0,p.jsx)(r.G7,{style:{...h.tableRowHeaderBrt},children:(0,p.jsx)(r.G7,{style:{...h.tableCol},children:(0,p.jsx)(r.xv,{style:{...h.tableCellHeaderBrt,textAlign:"right"},children:"LNA"})})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt},children:(0,p.jsx)(r.xv,{style:{...h.tableCellHeaderBrt,textAlign:"right"},children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.numericRef",defaultMessage:"Numeric ref."})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"20px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellHeaderBrt,textAlign:"right"},children:"C.Bol"})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"20px"}}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellHeaderBrt,textAlign:"right"},children:(0,p.jsx)(i.Z,{values:{br:(0,p.jsx)("br",{})},id:"ordersList.manifest.insuranceAmount",defaultMessage:"Insurance{br}Amount"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellHeaderBrt,textAlign:"right"},children:"T.I. c/a"})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"70px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellHeaderBrt,textAlign:"right"},children:(0,p.jsx)(i.Z,{values:{br:(0,p.jsx)("br",{})},id:"ordersList.manifest.codAmount",defaultMessage:"Cash on {br} delivery amount"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellHeaderBrt,textAlign:"right"},children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.packages",defaultMessage:"Packages"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"40px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellHeaderBrt,textAlign:"right"},children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.weight",defaultMessage:"Weight"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"50px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellHeaderBrt,textAlign:"right"},children:"MC"})}),(0,p.jsx)(r.G7,{style:{...h.tableColHeaderBrt,width:"70px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellHeaderBrt,textAlign:"right"},children:(0,p.jsx)(i.Z,{values:{br:(0,p.jsx)("br",{})},id:"ordersList.manifest.packagesMarkers",defaultMessage:"Packages markers{br}From{br}To"})})})]}),d,(0,p.jsxs)(r.G7,{style:h.tableRow,children:[(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"170px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt}})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"70px"},children:(0,p.jsx)(r.xv,{style:h.tableCellBrt})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"50px"},children:(0,p.jsx)(r.xv,{style:h.tableCellBrt})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"50px"},children:(0,p.jsx)(r.xv,{style:h.tableCellBrt})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"40px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right",fontFamily:"Helvetica-Bold"},children:(0,p.jsx)(i.Z,{id:"ordersList.manifest.totals",defaultMessage:"Totals"})})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:w})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"}})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"70px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:S.toFixed(2)})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"30px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:y})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"40px"},children:(0,p.jsxs)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:[f.toFixed(1)," kg"]})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"50px"},children:(0,p.jsx)(r.xv,{style:{...h.tableCellBrt,textAlign:"right"},children:b.toFixed(5)})}),(0,p.jsx)(r.G7,{style:{...h.tableColLastLine,width:"70px"},children:(0,p.jsxs)(r.xv,{style:{...h.tableCellBrt,textAlign:"right",fontFamily:"Helvetica-Bold"},children:[(0,p.jsx)(i.Z,{id:"ordersList.manifest.shipments",defaultMessage:"Shipments: "}),v]})})]})]})]})})})}},69681:(e,t,s)=>{"use strict";s(28660);var r=s(20745),a=s(68949),i=s(50003),o=s(25108);window.getStoresSnapshot=()=>{o.log("%c           STORES SNAPSHOT            ","background: #222; color: #bada55");const e=(0,a.ZN)(i.rootStore);for(const[t,s]of Object.entries(e).sort(((e,t)=>{let[s]=e,[r]=t;return s.localeCompare(r)}))){o.groupCollapsed(t);for(const[e,t]of Object.entries(s))if(Array.isArray(t))o.log(e),o.table(t);else if(t instanceof Map){const e=Array.from(t.entries()).map((e=>{let[t,s]=e;return{mapKey:t,...s}}));o.table(e)}else o.log(`${e}: `,t);o.groupEnd()}},window.getOrder=e=>{const t=(0,a.ZN)(i.rootStore.ordersStore.orders.get(e));return t?(o.log(`%c           ORDER ${e}          `,"background: #222; color: #bada55"),o.log(t)):o.log("Order not found")},window.getOrderList=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!0;const t=(0,a.ZN)(Array.from(i.rootStore.ordersStore.orders.values()).filter(e));o.log(t)},window.getSelectedCarriersList=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!0;const t=(0,a.ZN)(i.rootStore.carriersStore.selectedCarriersArray.filter(e));o.log(t)},window.getSelectedCarrier=e=>{o.log("%c           CARRIER            ","background: #222; color: #bada55");const t=(0,a.ZN)(i.rootStore.carriersStore.selectedCarriers.data[e]);t?o.log(t):o.log("Order not found")};var n=s(53886),l=s(21434),d=s.n(l),c=(s(27369),s(80913)),p=s.n(c),u=s(85893);const h={url:"https://unleash.isnd.io/proxy",clientKey:"7TRpWgQV*shzxcsrDyz7sqT-7UcaKQxhcdG3",refreshInterval:300,appName:"isendu",environment:"production",disableMetrics:!0},m=e=>(0,u.jsx)(p(),{config:h,children:e.children});var g=s(58989),y=s(29323),f=s(67294),b=s(29558),v=s(86896),x=s(88182),S=s(54988),j=s(6258),w=s(40378);const M=e=>{let t,{language:s,children:r}=e;switch(s){case"it":t=S.Z;break;case"es":t=j.Z;break;default:t=w.Z}return(0,u.jsx)(x.ZP,{locale:t,children:r})};var C=s(98933),A=s(25108);const T=(0,y.Pi)((function(e){const{children:t}=e;return(0,u.jsxs)(b.Z,{onError:e=>{"MISSING_TRANSLATION"!==e.code?A.error(e):A.warn("Missing translation",e.message)},locale:g.X.language,messages:g.X.messages,children:[(0,u.jsx)(O,{}),(0,u.jsx)(M,{language:g.X.language,children:t})]})}));function O(){const e=(0,v.Z)();return(0,f.useEffect)((()=>{C.G.setIntlInstance(e)}),[e]),null}var P=s(89250);const N=(0,y.Pi)((function(){return(0,f.useEffect)((()=>{g.X.getTranslations()}),[]),(0,u.jsx)(P.j3,{})}));var _=s(20189),Z=s(74141),I=s(70506);const D=(0,y.Pi)((function(){var e;const t=(0,P.TH)(),s=(0,c.useFlag)(_.V.useNewPlans),r=(0,f.useRef)(!1),{authStore:a,companiesStore:o,paymentSubscriptionsStore:n,subscriptionsStore:l,marketplacesStore:d,zebraPrintersStore:p}=(0,i.o)();if((0,f.useEffect)((()=>{p.getZebraPrinters()}),[p]),(0,f.useEffect)((()=>{if(s||r.current)return;const e=d.selectedMarketplacesArray,t=n.isFreeTrial;(0,Z.o$)(o,t,e),r.current=!0}),[o,o.companyInfo,n,n.paymentSubscriptions,d.selectedMarketplacesArray,s]),(0,f.useEffect)((()=>{var e;if(!s||r.current)return;const t=d.selectedMarketplacesArray,a=(null===(e=l.activeSubscription)||void 0===e?void 0:e.isFreeTrial)||!1;(0,Z.o$)(o,a,t),r.current=!0}),[o,o.companyInfo,l,l.activeSubscription,d.selectedMarketplacesArray,s]),null!==(e=a.auth)&&void 0!==e&&e.accessToken){var h;if(null!=t&&null!==(h=t.pathname)&&void 0!==h&&h.startsWith(`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_STORES}/`)){const e=t.pathname.replace(`/${I.k.INTEGRATIONS_STORES}/`,`/${I.k.INTEGRATIONS_MARKETS}/`);return(0,u.jsx)(P.Fg,{to:`${e}${t.search}`,state:t})}return(0,u.jsx)(P.j3,{})}return(0,u.jsx)(P.Fg,{to:`${I.k.ROOT}${I.k.AUTH}/${I.k.AUTH_LOGIN}${a.error?`?error=${a.error}`:""}`,state:t})}));var E=s(39563),k=s(84403),L=s(82272);function R(){const[e,t]=(0,f.useState)(window.innerWidth),s=(0,f.useMemo)((()=>e>=1600?"lg":e<=600?"mobile":"md"),[e]);return(0,f.useEffect)((()=>{const e=()=>{t(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),{screenSize:s,width:e}}var F=s(53712),U=s(27484),G=s.n(U),B=s(19959),$=s(25108);const z=(0,y.Pi)((e=>{var t;let{children:s}=e;const{companiesStore:r,usersStore:a,rootStore:o,authStore:n,carriersStore:l,marketplacesStore:d,addressesStore:p,parcelsStore:h,paymentMethodsStore:m,paymentSubscriptionsStore:y,subscriptionsStore:b,trackingNotificationsStore:v,financeStore:x,automationRulesStore:S,conversationsStore:j,ordersStore:w}=(0,i.o)(),M=(0,c.useUnleashContext)(),C=(0,c.useFlag)(_.V.useNewPlans),A=(0,c.useFlag)(_.V.useNewTransactionalWhatsapp),T=(0,f.useRef)(!1),{screenSize:O}=R(),P=(0,f.useCallback)((async()=>{var e;if(null!==(e=n.auth)&&void 0!==e&&e.accessToken&&!o.dataPrefecthLoading&&!o.dataPrefetched){if("mobile"===O){const e=document.querySelector("meta[name=viewport]");e&&e.setAttribute("content","width=1024")}o.startDataPrefetch();try{var t;await n.refreshTokenIfExpired(),await Promise.allSettled([r.getCompanyInfo(),r.getAllShippingAddresses(),h.getCustomParcels(),p.getAddresses(),a.getUserInfo().then((()=>{var e,t;null!==(e=a.userInfo)&&void 0!==e&&e.language&&g.X.setLanguage(null===(t=a.userInfo)||void 0===t?void 0:t.language)})),l.getAllAvailableCarriers(),l.getAvailableCarriers(),l.getSelectedCarriers(),d.getSelectedMarketPlaces(),m.getPaymentMethods(),v.getAllSettings(),S.getAutomationRules(),w.loadPaymentMethods()]),!function(){const e=window.localStorage.getItem("nMissShipDt"),t=G()().format("DD/MM/YYYY");return e&&e===t}()&&null!==(t=r.companyInfo)&&void 0!==t&&t.showForgottenShipmentsAlert&&w.loadForgottenShipmentOrders().then((()=>{w.expiredOrdersCount>0&&B.T.template("FORGOTTEN_SHIPMENT")}));try{var s,i,c;const e=null===(s=a.userInfo)||void 0===s?void 0:s.email,t=(null===(i=a.userInfo)||void 0===i?void 0:i.firstName)||"",r=(null===(c=a.userInfo)||void 0===c?void 0:c.lastName)||"";window.Upscope&&e&&window.Upscope("updateConnection",{identities:[t,r].filter((e=>e)).join(" "),uniqueId:e})}catch(e){$.log(e)}await M({userId:`${r.companyInfo.id}`}),o.dataPrefetchCompleted()}catch(e){var u;o.dataPrefetchCompleted(),e&&e.message&&e.message===k._.getPaymentSubscriptionsError&&null!==(u=r.companyInfo)&&void 0!==u&&u.earlyAdopter&&(0,L.P6)(o,y,a,r),e&&e.message&&(e.message===k._.userNotFoundError||e.message===k._.unauthorizedError||e.message===k._.refreshTokenError)&&(n.doLogout(),localStorage.clear(),window.location.reload())}}}),[r,w,a,o,n,h,p,m,y,v,l,d,S,O,M]);return(0,f.useEffect)((()=>{o.dataPrefetched&&!T.current&&(T.current=!0,C?b.getSubscriptions().then((()=>{(0,L.Wp)(),(0,L.sF)(),(0,L.BS)()})):Promise.allSettled([y.getPaymentSubscriptions(),y.getAddonsWithInfo(),y.getShipmentCounter(),x.getAddons(),x.getPlans()]).then((()=>{(0,L.P6)(o,y,a,r),(0,L.nF)(o,y),(0,L.ph)(o,y)})))}),[C,o.dataPrefetched]),(0,f.useEffect)((()=>{A&&j.getConversationsUnseenMessages()}),[A,j]),(0,f.useEffect)((()=>{o.dataPrefetched||P()}),[o.dataPrefetched,P]),null!==(t=n.auth)&&void 0!==t&&t.accessToken?o.dataPrefetched?(0,u.jsx)(u.Fragment,{children:s}):(0,u.jsx)(F.j,{children:(0,u.jsx)("div",{style:{textAlign:"center",width:"400px",height:"400px"},children:(0,u.jsx)(E.TR,{gif:!0})})}):(0,u.jsx)(u.Fragment,{children:s})}));var W=s(97183),H=s(94184),V=s.n(H),q=s(71577),Y=s(59879),K=s(44012);const X="https://share.hsforms.com/1m4sOCBXbQRefzMxJZdbvbA3w1m7",Q="https://share.hsforms.com/1VdSGf2ZfRZiEQLjcwDO7SQ3w1m7",J="https://share.hsforms.com/18Cy5ZppzTnmIBOhAgH90OQ3w1m7";const ee=function(){var e;const t=(0,P.s0)(),{usersStore:s}=(0,i.o)(),r=null===(e=s.userInfo)||void 0===e?void 0:e.language;return(0,u.jsxs)("div",{className:"GenericErrorPage",children:[(0,u.jsx)("div",{className:"GenericErrorPage__Title",children:(0,u.jsx)(K.Z,{id:"genericErrorPage.title",defaultMessage:"Ooops! Something went wrong"})}),(0,u.jsx)("div",{className:"GenericErrorPage__Description",children:(0,u.jsx)(K.Z,{id:"genericErrorPage.description",defaultMessage:"Ma non disperare, alcune volte è sufficiente ricaricare la pagina per risolvere il problema.{br}Nel caso in cui il problema non si risolva così facilmente contatta{br}il nostro supporto clienti, saremo felici di aiutarti",values:{br:(0,u.jsx)("br",{})}})}),(0,u.jsxs)("div",{className:"GenericErrorPage__Actions",children:[(0,u.jsxs)(q.Z,{type:"primary",onClick:()=>t(0),children:[(0,u.jsx)(Y.Z,{className:"mr-2"}),(0,u.jsx)(K.Z,{id:"genericErrorPage.reload.button",defaultMessage:"Reload the page"})]}),(0,u.jsx)(q.Z,{onClick:()=>{var e;window.open(`${(e=>{switch(e){case"it":return X;case"en":default:return Q;case"es":return J}})(r)}?email=${(null===(e=s.userInfo)||void 0===e?void 0:e.email)||""}`,"_blank")},children:(0,u.jsx)(K.Z,{id:"genericErrorPage.support.button",defaultMessage:"Contact customer support"})})]}),(0,u.jsx)("img",{className:"GenericErrorPage__BackgroundImage",src:"https://static-files-cdn.isendu.com/backgrounds/error_page_background.svg",alt:""})]})};var te=s(51066),se=s(50146),re=s(47635),ae=s(78219);const ie=(0,y.Pi)((e=>{let{visible:t}=e;const{rootStore:s}=(0,i.o)();return t?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(se.default,{open:t,okText:(0,u.jsx)(K.Z,{id:"subscriptionExpired.okText",defaultMessage:"Go to plans"}),maskClosable:!0,onCancel:()=>{s.setModalWarningVisible(!1),s.setAccountWarningType("")},centered:!0,cancelText:(0,u.jsx)(K.Z,{id:"subscriptionExpired.cancelText",defaultMessage:"Later"}),width:620,onOk:()=>re.G.openModal("BUY_PLAN"),children:(0,u.jsxs)("div",{className:"flex flex-column align-center",children:[(0,u.jsx)(E.Ee,{src:"https://static-files-cdn.isendu.com/notifications/alert.svg",width:150,height:150}),(0,u.jsx)(E.Dx,{level:3,className:"mt-2 text-center",children:(0,u.jsx)(K.Z,{id:"account.warning.alert.subscriptionExpired.message",defaultMessage:"Activate a subscription to use isendu."})}),(0,u.jsx)("p",{className:"mt-1",children:(0,u.jsx)(E.xv,{type:"secondary",children:(0,u.jsx)(K.Z,{id:"subscriptionExpired.planExpired",defaultMessage:"Your 21 days trial plan is expired"})})}),(0,u.jsx)("div",{className:"mt-1 text-center pb-3",children:(0,u.jsx)(E.xv,{type:"secondary",children:(0,u.jsx)(K.Z,{id:"subscriptionExpired.subtitle",defaultMessage:"To make the most of isendu and your e-commerce, buy a subscription plan."})})})]})}),(0,u.jsx)(ae.Z,{})]}):null}));var oe=s(29143),ne=s(92048);const le=(0,y.Pi)((e=>{let{visible:t}=e;const[s,r]=(0,f.useState)(ne.$.Hidden),{rootStore:a}=(0,i.o)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(se.default,{open:t,okText:(0,u.jsx)(K.Z,{id:"subscriptionExpired.okText",defaultMessage:"Go to plans"}),maskClosable:!0,onCancel:()=>{a.setModalWarningVisible(!1),a.setAccountWarningType("")},centered:!0,cancelText:(0,u.jsx)(K.Z,{id:"subscriptionExpired.cancelText",defaultMessage:"Later"}),width:620,onOk:()=>r(ne.$.FreeTrial),children:(0,u.jsxs)("div",{className:"flex flex-column align-center justify-center",children:[(0,u.jsx)(E.Ee,{src:"https://static-files-cdn.isendu.com/notifications/alert.svg",width:150,height:150}),(0,u.jsx)(E.Dx,{level:3,className:"mt-2 text-center",children:(0,u.jsx)(K.Z,{id:"account.warning.alert.subscriptionExpired.message",defaultMessage:"Activate a subscription to use isendu."})}),(0,u.jsx)("p",{className:"mt-1",children:(0,u.jsx)(E.xv,{type:"secondary",children:(0,u.jsx)(K.Z,{id:"subscriptionExpired.planExpired",defaultMessage:"Your 21 days trial plan is expired"})})}),(0,u.jsx)("div",{className:"mt-1 text-center pb-3",children:(0,u.jsx)(E.xv,{type:"secondary",children:(0,u.jsx)(K.Z,{id:"subscriptionExpired.subtitle",defaultMessage:"To make the most of isendu and your e-commerce, buy a subscription plan."})})})]})}),(0,u.jsx)(oe.rJ,{modalMode:s,setModalMode:r,hasExpiredPlan:!0})]})}));var de=s(19621);const ce="https://static-files-cdn.isendu.com/notifications/info2.svg",pe="expired",ue="expiring";const he=e=>{switch(e){case ue:return ce;case pe:return"https://static-files-cdn.isendu.com/notifications/alert2.svg";default:return ce}},me=(e,t)=>{if(t&&t.carrier)switch(e){case ue:return(0,u.jsx)(K.Z,{id:"carriersList.TokenExpiringModal.title.singleExpiringToken",defaultMessage:"The {carrierName} integration token is almost expired",values:{carrierName:t.carrier.name}});case pe:return(0,u.jsx)(K.Z,{id:"carriersList.TokenExpiringModal.title.singleExpiredToken",defaultMessage:"The {carrierName} integration token is expired",values:{carrierName:t.carrier.name}});default:return(0,u.jsx)(K.Z,{id:"carriersList.TokenExpiringModal.title.singleExpiringToken",defaultMessage:"The {carrierName} integration token is almost expired",values:{carrierName:t.carrier.name}})}},ge=e=>{switch(e){case ue:return(0,u.jsx)(K.Z,{id:"carriersList.TokenExpiringModal.refreshTokenExpiringSoon.description",defaultMessage:"Your session token is about to expire.{br}Reconnect now to continue using integration without interruption.",values:{br:(0,u.jsx)("br",{})}});case pe:return(0,u.jsx)(K.Z,{id:"carriersList.TokenExpiringModal.refreshTokenExpired.description",defaultMessage:"Your session token is expired.{br}Reconnect now to continue using integration.",values:{br:(0,u.jsx)("br",{})}});default:return(0,u.jsx)(K.Z,{id:"carriersList.TokenExpiringModal.refreshTokenExpiringSoon.description",defaultMessage:"Your session token is about to expire.{br}Reconnect now to continue using integration without interruption.",values:{br:(0,u.jsx)("br",{})}})}};function ye(e,t){var s,r,a,i,o,n,l,d;return null!==(s=e.credentials)&&void 0!==s&&null!==(r=s.clientAuthentication)&&void 0!==r&&r.refreshTokenExpiration?null!==(a=t.credentials)&&void 0!==a&&null!==(i=a.clientAuthentication)&&void 0!==i&&i.refreshTokenExpiration?new Date(null===(o=e.credentials)||void 0===o||null===(n=o.clientAuthentication)||void 0===n?void 0:n.refreshTokenExpiration).getTime()-new Date(null===(l=t.credentials)||void 0===l||null===(d=l.clientAuthentication)||void 0===d?void 0:d.refreshTokenExpiration).getTime():-1:1}const fe=function(){return(0,u.jsx)("div",{className:"TokenExpiringModal__Footer",children:(0,u.jsx)(K.Z,{id:"carriersList.TokenExpiringModal.footer",defaultMessage:"If you have any questions mail to <supportLink>support@isendu.com</supportLink> our support team will answer you",values:{supportLink:e=>(0,u.jsx)(E.rU,{href:`mailto:${e}`,target:"_blank",children:e})}})})};const be=function(e){const{carriersWithExpiredToken:t,carriersWithExpiringToken:s,handleRefreshToken:r,setIsVisible:a}=e;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"TokenExpiringModal__AlertImage",children:(0,u.jsx)("img",{src:ce,alt:"Alert logo"})}),(0,u.jsx)(E.xv,{className:"TokenExpiringModal__Title",children:(0,u.jsx)(K.Z,{id:"carriersList.TokenExpiringModal.title.multipleExpiringToken",defaultMessage:"Some integration tokens need to be refreshed"})}),(0,u.jsx)("div",{className:"TokenExpiringModal__ErrorBox",children:(0,u.jsxs)("div",{className:"TokenExpiringModal__ExpiringCarriersList",children:[t.map((e=>(0,u.jsx)("div",{children:(0,u.jsx)(K.Z,{id:"carriersList.TokenExpiringModal.CarriersListItem.expired",defaultMessage:"Token {carrierName} ({customName}) <b>expired</b> - <handleRefreshToken>Reconnect</handleRefreshToken>",values:{b:e=>(0,u.jsx)("b",{children:e}),carrierName:e.carrier.name,customName:e.customName,handleRefreshToken:t=>(0,u.jsx)("a",{className:"TokenExpiringModal__RefreshTokenLink",type:"link",onClick:()=>r(e.id),children:t})}})},e.id))),s.map((e=>(0,u.jsx)("div",{children:(0,u.jsx)(K.Z,{id:"carriersList.TokenExpiringModal.CarriersListItem.expiring",defaultMessage:"Token {carrierName} ({customName}) <b>is expiring soon</b> - <handleRefreshToken>Reconnect</handleRefreshToken>",values:{b:e=>(0,u.jsx)("b",{children:e}),carrierName:e.carrier.name,customName:e.customName,handleRefreshToken:t=>(0,u.jsx)("a",{className:"TokenExpiringModal__RefreshTokenLink",type:"link",onClick:()=>r(e.id),children:t})}})},e.id)))]})}),(0,u.jsx)(q.Z,{onClick:()=>a(!1),className:"TokenExpiringModal__ActionButton ActionButtonTransparentBg",type:"default",children:(0,u.jsx)(K.Z,{id:"generic.closeNotice",defaultMessage:"Close notice"})})]})};var ve=s(27049);const xe=function(e){const{setIsVisible:t,typeOfToken:s,handleRefreshToken:r,carrier:a}=e;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"TokenExpiringModal__AlertImage",children:(0,u.jsx)("img",{src:he(s),alt:"Alert logo"})}),(0,u.jsx)(E.xv,{className:"TokenExpiringModal__Title",children:me(s,a)}),(0,u.jsxs)("div",{className:"TokenExpiringModal__ErrorBox",children:[(0,u.jsx)("div",{children:(0,u.jsx)(E.xv,{className:"TokenExpiringModal__ErrorDescription",children:ge(s)})}),(0,u.jsxs)("div",{className:"TokenExpiringModal__ErrorActions",children:[(0,u.jsx)(q.Z,{onClick:()=>t(!1),className:"TokenExpiringModal__ActionButton ActionButtonTransparentBg",type:"default",children:(0,u.jsx)(K.Z,{id:"generic.closeNotice",defaultMessage:"Close notice"})}),(0,u.jsx)(ve.Z,{style:{height:"30px"},type:"vertical"}),(0,u.jsx)(q.Z,{onClick:()=>r(a.id),className:"TokenExpiringModal__ActionButton",type:"primary",children:(0,u.jsx)(K.Z,{id:"generic.reconnect",defaultMessage:"Reconnect"})})]})]})]})};var Se=s(25108);const je=(0,y.Pi)((function(){const{carriersStore:e}=(0,i.o)(),[t,s]=(0,f.useState)(!0),r=(0,v.Z)(),a=[...e.selectedCarriersArray].sort(ye),o=a.filter((e=>{var t,s,r,a;return!!(null===(t=e.credentials)||void 0===t||null===(s=t.clientAuthentication)||void 0===s?void 0:s.refreshTokenExpiration)&&new Date(null===(r=e.credentials)||void 0===r||null===(a=r.clientAuthentication)||void 0===a?void 0:a.refreshTokenExpiration)<new Date})),n=a.filter((e=>{var t,s;return!!(null===(t=e.credentials)||void 0===t||null===(s=t.clientAuthentication)||void 0===s?void 0:s.refreshTokenExpiration)&&(0,de.Gw)(e)}));if(0===o.length&&0===n.length)return null;const l=n.length+o.length>1,d=()=>n.length>0?ue:pe,c=async t=>{localStorage.setItem(k._.upsIntegrationId,String(t));try{await e.upsOnboardingSignIn(k._.upsRefreshTokenFlow),s(!1)}catch(e){Se.log(e),B.T.error({message:r.formatMessage({id:"modal.integrations.carrier.ups.banner.signInError"})})}};return(0,u.jsxs)(se.default,{open:t,bodyStyle:{padding:"40px"},footer:null,closable:!0,centered:!0,destroyOnClose:!0,maskClosable:!1,width:600,className:"TokenExpiringModal",onCancel:()=>s(!1),children:[l?(0,u.jsx)(be,{carriersWithExpiredToken:o,carriersWithExpiringToken:n,handleRefreshToken:c,setIsVisible:s}):(0,u.jsx)(xe,{handleRefreshToken:c,typeOfToken:d(),setIsVisible:s,carrier:d()===pe?o[0]:n[0]}),(0,u.jsx)(fe,{})]})}));var we=s(71230),Me=s(15746),Ce=s(25142),Ae=s(50049);const Te=(0,Ae.vU)({whatsappCounterFinishedButton:{id:"whatsapp.counter.warning.modal.finished.button",defaultMessage:"Ok, got it"},whatsappCounterAlmostButton:{id:"whatsapp.counter.warning.modal.almost.button",defaultMessage:"Ok, got it"},supportText:{id:"account.warning.modal.supportText",defaultMessage:"If you have any questions write to {email}: our team will answer you."}}),Oe=e=>{const{type:t}=e,{rootStore:s}=(0,i.o)(),r=(0,v.Z)(),a=(0,P.s0)(),o=t===Ce.Fd.whatsappCounterFinished;return(0,u.jsxs)(se.default,{centered:!0,open:s.modalWhatsappCounterVisible,onCancel:()=>{(0,L.Ju)(),s.setModalWhatsappCounterVisible(!1)},footer:null,className:"warning-modal-wrapper",style:{minWidth:"650px",maxWidth:"90%"},children:[(0,u.jsx)(we.Z,{justify:"center",children:(0,u.jsx)(Me.Z,{children:(0,u.jsx)(E.Ee,{src:o?"https://static-files-cdn.isendu.com/notifications/alert2.svg":"https://static-files-cdn.isendu.com/notifications/info2.svg",width:120})})}),(0,u.jsx)(we.Z,{justify:"center",className:"row-margin-top-16",children:(0,u.jsx)(Me.Z,{className:"center-col",children:(0,u.jsx)(E.Dx,{level:5,children:o?(0,u.jsx)(K.Z,{id:"whatsapp.counter.warning.modal.finished.title",defaultMessage:"WhatsApp notifications limit reached"}):(0,u.jsx)(K.Z,{id:"whatsapp.counter.warning.modal.almost.title",defaultMessage:"WhatsApp notifications are almost finished."})})})}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)(E.xv,{type:"secondary",children:o?(0,u.jsx)(K.Z,{id:"whatsapp.counter.warning.modal.finished.description.new",defaultMessage:"L’invio di nuovi messaggi è sospeso fino al prossimo rinnovo.{br}{br}  Per avere più conversazioni da subito puoi espandere i tuoi WhatsApp e modellare il tuo piano futuro in base alle tue esigenze.",values:{br:(0,u.jsx)("br",{})}}):(0,u.jsx)(K.Z,{id:"whatsapp.counter.warning.modal.almost.description.new",values:{br:(0,u.jsx)("br",{})}})}),(0,u.jsxs)("div",{className:"mt-3",children:[(0,u.jsx)(q.Z,{onClick:()=>{(0,L.Ju)(),s.setModalWhatsappCounterVisible(!1)},children:(0,u.jsx)(K.Z,{id:"shipments.counter.warning.modal.close",defaultMessage:"Close"})}),(0,u.jsx)(ve.Z,{type:"vertical",style:{height:"100%"}}),(0,u.jsx)(q.Z,{type:"primary",onClick:()=>{a(I.H.settings.subscriptions),(0,L.Ju)(),s.setModalWhatsappCounterVisible(!1)},children:(0,u.jsx)(K.Z,{id:"whatsapp.counter.warning.modal.expand",defaultMessage:"Expand WhatsApp plan"})})]})]}),(0,u.jsx)("small",{className:"text-center mt-2",children:(0,u.jsx)(E.xv,{type:"secondary",children:r.formatMessage(Te.supportText,{email:(0,u.jsx)("a",{className:"mail-to",href:`mailto:${k._.supportEmail}`,children:k._.supportEmail})})})})]})};var Pe=s(79655),Ne=s(11700);const _e=(0,Ae.vU)({subscriptionPendingTitle:{id:"account.warning.modal.subscriptionPending.title",defaultMessage:"Your subscription is pending"},subscriptionPendingDescription:{id:"account.warning.modal.subscriptionPending.description",defaultMessage:"In order to start using isendu you must activate your subscription."},subscriptionPendingButton:{id:"account.warning.modal.subscriptionPending.button",defaultMessage:"Activate subscription"},billingPendingTitle:{id:"account.warning.modal.billingPending.title",defaultMessage:"Please check your payment details"},billingPendingDescription:{id:"account.warning.modal.billingPending.description",defaultMessage:"We are having some trouble with the payments of one of your invoices. Please check your payment details in the Billings section of your Settings."},billingPendingButton:{id:"account.warning.modal.billingPending.button",defaultMessage:"Check your billing info"},accountPausedTitle:{id:"account.warning.modal.accountPaused.title",defaultMessage:"Account paused"},accountPausedDescription:{id:"account.warning.modal.accountPaused.description",defaultMessage:"Your account has been paused due to a review by our credit control team. While on hold, you will not be able to create labels or proceed with shipping."},accountPausedButton:{id:"account.warning.modal.accountPaused.button",defaultMessage:"Contact support team"},supportText:{id:"account.warning.modal.supportText",defaultMessage:"If you have any questions write to {email}: our team will answer you."},notificationErrorTitle:{id:"account.warning.modal.notification.error.title",defaultMessage:"Error"},notificationErrorMessage:{id:"account.warning.modal.notification.error.message",defaultMessage:"Sorry, we can't process your request"},notificationSubscriptionErrorTitle:{id:"account.warning.modal.notification.subscription.error.title",defaultMessage:"Error"},notificationSubscriptionErrorMessage:{id:"account.warning.modal.notification.subscription.error.message",defaultMessage:"Sorry, we can't find a subscription to activate. Please contact our support team"}}),Ze=e=>{let{type:t}=e;const{rootStore:s}=(0,i.o)(),[r,a]=(0,f.useState)(!1),o=(0,v.Z)();let n,l,d="",c="",p="",h="";switch(t){case te.Subscriptions.billingPending:d=E.U9,c=o.formatMessage(_e.billingPendingTitle),p=o.formatMessage(_e.billingPendingDescription),l=()=>(0,u.jsx)(q.Z,{type:"primary",children:(0,u.jsx)(Pe.rU,{to:I.H.settings.billings,children:(0,u.jsx)(K.Z,{id:"account.warning.modal.link.settings",defaultMessage:"Go to Settings"})})});break;case k._.accountPaused:d=E.U9,c=o.formatMessage(_e.accountPausedTitle),p=o.formatMessage(_e.accountPausedDescription),h=o.formatMessage(_e.accountPausedButton),n=()=>{a(!0),window.location.href=k._.contactSupportLink}}return l||(l=()=>(0,u.jsx)(q.Z,{type:"primary",onClick:n,loading:r,children:h})),(0,u.jsx)(se.default,{centered:!0,open:s.modalWarningVisible&&!s.modalWarningAlreadySeen,onCancel:()=>{s.setModalWarningVisible(!1),s.setModalWarningAlreadySeen(!0)},footer:null,className:"warning-modal-wrapper","max-width":"570px",children:t&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(we.Z,{justify:"center",children:(0,u.jsx)(Me.Z,{children:(0,u.jsx)(E.Ee,{src:d,width:85})})}),(0,u.jsx)(we.Z,{justify:"center",className:"row-margin-top-16",children:(0,u.jsx)(Me.Z,{children:(0,u.jsx)(Ne.Z,{level:3,children:c})})}),(0,u.jsx)(we.Z,{justify:"center",className:"row-margin-top-8",children:(0,u.jsx)(Me.Z,{className:"center-col",children:(0,u.jsx)(E.xv,{type:"secondary",children:p})})}),l&&(0,u.jsx)(we.Z,{justify:"center",className:"row-margin-top-32",children:(0,u.jsx)(Me.Z,{children:l()})}),(0,u.jsx)(we.Z,{justify:"center",className:"row-margin-top-52",children:(0,u.jsx)(Me.Z,{className:"center-col",children:(0,u.jsx)(E.xv,{type:"secondary",className:"support-text",children:o.formatMessage(_e.supportText,{email:(0,u.jsx)("a",{className:"mail-to",href:`mailto:${k._.supportEmail}`,children:k._.supportEmail})})})})})]})})};const Ie=(0,Ae.vU)({shipmentsCounterFinishedButton:{id:"shipments.counter.warning.modal.finished.button",defaultMessage:"Manage plan"},shipmentsCounterAlmostButton:{id:"shipments.counter.warning.modal.almost.button",defaultMessage:"I got it"},supportText:{id:"account.warning.modal.supportText",defaultMessage:"If you have any questions write to {email}: our team will answer you."}}),De=e=>{let{type:t}=e;const{rootStore:s}=(0,i.o)(),[r,a]=(0,f.useState)(!1),o=(0,c.useFlag)(_.V.useNewPlans),n=(0,v.Z)();let l,d="",p="";switch(t){case Ce.G9.shipmentsCounterFinished:d=E.HU,p=n.formatMessage(Ie.shipmentsCounterFinishedButton),l=()=>{a(!0),(0,L.HS)(),s.setModalShipmentsCounterVisible(!1)};break;case Ce.G9.shipmentsCounterAlmost:d=E.U9,p=n.formatMessage(Ie.shipmentsCounterAlmostButton),l=()=>{a(!0),(0,L.HS)(),s.setModalShipmentsCounterVisible(!1)}}return(0,u.jsx)(se.default,{centered:!0,open:s.modalShipmentsCounterVisible,onCancel:()=>{(0,L.HS)(),s.setModalShipmentsCounterVisible(!1)},footer:null,className:"warning-modal-wrapper",style:{minWidth:"650px",maxWidth:"90%"},children:t&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(we.Z,{justify:"center",children:(0,u.jsx)(Me.Z,{children:(0,u.jsx)(E.Ee,{src:d,width:85})})}),(0,u.jsx)(we.Z,{justify:"center",className:"row-margin-top-32",children:(0,u.jsx)(Me.Z,{className:"center-col",children:(0,u.jsxs)(E.Dx,{level:3,children:[t===Ce.G9.shipmentsCounterFinished&&(0,u.jsx)(K.Z,{id:"shipments.counter.warning.modal.finished.title",defaultMessage:"You have run out of shipments"}),t===Ce.G9.shipmentsCounterAlmost&&(0,u.jsx)(K.Z,{id:"shipments.counter.warning.modal.almost.title",defaultMessage:"You're almost out of shipments"})]})})}),(0,u.jsx)(we.Z,{justify:"center",className:"row-margin-top-32",children:(0,u.jsx)(Me.Z,{className:"center-col",children:(0,u.jsxs)(E.xv,{type:"secondary",children:[t===Ce.G9.shipmentsCounterFinished&&(o?(0,u.jsx)(K.Z,{id:"shipments.counter.warning.modal.finished.description.new",defaultMessage:"The shipments included in the cost of your plan are sold out.{br}To restart your plan immediately or upgrade to one that suits your needs, go to the <link>Subscriptions section on the Settings</link> page and view your plan.",values:{br:(0,u.jsx)("br",{}),link:e=>(0,u.jsx)(Pe.rU,{to:I.H.settings.subscriptions,onClick:()=>{(0,L.HS)(),s.setModalShipmentsCounterVisible(!1)},children:e})}}):(0,u.jsx)(K.Z,{id:"shipments.counter.warning.modal.finished.description",defaultMessage:"The shipments included in the cost of your plan are sold out.{br}{br}The next ones will be chargeable at a cost of 0.12€ cent (VAT included) per shipment.{br}{br}To restart your plan immediately or upgrade to one that suits your needs, go to the <link>Billing section on the Settings</link> page and view your plan.",values:{br:(0,u.jsx)("br",{}),link:e=>(0,u.jsx)(Pe.rU,{to:I.H.settings.subscriptions,onClick:()=>{(0,L.HS)(),s.setModalShipmentsCounterVisible(!1)},children:e})}})),t===Ce.G9.shipmentsCounterAlmost&&(o?(0,u.jsx)(K.Z,{id:"shipments.counter.warning.modal.almost.description.new",defaultMessage:"You are about to reach your plan's maximum shipping limit.{br}{br}Once reached, we will have to charge you extra costs of 0,12€ cent (VAT included) for each shipment.{br}{br}You can restart your plan right away or upgrade to one that best suits your needs: go to the <link>Billing section on the Settings page</link> and view your plan.",values:{br:(0,u.jsx)("br",{}),link:e=>(0,u.jsx)(Pe.rU,{to:I.H.settings.subscriptions,onClick:()=>{(0,L.HS)(),s.setModalShipmentsCounterVisible(!1)},children:e})}}):(0,u.jsx)(K.Z,{id:"shipments.counter.warning.modal.almost.description",defaultMessage:"You are about to reach your plan's maximum shipping limit.{br}{br}Once reached, we will have to charge you extra costs of 0,12€ cent (VAT included) for each shipment.{br}{br}You can restart your plan right away or upgrade to one that best suits your needs: go to the <link>Billing section on the Settings page</link> and view your plan.",values:{br:(0,u.jsx)("br",{}),link:e=>(0,u.jsx)(Pe.rU,{to:I.H.settings.subscriptions,onClick:()=>{(0,L.HS)(),s.setModalShipmentsCounterVisible(!1)},children:e})}}))]})})}),(0,u.jsx)(we.Z,{justify:"center",className:"row-margin-top-32",children:(0,u.jsxs)(Me.Z,{children:[t===Ce.G9.shipmentsCounterFinished&&(0,u.jsxs)("div",{className:"center-col",children:[(0,u.jsx)(q.Z,{type:"primary",loading:r,children:(0,u.jsx)(Pe.rU,{to:I.H.settings.subscriptions,onClick:l,children:p})}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(0,u.jsx)(q.Z,{id:"editCarrierLink.button.edit",type:"link",onClick:l,children:(0,u.jsx)(K.Z,{id:"shipments.counter.warning.modal.finished.later.button",defaultMessage:"I'll do it later"})})]}),t===Ce.G9.shipmentsCounterAlmost&&(0,u.jsx)(q.Z,{type:"primary",onClick:l,loading:r,children:p})]})}),(0,u.jsx)(ve.Z,{}),(0,u.jsx)(we.Z,{justify:"center",children:(0,u.jsx)(Me.Z,{className:"center-col",children:(0,u.jsx)(E.xv,{type:"secondary",className:"support-text",children:n.formatMessage(Ie.supportText,{email:(0,u.jsx)("a",{className:"mail-to",href:`mailto:${k._.supportEmail}`,target:"_blank",rel:"noreferrer",children:k._.supportEmail})})})})})]})})};const Ee=(0,Ae.vU)({whatsappCounterFinishedButton:{id:"whatsapp.counter.warning.modal.finished.button",defaultMessage:"Ok, got it"},whatsappCounterAlmostButton:{id:"whatsapp.counter.warning.modal.almost.button",defaultMessage:"Ok, got it"},supportText:{id:"account.warning.modal.supportText",defaultMessage:"If you have any questions write to {email}: our team will answer you."}}),ke=e=>{let{type:t}=e;const{rootStore:s}=(0,i.o)(),[r,a]=(0,f.useState)(!1),o=(0,v.Z)();let n,l="",d="";switch(t){case Ce.Fd.whatsappCounterFinished:l=E.HU,d=o.formatMessage(Ee.whatsappCounterFinishedButton),n=()=>{a(!0),(0,L.Ju)(),s.setModalWhatsappCounterVisible(!1)};break;case Ce.Fd.whatsappCounterAlmost:l=E.U9,d=o.formatMessage(Ee.whatsappCounterFinishedButton),n=()=>{a(!0),(0,L.Ju)(),s.setModalWhatsappCounterVisible(!1)}}return(0,u.jsx)(se.default,{centered:!0,open:s.modalWhatsappCounterVisible,onCancel:()=>{(0,L.Ju)(),s.setModalWhatsappCounterVisible(!1)},footer:null,className:"warning-modal-wrapper","max-width":"600px",children:t&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(we.Z,{justify:"center",children:(0,u.jsx)(Me.Z,{children:(0,u.jsx)(E.Ee,{src:l,width:85})})}),(0,u.jsx)(we.Z,{justify:"center",className:"row-margin-top-16",children:(0,u.jsx)(Me.Z,{className:"center-col",children:(0,u.jsxs)(E.Dx,{level:3,children:[t===Ce.Fd.whatsappCounterFinished&&(0,u.jsx)(K.Z,{id:"whatsapp.counter.warning.modal.finished.title",defaultMessage:"WhatsApp notifications limit reached"}),t===Ce.Fd.whatsappCounterAlmost&&(0,u.jsx)(K.Z,{id:"whatsapp.counter.warning.modal.almost.title",defaultMessage:"WhatsApp notifications are almost finished."})]})})}),(0,u.jsx)(we.Z,{justify:"center",className:"row-margin-top-8",children:(0,u.jsx)(Me.Z,{className:"center-col",children:(0,u.jsxs)(E.xv,{type:"secondary",children:[t===Ce.Fd.whatsappCounterFinished&&(0,u.jsx)(K.Z,{id:"whatsapp.counter.warning.modal.finished.description",defaultMessage:'WhatsApp notifications have reached the limit of your plan.{br}{br}We\'ll continue to send shipping notifications at cost 0,20€ each. You can disable this feature anytime <link>from "Transactional Notifications" section in your account settings</link>.{br}{br}Otherwise, you can reset your plan or make an upgrade of it choosing a more suitable plan for your needs.',values:{br:(0,u.jsx)("br",{}),link:e=>(0,u.jsx)(E.rU,{onClick:()=>{(0,L.Ju)(),window.location.href=I.H.trackingNotifications.root},children:e})}}),t===Ce.Fd.whatsappCounterAlmost&&(0,u.jsx)(K.Z,{id:"whatsapp.counter.warning.modal.almost.description",defaultMessage:'WhatsApp notifications are very close to reach the limit of your plan.{br}{br}Once reached, we\'ll continue to send shipping notifications at cost 0,20€ each. You can disable this feature anytime <link>from "Transactional Notifications" section in your account settings</link>.{br}{br}Otherwise, you can reset your plan or make an upgrade of it choosing a more suitable plan for your needs.',values:{br:(0,u.jsx)("br",{}),link:e=>(0,u.jsx)(E.rU,{onClick:()=>{(0,L.Ju)(),window.location.href=I.H.trackingNotifications.root},children:e})}})]})})}),(0,u.jsx)(we.Z,{justify:"center",className:"row-margin-top-32",children:(0,u.jsx)(Me.Z,{children:(0,u.jsx)(q.Z,{type:"primary",onClick:n,loading:r,children:d})})}),(0,u.jsx)(we.Z,{justify:"center",className:"row-margin-top-52",children:(0,u.jsx)(Me.Z,{className:"center-col",children:(0,u.jsx)(E.xv,{type:"secondary",className:"support-text",children:o.formatMessage(Ee.supportText,{email:(0,u.jsx)("a",{className:"mail-to",href:`mailto:${k._.supportEmail}`,children:k._.supportEmail})})})})})]})})};const Le={oldUsers:{title:(0,u.jsx)(K.Z,{id:"termsAndConditions.modal.existingUser.title",defaultMessage:"Welcome back to Isendu"}),subtitle:(0,u.jsx)(K.Z,{id:"termsAndConditions.modal.existingUser.subtitle",defaultMessage:"A small thing before moving forward"}),descriptionTitle:(0,u.jsx)(K.Z,{id:"termsAndConditions.modal.existingUser.descriptionTitle",defaultMessage:"We have updated the general terms and conditions of the contract"}),descriptionSubtitle:(0,u.jsx)(K.Z,{id:"termsAndConditions.modal.existingUser.descriptionSubtitle",defaultMessage:"You can review the new general terms and conditions of the contract at <link>this link</link>",values:{link:e=>(0,u.jsx)(E.rU,{href:Re(),target:"_blank",rel:"noopener noreferrer",children:(0,u.jsx)("b",{children:e})})}})},newUsers:{title:(0,u.jsx)(K.Z,{id:"termsAndConditions.modal.newUser.title",defaultMessage:"Welcome to Isendu"}),subtitle:(0,u.jsx)(K.Z,{id:"termsAndConditions.modal.newUser.subtitle",defaultMessage:"One last thing before moving forward"}),descriptionTitle:(0,u.jsx)(K.Z,{id:"termsAndConditions.modal.newUser.descriptionTitle",defaultMessage:"General terms and conditions of the contract"}),descriptionSubtitle:(0,u.jsx)(K.Z,{id:"termsAndConditions.modal.newUser.descriptionSubtitle",defaultMessage:"You can review the general terms and conditions of the contract at <link>this link</link>",values:{link:e=>(0,u.jsx)(E.rU,{href:Re(),target:"_blank",rel:"noopener noreferrer",children:(0,u.jsx)("b",{children:e})})}})}};function Re(){return"it"===g.X.language?"https://isendu.it/termini-e-condizioni/":"https://isendu.com/terms-and-conditions/"}var Fe=s(25108);var Ue=s(25108);const Ge=`${k._.cdnAssetsUrl}/images/contract.svg`,Be=new Date(2023,4,25).getTime();const $e=(0,y.Pi)((function(){var e,t;const{companiesStore:s,usersStore:r}=(0,i.o)();if(function(e){var t;(0,f.useEffect)((()=>{var t;if(null!==(t=e.companyInfo)&&void 0!==t&&t.termsAccepted)return;const s=document.querySelector("body"),r=new MutationObserver((e=>{for(const s of e){var t;"attributes"===s.type?(null!==(t=s.target.className)&&void 0!==t&&t.includes("ant-modal-root")&&location.reload(),s.target.childNodes.forEach((e=>{var t;null!==(t=e.classList)&&void 0!==t&&t.contains("ant-modal-root")&&location.reload()}))):s.removedNodes.forEach((e=>{var t;null!==(t=e.className)&&void 0!==t&&t.includes("ant-modal-root")&&location.reload(),e.childNodes.forEach((e=>{var t;null!==(t=e.className)&&void 0!==t&&t.includes("ant-modal-root")&&location.reload()}))}))}}));return r.observe(s,{attributes:!0,childList:!0,subtree:!0}),()=>{r.disconnect(),Fe.log("disconnecting observer")}}),[null===(t=e.companyInfo)||void 0===t?void 0:t.termsAccepted])}(s),!r.userInfo)return null;const a=Be>((null===(e=r.userInfo)||void 0===e?void 0:e.created)||0)?"oldUsers":"newUsers";return(0,u.jsxs)(se.default,{footer:!1,closable:!1,width:700,open:!(null!==(t=s.companyInfo)&&void 0!==t&&t.termsAccepted),className:"TermsAndConditionsModal",destroyOnClose:!0,centered:!0,zIndex:1e4,children:[(0,u.jsx)("div",{className:"TermsAndConditionsModal__Title",children:Le[a].title}),(0,u.jsx)("div",{className:"TermsAndConditionsModal__SubTitle",children:Le[a].subtitle}),(0,u.jsx)("div",{className:"TermsAndConditionsModal__Image",children:(0,u.jsx)("img",{src:Ge,alt:"Terms and conditions signing"})}),(0,u.jsx)("div",{className:"TermsAndConditionsModal__DescriptionTitle",children:Le[a].descriptionTitle}),(0,u.jsx)("div",{className:"TermsAndConditionsModal__DescriptionSubtitle",children:Le[a].descriptionSubtitle}),(0,u.jsx)(q.Z,{onClick:async function(){try{await s.updateTermsAndConditions()}catch(e){B.T.error(e.message),Ue.error(e)}},type:"primary",className:"TermsAndConditionsModal__Button",children:(0,u.jsx)(K.Z,{id:"termsAndConditions.modal.buttonText",defaultMessage:"I have read and reviewed the general terms and conditions of the contract"})}),(0,u.jsx)("div",{className:"TermsAndConditionsModal__Footer",children:(0,u.jsx)(K.Z,{id:"termsAndConditions.modal.footerText",defaultMessage:"If you have any questions, please write to <link>support@isendu.com</link>: our support team will reply to you",values:{link:e=>(0,u.jsx)(E.rU,{href:"mailto:support@isendu.com",target:"_blank",rel:"noreferrer",children:e})}})})]})}));const{confirm:ze}=se.default;const We=(0,y.Pi)((function(){const e=(0,c.useFlag)(_.V.useNewTransactionalWhatsapp),[t,s]=(0,f.useState)(!e);return(0,u.jsxs)(se.default,{footer:!1,closable:!0,width:700,open:t,className:"WhatsappMigrationAlertModal",destroyOnClose:!0,centered:!0,zIndex:1e4,onCancel:()=>s(!1),children:[(0,u.jsx)("div",{className:"WhatsappMigrationAlertModal__Image",children:(0,u.jsx)("img",{src:"https://static-files-cdn.isendu.com/notifications/alert2.svg",alt:"alert"})}),(0,u.jsx)("div",{className:"WhatsappMigrationAlertModal__DescriptionTitle",children:(0,u.jsx)(K.Z,{id:"whatsAppMigrationAlert.title",defaultMessage:"Mandatory update to Whatsapp 2.0"})}),(0,u.jsxs)("div",{className:"WhatsappMigrationAlertModal__Box",children:[(0,u.jsx)("div",{className:"WhatsappMigrationAlertModal__Description",children:(0,u.jsx)(K.Z,{id:"whatsAppMigrationAlert.description",defaultMessage:"If you are using isendu's transactional Whatsapp, you must update to version 2.0 <b>by 15/07/2023</b>. <b>After this date, the old version of isendu's Whatsapp will no longer be usable</b> and thus will no longer function. {br} The update will have no additional cost and will only take a few minutes. {br} To carry out the update, however, you must meet two requirements: {br}• a Facebook business account (and the relevant access credentials) {br}• a number (either landline or mobile) that is not yet linked to Whatsapp {br} {br} Click on 'Book an appointment' and we will help you set up the new Transactional Whatsapp 2.0!",values:{b:e=>(0,u.jsx)("b",{children:e}),br:(0,u.jsx)("br",{})}})}),(0,u.jsxs)("div",{className:"flex align-center gap-1",children:[(0,u.jsx)(q.Z,{onClick:He,className:"WhatsappMigrationAlertModal__Button",children:(0,u.jsx)(K.Z,{id:"whatsAppMigrationAlert.notInterested",defaultMessage:"I'm not interested"})}),(0,u.jsx)(q.Z,{onClick:Ve,type:"primary",className:"WhatsappMigrationAlertModal__Button",children:(0,u.jsx)(K.Z,{id:"whatsAppMigrationAlert.bookAnAppointment",defaultMessage:"Book an appointment"})})]})]}),(0,u.jsx)("div",{className:"WhatsappMigrationAlertModal__Footer",children:(0,u.jsx)(K.Z,{id:"termsAndConditions.modal.footerText",defaultMessage:"If you have any questions, please write to <link>support@isendu.com</link>: our support team will reply to you",values:{link:e=>(0,u.jsx)(E.rU,{href:"mailto:support@isendu.com",target:"_blank",rel:"noreferrer",children:e})}})})]})}));function He(){const{update:e}=ze({title:C.G.instance.formatMessage({id:"defaultMessage.warnig",defaultMessage:"Attention"}),content:C.G.instance.formatMessage({id:"whatsAppMigrationAlert.confirmNotInterested",defaultMessage:"We understand that you are currently using the old version of isendu's WhatsApp. If you give up without booking an appointment, you will not be able to send messages until you have completed the setup of the new Whatsapp 2.0. All your customers will no longer receive any communication via WhatsApp. Are you sure you want to give up?"}),okText:C.G.instance.formatMessage({id:"whatsAppMigrationAlert.confirmNotInterested.okText",defaultMessage:"I'm sure"}),cancelText:C.G.instance.formatMessage({id:"generic.cancel",defaultMessage:"Cancel"}),centered:!0,width:800,okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1},zIndex:1e4,onOk:async()=>{e({okButtonProps:{loading:!0},cancelButtonProps:{disabled:!0}});try{await i.rootStore.transactionalWhatsappStore.forceNewIntegration(),location.reload()}catch(e){B.T.genericError()}finally{e({okButtonProps:{loading:!1},cancelButtonProps:{disabled:!1}})}}})}function Ve(){window.open(function(e){switch(e){default:return"https://support.isendu.com/meetings/isendu/whatsapp-update";case"es":return"https://meetings.hubspot.com/isendu/customer-success-meeting-spain";case"de":return"https://meetings.hubspot.com/imorelli"}}(i.rootStore.userStore.userInfo.language),"_blank")}const qe=()=>{var e,t;const{rootStore:s,trackingNotificationsStore:r}=(0,i.o)(),a=(0,c.useFlag)(_.V.useNewPlans);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)($e,{}),(0,u.jsx)(We,{}),(0,u.jsx)(je,{}),a?(0,u.jsx)(ie,{visible:s.modalWarningVisible&&s.accountWarningType===te.Subscriptions.subscriptionExpired}):(0,u.jsx)(le,{visible:s.modalWarningVisible&&s.accountWarningType===te.Subscriptions.subscriptionExpired}),s.modalWhatsappCounterVisible&&s.whatsappWarningType&&""!==s.whatsappWarningType&&(null==r||null===(e=r.allSettings)||void 0===e||null===(t=e.companySettings)||void 0===t?void 0:t.whatsappEnabled)&&!(0,L.ZW)()&&(a?(0,u.jsx)(Oe,{type:s.whatsappWarningType}):(0,u.jsx)(ke,{type:s.whatsappWarningType})),s.modalWarningVisible&&""!==s.accountWarningType&&s.accountWarningType!==te.Subscriptions.subscriptionExpired&&(0,u.jsx)(Ze,{type:s.accountWarningType}),s.modalShipmentsCounterVisible&&""!==s.shipmentsWarningType&&!(0,L.RD)()&&(0,u.jsx)(De,{type:s.shipmentsWarningType})]})};qe.displayName="StartupModals";const Ye=(0,y.Pi)(qe),Ke="https://static-files-cdn.isendu.com",Xe="backgrounds",Qe=`${Ke}/${Xe}/pattern1.svg`,Je=`${Ke}/${Xe}/pattern3.svg`,et=`${Ke}/${Xe}/pattern4.svg`,tt=`${Ke}/${Xe}/pattern5.svg`,st=`${Ke}/${Xe}/pattern6.svg`,rt=`${Ke}/${Xe}/pattern7.svg`;var at=s(57493),it=s(86871),ot=s(21481);const nt={shipments:`${k._.cdnAssetsUrl}/icons/sidebar/shipment.svg`,shipmentsHovered:`${k._.cdnAssetsUrl}/icons/sidebar/shipment_hover.svg`,conversations:`${k._.cdnAssetsUrl}/icons/sidebar/conversations.svg`,conversationsHovered:`${k._.cdnAssetsUrl}/icons/sidebar/conversations_hover.svg`,marketing:`${k._.cdnAssetsUrl}/icons/sidebar/marketing.svg`,marketingHovered:`${k._.cdnAssetsUrl}/icons/sidebar/marketing_hover.svg`,automations:`${k._.cdnAssetsUrl}/icons/sidebar/automations.svg`,automationsHovered:`${k._.cdnAssetsUrl}/icons/sidebar/automations_hover.svg`,contactlist:`${k._.cdnAssetsUrl}/icons/sidebar/customer_list.svg`,contactlistHovered:`${k._.cdnAssetsUrl}/icons/sidebar/customer_list_hover.svg`,integrations:`${k._.cdnAssetsUrl}/icons/sidebar/integrations.svg`,integrationsHovered:`${k._.cdnAssetsUrl}/icons/sidebar/integrations_hover.svg`,settings:`${k._.cdnAssetsUrl}/icons/sidebar/settings.svg`,settingsHovered:`${k._.cdnAssetsUrl}/icons/sidebar/settings_hover.svg`,analytics:`${k._.cdnAssetsUrl}/icons/sidebar/analytics.svg`,analyticsHovered:`${k._.cdnAssetsUrl}/icons/sidebar/analytics_hover.svg`},lt=[{id:"shipments",path:"/shipments",icon:nt.shipments,iconActive:nt.shipmentsHovered,label:{id:"sidebar.menu.shipments",defaultMessage:"Shipments"},subElements:[{id:"orders",path:"/shipments/orders",label:{id:"sidebar.menu.orders",defaultMessage:"Orders"}},{id:"pickups",path:"/shipments/pickups",label:{id:"sidebar.menu.pickups",defaultMessage:"Pickups"}},{id:"returns",path:"/shipments/returns",label:{id:"sidebar.menu.returns",defaultMessage:"Returns"}}]},{id:"conversations",path:"/conversations",icon:nt.conversations,iconActive:nt.conversationsHovered,label:{id:"sidebar.menu.conversations",defaultMessage:"Conversations"}},{id:"automation",path:"/automation",icon:nt.automations,iconActive:nt.automationsHovered,label:{id:"sidebar.menu.automations",defaultMessage:"Automations"},subElements:[{id:"automation-orders",path:"/automation/orders",label:{id:"sidebar.menu.automation-orders",defaultMessage:"Orders"}},{id:"email",path:"/marketing/email",label:{id:"sidebar.menu.transactional-email",defaultMessage:"Transactional email"}},{id:"whatsapp",path:"/marketing/whatsapp",label:{id:"sidebar.menu.whatsapp",defaultMessage:"Whatsapp"}},{id:"transactional-whatsapp",path:"/automation/transactional-whatsapp",label:{id:"sidebar.menu.transactional-whatsapp",defaultMessage:"Transactional WhatsApp"}}]},{id:"contactlist",path:"/contactlist",icon:nt.contactlist,iconActive:nt.contactlistHovered,label:{id:"sidebar.menu.contactlist",defaultMessage:"Contact List"}},{id:"integrations",path:"/integrations",icon:nt.integrations,iconActive:nt.integrationsHovered,label:{id:"sidebar.menu.integrations",defaultMessage:"Integrations"},subElements:[{id:"marketplaces",path:"/integrations/marketplaces",label:{id:"sidebar.menu.marketplaces",defaultMessage:"Marketplaces"}},{id:"carriers",path:"/integrations/carriers",label:{id:"sidebar.menu.carriers",defaultMessage:"Carriers"}},{id:"public-api",path:"/integrations/public-api",label:{id:"sidebar.menu.public-api",defaultMessage:"API"}},{id:"apps",path:"/integrations/apps",label:{id:"sidebar.menu.apps",defaultMessage:"Apps"}}]},{id:"settings",path:"/settings",icon:nt.settings,iconActive:nt.settingsHovered,label:{id:"sidebar.menu.settings",defaultMessage:"Settings"},subElements:[{id:"account",path:"/settings/account",label:{id:"sidebar.menu.account",defaultMessage:"Account"}},{id:"company",path:"/settings/company",label:{id:"sidebar.menu.company",defaultMessage:"Company"}},{id:"whatsappConfiguration",path:"/settings/whatsapp",label:{id:"sidebar.menu.whatsappConfiguration",defaultMessage:"WhatsApp configuration"}},{id:"preferences",path:"/settings/preferences",label:{id:"sidebar.menu.preferences",defaultMessage:"Preferences"}},{id:"zebra",path:"/settings/zebra",label:{id:"sidebar.menu.zebra",defaultMessage:"Zebra"}},{id:"addresses",path:"/settings/addresses",label:{id:"sidebar.menu.addresses",defaultMessage:"Addresses"}},{id:"subscriptions",path:"/settings/subscriptions",label:{id:"sidebar.menu.subscriptions",defaultMessage:"Subscriptions"}},{id:"billings",path:"/settings/billings",label:{id:"sidebar.menu.billings",defaultMessage:"Billings"}}]}];function dt(){const[e,t]=(0,f.useState)(at.S.isSidebarOpen),s=(0,ot.N)(e,100),r=(0,c.useFlag)(_.V.useNewTransactionalWhatsapp),a=(0,c.useFlag)(_.V.integrationsAppsVisible),i=(0,f.useMemo)((()=>({"transactional-whatsapp":!r,whatsapp:r,apps:!a,whatsappConfiguration:!r})),[r,a]);(0,f.useEffect)((()=>{at.S.isSidebarLocked||(s?at.S.open():at.S.close())}),[s]);return{sidebarElements:(0,f.useMemo)((()=>lt.reduce(((e,t)=>{var s;if(i[t.id])return e;const r={...t,subElements:(null===(s=t.subElements)||void 0===s?void 0:s.filter((e=>!i[e.id])))||void 0};return e.push(r),e}),[])),[i]),setSidebarOpen:t}}var ct=s(57254),pt=s(79166);const ut=(0,y.Pi)((()=>{const{conversationsStore:e}=(0,i.o)();return e.totalUnseenMessagesCount?(0,u.jsx)(pt.Z,{count:e.totalUnseenMessagesCount}):null}));const ht=function(e){const{element:t,isHovered:s}=e;return(0,u.jsx)("img",{className:"Sidebar__Icon",src:s?t.iconActive:t.icon,alt:t.label.defaultMessage})};const mt=(0,y.Pi)((e=>{const{element:t}=e,s=(0,f.useRef)(null),r=(0,P.s0)(),a=(0,P.TH)().pathname===t.path;return(0,u.jsx)("div",{className:V()("Sidebar__SubElement",{"Sidebar__SubElement--active":a}),onClick:()=>r(t.path),ref:s,children:(0,u.jsx)(K.Z,{id:t.label.id,defaultMessage:t.label.defaultMessage})})}));const gt=(0,y.Pi)((e=>{var t;const{element:s}=e,[r,a]=(0,f.useState)(!1),i=(0,c.useFlag)(_.V.useNewTransactionalWhatsapp),o=(0,P.s0)(),n=(0,P.TH)(),[l,d]=(0,f.useState)(!1),p=n.pathname.includes(s.path),h=null===(t=s.subElements)||void 0===t?void 0:t.length,m=at.S.isSidebarOpen&&l,g="conversations"===s.id;return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:V()("Sidebar__Element",{"Sidebar__Element--active":p&&!at.S.isSidebarOpen,"Sidebar__Element--active-with-submenu":p&&at.S.isSidebarOpen&&h,"Sidebar__Element--active-open":p&&at.S.isSidebarOpen&&!h,"Sidebar__Element--open":h&&l}),onClick:()=>{if(h)return d(!l);o(s.path)},onMouseOver:()=>a(!0),onMouseLeave:()=>a(!1),children:[(0,u.jsx)(ht,{element:s,isHovered:p||r}),(0,u.jsxs)("div",{className:V()("Sidebar__Link",{"Sidebar__Link--hidden":!at.S.isSidebarOpen}),children:[(0,u.jsx)("div",{className:"Sidebar__Link__Title",children:(0,u.jsx)(K.Z,{id:s.label.id,defaultMessage:s.label.defaultMessage})}),h&&(0,u.jsx)("button",{className:V()("Sidebar__ChevronButton",{"Sidebar__ChevronButton--reversed":m}),children:(0,u.jsx)(ct.Z,{})})]}),g&&i&&(0,u.jsx)("div",{className:V()("Sidebar__UnseenMessageCounter",{"Sidebar__UnseenMessageCounter--visible":at.S.isSidebarOpen}),children:(0,u.jsx)(ut,{})})]}),h&&(0,u.jsx)("div",{className:"Sidebar__SubMenu",style:{height:m?36*s.subElements.length:0},children:s.subElements.map((e=>(0,u.jsx)(mt,{element:e},e.id)))})]})}));const yt=(0,f.memo)((()=>{const{sidebarElements:e}=dt();return(0,u.jsx)("div",{className:"Sidebar__Elements",children:e.map((e=>(0,u.jsx)(gt,{element:e},e.id)))})}));var ft=s(54458);function bt(e){switch(e){case"monthly":return(0,u.jsx)(K.Z,{id:"sidebar.subscriptionCounter.monthly",defaultMessage:"Monthly"});case"yearly":return(0,u.jsx)(K.Z,{id:"sidebar.subscriptionCounter.annual",defaultMessage:"Annual"});default:return""}}const vt=(0,y.Pi)((()=>{const{subscriptionsStore:e}=(0,i.o)(),t=e.activeSubscription,s=(0,P.s0)();if(!t)return null;const{planName:r,hasUnlimitedShipments:a,availableConversations:o,sentShipments:n,availableShipments:l,recurringType:d}=t;let c=t.sentConversations;c>o&&(c=o);const p=a?5:n/l*100,h=c/o*100;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:V()("SubscriptionsCounters",{"SubscriptionsCounters--hidden":!at.S.isSidebarOpen}),children:(0,u.jsxs)("div",{className:V()("SubscriptionsCounters__Counters",{"SubscriptionsCounters__Counters--hidden":!at.S.isSidebarOpen}),children:[(0,u.jsxs)(E.xv,{type:"secondary",strong:!0,className:"mb-1",children:[(0,u.jsx)(K.Z,{id:"sidebar.subscriptionCounter.plans",defaultMessage:"Plans"})," ",r," ",d&&bt(d)]}),(0,u.jsxs)("div",{className:"flex align-center justify-between",children:[(0,u.jsx)("small",{children:(0,u.jsx)(E.xv,{type:"secondary",children:(0,u.jsx)(K.Z,{id:"sidebar.subscriptionCounter.shipments",defaultMessage:"Shipments"})})}),(0,u.jsx)("small",{children:(0,u.jsxs)(E.xv,{type:"secondary",children:[(0,u.jsx)(Ae.BK,{value:n}),"/",a?"∞":(0,u.jsx)(Ae.BK,{value:l})]})})]}),(0,u.jsx)(ft.Z,{percent:p,showInfo:!1,type:"line",strokeColor:xt(p),trailColor:" #d8d7d8"}),(0,u.jsxs)("div",{className:"flex align-center justify-between",children:[(0,u.jsx)("small",{children:(0,u.jsx)(E.xv,{type:"secondary",children:(0,u.jsx)(K.Z,{id:"sidebar.subscriptionCounter.conversations",defaultMessage:"Conversations"})})}),(0,u.jsx)("small",{children:(0,u.jsxs)(E.xv,{type:"secondary",children:[(0,u.jsx)(Ae.BK,{value:c||0}),"/",(0,u.jsx)(Ae.BK,{value:o})]})})]}),(0,u.jsx)(ft.Z,{percent:h,showInfo:!1,type:"line",strokeColor:xt(h),trailColor:" #d8d7d8"})]})}),(0,u.jsxs)("button",{className:V()("SubscriptionsCounters__UpgradeButton",{"SubscriptionsCounters__UpgradeButton--collapsed":!at.S.isSidebarOpen}),onClick:()=>s(I.H.settings.subscriptions),children:[(0,u.jsx)("img",{src:"https://static-files-cdn.isendu.com/icons/upgrade.svg"}),(0,u.jsx)("span",{children:(0,u.jsx)(K.Z,{id:"sidebar.subscriptionCounter.upgrade",defaultMessage:"Upgrade"})})]})]})}));function xt(e){return e>=100?"#F46C5B":e>90?"#efb041":"#00baad"}const St=new RegExp(`^(?<plan>${["Lite","Pro","Max","Beta Tester","Free Trial","Grind","Growth","Gold"].join("|")})(\\s(?<type>${["annuale","mensile","Monthly","Yearly","monthly","yearly"].join("|")}))?$`);function jt(e){switch(e){case"mensile":case"monthly":return(0,u.jsx)(K.Z,{id:"sidebar.subscriptionCounter.monthly",defaultMessage:"Monthly"});case"annuale":case"yearly":return(0,u.jsx)(K.Z,{id:"sidebar.subscriptionCounter.annual",defaultMessage:"Annual"});default:return""}}const wt=(0,y.Pi)((()=>{const{maxShipments:e,hasUnlimitedShipments:t,planName:s,planDuration:r,conversationsPlan:a,shipmentsCounter:o,maxConversations:n}=function(){var e;const{paymentSubscriptionsStore:t}=(0,i.o)(),s=(0,f.useMemo)((()=>{const e=t.paymentSubscriptionsArray.filter((e=>{const t=e.plan;return"active"===e.status&&("SaaS-Recurring-Subscriptions"===t.item_family_id||"Free-Trial"===t.item_family_id||"Freemium"===t.item_family_id||"Beta-Tester"===t.item_family_id)}));return e.sort(((e,t)=>e.currentPeriodEnd-t.currentPeriodEnd)),e[0]}),[t.paymentSubscriptionsArray]),r=(0,f.useMemo)((()=>{var e;return s&&(null===(e=s.plan.metadata)||void 0===e?void 0:e.amount)||0}),[s]),a=(0,f.useMemo)((()=>{if(!s)return{};const e=St.exec(s.name);if(!e)return{};const{plan:t,type:r}=e.groups;return{plan:t,duration:r}}),[s]);return{maxShipments:r,maxConversations:(0,f.useMemo)((()=>{var e;if(null===(e=t.filteredAddons)||void 0===e||!e.length)return 0;let s=!1;const r=t.filteredAddons[0].itemPriceId.split(k._.splitAddons);return Array.isArray(r)&&r.length>=4&&(s=r[1]===te.Subscriptions.subscriptionWhatsAppGroup2),t.filteredAddons[0].maxPlanCount*(s?2:1)}),[t.filteredAddons]),shipmentsCounter:t.shipmentCounter,hasUnlimitedShipments:r<=0,planName:a.plan,planDuration:null===(e=a.duration)||void 0===e?void 0:e.toLowerCase(),conversationsPlan:t.filteredAddons[0]}}(),l=(0,P.s0)(),d=100*o/e,c=a?100*a.currentCount/n:0;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:V()("SubscriptionsCounters",{"SubscriptionsCounters--hidden":!at.S.isSidebarOpen}),children:(0,u.jsxs)("div",{className:V()("SubscriptionsCounters__Counters",{"SubscriptionsCounters__Counters--hidden":!at.S.isSidebarOpen}),children:[(0,u.jsxs)(E.xv,{type:"secondary",strong:!0,className:"mb-1",children:[(0,u.jsx)(K.Z,{id:"sidebar.subscriptionCounter.plans",defaultMessage:"Plans"})," ",s," ",r&&jt(r)]}),(0,u.jsxs)("div",{className:"flex align-center justify-between",children:[(0,u.jsx)("small",{children:(0,u.jsx)(E.xv,{type:"secondary",children:(0,u.jsx)(K.Z,{id:"sidebar.subscriptionCounter.shipments",defaultMessage:"Shipments"})})}),(0,u.jsx)("small",{children:(0,u.jsxs)(E.xv,{type:"secondary",children:[(0,u.jsx)(Ae.BK,{value:o}),"/",t?"∞":(0,u.jsx)(Ae.BK,{value:e})]})})]}),(0,u.jsx)(ft.Z,{percent:t?5:d,showInfo:!1,type:"line",strokeColor:Mt(d),trailColor:" #d8d7d8"}),(0,u.jsxs)("div",{className:"flex align-center justify-between",children:[(0,u.jsx)("small",{children:(0,u.jsx)(E.xv,{type:"secondary",children:(0,u.jsx)(K.Z,{id:"sidebar.subscriptionCounter.conversations",defaultMessage:"Conversations"})})}),(0,u.jsx)("small",{children:(0,u.jsxs)(E.xv,{type:"secondary",children:[(0,u.jsx)(Ae.BK,{value:(null==a?void 0:a.currentCount)||0}),"/",(0,u.jsx)(Ae.BK,{value:n})]})})]}),(0,u.jsx)(ft.Z,{percent:c,showInfo:!1,type:"line",strokeColor:Mt(c),trailColor:" #d8d7d8"})]})}),(0,u.jsxs)("button",{className:V()("SubscriptionsCounters__UpgradeButton",{"SubscriptionsCounters__UpgradeButton--collapsed":!at.S.isSidebarOpen}),onClick:()=>l(I.H.settings.subscriptions),children:[(0,u.jsx)("img",{src:"https://static-files-cdn.isendu.com/icons/upgrade.svg"}),(0,u.jsx)("span",{children:(0,u.jsx)(K.Z,{id:"sidebar.subscriptionCounter.upgrade",defaultMessage:"Upgrade"})})]})]})}));function Mt(e){return e>=100?"#F46C5B":e>90?"#efb041":"#00baad"}const Ct=(0,y.Pi)((()=>{const{setSidebarOpen:e}=dt(),t=(0,c.useFlag)(_.V.useNewPlans);return(0,u.jsxs)("aside",{className:V()("Sidebar",{"Sidebar--closed":!at.S.isSidebarOpen}),onMouseEnter:()=>e(!0),onMouseLeave:()=>e(!1),children:[(0,u.jsx)(yt,{}),t?(0,u.jsx)(vt,{}):(0,u.jsx)(wt,{})]})}));const{Header:At}=W.default,Tt={boxShadow:"0 0px 6px 0 rgba(0, 0, 0, 0.12)"},Ot=(e,t)=>e?{margin:0}:e||t?void 0:{...Tt},Pt=(0,n.Pi)((e=>{const{isErrorPage:t}=e,{customBackgroundStyles:s,theme:r}=function(){var e;const{usersStore:t}=(0,i.o)(),s=(0,P.bS)(I.H.shipments.rootAbsolute+"/*"),r=(0,P.bS)(I.H.conversations.root+"/*"),a=(0,P.bS)(I.H.marketing.root+"/*"),o=(0,P.bS)(I.H.automation.root+"/*"),n=(0,P.bS)(I.H.contactlist.root+"/*"),l=(0,P.bS)(I.H.integrations.root+"/*"),d=(0,f.useCallback)((()=>{if(!(s||r||a||o||n||l))return;let e="";return s?e=tt:r?e=rt:a?e=Qe:o?e=Je:n?e=et:l&&(e=st),{backgroundImage:`url(${e})`,backgroundSize:"100vw",backgroundPosition:"top",backgroundAttachment:"fixed",paddingBottom:r?void 0:"60px"}}),[o,n,r,l,a,s]);return{customBackgroundStyles:(0,f.useMemo)((()=>{var e;switch((null===(e=t.userInfo)||void 0===e?void 0:e.theme)||"isendu"){case"white":return{background:"#fff",paddingBottom:r?void 0:"60px"};case"yellow":return{background:"#ffcc001a",paddingBottom:r?void 0:"60px"};case"blue":return{background:"#72bbff1a",paddingBottom:r?void 0:"60px"};case"red":return{background:"#f46d5b26",paddingBottom:r?void 0:"60px"};default:return d()}}),[t.userInfo,d,r]),theme:null===(e=t.userInfo)||void 0===e?void 0:e.theme}}(),a=(0,P.bS)(I.H.settings.rootAbsolute+"/*"),o=(0,P.bS)(I.H.shipments.rootAbsolute+"/*"),n=(0,P.bS)(I.H.contactlist.rootAbsolute+"/*"),l="white"===r;return(0,u.jsxs)(W.default,{className:"DefaultLayout",children:[(0,u.jsx)(At,{className:"DefaultLayout__Header",children:(0,u.jsx)(it.bd,{})}),(0,u.jsxs)("div",{className:"DefaultLayout__Body",style:{marginLeft:at.S.isSidebarOpen&&at.S.isSidebarLocked?"250px":"65px"},children:[(0,u.jsx)(Ct,{}),(0,u.jsx)("main",{className:V()("DefaultLayout__ContentWrapper",{settings_bg_grey:a,ErrorPage:t}),style:a?{}:s,children:(0,u.jsx)("div",{className:V()("DefaultLayout__Content",{settings_bg_grey:a,Content_MaxWidth:o||n,ErrorPage:t}),style:Ot(l,!!a),children:t?(0,u.jsx)(ee,{}):(0,u.jsx)(P.j3,{})})})]}),(0,u.jsx)(Ye,{})]})}));var Nt=s(49409),_t=s(32787);const Zt=(0,Ae.vU)({createPassword:{id:"selfonboarding.createPassword.createPassword",defaultMessage:"Set Password"},invalidPassword:{id:"selfonboarding.createPassword.password.error",defaultMessage:"Password not valid"},confirmPasswordPlaceholder:{id:"selfonboarding.createPassword.password.confirmPasswordPlaceholder",defaultMessage:"Confirm your password"},confirmPassword:{id:"selfonboarding.createPassword.password.confirmPassword",defaultMessage:"Please confirm your password!"},confirmPasswordMismatch:{id:"selfonboarding.createPassword.password.mismatch",defaultMessage:"Passwords are not the same!"}});const It=e=>{let{isLoading:t}=e;const s=(0,v.Z)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"CreatePassword__TitleContainer",children:[(0,u.jsx)(E.Ee,{src:E.dB,width:128,height:128}),(0,u.jsx)(E.xv,{className:"CreatePassword__Title",children:(0,u.jsx)(K.Z,{id:"selfonboarding.createPassword.title",defaultMessage:"Join isendu"})}),(0,u.jsx)(E.xv,{className:"CreatePassword__Subtitle",children:(0,u.jsx)(K.Z,{id:"selfonboarding.createPassword.subtitle",defaultMessage:"Create your account's password"})})]}),(0,u.jsx)(Nt.Z.Item,{name:"password",label:(0,u.jsx)(K.Z,{id:"selfonboarding.createPassword.password",defaultMessage:"Password"}),rules:[{required:!0,message:s.formatMessage(Zt.invalidPassword),type:"string",min:8,pattern:new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})")}],help:(0,u.jsx)(K.Z,{id:"selfonboarding.createPassword.rules",defaultMessage:"Password must be at least 8 characters and must contain at least 1 uppercase letter, 1 lowercase letter and 1 digit"}),hasFeedback:!0,children:(0,u.jsx)(_t.default.Password,{disabled:t,placeholder:s.formatMessage(Zt.createPassword)})}),(0,u.jsx)(Nt.Z.Item,{label:(0,u.jsx)(K.Z,{id:"selfonboarding.createPassword.password.confirmPasswordPlaceholder",defaultMessage:"Confirm your password"}),dependencies:["password"],name:"confirmPassword",rules:[{required:!0,message:s.formatMessage(Zt.confirmPassword)},e=>{let{getFieldValue:t}=e;return{validator:(e,r)=>r&&t("password")!==r?Promise.reject(s.formatMessage(Zt.confirmPasswordMismatch)):Promise.resolve()}}],hasFeedback:!0,children:(0,u.jsx)(_t.default.Password,{disabled:t,placeholder:s.formatMessage(Zt.confirmPasswordPlaceholder)})}),(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,u.jsx)(q.Z,{type:"primary",block:!0,htmlType:"submit",className:"CreatePassword__SubmitButton",loading:t,children:(0,u.jsx)(K.Z,{id:"selfonboarding.createPassword.confirm",defaultMessage:"Confirm and join isendu"})})})]})};const Dt=(0,f.memo)((()=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(E.Dx,{className:"CreatePassword__TokenExpired",children:(0,u.jsx)(K.Z,{id:"changePassword.tokenExpired.title",defaultMessage:"Token expired"})}),(0,u.jsx)(Nt.Z.Item,{children:(0,u.jsx)(we.Z,{justify:"center",children:(0,u.jsx)(Me.Z,{className:"center-col",span:24,children:(0,u.jsx)(E.Ee,{src:E.HU,width:100})})})}),(0,u.jsxs)(Nt.Z.Item,{children:[(0,u.jsx)(we.Z,{justify:"center",children:(0,u.jsx)(Me.Z,{className:"center-col",span:24,children:(0,u.jsx)(E.Dx,{level:3,children:(0,u.jsx)(K.Z,{id:"changePassword.label.tokenError.title",defaultMessage:"Ops, it seems that your token is invalid"})})})}),(0,u.jsx)(we.Z,{justify:"center",children:(0,u.jsx)(Me.Z,{className:"center-col",span:24,children:(0,u.jsx)(E.xv,{type:"secondary",children:(0,u.jsx)(K.Z,{id:"changePassword.label.tokenError.description",defaultMessage:"The provided token is expired or not valid, please try again"})})})})]}),(0,u.jsx)(we.Z,{justify:"center",className:"outside-row",children:(0,u.jsxs)(Me.Z,{className:"center-col",span:24,children:[(0,u.jsx)(K.Z,{id:"changePassword.support.label",defaultMessage:"Really struggling? Contact us at "}),(0,u.jsx)("a",{className:"mail-to",href:`mailto:${k._.supportEmail}`,children:k._.supportEmail})]})})]})));const Et=(0,y.Pi)((()=>{const{token:e,isLoading:t,handleSubmit:s}=function(){const[e,t]=(0,f.useState)(null),s=(0,v.Z)(),r=(0,P.TH)(),a=(0,P.s0)(),{selfOnboardingStore:o}=(0,i.o)();(0,f.useEffect)((()=>{const e=new URLSearchParams(r.search).get("token");e&&o.setSignupToken(e),localStorage.setItem("selfOnboardingToken",e||""),t(e)}),[r,o]);const n=(0,f.useCallback)((e=>{let{password:t}=e;const i=new URLSearchParams(r.search).get("token");i&&o.setSignupToken(i),o.createPassword(t).then((e=>{e?a(`/${I.H.onboading.setup}`):B.T.error({message:s.formatMessage({id:"account.warning.alert.notification.error.title",defaultMessage:"Error"})})}))}),[a,o,r.search,s]);return{token:e,handleSubmit:n,intl:s,isLoading:o.isLoading}}();return(0,u.jsx)(F.j,{type:"login",className:"CreatePassword",children:(0,u.jsx)(Nt.Z,{className:"CreatePassword__Form",layout:"vertical",size:"large",onFinish:s,children:e?(0,u.jsx)(It,{isLoading:t}):(0,u.jsx)(Dt,{})})})}));var kt=s(75899);const Lt={0:"https://static-files-cdn.isendu.com/images/onboarding-step-1.webp",1:"https://static-files-cdn.isendu.com/images/onboarding-step-2.webp",2:"https://static-files-cdn.isendu.com/images/onboarding-step-3.webp"},Rt="https://static-files-cdn.isendu.com/images/onboarding-isendu-logo.webp",Ft={strong:e=>(0,u.jsx)("b",{children:e})};var Ut=s(9676),Gt=s(48170),Bt=s(74435),$t=s(35431),zt=s(97516);const Wt=(0,Ae.vU)({invalid_vat:{id:"selfonboarding.error.invalidVat",defaultMessage:"Invalid VAT"},invalid_country_code:{id:"selfonboarding.error.invalidCountryCode",defaultMessage:"Invalid VAT Country Code"},invalid_phone:{id:"selfonboarding.error.invalidPhone",defaultMessage:"Invalid Phone"},vat_already_used:{id:"selfonboarding.error.vatAlreadyUsed",defaultMessage:"VAT already used"},generic_error:{id:"selfonboarding.error.genericError",defaultMessage:"Error while completing the request, please try again later"},selectAnAnswer:{id:"selfonboarding.placeholder.selectAnAnswer",defaultMessage:"Select an answer"},companyNamePlaceholder:{id:"selfonboarding.step2.companyNamePlaceholder",defaultMessage:"Enter the name"},vatNumberPlaceholder:{id:"selfonboarding.step2.vatNumberPlaceholder",defaultMessage:"Enter the VAT number"},websitePlaceholder:{id:"selfonboarding.step2.websitePlaceholder",defaultMessage:"Enter your website address"},contactEmailPlaceholder:{id:"selfonboarding.step2.contactEmailPlaceholder",defaultMessage:"Enter your company contact email"},mobilePhonePlaceholder:{id:"selfonboarding.step2.mobilePhonePlaceholder",defaultMessage:"Enter your phone number"},enterAnyData:{id:"selfonboarding.placeholder.enterAnyData",defaultMessage:"Enter any data"},enterZipCode:{id:"selfonboarding.placeholder.enterZipCode",defaultMessage:"Enter zip code"},enterCity:{id:"selfonboarding.placeholder.enterCity",defaultMessage:"Enter city"},insertAbbreviation:{id:"selfonboarding.placeholder.insertAbbreviation",defaultMessage:"Insert abbreviation"},insertYourCountry:{id:"selfonboarding.placeholder.insertYourCountry",defaultMessage:"Insert your country"},joinAndTryIsendu:{id:"selfonboarding.placeholder.joinAndTryIsendu",defaultMessage:"Join and try isendu"}});var Ht=s(25108);const Vt=(0,y.Pi)((e=>{const{onSubmit:t,onBack:s,isLoading:r,isMobile:a}=e,o=(0,v.Z)(),{selfOnboardingStore:n}=(0,i.o)(),l=(0,$t.y)(n.companyAddress),[d,c]=(0,f.useState)(!1);return(0,u.jsxs)("div",{className:"SelfOnboarding__Content",children:[(0,u.jsx)(E.Dx,{level:1,children:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.title",defaultMessage:"And finally: where will you ship from?"})}),(0,u.jsx)("div",{className:"SelfOnboarding__Titles",children:(0,u.jsx)(E.xv,{children:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.subtitle",defaultMessage:"For isendu, knowing the starting point for your shipments will make managing your orders even more efficient, and mean zero errors in sharing information with carriers.",values:Ft})})}),(0,u.jsx)(Nt.Z,{form:l,onFinish:t,layout:"vertical",labelCol:{span:24},wrapperCol:{span:24},children:(0,u.jsxs)("div",{className:"SelfOnboarding__Form step-3",children:[(0,u.jsxs)(we.Z,{gutter:[30,0],children:[(0,u.jsxs)(Me.Z,{sm:11,xs:24,children:[(0,u.jsx)(E.Dx,{level:5,children:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.shippingAddress",defaultMessage:"Shipping address"})}),(0,u.jsx)(Nt.Z.Item,{name:["shippingAddress","street"],rules:[Bt.l],wrapperCol:{span:24},label:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.streetAndHouseNumber",defaultMessage:"Street and house number"}),children:(0,u.jsx)(Gt.e,{onSelect:e=>{try{const t=JSON.parse(e);t&&l.setFieldsValue({shippingAddress:{...t}})}catch(e){Ht.error(e)}},disabled:r})}),(0,u.jsx)(Nt.Z.Item,{name:["shippingAddress","street2"],wrapperCol:{span:24},label:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.otherData",defaultMessage:"Floor, building, etc"}),children:(0,u.jsx)(_t.default,{placeholder:o.formatMessage(Wt.enterAnyData),disabled:r})}),(0,u.jsxs)(we.Z,{gutter:[8,0],children:[(0,u.jsx)(Me.Z,{sm:8,xs:24,children:(0,u.jsx)(Nt.Z.Item,{name:["shippingAddress","zipCode"],rules:[Bt.l],label:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.postCode",defaultMessage:"Postcode"}),children:(0,u.jsx)(_t.default,{placeholder:o.formatMessage(Wt.enterZipCode),disabled:r})})}),(0,u.jsx)(Me.Z,{sm:8,xs:24,children:(0,u.jsx)(Nt.Z.Item,{name:["shippingAddress","city"],rules:[Bt.l],label:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.city",defaultMessage:"City"}),children:(0,u.jsx)(_t.default,{placeholder:o.formatMessage(Wt.enterCity),disabled:r})})}),(0,u.jsx)(Me.Z,{sm:8,xs:24,children:(0,u.jsx)(Nt.Z.Item,{name:["shippingAddress","state"],label:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.province",defaultMessage:"County/Region"}),children:(0,u.jsx)(_t.default,{placeholder:o.formatMessage(Wt.insertAbbreviation),maxLength:2,disabled:r})})})]}),(0,u.jsx)(we.Z,{gutter:[8,0],children:(0,u.jsx)(Me.Z,{span:24,children:(0,u.jsx)(Nt.Z.Item,{name:["shippingAddress","countryIsoCode"],label:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.country",defaultMessage:"Country"}),rules:[Bt.l],children:(0,u.jsx)(zt.O,{disabled:r})})})})]}),a&&(0,u.jsx)(we.Z,{children:(0,u.jsx)(Me.Z,{span:24,children:(0,u.jsx)(Nt.Z.Item,{style:{marginTop:"15px"},children:(0,u.jsx)(Ut.Z,{checked:d,onChange:()=>c(!d),disabled:r,children:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.differentShippingAndBillingAddress",defaultMessage:"Click here if the shipping address and the billing address are different"})})})})}),d&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Me.Z,{sm:1,xs:0,style:{paddingRight:"30px"},children:(0,u.jsx)(ve.Z,{type:"vertical",style:{height:"100%"}})}),(0,u.jsxs)(Me.Z,{sm:11,xs:24,children:[(0,u.jsx)(E.Dx,{level:5,children:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.billingAddress",defaultMessage:"Billing address"})}),(0,u.jsx)(Nt.Z.Item,{name:["billingAddress","street"],rules:[Bt.l],wrapperCol:{span:24},label:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.streetAndHouseNumber",defaultMessage:"Street and house number"}),children:(0,u.jsx)(Gt.e,{onSelect:e=>{try{const t=JSON.parse(e);t&&l.setFieldsValue({billingAddress:{...t}})}catch(e){Ht.error(e)}},disabled:r})}),(0,u.jsx)(Nt.Z.Item,{name:["billingAddress","street2"],wrapperCol:{span:24},label:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.otherData",defaultMessage:"Floor, building, etc"}),children:(0,u.jsx)(_t.default,{placeholder:o.formatMessage(Wt.enterAnyData),disabled:r})}),(0,u.jsxs)(we.Z,{gutter:[8,0],children:[(0,u.jsx)(Me.Z,{sm:8,xs:24,children:(0,u.jsx)(Nt.Z.Item,{name:["billingAddress","zipCode"],rules:[Bt.l],label:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.postCode",defaultMessage:"Postcode"}),children:(0,u.jsx)(_t.default,{placeholder:o.formatMessage(Wt.enterZipCode),disabled:r})})}),(0,u.jsx)(Me.Z,{sm:8,xs:24,children:(0,u.jsx)(Nt.Z.Item,{name:["billingAddress","city"],rules:[Bt.l],label:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.city",defaultMessage:"City"}),children:(0,u.jsx)(_t.default,{placeholder:o.formatMessage(Wt.enterCity),disabled:r})})}),(0,u.jsx)(Me.Z,{sm:8,xs:24,children:(0,u.jsx)(Nt.Z.Item,{name:["billingAddress","state"],label:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.province",defaultMessage:"County/Region"}),children:(0,u.jsx)(_t.default,{placeholder:o.formatMessage(Wt.insertAbbreviation),maxLength:2,disabled:r})})})]}),(0,u.jsx)(we.Z,{gutter:[8,0],children:(0,u.jsx)(Me.Z,{span:24,children:(0,u.jsx)(Nt.Z.Item,{name:["billingAddress","countryIsoCode"],label:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.country",defaultMessage:"Country"}),rules:[Bt.l],children:(0,u.jsx)(zt.O,{disabled:r})})})})]})]})]}),!a&&(0,u.jsx)(we.Z,{children:(0,u.jsx)(Me.Z,{span:24,children:(0,u.jsx)(Nt.Z.Item,{style:{marginTop:"15px"},children:(0,u.jsx)(Ut.Z,{checked:d,onChange:()=>c(!d),disabled:r,children:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.differentShippingAndBillingAddress",defaultMessage:"Click here if the shipping address and the billing address are different"})})})})}),(0,u.jsxs)(Nt.Z.Item,{wrapperCol:{span:16},className:"SelfOnboarding__BackSubmit",children:[(0,u.jsx)(q.Z,{htmlType:"button",onClick:s,style:{marginRight:"20px"},disabled:r,children:(0,u.jsx)(K.Z,{id:"selfonboarding.step3.back",defaultMessage:"Back"})}),(0,u.jsx)(q.Z,{htmlType:"submit",style:{background:"#ff6252",borderColor:"#ff6252"},type:"primary",loading:r,children:o.formatMessage(Wt.joinAndTryIsendu)})]})]})})]})}));var qt=s(19006),Yt=s(34041),Kt=s(51890);function Xt(){const e=(navigator.languages&&navigator.languages[0]||navigator.language).toLowerCase().split(/[_-]+/)[0];return(null==e?void 0:e.toUpperCase())||"IT"}const Qt=(0,y.Pi)((e=>{const{onSubmit:t,onBack:s,isLoading:r}=e,a=(0,v.Z)(),{selfOnboardingStore:o}=(0,i.o)(),n=(0,f.useMemo)((()=>{var e,t;const s=o.companyInfo;return{...s,vatNumber:null==s||null===(e=s.vatNumber)||void 0===e?void 0:e.slice(2),vatPrefix:(null==s||null===(t=s.vatNumber)||void 0===t?void 0:t.slice(0,2))||Xt()}}),[o.companyInfo]),l=(0,$t.y)(n);return(0,f.useEffect)((()=>{o.getCompanyInfo()}),[o]),(0,u.jsxs)("div",{className:"SelfOnboarding__Content",children:[(0,u.jsx)(E.Dx,{level:1,children:(0,u.jsx)(K.Z,{id:"selfonboarding.step2.title",defaultMessage:"Let's get to know each other..."})}),(0,u.jsx)("div",{className:"SelfOnboarding__Titles",children:(0,u.jsx)(E.xv,{children:(0,u.jsx)(K.Z,{id:"selfonboarding.step2.subtitle",defaultMessage:"We require the following information to make sure that <strong>any waybills created match your order details</strong>.",values:Ft})})}),(0,u.jsx)(Nt.Z,{form:l,onFinish:t,layout:"vertical",labelCol:{span:16},wrapperCol:{span:16},children:(0,u.jsxs)("div",{className:"SelfOnboarding__Form step-2",children:[(0,u.jsx)(Nt.Z.Item,{name:"name",rules:[Bt.l],wrapperCol:{span:16},label:(0,u.jsx)(K.Z,{id:"selfonboarding.step2.companyName",defaultMessage:"Your company name"}),children:(0,u.jsx)(_t.default,{placeholder:a.formatMessage(Wt.companyNamePlaceholder),disabled:r})}),(0,u.jsx)(Nt.Z.Item,{name:"vatNumber",rules:[Bt.l],wrapperCol:{span:16},label:(0,u.jsx)(K.Z,{id:"selfonboarding.step2.vatNumber",defaultMessage:"Your company's VAT number"}),children:(0,u.jsx)(_t.default,{placeholder:a.formatMessage(Wt.vatNumberPlaceholder),disabled:r,addonBefore:(0,u.jsx)(Nt.Z.Item,{name:"vatPrefix",noStyle:!0,rules:[Bt.l],children:(0,u.jsx)(Yt.default,{style:{width:100},showSearch:!0,disabled:o.isLoading,children:qt.countriesArray.map((e=>(0,u.jsxs)(Yt.default.Option,{value:e.alpha2.toUpperCase(),children:[(0,u.jsx)(Kt.C,{size:"small",src:(0,E.$6)(e.alpha2),className:"mr-1"})," ",e.alpha2.toUpperCase()]},e.countryCode)))})})})}),(0,u.jsx)(Nt.Z.Item,{name:"website",rules:[Bt.l],wrapperCol:{span:16},label:(0,u.jsx)(K.Z,{id:"selfonboarding.step2.website",defaultMessage:"Your e-commerce website"}),children:(0,u.jsx)(_t.default,{placeholder:a.formatMessage(Wt.websitePlaceholder),disabled:r})}),(0,u.jsx)(Nt.Z.Item,{name:"contactEmail",rules:[Bt.l],wrapperCol:{span:16},label:(0,u.jsx)(K.Z,{id:"selfonboarding.step2.contactEmail",defaultMessage:"Company contact email (click to edit)"}),children:(0,u.jsx)(_t.default,{type:"email",placeholder:a.formatMessage(Wt.contactEmailPlaceholder),disabled:r})}),(0,u.jsx)(Nt.Z.Item,{name:"phone",rules:[Bt.l],wrapperCol:{span:16},label:(0,u.jsx)(K.Z,{id:"selfonboarding.step2.phone",defaultMessage:"Mobile"}),children:(0,u.jsx)(_t.default,{placeholder:a.formatMessage(Wt.mobilePhonePlaceholder),disabled:r})}),(0,u.jsxs)(Nt.Z.Item,{wrapperCol:{span:16},className:"SelfOnboarding__BackSubmit",children:[(0,u.jsx)(q.Z,{htmlType:"button",onClick:s,style:{marginRight:"20px"},disabled:r,children:(0,u.jsx)(K.Z,{id:"selfonboarding.step2.back",defaultMessage:"Back"})}),(0,u.jsx)(q.Z,{htmlType:"submit",loading:r,type:"primary",children:(0,u.jsx)(K.Z,{id:"selfonboarding.step2.next",defaultMessage:"Next"})})]})]})})]})}));const Jt=(0,n.Pi)((e=>{const{onSubmit:t,isLoading:s}=e,r=(0,v.Z)(),{selfOnboardingStore:a}=(0,i.o)(),o=(0,$t.y)(a.genericInfo);(0,f.useEffect)((()=>{a.signupToken&&(a.getGenericInfo(),a.getGenericInfoOptions())}),[a,a.signupToken]);const{shipmentsPerMonth:n,stores:l,carriers:d}=a.genericInfoOptions||{},{firstName:c}=a.genericInfo||{};return(0,u.jsxs)("div",{className:"SelfOnboarding__Content",children:[(0,u.jsx)(E.Dx,{level:1,children:(0,u.jsx)(K.Z,{id:"selfonboarding.step1.title",defaultMessage:"Welcome on board, isender!"})}),(0,u.jsxs)("div",{className:"SelfOnboarding__Titles",style:{marginBottom:"20px"},children:[(0,u.jsx)(K.Z,{id:"selfonboarding.step1.welcome",defaultMessage:"Hi {userName}, and welcome to isendu.",values:{userName:`${c||""}`}}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(0,u.jsx)(E.xv,{children:(0,u.jsx)(K.Z,{id:"selfonboarding.step1.subtitle",defaultMessage:"We have a few questions which will help us set up your account to best meet your needs."})})]}),(0,u.jsx)(Nt.Z,{form:o,onFinish:t,layout:"vertical",labelCol:{span:16},wrapperCol:{span:16},children:(0,u.jsxs)("div",{className:"SelfOnboarding__Form step-1",children:[(0,u.jsx)(Nt.Z.Item,{name:"shipmentsPerMonth",rules:[Bt.l],wrapperCol:{span:16},label:(0,u.jsx)(E.xv,{children:(0,u.jsx)(K.Z,{id:"selfonboarding.step1.shipmentsPerMonth",defaultMessage:"Firstly, <strong> how many shipments do you manage per month?</strong>",values:Ft})}),children:(0,u.jsx)(Yt.default,{placeholder:r.formatMessage(Wt.selectAnAnswer),options:n,disabled:s})}),(0,u.jsx)(Nt.Z.Item,{name:"store",rules:[Bt.l],wrapperCol:{span:16},label:(0,u.jsx)(E.xv,{children:(0,u.jsx)(K.Z,{id:"selfonboarding.step1.store",defaultMessage:"Which <strong>platform</strong> do you use most often for sales?",values:Ft})}),children:(0,u.jsx)(Yt.default,{placeholder:r.formatMessage(Wt.selectAnAnswer),options:l,disabled:s})}),(0,u.jsx)(Nt.Z.Item,{name:"carrier",rules:[Bt.l],wrapperCol:{span:16},label:(0,u.jsx)(E.xv,{children:(0,u.jsx)(K.Z,{id:"selfonboarding.step1.carrier",defaultMessage:"Which <strong>carrier</strong> do you use most often for your shipments?",values:Ft})}),children:(0,u.jsx)(Yt.default,{placeholder:r.formatMessage(Wt.selectAnAnswer),options:d,disabled:s})}),(0,u.jsx)(Nt.Z.Item,{wrapperCol:{span:16},className:"SelfOnboarding__Submit",children:(0,u.jsx)(q.Z,{htmlType:"submit",loading:s,type:"primary",children:(0,u.jsx)(K.Z,{id:"selfonboarding.step1.next",defaultMessage:"Next"})})})]})})]})}));const es=e=>{const{currentStep:t}=e;return(0,u.jsxs)("div",{className:`SelfOnboarding__ImgContainer step-${t+1}`,children:[(0,u.jsx)(E.Ee,{className:"image-logo",src:Rt}),(0,u.jsx)(E.Ee,{className:"image-1",src:Lt[0],hidden:0!==t}),(0,u.jsx)(E.Ee,{className:"image-2",src:Lt[1],hidden:1!==t}),(0,u.jsx)(E.Ee,{className:"image-3",src:Lt[2],hidden:2!==t})]})};var ts=s(38648);const ss="selfOnboardingToken";var rs=function(e){return e[e.GenericInfo=0]="GenericInfo",e[e.CompanyInfo=1]="CompanyInfo",e[e.CompanyAddress=2]="CompanyAddress",e}(rs||{});const{Step:as}=kt.default,is=(0,y.Pi)((()=>{const{selfOnboardingToken:e,currentStep:t,onSubmitCompanyAddress:s,onSubmitCompanyInfo:r,onSubmitGenericInfo:a,onBack:o,isLoading:n,isMobile:l,dismissMobileWarningModal:d,showMobileWarningModal:c}=function(){const{selfOnboardingStore:e,authStore:t}=(0,i.o)(),{screenSize:s}=R(),r=(0,P.s0)(),a=(0,v.Z)(),[o,n]=(0,f.useState)(0),[l,d]=(0,f.useState)(!1),c=(0,f.useRef)(),p=localStorage.getItem(ss),u="mobile"===s;(0,f.useEffect)((()=>{const t=localStorage.getItem(ss)||"";e.setSignupToken(t),localStorage.removeItem("AUTH_STORAGE_KEY")}),[e]),(0,f.useEffect)((()=>{var t;if(null!==(t=e.errors)&&void 0!==t&&t.code){const t=Wt[e.errors.code]||"generic_error";ts.Z.error({message:a.formatMessage(t),duration:0,key:"onboardingErrors"})}}),[e.errors,a]);const h=(0,f.useCallback)((t=>{e.saveGenericInfo(t).then((()=>{n((e=>e+1)),window.scrollTo(0,0)}))}),[e]),m=(0,f.useCallback)((t=>{ts.Z.close("onboardingErrors");const s={...t,vatNumber:t.vatPrefix+t.vatNumber,vatPrefix:void 0};e.saveCompanyInfo(s).then((()=>{ts.Z.close("onboardingErrors"),n((e=>e+1)),window.scrollTo(0,0)}))}),[e]),g=(0,f.useCallback)((s=>{const a=function(e){return e.shippingAddress.street2=""===e.shippingAddress.street2?void 0:e.shippingAddress.street2,e.billingAddress?(e.billingAddress.street2=""===e.billingAddress.street2?void 0:e.billingAddress.street2,e):e}(s);e.saveCompanyAddress(a).then((e=>{if(e){if(u)return d(!0),void(c.current=e);t.setAuthToken(e),localStorage.removeItem(ss),r(I.H.shipments.orders)}}))}),[r,e,u,t]),y=(0,f.useCallback)((()=>{t.setAuthToken(c.current),d(!1),localStorage.removeItem(ss),r(I.H.shipments.orders)}),[r,t]),b=(0,f.useCallback)((()=>{o>0&&n(o-1),window.scrollTo(0,0)}),[o]);return{selfOnboardingToken:p,currentStep:o,onSubmitCompanyAddress:g,onSubmitCompanyInfo:m,onSubmitGenericInfo:h,onBack:b,isLoading:e.isLoading,showMobileWarningModal:l,isMobile:u,dismissMobileWarningModal:y}}();return e?(0,u.jsxs)("div",{className:"SelfOnboarding",children:[(0,u.jsxs)(we.Z,{className:"SelfOnboarding__Row",children:[(0,u.jsx)(Me.Z,{span:8,children:(0,u.jsx)(es,{currentStep:t})}),(0,u.jsxs)(Me.Z,{span:16,children:[(0,u.jsxs)(kt.default,{current:t,progressDot:!0,className:"SelfOnboarding__Stepper",children:[(0,u.jsx)(as,{}),(0,u.jsx)(as,{}),(0,u.jsx)(as,{})]}),t===rs.GenericInfo&&(0,u.jsx)(Jt,{onSubmit:a,isLoading:n}),t===rs.CompanyInfo&&(0,u.jsx)(Qt,{onSubmit:r,onBack:o,isLoading:n}),t===rs.CompanyAddress&&(0,u.jsx)(Vt,{onSubmit:s,onBack:o,isLoading:n,isMobile:l})]}),(0,u.jsx)(Me.Z,{span:24,className:"SelfOnboarding__MobileBanner",children:(0,u.jsx)(E.Ee,{height:"32",src:Rt})})]}),(0,u.jsx)(se.default,{open:c,onOk:()=>d(),onCancel:()=>d(),okText:"Ok",cancelButtonProps:{style:{display:"none"}},centered:!0,children:(0,u.jsx)("p",{className:"mt-3",children:(0,u.jsx)(K.Z,{id:"selfonboarding.mobileWarningModal",defaultMessage:"For the best experience, we recommend accessing the isendu platform from a desktop"})})})]}):(0,u.jsx)(u.Fragment,{})}));const os=()=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Nt.Z.Item,{children:[(0,u.jsx)(we.Z,{justify:"center",children:(0,u.jsx)(Me.Z,{span:24,children:(0,u.jsx)(E.Dx,{level:2,children:(0,u.jsx)(E.xv,{strong:!0,children:(0,u.jsx)(K.Z,{id:"welcome.password.token.invalid.title",defaultMessage:"Oops, this link has expired"})})})})}),(0,u.jsx)(we.Z,{children:(0,u.jsxs)(Me.Z,{span:24,children:[(0,u.jsxs)("p",{children:[(0,u.jsx)(K.Z,{id:"welcome.password.token.invalid.message",defaultMessage:"The link you clicked on is no longer valid. But don't worry, we can help. Just contact us at this address"}),(0,u.jsx)("br",{}),(0,u.jsx)(E.rU,{href:`mailto:${k._.supportEmail}`,children:k._.supportEmail}),(0,u.jsx)("br",{})]}),(0,u.jsx)("p",{children:(0,u.jsx)(K.Z,{id:"welcome.password.token.invalid.separator",defaultMessage:"or"})})]})})]}),(0,u.jsx)(Nt.Z.Item,{children:(0,u.jsx)(we.Z,{children:(0,u.jsx)(Me.Z,{span:24,children:(0,u.jsx)(E.rU,{href:`${I.k.ROOT}${I.k.AUTH}/${I.k.AUTH_LOGIN}`,children:(0,u.jsx)(q.Z,{children:(0,u.jsx)(K.Z,{id:"welcome.password.token.invalid.button",defaultMessage:"Back to login"})})})})})})]});const ns=e=>{let{token:t}=e;const{authStore:s}=(0,i.o)(),[r,a]=(0,f.useState)(!1),[o,n]=(0,f.useState)(!1);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(E.Dx,{children:(0,u.jsx)(K.Z,{id:"welcome.password.change.title.ready",defaultMessage:"Ready? Let's go!"})}),(0,u.jsx)("p",{children:(0,u.jsx)(K.Z,{id:"welcome.password.change.text",defaultMessage:"Set your <account></account> password. We recommend that you choose a <word></word> password which only you know. It must have <rules></rules>",values:{account:()=>(0,u.jsx)("strong",{children:(0,u.jsx)(K.Z,{id:"welcome.password.change.text.tag.account",defaultMessage:"isendu account"})}),word:()=>(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(K.Z,{id:"welcome.password.change.text.tag.word",defaultMessage:'"safe"'})}),rules:()=>(0,u.jsx)("strong",{children:(0,u.jsx)(K.Z,{id:"welcome.password.change.text.tag.rules",defaultMessage:"at least 8 characters and include a combination of digits, lowercase and uppercase letters"})})}})}),(0,u.jsxs)(Nt.Z,{layout:"vertical",onFinish:e=>{a(!0),s.setSignupPassword(t,e.password).then((t=>{var r,a;r=t.email,a=e.password,s.doLogin(r,a).then((()=>n(!0))).catch((()=>{window.location.href=`/${I.k.AUTH}/${I.H.auth.login}`}))})).catch((()=>{a(!1),B.T.error({message:(0,u.jsx)(K.Z,{id:"welcome.password.change.error.retry",defaultMessage:"Error, please retry"})})}))},children:[(0,u.jsx)(Nt.Z.Item,{label:(0,u.jsx)(K.Z,{id:"welcome.password.change.form.password.label",defaultMessage:"Enter your password"}),name:"password",hasFeedback:!0,rules:[{required:!0,message:(0,u.jsx)(K.Z,{id:"welcome.password.change.form.password.rule",defaultMessage:"Password does not meet requirements"}),type:"string",min:8,pattern:new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})")}],children:(0,u.jsx)(_t.default.Password,{placeholder:"*************"})}),(0,u.jsx)(Nt.Z.Item,{label:(0,u.jsx)(K.Z,{id:"welcome.password.change.form.passwordConfirm.label",defaultMessage:"Confirm your password"}),name:"passwordConfirm",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:(0,u.jsx)(K.Z,{id:"welcome.password.change.form.passwordConfirm.label",defaultMessage:"Confirm your password"})},e=>{let{getFieldValue:t}=e;return{validator:(e,s)=>s&&t("password")!==s?Promise.reject((0,u.jsx)(K.Z,{id:"welcome.password.change.form.passwordConfirm.error",defaultMessage:"Passwords do not match"})):Promise.resolve()}}],children:(0,u.jsx)(_t.default.Password,{placeholder:"*************"})}),(0,u.jsx)(Nt.Z.Item,{children:(0,u.jsx)(q.Z,{type:"primary",block:!0,htmlType:"submit",className:"set-password-button",loading:r,children:(0,u.jsx)(K.Z,{id:"welcome.password.change.form.button.confirm",defaultMessage:"Set your password"})})}),o&&(0,u.jsx)(P.Fg,{to:"/welcome/settings/setup"})]})]})};var ls=s(7085);const ds=()=>(0,u.jsx)(ls.Z,{className:"set-password-loader"});const cs=()=>(0,u.jsx)(we.Z,{justify:"center",style:{marginTop:"auto"},children:(0,u.jsxs)(Me.Z,{children:[(0,u.jsx)(E.Dx,{level:2,children:(0,u.jsx)(K.Z,{id:"welcome.password.token.checking.message",defaultMessage:"We are checking your request, please wait..."})}),(0,u.jsx)(we.Z,{justify:"center",children:(0,u.jsx)(Me.Z,{className:"center-col",span:24,children:(0,u.jsx)(ds,{})})})]})});const{Content:ps}=W.default,us=e=>{let{col1Children:t,col2Children:s,col1BackgroundImage:r,col2BackgroundImage:a}=e;return(0,u.jsx)(W.default,{children:(0,u.jsx)(ps,{children:(0,u.jsxs)(we.Z,{children:[(0,u.jsx)(Me.Z,{span:12,className:"fullscreen-height-halfscreen-width-col",style:{backgroundImage:r&&`url(${r})`},children:t}),(0,u.jsx)(Me.Z,{span:12,className:"fullscreen-height-halfscreen-width-col",style:{backgroundImage:a&&`url(${a})`},children:s})]})})})};const hs=()=>{const{authStore:e}=(0,i.o)(),{token:t}=(0,P.UO)(),[s,r]=(0,f.useState)(!1),[a,o]=(0,f.useState)(!1);(0,f.useEffect)((()=>{t?a||e.checkPasswordToken(t).then((()=>{r(!0)})).catch((()=>{r(!1)})).finally((()=>{o(!0)})):(o(!0),r(!1))}),[e,a,t]);return us({col1Children:(0,u.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,u.jsx)(we.Z,{justify:"center",children:(0,u.jsx)(Me.Z,{span:16,children:(()=>{if(t){let e=(0,u.jsx)(ns,{token:t});return s||(e=(0,u.jsx)(os,{})),a||(e=(0,u.jsx)(cs,{})),e}return(0,u.jsx)(os,{})})()})})}),col2Children:(0,u.jsx)(we.Z,{style:{height:"100%",backgroundImage:`url(${E.t5}`,backgroundPosition:"bottom",backgroundSize:"cover"},children:(0,u.jsxs)(Me.Z,{span:24,children:[(0,u.jsx)(we.Z,{style:{height:"100px"}}),(0,u.jsx)(we.Z,{children:(0,u.jsx)(Me.Z,{span:4,offset:18,children:(0,u.jsx)(E.TR,{dark:!0})})})]})})})};var ms=s(49288);const gs=(e,t,s)=>(0,u.jsx)(Nt.Z.Item,{label:t,name:e,rules:[{required:!0,message:(0,u.jsx)(K.Z,{id:"welcome.setup.store.list.form.mandatory",defaultMessage:"Mandatory field"})}],children:s}),ys=e=>{let{onSkip:t}=e;return(0,u.jsx)(q.Z,{type:"link",onClick:()=>t(),style:{padding:0},children:(0,u.jsx)(K.Z,{id:"welcome.setup.store.list.button.skipStep",defaultMessage:"Skip this step"})})};var fs=s(68206);let bs;const vs=e=>e?`${e.street}, ${e.city}, ${e.state}, ${e.countryIsoCode}`:"",xs=(0,y.Pi)((e=>{var t;let{onNext:s,onBack:r,onSkip:a}=e;const{companiesStore:o}=(0,i.o)(),[n,l]=(0,f.useState)(!1),[d,c]=(0,f.useState)(),{addressesStore:p}=(0,i.o)(),[h]=Nt.Z.useForm(),[m,g]=(0,f.useState)(),[y,b]=(0,f.useState)(!1),x=(0,v.Z)();(0,f.useEffect)((()=>{const e=p.senderAddressesArray.find((e=>e.isDefault));c(e),e&&h.setFieldsValue({contact:e.name})}),[p.senderAddressesArray,h]),(0,f.useEffect)((()=>{d&&h.setFieldsValue({sender:vs(d)})}),[d,h]);const S=async(e,t)=>{const s=((e,t)=>{var s,r,a,i,n,l;return d&&null!==(s=o.companyInfo)&&void 0!==s&&s.name&&null!==(r=o.companyInfo)&&void 0!==r&&r.email&&null!==(a=o.companyInfo)&&void 0!==a&&a.phoneNumber?{...d,companyName:null===(i=o.companyInfo)||void 0===i?void 0:i.name,name:e,email:null===(n=o.companyInfo)||void 0===n?void 0:n.email,phoneNumber:null===(l=o.companyInfo)||void 0===l?void 0:l.phoneNumber,type:t,isDefault:!0}:void 0})(e,t);if(!s)throw Error("No address");{const e=("SHIPPING"===t?p.senderAddressesArray:p.pickupAddressesArray).find((e=>e.isDefault));e&&e.id?await p.editAddress(s,e.id):await p.addAddress(s)}};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(we.Z,{children:(0,u.jsxs)(Me.Z,{children:[(0,u.jsx)(E.Dx,{children:(0,u.jsx)(K.Z,{id:"welcome.settings.address.title",defaultMessage:"No more errors"})}),(0,u.jsxs)("p",{children:[(0,u.jsx)(K.Z,{id:"welcome.settings.address.text.1",defaultMessage:"isendu <sync></sync>, saving you from having to fill in your customer data by hand each time. ",values:{sync:()=>(0,u.jsx)("strong",{children:(0,u.jsx)(K.Z,{id:"welcome.settings.address.text.1.tag.sync",defaultMessage:"syncs your order data"})})}}),(0,u.jsx)("br",{}),(0,u.jsx)(K.Z,{id:"welcome.settings.address.text.2",defaultMessage:"So that means <zero></zero> made when copying out details, maximum efficiency and satisfied customers.",values:{zero:()=>(0,u.jsx)("strong",{children:(0,u.jsx)(K.Z,{id:"welcome.settings.address.text.2.tag.zero",defaultMessage:"no more errors"})})}})]}),(0,u.jsx)("br",{}),(0,u.jsx)("p",{children:(0,u.jsx)(K.Z,{id:"welcome.settings.address.text.3",defaultMessage:"To get started, just enter the address from which your products will be sent."})}),(0,u.jsxs)(Nt.Z,{requiredMark:!1,form:h,layout:"vertical",onFinish:async e=>{l(!0);try{await(async e=>{await S(e,"SHIPPING")})(e.contact),await(async e=>{await S(e,"PICKUP")})(e.contact),l(!1),s()}catch(e){l(!1),B.T.error({message:(0,u.jsx)(K.Z,{id:"welcome.setup.address.error",defaultMessage:"An error occured. Please retry"})})}},children:[(0,u.jsx)(Nt.Z.Item,{label:(0,u.jsx)(K.Z,{id:"welcome.settings.address.form.name.label",defaultMessage:"Contact name"}),name:"contact",rules:[{required:!0,message:(0,u.jsx)(K.Z,{id:"welcome.settings.address.form.mandatory.message",defaultMessage:"Mandatory field"})}],children:(0,u.jsx)(_t.default,{})}),(0,u.jsx)(Nt.Z.Item,{label:(0,u.jsx)(K.Z,{id:"welcome.settings.address.form.address.label",defaultMessage:"Origin address"}),name:"sender",rules:[{required:!0,message:(0,u.jsx)(K.Z,{id:"welcome.settings.address.form.mandatory.message",defaultMessage:"Mandatory field"})}],children:(0,u.jsx)(ms.Z,{placeholder:"es: Via Nazionale 4, Milano 20019",options:null==m?void 0:m.map((e=>({label:e.description,value:e.description,key:e.id}))),onChange:e=>{bs&&clearTimeout(bs),""!==e.trim()?bs=setTimeout((async()=>{const t=await p.autocomplete(e);g(t)}),1e3):c(void 0)},onSelect:async(e,t)=>{if(t.key)try{const e=await p.autocompleteStreetAddress(t.key.toString());c(e),b(!1)}catch(e){e.hasOwnProperty("statusCode")&&422===e.statusCode?b(!0):B.T.error({message:(0,u.jsx)(K.Z,{id:"welcome.settings.address.autocomplete.error",defaultMessage:"Error, please retry"})})}}})}),y&&(0,u.jsx)(E.xv,{type:"warning",children:(0,u.jsx)(K.Z,{id:"welcome.settings.address.autocomplete.warning",defaultMessage:"This address seems incomplete, please enter more details."})}),(0,u.jsxs)(we.Z,{gutter:8,children:[(0,u.jsx)(Me.Z,{children:(0,u.jsx)(Nt.Z.Item,{children:(0,u.jsx)(q.Z,{className:"back-button",onClick:()=>r(),children:x.formatMessage(fs.Z.genericBack)})})}),(0,u.jsx)(Me.Z,{children:(0,u.jsx)(Nt.Z.Item,{shouldUpdate:!0,children:()=>(0,u.jsx)(q.Z,{type:"primary",htmlType:"submit",loading:n,className:"continue-button",disabled:!h.isFieldsTouched(!0)||!!h.getFieldsError().filter((e=>{let{errors:t}=e;return t.length})).length||!d||y,children:(0,u.jsx)(K.Z,{id:"welcome.settings.address.button.continue",defaultMessage:"Continue"})})})})]})]},null===(t=o.companyInfo)||void 0===t?void 0:t.id)]})}),(0,u.jsx)(we.Z,{children:(0,u.jsx)(Me.Z,{children:(0,u.jsx)(ys,{onSkip:a})})})]})}));const Ss=(0,Ae.vU)({nameLabel:{id:"welcome.settings.company.form.name.label",defaultMessage:"Company name"},phoneLabel:{id:"welcome.settings.company.form.phone.label",defaultMessage:"Business phone number"}}),js=(0,y.Pi)((e=>{let{onNext:t}=e;const{companiesStore:s}=(0,i.o)(),[r,a]=(0,f.useState)(!1),[o]=Nt.Z.useForm(),n=(0,v.Z)();return(0,f.useEffect)((()=>{if(s.companyInfo){const{name:e,email:t,phoneNumber:r}=s.companyInfo;e&&o.setFieldsValue({name:e}),t&&o.setFieldsValue({email:t}),r&&o.setFieldsValue({phoneNumber:r})}}),[s.companyInfo,o]),(0,u.jsx)(we.Z,{children:(0,u.jsxs)(Me.Z,{children:[(0,u.jsx)(E.Dx,{children:(0,u.jsx)(K.Z,{id:"welcome.settings.company.title",defaultMessage:"Future-proof ecommerce"})}),(0,u.jsx)("p",{children:(0,u.jsx)(K.Z,{id:"welcome.settings.company.text",defaultMessage:"isendu's mission is to ensure that <shipping></shipping> is <easy></easy>, fast and <safe></safe>. And so we created a truly intuitive tool to do this! One click is all it takes to get real time updates on the progress and outcome of shipments. So you can <time></time> into <growth></growth>.",values:{shipping:()=>(0,u.jsx)("strong",{children:(0,u.jsx)(K.Z,{id:"welcome.settings.company.text.tags.shipping",defaultMessage:"shipping"})}),easy:()=>(0,u.jsx)("strong",{children:(0,u.jsx)(K.Z,{id:"welcome.settings.company.text.tags.easy",defaultMessage:"simple"})}),safe:()=>(0,u.jsx)("strong",{children:(0,u.jsx)(K.Z,{id:"welcome.settings.company.text.tags.safe",defaultMessage:"reliable"})}),time:()=>(0,u.jsx)("strong",{children:(0,u.jsx)(K.Z,{id:"welcome.settings.company.text.tags.time",defaultMessage:"invest the time and energy you save"})}),growth:()=>(0,u.jsx)("strong",{children:(0,u.jsx)(K.Z,{id:"welcome.settings.company.text.tags.growth",defaultMessage:"growing your business"})})}})}),(0,u.jsxs)(Nt.Z,{requiredMark:!1,form:o,layout:"vertical",onFinish:e=>{a(!0),s.updateCompanyInfo({...e}).then((()=>{a(!1),t()})).catch((()=>{a(!1),B.T.error({message:(0,u.jsx)(K.Z,{id:"welcome.settings.company.form.error",defaultMessage:"An error occurred, please retry"})})}))},children:[gs("name",n.formatMessage(Ss.nameLabel),(0,u.jsx)(_t.default,{})),(0,u.jsx)(Nt.Z.Item,{label:(0,u.jsx)(K.Z,{id:"welcome.settings.company.form.email.label",defaultMessage:"Business email"}),name:"email",rules:[{type:"email",required:!0,message:(0,u.jsx)(K.Z,{id:"welcome.settings.company.form.email.message",defaultMessage:"Invalid email"})}],children:(0,u.jsx)(_t.default,{type:"email"})}),gs("phoneNumber",n.formatMessage(Ss.phoneLabel),(0,u.jsx)(_t.default,{})),(0,u.jsx)(Nt.Z.Item,{shouldUpdate:!0,children:()=>(0,u.jsx)(q.Z,{"data-testid":"submit",type:"primary",htmlType:"submit",loading:r,disabled:!o.isFieldsTouched(!0)||!!o.getFieldsError().filter((e=>{let{errors:t}=e;return t.length})).length,className:"continue-button",children:(0,u.jsx)(K.Z,{id:"welcome.settings.company.button.continue",defaultMessage:"Continue"})})})]})]})})}));var ws=s(22665),Ms=s(42405),Cs=s(40398),As=s(8705),Ts=s(85684),Os=s(23200);const Ps=e=>{let{marketplace:t,onIntegrationClick:s}=e;return(0,u.jsx)(Me.Z,{span:6,children:(0,u.jsx)(q.Z,{type:"link",style:{padding:0},onClick:()=>{s()},children:(0,u.jsx)(E.Ee,{src:t.logo})})})};const Ns=(0,y.Pi)((e=>{let{availableMarketplace:t,marketplaceForm:s,onBack:r}=e;const{marketplacesStore:a}=(0,i.o)(),[o,n]=(0,f.useState)(),[l,d]=(0,f.useState)(!1),[c]=Nt.Z.useForm(),[p,h]=(0,f.useState)(!1),m=(0,v.Z)();return(0,f.useEffect)((()=>{const e=a.selectedMarketplacesArray.filter((e=>!e.disabled)).find((e=>e.store&&e.store.internalCode===t.internalCode||e.internalCode===t.internalCode));e&&(n(e),null!=e&&e.credentials&&c.setFieldsValue(Object.fromEntries(Object.entries(e.credentials))))}),[c,t.internalCode,a.selectedMarketplacesArray]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Me.Z,{span:24,children:(0,u.jsxs)(Nt.Z,{form:c,layout:"vertical",onFinish:e=>{d(!0),o?a.updateSelectedMarketPlace({...o,credentials:e}).then((()=>{d(!1),B.T.success({message:(0,u.jsx)(K.Z,{id:"welcome.setup.store.connection.success",defaultMessage:"Store succesfully connected!"})}),h(!0)})).catch((()=>{d(!1),B.T.error({message:(0,u.jsx)(K.Z,{id:"welcome.setup.store.connection.error",defaultMessage:"An error occurred during store connection. Please retry."})})})):a.addSelectedMarketPlace({customName:void 0,autoSync:!0,internalCode:t.internalCode,credentials:e,disabled:!1,whenToAutoSync:"generated"}).then((()=>{d(!1),B.T.success({message:(0,u.jsx)(K.Z,{id:"welcome.setup.store.connection.success",defaultMessage:"Store succesfully connected!"})}),h(!0)})).catch((()=>{d(!1),B.T.error({message:(0,u.jsx)(K.Z,{id:"welcome.setup.store.connection.error",defaultMessage:"An error occurred during store connection. Please retry."})})}))},children:[s,(0,u.jsx)(Nt.Z.Item,{shouldUpdate:!0,children:()=>(0,u.jsxs)(we.Z,{gutter:8,children:[(0,u.jsx)(Me.Z,{children:(0,u.jsx)(q.Z,{className:"back-button",onClick:()=>{r()},children:m.formatMessage(fs.Z.genericBack)})}),(0,u.jsx)(Me.Z,{children:(0,u.jsx)(q.Z,{type:"primary",htmlType:"submit",className:"continue-button",loading:l,disabled:!c.isFieldsTouched(!0)||!!c.getFieldsError().filter((e=>{let{errors:t}=e;return t.length})).length,children:m.formatMessage(fs.Z.genericConnect)})})]})})]})}),p&&(0,u.jsx)(Me.Z,{children:(0,u.jsx)(P.Fg,{to:I.H.shipments.rootAbsolute+"/"+I.H.shipments.orders})})]})}));const _s=()=>(0,u.jsx)(f.Fragment,{children:(0,u.jsx)(Nt.Z.Item,{name:"shopUrl",label:"URL Negozio",children:(0,u.jsx)(_t.default,{})})}),Zs=e=>{let{onBack:t,version:s}=e;const[r,a]=(0,f.useState)(!1),{marketplacesStore:o}=(0,i.o)(),n=(0,v.Z)();return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(Me.Z,{span:24,children:(0,u.jsxs)(Nt.Z,{layout:"vertical",onFinish:async e=>{a(!0);const t="v1"===s?await o.getWoocommerceRedirectUrl(e.shopUrl):await o.getWoocommerceV2RedirectUrl(e.shopUrl);t.isError?(a(!1),B.T.error({message:(0,u.jsx)(K.Z,{id:"welcome.setup.store.error",defaultMessage:"An error occured. Please retry"})})):(localStorage.setItem(k._.requestedOauth,"true"),localStorage.setItem(k._.redirect,"/"),window.location.href=t.data.redirectUrl)},children:[(0,u.jsx)(_s,{}),(0,u.jsx)(Nt.Z.Item,{children:(0,u.jsxs)(we.Z,{gutter:8,children:[(0,u.jsx)(Me.Z,{children:(0,u.jsx)(q.Z,{className:"back-button",onClick:()=>{t()},children:n.formatMessage(fs.Z.genericBack)})}),(0,u.jsx)(Me.Z,{children:(0,u.jsx)(q.Z,{type:"primary",htmlType:"submit",className:"continue-button",loading:r,children:n.formatMessage(fs.Z.genericConnect)})})]})})]})})})},Is=e=>{let{onBack:t}=e;return(0,u.jsx)(Zs,{onBack:t,version:"v1"})},Ds=e=>{let{onBack:t}=e;return(0,u.jsx)(Zs,{onBack:t,version:"v2"})};const Es=()=>{const{marketplacesStore:e}=(0,i.o)();return(0,f.useEffect)((()=>{localStorage.setItem(k._.requestedOauth,"true"),localStorage.setItem(k._.redirect,"/"),window.location.href="https://app.isendu.com/shopify/prod"}),[e]),(0,u.jsx)(Me.Z,{children:(0,u.jsx)(ds,{})})};var ks=s(25108);const Ls=e=>{let{onBack:t}=e;const{marketplacesStore:s}=(0,i.o)();return(0,f.useEffect)((()=>{localStorage.setItem(k._.requestedOauth,"true"),s.getEbayRedirectUrl().then((e=>{var s;e.isError?(localStorage.setItem(k._.requestedOauth,"false"),B.T.error({message:(0,u.jsx)(K.Z,{id:"welcome.setup.store.error",defaultMessage:"An error occured. Please retry"})}),t()):null!==(s=e.data)&&void 0!==s&&s.redirectUrl?(localStorage.setItem(k._.redirect,"/"),window.location.href=e.data.redirectUrl):(localStorage.setItem(k._.requestedOauth,"false"),B.T.error({message:(0,u.jsx)(K.Z,{id:"welcome.setup.store.error",defaultMessage:"An error occured. Please retry"})}),t())})).catch((e=>{ks.error(e),t()}))}),[s,t]),(0,u.jsx)(Me.Z,{children:(0,u.jsx)(ds,{})})};var Rs=s(87231);const Fs=e=>{let{onIntegrationFormEvent:t}=e;const{marketplacesStore:s}=(0,i.o)(),[r,a]=(0,f.useState)(),o=()=>{a(null),t(!1)},n=(e,t)=>(0,u.jsx)(Ns,{availableMarketplace:t,marketplaceForm:e,onBack:()=>o()}),l=e=>()=>{a(e),t(!0)};return r?(0,u.jsx)(we.Z,{justify:"center",children:r}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(we.Z,{children:(0,u.jsx)(Me.Z,{children:(0,u.jsx)("p",{className:"marketplaces-picker-paragraph",children:(0,u.jsx)(K.Z,{id:"welcome.setup.store.list.callToAction",defaultMessage:"Select your sales platform"})})})}),(0,u.jsx)(we.Z,{children:(0,u.jsx)(Me.Z,{span:12,children:(0,u.jsx)(we.Z,{gutter:[24,24],children:s.availableMarketplaces.filter((e=>!e.disabled)).map((e=>(e=>{let t,s=()=>null;switch(e.internalCode){case te.availableStores.amazon.internalCode:t=n((0,u.jsx)(ws.J,{}),e),s=l(t);break;case te.availableStores.woocommerce.internalCode:t=(0,u.jsx)(Is,{onBack:()=>o()}),s=l(t);break;case te.availableStores.prestashop.internalCode:t=n((0,u.jsx)(Ts.O,{}),e),s=l(t);break;case te.availableStores.magento_1.internalCode:t=n((0,u.jsx)(Ms.j,{}),e),s=l(t);break;case te.availableStores.magento_2.internalCode:t=n((0,u.jsx)(Cs.z,{}),e),s=l(t);break;case te.availableStores.ebay.internalCode:t=(0,u.jsx)(Ls,{onBack:()=>o()}),s=()=>{a(t)};break;case te.availableStores.opencart_2.internalCode:t=n((0,u.jsx)(As.C,{}),e),s=l(t);break;case te.availableStores.woocommerce_V2.internalCode:t=(0,u.jsx)(Ds,{onBack:()=>o()}),s=l(t);break;case te.availableStores.woocommerce_marketplace.internalCode:t=n((0,u.jsx)(Os.e,{}),e),s=l(t);break;case te.availableStores.shopify_V2.internalCode:t=(0,u.jsx)(Es,{}),s=l(t);break;case te.availableStores.storeden.internalCode:t=n((0,u.jsx)(Rs.v,{}),e),s=l(t)}return t&&(0,u.jsx)(Ps,{onIntegrationClick:s,marketplace:e},e.internalCode)})(e)))})})})]})};const Us=e=>{let{onBack:t}=e;const[s,r]=(0,f.useState)(!0),a=(0,v.Z)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(we.Z,{children:(0,u.jsxs)(Me.Z,{children:[(0,u.jsx)(E.Dx,{children:(0,u.jsx)(K.Z,{id:"welcome.setup.store.list.title",defaultMessage:"The whole world in one click"})}),(0,u.jsx)("p",{children:(0,u.jsx)(K.Z,{id:"welcome.setup.store.list.text",defaultMessage:"isendu stores all the orders placed by your customers. So you'll always have the information you need close to hand, helping you manage shipments with maximum efficiency, and without complications."})}),(0,u.jsx)(Fs,{onIntegrationFormEvent:e=>r(!e)})]})}),s&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(we.Z,{gutter:8,children:(0,u.jsx)(Me.Z,{children:(0,u.jsx)(q.Z,{className:"back-button",onClick:()=>t(),style:{marginBottom:"8px"},children:a.formatMessage(fs.Z.genericBack)})})}),(0,u.jsx)(we.Z,{children:(0,u.jsx)(Me.Z,{children:(0,u.jsx)(q.Z,{type:"link",style:{padding:0},children:(0,u.jsx)(E.rU,{href:I.H.shipments.rootAbsolute+"/"+I.H.shipments.orders,children:(0,u.jsx)(K.Z,{id:"welcome.setup.store.list.button.skipStep",defaultMessage:"Skip this step"})})})})})]})]})};var Gs=s(42611);const Bs=(0,Ae.vU)({formTemplate:{id:"welcome.setup.package.form.template",defaultMessage:"Create template"},formNamePlaceholder:{id:"welcome.setup.package.form.name.placeholder",defaultMessage:"e.g. Standard box"},formLength:{id:"welcome.setup.package.form.field.length",defaultMessage:"Length (cm)"},formWidth:{id:"welcome.setup.package.form.field.width",defaultMessage:"Width (cm)"},formHeight:{id:"welcome.setup.package.form.field.height",defaultMessage:"Height (cm)"},formWeight:{id:"welcome.setup.package.form.field.weight",defaultMessage:"Weight (kg)"}}),$s=(0,y.Pi)((e=>{let{onNext:t,onBack:s,onSkip:r}=e;const[a,o]=(0,f.useState)(!1),{parcelsStore:n}=(0,i.o)(),l=n.defaultParcel,[d]=Nt.Z.useForm(),c=(0,v.Z)();return(0,f.useEffect)((()=>{l&&d.setFieldsValue({name:l.name,width:Math.round((0,Gs.L)(l.width,l.lengthUnit,"cm")),length:Math.round((0,Gs.L)(l.length,l.lengthUnit,"cm")),height:Math.round((0,Gs.L)(l.height,l.lengthUnit,"cm")),weight:(0,Gs.L)(l.weight,l.weightUnit,"kg")})}),[l,d,n.customParcels]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(we.Z,{children:(0,u.jsxs)(Me.Z,{children:[(0,u.jsx)(E.Dx,{children:(0,u.jsx)(K.Z,{id:"welcome.setup.package.title",defaultMessage:"Fast as the wind"})}),(0,u.jsx)("p",{children:(0,u.jsx)(K.Z,{id:"welcome.setup.package.description",defaultMessage:"isendu frees you from all those boring repetitive tasks. For example, you can <create></create>. Plus what type of parcels do you ship most often? isendu remembers this and suggests the right size packaging for you.",values:{create:()=>(0,u.jsx)("strong",{children:(0,u.jsx)(K.Z,{id:"welcome.setup.package.description.tag.create",defaultMessage:"create shipping labels with one click"})})}})}),(0,u.jsxs)(Nt.Z,{form:d,requiredMark:!1,layout:"vertical",onFinish:async e=>{o(!0);const s=(e=>({name:e.name,length:e.length,width:e.width,height:e.height,weight:e.weight,lengthUnit:te.LengthUnits.CM,weightUnit:te.WeightUnits.KG,isDefault:!0,isWeightDynamic:!1}))(e);try{l?await n.editParcel(Number(l.id),s):await n.addParcel(s),o(!1),t()}catch(e){o(!1),B.T.error({message:(0,u.jsx)(K.Z,{id:"welcome.setup.package.error",defaultMessage:"An error occured. Please retry"})})}},children:[gs("name",c.formatMessage(Bs.formTemplate),(0,u.jsx)(_t.default,{placeholder:c.formatMessage(Bs.formNamePlaceholder)})),(0,u.jsxs)(we.Z,{gutter:8,children:[(0,u.jsx)(Me.Z,{span:6,children:gs("width",c.formatMessage(Bs.formWidth),(0,u.jsx)(_t.default,{placeholder:"45",type:"number",min:1}))}),(0,u.jsx)(Me.Z,{span:6,children:gs("length",c.formatMessage(Bs.formLength),(0,u.jsx)(_t.default,{placeholder:"25",type:"number",min:1}))}),(0,u.jsx)(Me.Z,{span:6,children:gs("height",c.formatMessage(Bs.formHeight),(0,u.jsx)(_t.default,{placeholder:"20",type:"number",min:1}))}),(0,u.jsx)(Me.Z,{span:6,children:gs("weight",c.formatMessage(Bs.formWeight),(0,u.jsx)(_t.default,{placeholder:"5",type:"number",min:.1,step:.1}))})]}),(0,u.jsxs)(we.Z,{gutter:8,children:[(0,u.jsx)(Me.Z,{children:(0,u.jsx)(Nt.Z.Item,{children:(0,u.jsx)(q.Z,{className:"back-button",onClick:()=>s(),children:c.formatMessage(fs.Z.genericBack)})})}),(0,u.jsx)(Me.Z,{children:(0,u.jsx)(Nt.Z.Item,{shouldUpdate:!0,children:()=>(0,u.jsx)(q.Z,{"data-testid":"submit",type:"primary",htmlType:"submit",loading:a,disabled:!d.isFieldsTouched(!0)||!!d.getFieldsError().filter((e=>{let{errors:t}=e;return t.length})).length,className:"continue-button",children:(0,u.jsx)(K.Z,{id:"welcome.setup.package.button.continue",defaultMessage:"Continue"})})})})]})]},l&&l.id)]})}),(0,u.jsx)(we.Z,{children:(0,u.jsx)(Me.Z,{children:(0,u.jsx)(ys,{onSkip:r})})})]})}));const zs=[E.Zw,E.eU,E.rz,E.Tp],Ws=()=>{const[e,t]=(0,f.useState)(0);return us({col1Children:(0,u.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,u.jsxs)(we.Z,{justify:"center",align:"middle",children:[(0,u.jsx)(Me.Z,{span:2,children:(0,u.jsxs)(kt.default,{progressDot:!0,direction:"vertical",size:"small",current:e,children:[(0,u.jsx)(kt.default.Step,{}),(0,u.jsx)(kt.default.Step,{}),(0,u.jsx)(kt.default.Step,{}),(0,u.jsx)(kt.default.Step,{})]})}),(0,u.jsxs)(Me.Z,{span:16,children:[0===e&&(0,u.jsx)(js,{onNext:()=>t(1)}),1===e&&(0,u.jsx)(xs,{onNext:()=>t(2),onBack:()=>t(0),onSkip:()=>t(2)}),2===e&&(0,u.jsx)($s,{onNext:()=>t(3),onBack:()=>t(1),onSkip:()=>t(3)}),3===e&&(0,u.jsx)(Us,{onBack:()=>t(2)})]})]})}),col2Children:(0,u.jsx)(u.Fragment,{children:zs.map(((t,s)=>((e,t,s)=>(0,u.jsx)(we.Z,{style:{position:"absolute",top:0,left:0,right:0,height:"100%",backgroundImage:`url(${e})`,backgroundPosition:"bottom",backgroundSize:"cover",zIndex:t===s?0:-1},children:(0,u.jsxs)(Me.Z,{span:24,children:[(0,u.jsx)(we.Z,{style:{height:"100px"}}),(0,u.jsx)(we.Z,{children:(0,u.jsx)(Me.Z,{span:4,offset:18,children:(0,u.jsx)(E.TR,{dark:!0})})})]})},t))(t,s,e)))})})};var Hs=s(64937);const Vs=e=>(0,u.jsx)(f.Suspense,{fallback:(0,u.jsx)("div",{children:"Loading..."}),children:e.children});const qs=(0,f.lazy)((()=>s.e(9808).then(s.bind(s,19808)))),Ys=[{path:"users/emulate/:id",element:(0,u.jsx)(Vs,{children:(0,u.jsx)(qs,{})})}];const Ks=(0,f.lazy)((()=>s.e(6386).then(s.bind(s,86386)))),Xs=(0,f.lazy)((()=>s.e(190).then(s.bind(s,80190)))),Qs=(0,f.lazy)((()=>s.e(3864).then(s.bind(s,63864)))),Js=(0,f.lazy)((()=>s.e(7059).then(s.bind(s,17059)))),er=[{path:"auth/*",element:(0,u.jsx)(P.Fg,{to:I.H.auth.login})},{path:I.H.auth.login,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Ks,{})})},{path:I.H.auth.consent,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Xs,{})})},{path:I.H.auth.passwordReset,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Qs,{})})},{path:I.H.auth.passwordResetToken,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Js,{})})}],tr=()=>{const e=new URLSearchParams((0,P.TH)().search),t=localStorage.getItem("env"),s=null==e?void 0:e.get("amazon_callback_uri"),r=null==e?void 0:e.get("amazon_state"),a=null==e?void 0:e.get("selling_partner_id"),i=null==e?void 0:e.get("version");if(t&&"prod"!==t)return localStorage.removeItem("env"),window.location.href=`https://app2-${t}.isendu.com/amazon/intercept?amazon_callback_uri=${s}&amazon_state=${r}&selling_partner_id=${a}${i&&"beta"===i?"&version=beta":""}`,(0,u.jsx)(u.Fragment,{});if(s&&r&&a){const e=`${Math.random()}`;localStorage.setItem(k._.amazonOauthState,e);const t=`${decodeURIComponent(s)}?redirect_uri=${encodeURIComponent("https://app.isendu.com/amazon/token")}&amazon_state=${r}&state=${e}${i&&"beta"===i?"&version=beta":""}`;window.location.href=t}return(0,u.jsx)(u.Fragment,{})},sr=()=>{const{env:e}=(0,P.UO)();return localStorage.setItem("env",e||""),window.location.href="https://sellercentral.amazon.it/partnernetwork/dp/amzn1.sp.solution.f865443f-44f4-4e42-a40e-d425c8dcfa57",(0,u.jsx)(u.Fragment,{})};var rr=s(60843),ar=s(7586);const ir=()=>{const e=new URLSearchParams((0,P.TH)().search);if((null==e?void 0:e.get("state"))!==localStorage.getItem(k._.amazonOauthState))return(0,u.jsx)(u.Fragment,{children:"Invalid state error. Try again"});const t={selling_partner_id:null==e?void 0:e.get("selling_partner_id"),spapi_oauth_code:null==e?void 0:e.get("spapi_oauth_code"),country:localStorage.getItem(k._.amazonCountry),customName:localStorage.getItem(k._.amazonCustomName)||""},s=Object.entries(t).map((e=>{let[t,s]=e;return t+"="+s})).join("&");let r;switch(localStorage.getItem(k._.amazonOauthFlow)){case k._.amazonOauthFlowCarrier:r=`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_CARRIERS_OAUTH}/${rr._.AMAZON}/connect?${s}`;break;case k._.amazonOauthFlowMerchant:r=`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_CARRIERS_OAUTH}/${rr._.AMAZON_MERCHANT_FULFILLMENT}/connect?${s}`;break;default:r=`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_STORES}/${ar.k.AMAZON}/connect?${s}`}return localStorage.setItem(k._.redirectAfterLogin,r),window.location.href=`https://app.isendu.com${r}`,(0,u.jsx)(u.Fragment,{})},or=()=>{const e=new URLSearchParams((0,P.TH)().search),t=localStorage.getItem("env"),s=null==e?void 0:e.get("shop"),r=null==e?void 0:e.get("timestamp"),a=null==e?void 0:e.get("hmac");if(t&&"prod"!==t)return localStorage.removeItem("env"),window.location.href=`https://app2-${t}.isendu.com/shopify/intercept?hmac=${a}&shop=${s}&timestamp=${r}`,(0,u.jsx)(u.Fragment,{});if(s){const e=`https://${s}/admin/oauth/authorize?client_id=bec46d93483d1ceafde355420dd3109e&scope=write_products,read_products,read_customers,read_orders,write_orders,read_inventory,write_inventory,read_fulfillments,write_fulfillments,read_shipping,write_shipping,read_price_rules,read_locales,read_assigned_fulfillment_orders,write_assigned_fulfillment_orders,read_merchant_managed_fulfillment_orders,write_merchant_managed_fulfillment_orders,read_third_party_fulfillment_orders,write_third_party_fulfillment_orders&redirect_uri=${encodeURIComponent("https://app.isendu.com/shopify/token")}&state=${Math.random()}`;window.location.href=e}return(0,u.jsx)(u.Fragment,{})},nr=()=>{const{env:e}=(0,P.UO)();return localStorage.setItem("env",e||""),window.location.href="https://apps.shopify.com/isendu",(0,u.jsx)(u.Fragment,{})},lr=()=>{const e=new URLSearchParams((0,P.TH)().search),t={shop:null==e?void 0:e.get("shop"),timestamp:null==e?void 0:e.get("timestamp"),hmac:null==e?void 0:e.get("hmac"),code:null==e?void 0:e.get("code"),state:null==e?void 0:e.get("state")},s=Object.entries(t).map((e=>{let[t,s]=e;return t+"="+s})).join("&"),r=`/integrations/stores/${te.availableStores.shopify_V2.internalCode}/connect?${s}`;return localStorage.setItem(k._.redirectAfterLogin,r),window.location.href=`https://app.isendu.com${r}`,(0,u.jsx)(u.Fragment,{})};var dr=s(25108);const cr=function(){const{appsStore:e}=(0,i.o)(),t=(0,P.s0)(),s=(0,f.useCallback)(((t,s)=>{try{const r={appName:"trustpilot",requestData:{authorizationCode:t,uuid:s}};e.authorizeApp(r)}catch(e){dr.error(e)}}),[e]);return(0,f.useEffect)((()=>{const e=new URLSearchParams(location.search),r=null==e?void 0:e.get("code"),a=localStorage.getItem("trustpilotAppId");localStorage.removeItem("trustpilotAppId"),r&&a&&s(r,a),t(`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_APPS}`)}),[e,s,t]),(0,u.jsx)(u.Fragment,{children:"Configuring Trustpilot account..."})};var pr=s(25108);const ur=()=>{const{carriersStore:e}=(0,i.o)(),t=(0,v.Z)(),s=(0,P.s0)(),r=(0,P.TH)();return(0,f.useEffect)((()=>{const a=new URLSearchParams(r.search),i=null==a?void 0:a.get("code"),o=localStorage.getItem(k._.upsAccountNumber),n=localStorage.getItem(k._.upsOauthFlow),l=localStorage.getItem(k._.upsIntegrationId),d=localStorage.getItem(k._.upsRegistrationId);if(localStorage.removeItem(k._.requestedOauth),localStorage.removeItem(k._.upsAccountNumber),localStorage.removeItem(k._.upsOauthFlow),localStorage.removeItem(k._.upsIntegrationId),localStorage.removeItem(k._.upsRegistrationId),n&&i)switch(n){case k._.upsSetupOauthFlow:const r={credentials:{accountNumber:o,clientAuthentication:{grantType:"authorization_code",authorizationCode:i}},internalCode:"ISU-IC23",serviceCodes:["-"]};e.addSelectedCarrier(r).then((e=>{s(`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_CARRIERS}?openUpsIsenduIntegration=${e.id}`)})).catch((e=>{pr.error(e),s(`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_CARRIERS}`),B.T.error(t.formatMessage({id:"carriersList.step.two.ups.connectionError",defaultMessage:"Connection Error"}))}));break;case k._.upsRefreshTokenFlow:if(!l)return pr.error("upsIntegrationId is missing"),s(`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_CARRIERS}`);e.upsRefreshToken(l,i).then((()=>{s(`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_CARRIERS}?openUpsIsenduIntegration=${l}`)}));break;case k._.upsRegisterOauthFlow:if(!d)return pr.error("upsRegistrationId is missing"),s(`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_CARRIERS}`);e.upsOpenAccount(d,i).then((()=>{s(`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_CARRIERS}?openUpsIsenduIntegration=${l}`)})).catch((e=>{pr.error(e),s(`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_CARRIERS}?openUpsIsenduIntegration=${l}`)}))}else s(`/${I.k.INTEGRATIONS}/${I.k.INTEGRATIONS_CARRIERS}`)}),[]),(0,u.jsx)(u.Fragment,{children:"Configuring UPS account..."})},hr=()=>{const e=new URLSearchParams((0,P.TH)().search),t={instanceId:null==e?void 0:e.get("instanceId"),code:null==e?void 0:e.get("code")},s=Object.entries(t).map((e=>{let[t,s]=e;return t+"="+s})).join("&"),r=`/integrations/stores/${te.availableStores.wix.internalCode}/connect?${s}`;return localStorage.setItem(k._.redirectAfterLogin,r),window.location.href=`https://app.isendu.com${r}`,(0,u.jsx)(u.Fragment,{})};const mr=[{path:"/shopify/:env",element:(0,u.jsx)(nr,{})},{path:"/shopify/intercept",element:(0,u.jsx)(or,{})},{path:"/shopify/token",element:(0,u.jsx)(lr,{})},{path:"/amazon/:env",element:(0,u.jsx)(sr,{})},{path:"/amazon/intercept",element:(0,u.jsx)(tr,{})},{path:"/amazon/token",element:(0,u.jsx)(ir,{})},{path:"/ups/intercept",element:(0,u.jsx)(ur,{})},{path:"/wix/token",element:(0,u.jsx)(hr,{})},{path:"/trustpilot/intercept",element:(0,u.jsx)(cr,{})}];const gr=(0,f.lazy)((()=>Promise.all([s.e(8446),s.e(4328),s.e(845),s.e(178)]).then(s.bind(s,90178)))),yr=[{path:`/${I.H.contactlist.root}`,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(gr,{})})}];const fr=(0,f.lazy)((()=>Promise.all([s.e(8446),s.e(4328),s.e(845),s.e(9366),s.e(5986),s.e(4),s.e(7856),s.e(9305),s.e(7763),s.e(4233),s.e(6092),s.e(2235),s.e(4922),s.e(9194)]).then(s.bind(s,98274)))),br=[{path:`/${I.H.conversations.root}`,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(fr,{})})},{path:"*",element:(0,u.jsx)(P.Fg,{to:`/${I.H.conversations.root}`})}];var vr,xr,Sr=s(273),jr=s(1870),wr=s(8812),Mr=s(43269),Cr=s(53229);const Ar=new(vr=class{openDrawer(){this.isDrawerOpen=!0}closeDrawer(){this.isDrawerOpen=!1}constructor(){(0,Mr.Z)(this,"isDrawerOpen",xr,this),(0,a.rC)(this)}},xr=(0,Cr.Z)(vr.prototype,"isDrawerOpen",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,Cr.Z)(vr.prototype,"openDrawer",[a.aD],Object.getOwnPropertyDescriptor(vr.prototype,"openDrawer"),vr.prototype),(0,Cr.Z)(vr.prototype,"closeDrawer",[a.aD],Object.getOwnPropertyDescriptor(vr.prototype,"closeDrawer"),vr.prototype),vr);const Tr=(0,n.Pi)((function(){return(0,u.jsxs)("div",{className:"MarketsHelp",children:[(0,u.jsx)("div",{className:"MarketsHelp__Title",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.markets.storeIntegration.title",defaultMessage:"How do I integrate a store?"})}),(0,u.jsx)("div",{className:"MarketsHelp__Description",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.markets.storeIntegration.description",defaultMessage:"Integrating your store is very simple. Just click on the 'Connect Store' button at the top right, choose your store, and follow the instructions. The data to be entered varies greatly depending on the store. For more information, please refer to our online guide."})}),(0,u.jsx)("div",{className:"MarketsHelp__Title",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.markets.whyIntegrate.title",defaultMessage:"Why integrate a store?"})}),(0,u.jsx)("div",{className:"MarketsHelp__Description",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.markets.whyIntegrate.description",defaultMessage:"By integrating your store, all orders from your e-commerce will automatically appear on the orders page of isendu, where you can manage them with a single click."})})]})}));const Or=(0,y.Pi)((function(){const e=(0,P.s0)();return(0,u.jsxs)("div",{className:"OrdersHelp",children:[(0,u.jsx)("div",{className:"OrdersHelp__Title",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.orders.shippingCreation.title",defaultMessage:"How do I create a shipment?"})}),(0,u.jsx)("div",{className:"OrdersHelp__Description",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.orders.shippingCreation.description",defaultMessage:"Once you have imported the order, you can create the shipping label, but first you need to add the package and the carrier. By using automation rules and preferences in the settings section, you can automatically include these elements in orders that enter isendu."})}),(0,u.jsx)(q.Z,{onClick:()=>function(e){e("/automation/orders")}(e),className:"OrdersHelp__Button",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.orders.goToAutomationButton",defaultMessage:"Go to Automation Rules"})}),(0,u.jsx)("div",{className:"OrdersHelp__Title",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.orders.manualOrder.title",defaultMessage:"What is a manual order?"})}),(0,u.jsx)("div",{className:"OrdersHelp__Description",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.orders.manualOrder.description",defaultMessage:"If you need to manage an order that cannot be imported, you can manually enter it by clicking the 'New Order' button in the top right corner."})}),(0,u.jsx)("div",{className:"OrdersHelp__Title",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.orders.orderSummary.title",defaultMessage:"What is an order summary?"})}),(0,u.jsx)("div",{className:"OrdersHelp__Description",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.orders.orderSummary.description",defaultMessage:"By printing the order summary, you will have a document with all the information related to the selected order, such as recipient, package, carrier, product list, etc."})}),(0,u.jsx)("div",{className:"OrdersHelp__Title",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.orders.pickingList.title",defaultMessage:"What is a picking list?"})}),(0,u.jsx)("div",{className:"OrdersHelp__Description",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.orders.pickingList.description",defaultMessage:"The picking list can be generated per order or per product, and it is a document specifically created to improve your logistics flow of package creation. Inside, you will find the list of products to be included in the various packages related to the selected orders."})}),(0,u.jsx)("div",{className:"OrdersHelp__Title",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.orders.manifest.title",defaultMessage:"What is a Manifest?"})}),(0,u.jsx)("div",{className:"OrdersHelp__Description",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.orders.manifest.description",defaultMessage:"The manifest is the document that summarizes the labels of the day, which should be handed over to the courier at the time of package pickup."})})]})}));const Pr=(0,n.Pi)((function(){return(0,u.jsxs)("div",{className:"CarriersHelp",children:[(0,u.jsx)("div",{className:"CarriersHelp__Title",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.carriers.carrierIntegration.title",defaultMessage:"How do I integrate a carrier?"})}),(0,u.jsx)("div",{className:"CarriersHelp__Description",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.carriers.carrierIntegration.description",defaultMessage:"To integrate your carrier, simply click on the 'Connect Carrier' button at the top right, choose your carrier, and follow the instructions. The data to be entered varies greatly depending on the carrier. For more information, click on the 'Learn More' button."})}),(0,u.jsx)("div",{className:"CarriersHelp__Title",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.carriers.whyIntegrate.title",defaultMessage:"Why integrate a carrier?"})}),(0,u.jsx)("div",{className:"CarriersHelp__Description",children:(0,u.jsx)(K.Z,{id:"helpInPage.template.carriers.whyIntegrate.description",defaultMessage:"By integrating your carrier, you can compare prices for each shipment and create your labels with a single click. You can also use advanced features such as isendu integration with Zebra printers."})})]})}));const Nr={orders:(0,u.jsx)(Or,{}),markets:(0,u.jsx)(Tr,{}),carriers:(0,u.jsx)(Pr,{})};const _r=(0,y.Pi)((function(e){const{code:t}=e,s=(0,P.TH)();return(0,f.useEffect)((()=>{Ar.closeDrawer()}),[s]),(0,u.jsxs)(u.Fragment,{children:[!Ar.isDrawerOpen&&(0,u.jsx)("div",{className:"InPageHelpDrawerOpenButton",onClick:()=>Ar.openDrawer(),children:(0,u.jsx)(jr.Z,{})}),(0,u.jsxs)(Sr.Z,{title:(0,u.jsx)("div",{className:"InPageHelpDrawer__Title",children:(0,u.jsx)(K.Z,{id:"inPageHelpDrawer.title",defaultMessage:"Help in page"})}),className:"InPageHelpDrawer",height:"100%",destroyOnClose:!0,onClose:()=>Ar.closeDrawer(),closable:!0,width:430,placement:"right",open:Ar.isDrawerOpen,children:[Ar.isDrawerOpen&&(0,u.jsx)("div",{className:"InPageHelpDrawer__CloseDrawerButton",onClick:()=>Ar.closeDrawer(),children:(0,u.jsx)(wr.Z,{})}),Nr[t]]})]})}));const Zr=(0,y.Pi)((function(e){const{children:t,code:s}=e;return(0,u.jsxs)(u.Fragment,{children:[t,(0,u.jsx)(_r,{code:s})]})}));const Ir=(0,f.lazy)((()=>s.e(9982).then(s.bind(s,49982)))),Dr=(0,f.lazy)((()=>Promise.all([s.e(8446),s.e(4328),s.e(845),s.e(5986),s.e(2069),s.e(9369)]).then(s.bind(s,29369)))),Er=(0,f.lazy)((()=>s.e(3666).then(s.bind(s,23666)))),kr=(0,f.lazy)((()=>s.e(9543).then(s.bind(s,49543)))),Lr=(0,f.lazy)((()=>s.e(9657).then(s.bind(s,49657)))),Rr=(0,f.lazy)((()=>s.e(9703).then(s.bind(s,79703)))),Fr=[{path:I.H.integrations.markets.root,element:(0,u.jsx)(Zr,{code:"markets",children:(0,u.jsx)(Vs,{children:(0,u.jsx)(Ir,{})})})},{path:I.H.integrations.carriers.root,element:(0,u.jsx)(Zr,{code:"carriers",children:(0,u.jsx)(Vs,{children:(0,u.jsx)(Dr,{})})})},{path:I.H.integrations.carriers.oauthSubPath,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Lr,{})})},{path:I.H.integrations.publicApi.root,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Er,{})})},{path:I.H.integrations.markets.oauthSubPath,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(kr,{})})},{path:I.H.integrations.apps.root,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Rr,{})})},{path:"*",element:(0,u.jsx)(P.Fg,{to:I.H.integrations.markets.root})}];const Ur=(0,f.lazy)((()=>Promise.all([s.e(8446),s.e(9366),s.e(7856),s.e(289),s.e(2969),s.e(1968)]).then(s.bind(s,31968)))),Gr=(0,f.lazy)((()=>Promise.all([s.e(9466),s.e(5778)]).then(s.bind(s,85778)))),Br=[{path:I.H.marketing.root,element:(0,u.jsx)(P.Fg,{to:I.H.marketing.email})},{path:I.H.marketing.email,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Ur,{})})},{path:I.H.marketing.whatsapp,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Gr,{})})}];const $r=(0,f.lazy)((()=>s.e(8401).then(s.bind(s,88401)))),zr=(0,f.lazy)((()=>Promise.all([s.e(5986),s.e(6092),s.e(3869)]).then(s.bind(s,41479)))),Wr=(0,f.lazy)((()=>s.e(3834).then(s.bind(s,43834)))),Hr=(0,f.lazy)((()=>Promise.all([s.e(8446),s.e(4328),s.e(845),s.e(7763),s.e(488)]).then(s.bind(s,60488)))),Vr=(0,f.lazy)((()=>Promise.all([s.e(9366),s.e(289),s.e(8218)]).then(s.bind(s,58218)))),qr=(0,f.lazy)((()=>s.e(9160).then(s.bind(s,29160)))),Yr=(0,f.lazy)((()=>s.e(5588).then(s.bind(s,45588)))),Kr=(0,f.lazy)((()=>Promise.all([s.e(9366),s.e(289),s.e(6584)]).then(s.bind(s,36584)))),Xr=[{path:I.H.settings.root,element:(0,u.jsx)(P.Fg,{to:I.H.settings.account})},{path:"account",element:(0,u.jsx)(Vs,{children:(0,u.jsx)($r,{})})},{path:"whatsapp",element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Kr,{})})},{path:"company",element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Vr,{})})},{path:"preferences",element:(0,u.jsx)(Vs,{children:(0,u.jsx)(zr,{})})},{path:"zebra",element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Wr,{})})},{path:"subscriptions",element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Yr,{})})},{path:"billings",element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Hr,{})})},{path:"addresses",element:(0,u.jsx)(Vs,{children:(0,u.jsx)(qr,{})})}];const Qr=(0,f.lazy)((()=>Promise.all([s.e(8446),s.e(4328),s.e(845),s.e(9366),s.e(5986),s.e(4),s.e(7856),s.e(4680),s.e(4233),s.e(1533),s.e(6092),s.e(2235),s.e(4922),s.e(3815),s.e(6665)]).then(s.bind(s,26220)))),Jr=(0,f.lazy)((()=>Promise.all([s.e(8446),s.e(4328),s.e(845),s.e(4),s.e(6092),s.e(2235),s.e(3815),s.e(4404)]).then(s.bind(s,14620)))),ea=(0,f.lazy)((()=>Promise.all([s.e(8446),s.e(4328),s.e(845),s.e(4),s.e(3767)]).then(s.bind(s,38820)))),ta=[{path:I.H.shipments.root,element:(0,u.jsx)(P.Fg,{to:I.H.shipments.orders})},{path:`${I.H.shipments.orders}/*`,element:(0,u.jsx)(Zr,{code:"orders",children:(0,u.jsx)(Vs,{children:(0,u.jsx)(Qr,{})})})},{path:`${I.H.shipments.pickups}/*`,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(Jr,{})})},{path:I.H.shipments.returns,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(ea,{})})},{path:"*",element:(0,u.jsx)(P.Fg,{to:I.H.shipments.orders})}];var sa=s(58576);const ra=(0,Ae.vU)({shipmentSuccess:{id:"websocket.shipmentSuccess",defaultMessage:"Label generated correctly"},shipmentSuccessMulti:{id:"websocket.shipmentSuccessMulti",defaultMessage:"{n} labels generated correctly"},shipmentError:{id:"websocket.shipmentError",defaultMessage:"Error generating label"},shipmentErrorMulti:{id:"websocket.shipmentErrorMulti",defaultMessage:"{n} labels not generated"},codRequired:{id:"addons.panel.codRequired",defaultMessage:"Must be a positive number"},newOrder:{id:"websocket.newOrder",defaultMessage:"New order {id} from {storeName}"},returnShipmentSuccessMessage:{id:"websocket.returnShipmentSuccess.message",defaultMessage:"Return successfully created"},returnShipmentSuccessDescription:{id:"websocket.returnShipmentSuccess.description",defaultMessage:"Please find all details in the Returns page > tab Generated Label"},walletRecharge:{id:"websocket.walletRecharge",defaultMessage:"Wallet recharged of {amount}"}});var aa,ia,oa,na=function(e){return e.ReturnShipmentSuccess="return_shipment_success",e.ReturnShipmentError="return_shipment_error",e.WhatsappNewMessage="whatsapp_new_message",e.ShipmentSuccess="shipment_success",e.ShipmentError="shipment_error",e.NewOrder="new_order",e}(na||{});let la=(aa=class{notifyShipmentErrors(e){1===e?B.T.error(this.intl.formatMessage(ra.shipmentError)):B.T.error(this.intl.formatMessage(ra.shipmentErrorMulti,{n:e}))}notifyShipmentSuccess(e,t){1===e?B.T.template("GENERATED_LABEL",{order:t[0]}):B.T.template("GENERATED_LABELS",{orders:t})}notifyReturnShipmentSuccess(){B.T.template("CREATED_RETURN")}notifyNewWhatsappMessage(){var e;this.rootstore.conversationsStore.addConversationUnseenMessage(),null!==(e=this.rootstore.companiesStore.companyInfo)&&void 0!==e&&e.showNewMessagesNotifications&&(this.isConversationPage||B.T.template("NEW_WHATSAPP_MESSAGE"))}notifyReturnShipmentSuccesses(){B.T.template("CREATED_RETURN")}setIsConversationPage(e){this.isConversationPage=e}handleShipmentUpdateMessage(e){(0,sa.$H)(e.message).forEach((t=>{var s,r;const a=this.rootstore.ordersStore.orders.get(t)||((null===(s=this.rootstore.ordersStore.selectedOrder)||void 0===s||null===(r=s.order)||void 0===r?void 0:r.id)===t?this.rootstore.ordersStore.selectedOrder:null);if(!a)return;const i=this.rootstore.shipmentsStore.shipmentsCount;this.handledShipmentOrders.push(a),this.handledShipmentOrders.length===i&&(e.type===na.ShipmentSuccess?this.notifyShipmentSuccess(this.handledShipmentOrders.length,this.handledShipmentOrders):this.notifyShipmentErrors(this.handledShipmentOrders.length),this.handledShipmentOrders=[])}))}notifyNewOrder(e){(0,sa.$H)(e.message).forEach((e=>{var t,s,r,a;const i=this.rootstore.ordersStore.orders.get(e)||((null===(t=this.rootstore.ordersStore.selectedOrder)||void 0===t||null===(s=t.order)||void 0===s?void 0:s.id)===e?this.rootstore.ordersStore.selectedOrder:null);if(!i||null===(r=this.rootstore.companiesStore.companyInfo)||void 0===r||!r.showNewOrdersNotifications)return;const o=this.rootstore.marketplacesStore.selectedMarketplacesArray.find((e=>e.id===i.order.selectedStoreId)),n=(null==o?void 0:o.customName)||(null==o||null===(a=o.store)||void 0===a?void 0:a.name);n&&B.T.template("NEW_ORDER",{orderId:i.order.id,storeName:n,storeOrderId:i.order.storeOrderId})}))}handleNewMessage(){const e=this.rootstore.websocketStore.popMessage();if(e)switch(e.type){case na.ReturnShipmentSuccess:return this.notifyReturnShipmentSuccesses();case na.ReturnShipmentError:return this.notifyShipmentErrors(1);case na.WhatsappNewMessage:return this.notifyNewWhatsappMessage();case na.ShipmentSuccess:case na.ShipmentError:return this.handleShipmentUpdateMessage(e);case na.NewOrder:return this.notifyNewOrder(e)}}constructor(e,t){(0,Mr.Z)(this,"isConversationPage",ia,this),(0,Mr.Z)(this,"handledShipmentOrders",oa,this),this.rootstore=e,this.intl=t,(0,a.rC)(this)}},ia=(0,Cr.Z)(aa.prototype,"isConversationPage",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oa=(0,Cr.Z)(aa.prototype,"handledShipmentOrders",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,Cr.Z)(aa.prototype,"setIsConversationPage",[a.aD],Object.getOwnPropertyDescriptor(aa.prototype,"setIsConversationPage"),aa.prototype),(0,Cr.Z)(aa.prototype,"handleShipmentUpdateMessage",[a.aD],Object.getOwnPropertyDescriptor(aa.prototype,"handleShipmentUpdateMessage"),aa.prototype),(0,Cr.Z)(aa.prototype,"notifyNewOrder",[a.aD],Object.getOwnPropertyDescriptor(aa.prototype,"notifyNewOrder"),aa.prototype),aa);const da=(0,y.Pi)((function(){const{rootStore:e}=(0,i.o)(),t=(0,P.bS)("/conversations"),s=(0,v.Z)(),r=(0,f.useRef)();return(0,f.useEffect)((()=>{s&&e&&(r.current=new la(e,s))}),[e,s,t]),(0,f.useEffect)((()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.setIsConversationPage(!!t)}),[t]),(0,f.useEffect)((()=>{var t;e.websocketStore.messages.length&&(null===(t=r.current)||void 0===t||t.handleNewMessage())}),[e.websocketStore.messages.length]),null}));const ca=(0,f.memo)((()=>(0,u.jsx)("div",{className:"Settings",children:(0,u.jsx)("div",{className:"Settings__Container",children:(0,u.jsx)(P.j3,{})})})));const pa=(0,f.lazy)((()=>Promise.all([s.e(4328),s.e(5986),s.e(4680),s.e(6382),s.e(3102)]).then(s.bind(s,93102)))),ua=(0,f.lazy)((()=>Promise.all([s.e(8446),s.e(9366),s.e(7856),s.e(2969),s.e(9305),s.e(2673),s.e(3442)]).then(s.bind(s,13442)))),ha=[{path:I.H.automation.root,element:(0,u.jsx)(P.Fg,{to:`/${I.H.automation.root}/${I.H.automation.orders}`})},{path:`/${I.H.automation.root}/${I.H.automation.orders}`,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(pa,{})})},{path:`/${I.H.automation.root}/${I.H.automation.transactionalWhatsapp}`,element:(0,u.jsx)(Vs,{children:(0,u.jsx)(ua,{})})}];const ma=(0,Pe.aj)([{path:"/",element:(0,u.jsxs)(z,{children:[(0,u.jsx)(Hs.Ix,{className:"toast__container"}),(0,u.jsx)(da,{}),(0,u.jsx)(D,{})]}),children:[{path:"/",element:(0,u.jsx)(Pt,{}),errorElement:(0,u.jsx)(Pt,{isErrorPage:!0}),children:[{path:"/",element:(0,u.jsx)(P.Fg,{to:I.H.shipments.root})},{path:`${I.H.shipments.rootAbsolute}/*`,children:ta},{path:`${I.H.conversations.root}`,children:br},{path:`${I.H.integrations.rootAbsolute}/*`,children:Fr},{path:`${I.H.settings.rootAbsolute}/*`,element:(0,u.jsx)(ca,{}),children:Xr},{path:`${I.H.contactlist.root}`,children:yr},{path:`${I.H.automation.root}/`,children:ha},{path:`${I.H.marketing.rootAbsolute}/*`,children:Br},{path:"/*",element:(0,u.jsx)(P.Fg,{to:I.H.shipments.root})}]}],errorElement:(0,u.jsx)("div",{children:"Error"})},{path:"/",element:(0,u.jsx)(N,{}),children:[{path:`${I.H.admin.rootAbsolute}/*`,children:Ys},{path:`${I.H.auth.rootAbsolute}/*`,children:er},...mr,{path:"/welcome/:token",element:(0,u.jsx)(hs,{})},{path:"/selfonboarding/create-password",element:(0,u.jsx)(Et,{})},{path:"/selfonboarding/setup",element:(0,u.jsx)(is,{})},{path:"/welcome/settings/setup",element:(0,u.jsx)(Ws,{})}]}]);var ga=s(25108);const ya=["mousemove","keypress","mousedown","touchstart","click","scroll","keypress"];function fa(e){const{onInactivity:t,triggerAfterMs:s,dependencies:r=[],shouldActivate:a=(()=>!0)}=e,i=(0,f.useRef)(),o=(0,f.useCallback)((()=>{i.current&&clearTimeout(i.current),i.current=setTimeout(t,s)}),[t,s]),n=(0,f.useMemo)((()=>function(e){let t,s,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){const i=this,o=arguments;t?(clearTimeout(s),s=setTimeout((()=>{Date.now()-r>=a&&(e.apply(i,o),r=Date.now())}),Math.max(a-(Date.now()-r),0))):(e.apply(i,o),r=Date.now(),t=!0)}}(o,1e3)),[o]),l=(0,f.useCallback)((()=>{for(const e of ya)document.addEventListener(e,n)}),[n]),d=(0,f.useCallback)((()=>{for(const e of ya)document.removeEventListener(e,n)}),[n]);(0,f.useEffect)((()=>(a()&&(ga.log("listening to user inactivity"),l()),()=>{i.current&&(clearTimeout(i.current),d())})),[...r,a,l,d])}window.location.href.indexOf("apps.isendu.com")>-1&&window.location.replace("https://app.isendu.com");const ba=(0,n.Pi)((()=>(fa({triggerAfterMs:6e5,onInactivity:()=>location.reload(),dependencies:[i.rootStore.appVersionChanged],shouldActivate:()=>i.rootStore.appVersionChanged}),(0,u.jsx)(m,{children:(0,u.jsxs)(T,{children:[(0,u.jsx)(d(),{url:"/assets/images/c4d1ffdec07f3fa73001c6b54991c919.ico"}),(0,u.jsx)(P.pG,{router:ma})]})}))));var va=s(6833),xa=s.n(va),Sa=s(96036),ja=s.n(Sa),wa=s(59542),Ma=s.n(wa);G().extend(xa()),G().extend(ja()),G().extend(Ma());let Ca={};if(window.location.href.indexOf("storeden")>-1){const e=window.location.href.split("?")[1].split("&"),t=[];e.map((e=>{t.push(e.split("=")[1])})),Ca={instance:t[0],key:t[1],exchange:t[2]},sessionStorage.setItem("storedenCredentials",JSON.stringify(Ca))}const Aa=document.getElementById("root");(0,r.s)(Aa).render((0,u.jsx)(ba,{}))},18077:(e,t,s)=>{"use strict";s.d(t,{Sl:()=>l,yL:()=>o});var r=s(52861),a=s(2452),i=s(25142);const o={GET:"get",POST:"post",PATCH:"patch",DELETE:"delete",PUT:"put"},n=r.Z.create({baseURL:i.vc.apiBaseUrl,timeout:i.vc.apiRequestTimeOut});class l{constructor(){this.api=(0,a.v8)(n,{storage:(0,a.ZF)(localStorage,"app-cache:"),cacheTakeover:!1})}async request(e){const t={isError:!1,statusCode:200,statusText:"",request:e},s={"Content-Type":"application/json",...e.customHeaders||{}};e.auth&&(s.Authorization=`Bearer ${e.auth.accessToken}`);try{let r;switch(e.method){default:case o.GET:r=await this.api.get(e.url,{cache:e.cache||!1,id:e.url,headers:s});break;case o.POST:r=await this.api.post(e.url,e.payload,{headers:s});break;case o.PATCH:r=await this.api.patch(e.url,e.payload,{headers:s});break;case o.PUT:r=await this.api.put(e.url,e.payload,{headers:s});break;case o.DELETE:r=await this.api.delete(e.url,{headers:s})}return t.statusCode=r.status,t.statusText=r.statusText,t.data=r.data.data,t.rawData=r.data,t}catch(e){return t.isError=!0,t.errorData=e,t.statusCode=e.response.status,t}}async invalidateCacheKey(e){await this.api.storage.remove(e)}}},25142:(e,t,s)=>{"use strict";s.d(t,{MF:()=>d,fr:()=>h,V2:()=>o,LH:()=>u,yZ:()=>i,vc:()=>r,G9:()=>p,Fd:()=>c});const r={logLevel:"debug",logMode:"browser",apiBaseUrl:"https://stormfront-api-prod.isendu.com",apiRequestTimeOut:Number("30000")||3e4};var a=s(51066);function i(e){const t={data:{},sorting:[]};return e&&e.forEach((e=>{t.data[String(e.id)]=e,t.sorting.push(String(e.id))})),t}const o=(e,t)=>{switch(e){case"delivered":return["delivered"];case"exception":return["exception"];case"generated_label":return["fulfilled","partially_fulfilled"];case"in_transit":return["in_transit"];case"incoming_orders":const e=["pending","generating_labels","error"];return t&&e.push("externally_handled"),e;case"misc":return[];default:const s=Object.values(a.OrderStatuses).filter((e=>"externally_handled"!==e));return t&&s.push("externally_handled"),s}};function n(e){return`/v1/${e}`}function l(e){return`/v2/${e}`}const d={carriers:{root:n("carriers"),availableCarriers:n("carriers/available_carriers")},selectedCarriers:n("selected_carriers"),customRates:{create:n("selected_carriers/custom_rates"),byCompany:n("selected_carriers/custom_rates/company")},selectedMarkets:n("selected_stores"),companies:{root:n("companies")},microservice:n("microservice"),parcels:{root:n("parcels")},addresses:{root:n("addresses"),autocomplete:n("addresses/autocomplete"),suggest:n("addresses/autocomplete/suggest")},orders:{root:n("orders"),bulkSave:n("orders/shipping_information/bulk"),printLabel:n("orders/labels/PDF"),printLabels:n("orders/print_labels"),printOrderSummary:n("orders/print_order_summary"),printZplLabels:n("orders/print_zebra"),bulkClose:n("orders/manual_close/bulk"),plsData:n("orders/pls"),plsPresignedUrlUpload:n("presignedurl/put"),plsPresignedUrlDownload:n("presignedurl/read"),plsPresignedUrlDelete:n("orders/pls"),availableOrderTags:l("orders/availableOrderTags"),addOrderTags:l("orders/addOrderTags"),removeOrdersTags:l("orders/removeOrderTags"),updateOrder:l("orders")},returns:{root:n("returns"),getById:n("returns/byId"),createSingleShipment:n("returns/createShipment/single"),getAllReturnsByStatus:n("returns/all/status"),pickup:n("returns/pickup"),sendEmailLabels:n("returns/send-email-labels")},pickups:{root:n("pickups")},rates:n("rates"),shipments:{root:l("shipments"),batchAsync:l("shipments/async/batch"),close:l("shipments/close"),getWaybill:l("shipments/waybill"),getShipmentReceipt:l("shipments/shipmentReceipt")},contacts:{root:n("contact_list"),search:n("contact_list/search")},users:{root:n("users"),customisations:n("users/customisations"),customFilter:n("users/customisations/customFilter")},auth:n("auth"),passwords:{reset:n("passwords/reset"),checkToken:n("passwords/check_token"),signup:n("passwords/signup")},admin:{users:n("admin/users"),companies:n("admin/companies"),emulateUser:n("admin/users/emulate"),emulateUserSignIn:n("admin/users/emulate/signin"),logs:n("admin/logs"),maintenance:n("admin/maintenance")},payment_subscriptions:{root:n("payment_subscriptions"),available_subscriptions:n("payment_subscriptions/available_subscriptions"),getAddonsByCompany:n("payment_subscriptions/addons/byCompany"),getShipmentCounter:n("payment_subscriptions/shipments_counter"),getAddonsWithInfo:n("payment_subscriptions/addons/info")},payment_methods:{root:l("payment_methods"),getType:l("payment_methods/type")},invoices:{root:l("invoices")},subscriptions:{root:n("subscriptions"),setup:n("subscriptions/setup"),plans:n("subscriptions/plans"),addons:n("subscriptions/addons"),createUpdatePlan:n("subscriptions/create_update/plans")},subscriptions_new:{getActivePlans:l("plansauth/getactiveplans"),getSubscriptions:l("plansauth/getcompanyvalidsubscriptions"),createSubscription:l("plansauth/createsubscription"),changeSubscription:l("plansauth/changesubscription"),cancelSubscription:l("plansauth/notrenewingsubscription"),reactivateSubscription:l("plansauth/reactivatesubscription"),getWhatsappTiers:l("plansauth/getpricetiers"),addWhatsappExpansion:l("plansauth/addwhatsappexpansion"),decreaseWhatsappExpansion:l("plansauth/decreasewhatsappexpansion"),cancelScheduledChange:l("plansauth/cancelscheduledchanges"),churnReason:l("subscriptions/churn/reason")},soap:{vies:n("soap/vies")},tracking_notifications:{root:n("tracking_notifications"),allSettings:n("tracking_notifications/all-settings"),companySettings:n("tracking_notifications/company-settings"),whatsapp:n("tracking_notifications/whatsapp"),status:n("tracking_notifications/status"),templates:n("tracking_notifications/templates"),preview:n("tracking_notifications/preview"),sendEmailPreview:n("tracking_notifications/send-email-preview"),whatsappTemplate:{getTemplatesStatus:n("tracking_notifications/whatsapp/templates-settings"),getTemplateByLanguage:n("tracking_notifications/whatsapp/template"),toggleTemplateStatus:n("tracking_notifications/whatsapp/enabled")}},automation_rules:{root:n("automation_rules")},delivery_estimates:{root:n("delivery_estimates")},self_onboarding:{root:n("signup")},wallet:{root:n("wallet"),transactions:n("wallet/transactions"),reports:n("wallet/get_reports"),recharge:n("wallet/recharge")},conversations:{getMaster:n("whatsapp_conversations/get/conversations/master"),beginConversation:n("whatsapp_conversations/begin/conversation"),deleteConversation:n("whatsapp_conversations/delete/conversation"),reply:n("whatsapp_conversations/send/reply"),getDetail:n("whatsapp_conversations/get/conversations/details"),getUnseenMessagesCount:n("whatsapp_conversations/unseen/messages/count")},conversations_new:{getConversationsByCompany:l("whatsapp/conversations/byCompany"),getChatById:l("whatsapp/conversations/byId"),searchByName:l("whatsapp/conversations/searchByName"),sendMessage:l("whatsapp/sendMessage"),beginConversation:l("whatsapp/beginConversation"),getUnseenMessagesCount:l("whatsapp/unseenChats/byCompany")},printers:{root:n("printers"),zebraPrinters:n("printers/zebra")},transactionalWhatsapp:{base:l("whatsapp/transactional"),getBeginConversationTemplates:l("whatsapp/transactional/templates/beginConversation"),restoreDefault:l("whatsapp"),getSignedUrl:l("whatsapp/signedurl"),integration:l("whatsapp/integration"),setFlowAbilitation:n("flowengine/setflowabilitation"),getUserCountryLanguages:n("flowengine/getcountrylangs"),setCountryLanguage:n("flowengine/setcountrylanguagebycompanyid"),toggleTemplateStatus:l("whatsapp/setflowabilitation"),userCountriesLanguages:l("whatsapp/user/countrieslanguages"),sendTemplatePreview:l("whatsapp/sendTemplatePreview"),addLanguageTemplates:l("whatsapp/transactional/addLanguage"),getCompanyData:l("whatsapp/integration/settings/byCompany"),updateCompanyData:l("whatsapp/integration/settings"),forceNewIntegration:l("whatsapp/forceNewIntegration")},apps:{root:n("apps")}},c={whatsappCounterFinished:"finished",whatsappCounterAlmost:"almost"},p={shipmentsCounterFinished:"finished",shipmentsCounterAlmost:"almost"},u=.9,h=.9;s(1357)},58576:(e,t,s)=>{"use strict";s.d(t,{yL:()=>h.yL,NI:()=>At,My:()=>Le,yh:()=>ir,BY:()=>ot,$H:()=>ns});var r,a,i=s(43269),o=s(53229),n=s(68949);let l=(r=class{showLoading(){this.loadingTasksCounter++,this.isLoading=!0}hideLoading(){this.loadingTasksCounter=Math.max(this.loadingTasksCounter-1,0)||0,0===this.loadingTasksCounter&&(this.isLoading=!1)}getApiClient(){return this.rootStore.authStore.getApiClient()}processApiResult(e,t,s){var r,a,i;if(e.isError)throw s&&s(e),null!==(r=e.errorData)&&void 0!==r&&null!==(a=r.response)&&void 0!==a&&null!==(i=a.data)&&void 0!==i&&i.message?new Error(e.errorData.response.data.message):new Error(`Error during api request: ${e.request.url} => ${e.errorData}`);t&&t(e)}async callApi(e){if(e.runInBackground)return this.rootStore.authStore.callAuthenticatedApi(e);this.showLoading();const t=await this.rootStore.authStore.callAuthenticatedApi(e);return this.hideLoading(),t}reset(){Object.keys(this).forEach((e=>{"rootStore"!==e&&"logger"!==e&&(Array.isArray(this[e])?this[e]=[]:this[e]=void 0)}))}constructor(e){(0,i.Z)(this,"isLoading",a,this),(0,n.rC)(this),this.rootStore=e,this.loadingTasksCounter=0}},a=(0,o.Z)(r.prototype,"isLoading",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,o.Z)(r.prototype,"showLoading",[n.aD],Object.getOwnPropertyDescriptor(r.prototype,"showLoading"),r.prototype),(0,o.Z)(r.prototype,"hideLoading",[n.aD],Object.getOwnPropertyDescriptor(r.prototype,"hideLoading"),r.prototype),(0,o.Z)(r.prototype,"processApiResult",[n.aD],Object.getOwnPropertyDescriptor(r.prototype,"processApiResult"),r.prototype),r);var d,c,p,u=s(96245),h=s(18077),m=s(25142),g=s(25108);const y="REFRESH_TOKEN_ERROR";let f=(d=class extends l{async doLogin(e,t){this.doLogout();const s=await this.callApi({method:h.yL.POST,url:`${m.MF.auth}/signin`,payload:{email:e,password:t}});let r=null;return(0,n.z)((()=>{this.processApiResult(s,(e=>{"signupToken"in e.data?(localStorage.setItem("selfOnboardingToken",e.data.signupToken),r=e.data.signupToken):(this.auth=e.data,this.error="")}))})),r}async doConsent(e,t){const s=await this.callApi({method:h.yL.POST,url:`${m.MF.auth}/signin`,payload:{email:e,password:t}});let r;return this.processApiResult(s,(e=>{var t;r=null===(t=e.data)||void 0===t?void 0:t.accessToken})),r}setAuthToken(e){this.auth=e}getApiClient(){return this.api}reset(){this.auth=void 0}async doResetPassword(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.passwords.reset}`,payload:{email:e}});(0,n.z)((()=>{this.processApiResult(t)}))}async checkPasswordToken(e){const t=await this.callApi({method:h.yL.GET,url:`${m.MF.passwords.checkToken}/${e}`});(0,n.z)((()=>{this.processApiResult(t)}))}async changeTokenPassword(e,t){this.showLoading();const s=await this.api.request({method:h.yL.POST,url:`${m.MF.passwords.reset}/${e}`,payload:{password:t}});this.hideLoading(),(0,n.z)((()=>{this.processApiResult(s)}))}async setSignupPassword(e,t){this.showLoading();const s=await this.api.request({method:h.yL.POST,url:`${m.MF.passwords.signup}/${e}`,payload:{password:t}});return(0,n.z)((()=>{this.hideLoading(),this.processApiResult(s)})),s.data||{}}async refreshToken(){return this.refreshTokenRequest?this.refreshTokenRequest:(this.refreshTokenRequest=this.doRefreshToken(),this.refreshTokenRequest.finally((()=>{(0,n.z)((()=>this.refreshTokenRequest=null))})))}async doRefreshToken(){var e,t;const s=await this.api.request({method:h.yL.POST,url:`${m.MF.auth}/refresh`,payload:{refreshToken:null===(e=this.auth)||void 0===e?void 0:e.refreshToken,accessToken:null===(t=this.auth)||void 0===t?void 0:t.accessToken}});var r,a;if(s.isError)throw{code:null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a?void 0:a.status,description:y};(0,n.z)((()=>{this.auth=s.data,this.rootStore.websocketStore.reconnectWithNewToken()}))}async refreshTokenIfExpired(){if(!this.auth)throw new Error("Unauthorized");try{const e=1e3*(0,u.Z)(this.auth.accessToken).exp;Date.now()+600>=e&&await this.refreshToken()}catch(e){g.error(e)}}doLogout(){localStorage.clear(),this.rootStore.resetStore()}async callAuthenticatedApi(e){this.auth&&(e.auth=this.auth);const t=await this.api.request(e);var s,r,a;if(t.isError&&(null!==(s=this.auth)&&void 0!==s&&s.accessToken&&401===(null===(r=t.errorData)||void 0===r||null===(a=r.response)||void 0===a?void 0:a.status)))try{return await this.refreshToken(),this.callAuthenticatedApi(e)}catch(e){if((null==e?void 0:e.description)!==y)throw e;this.error="token_expired",this.doLogout()}return t}constructor(e){super(e),(0,i.Z)(this,"auth",c,this),(0,i.Z)(this,"error",p,this),this.api=new h.Sl,this.refreshTokenRequest=null,(0,n.rC)(this)}},c=(0,o.Z)(d.prototype,"auth",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,o.Z)(d.prototype,"error",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,o.Z)(d.prototype,"doLogin",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"doLogin"),d.prototype),(0,o.Z)(d.prototype,"doConsent",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"doConsent"),d.prototype),(0,o.Z)(d.prototype,"setAuthToken",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"setAuthToken"),d.prototype),(0,o.Z)(d.prototype,"getApiClient",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"getApiClient"),d.prototype),(0,o.Z)(d.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"reset"),d.prototype),(0,o.Z)(d.prototype,"doResetPassword",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"doResetPassword"),d.prototype),(0,o.Z)(d.prototype,"checkPasswordToken",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"checkPasswordToken"),d.prototype),(0,o.Z)(d.prototype,"changeTokenPassword",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"changeTokenPassword"),d.prototype),(0,o.Z)(d.prototype,"setSignupPassword",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"setSignupPassword"),d.prototype),(0,o.Z)(d.prototype,"refreshToken",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"refreshToken"),d.prototype),(0,o.Z)(d.prototype,"doRefreshToken",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"doRefreshToken"),d.prototype),(0,o.Z)(d.prototype,"refreshTokenIfExpired",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"refreshTokenIfExpired"),d.prototype),(0,o.Z)(d.prototype,"doLogout",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"doLogout"),d.prototype),(0,o.Z)(d.prototype,"callAuthenticatedApi",[n.aD],Object.getOwnPropertyDescriptor(d.prototype,"callAuthenticatedApi"),d.prototype),d);var b,v,x;let S=(b=class extends l{async getContacts(e,t,s){let r=null;r=s?await this.callApi({method:h.yL.GET,url:`${m.MF.contacts.search}/${s}?page=${e}&limit=${t}`}):await this.callApi({method:h.yL.GET,url:`${m.MF.contacts.root}?page=${e}&limit=${t}`}),this.processApiResult(r,(()=>{(0,n.z)((()=>{var e;null!==(e=r)&&void 0!==e&&e.data&&(this.contactList=r.data.items.map(this.toContactDTO)||[],this.hasNextPage=Boolean(r.data.nextPage))}))}))}async updateContact(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.contacts.root}/${e.id}`,payload:this.toEditContact(e)});this.processApiResult(t,(()=>{(0,n.z)((()=>{if(!t.data)return;const e=this.toContactDTO(t.data);this.contactList=this.contactList.map((t=>t.id===e.id?e:t))}))}))}async createContact(e){const t=await this.callApi({method:h.yL.POST,url:m.MF.contacts.root,payload:this.toEditContact(e)});this.processApiResult(t,(()=>{(0,n.z)((()=>{if(!t.data)return;const e=this.toContactDTO(t.data);this.contactList=[e,...this.contactList]}))}))}async deleteContact(e){const t=await this.callApi({method:h.yL.DELETE,url:`${m.MF.contacts.root}/${e.id}`});this.processApiResult(t,(()=>{(0,n.z)((()=>{this.contactList=this.contactList.filter((t=>t.id!==e.id))}))}))}constructor(e){super(e),(0,i.Z)(this,"contactList",v,this),(0,i.Z)(this,"hasNextPage",x,this),(0,n.rC)(this)}toContactDTO(e){const{id:t,companyName:s,companyId:r,name:a,email:i}=e,{city:o,street:n,street2:l,state:d,zipCode:c,countryIsoCode:p,phoneNumber:u,id:h,name:m,companyName:g,email:y,contactId:f}=e.addresses[0];return{id:t,companyName:s,companyId:r,name:a,email:i,city:o,street:n,street2:l,state:d,zipCode:c,countryIsoCode:p,phoneNumber:u,addressId:h,addressName:m,addressCompanyName:g,addressEmail:y,contactId:f}}toEditContact(e){const{id:t,companyName:s,companyId:r,name:a,email:i,city:o,street:n,street2:l,state:d,zipCode:c,countryIsoCode:p,phoneNumber:u,addressId:h,addressName:m,addressCompanyName:g,addressEmail:y,contactId:f}=e;return{id:t,companyId:r,companyName:s,name:a,email:i,addresses:[{id:h,name:m||a,companyName:g||s,email:y||i,contactId:f,city:o,state:d,street:n,street2:l,phoneNumber:u,zipCode:c,countryIsoCode:p}]}}},v=(0,o.Z)(b.prototype,"contactList",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=(0,o.Z)(b.prototype,"hasNextPage",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,o.Z)(b.prototype,"getContacts",[n.aD],Object.getOwnPropertyDescriptor(b.prototype,"getContacts"),b.prototype),(0,o.Z)(b.prototype,"updateContact",[n.aD],Object.getOwnPropertyDescriptor(b.prototype,"updateContact"),b.prototype),(0,o.Z)(b.prototype,"createContact",[n.aD],Object.getOwnPropertyDescriptor(b.prototype,"createContact"),b.prototype),(0,o.Z)(b.prototype,"deleteContact",[n.aD],Object.getOwnPropertyDescriptor(b.prototype,"deleteContact"),b.prototype),b);function j(e){var t,s,r,a,i,o,n,l,d;null!==(t=e.mediaObject)&&void 0!==t&&t.caption&&(e.text=e.mediaObject.caption);const c=null===(s=e.mediaObject)||void 0===s?void 0:s.fileName.split("/"),p=c?c[c.length-1]:void 0;return{id:e.id,created:e.createdAt,updated:e.updatedAt,messageSid:e.messageId,text:e.text||"",haveMedia:!(null===(r=e.mediaObject)||void 0===r||!r.fileName||null!==(a=e.text)&&void 0!==a&&a.trim()),flow:"inbound"===e.source?"Received":"Sent",isReceived:!!e.deliveredAt,isSeen:!!e.readAt,receivedDateTime:e.deliveredAt,seenDateTime:e.readAt,sentDateTime:e.sentAt,isSent:!!e.sentAt,isTemplate:e.isTemplate,isSeenByUser:!!e.readAt,mediaContentType:(null===(i=e.mediaObject)||void 0===i?void 0:i.mimeType)||null,mediaUrl:(null===(o=e.mediaObject)||void 0===o?void 0:o.fileName)||null,originalMediaUrl:(null===(n=e.mediaObject)||void 0===n?void 0:n.fileName)||null,buttons:Object.values(e.options||{}),haveMediaInHeader:!(null===(l=e.mediaObject)||void 0===l||!l.fileName||null===(d=e.text)||void 0===d||!d.trim()),quotationMessageId:e.parentId,fileName:p}}const w={mapToConversationsResponse:function(e){return{result:e.chats.map((e=>({companyId:e.companyId,id:e.id,conversationDetails:[j(e.lastMessageDetail)],created:e.lastMessageAt,isDeleted:!1,contactId:e.contactId,target:e.recipientNumber,targetName:e.name,unseenMessagesCount:e.unseenMessagesCount,source:"",updated:e.lastMessageAt,orderId:e.orderId}))),count:0,page:0,size:0,totalPages:e.hasNextPage?99:1,companyLogo:e.companyLogo}},mapToConversationDetail:j};var M,C;let A=(M=class extends l{async getConversations(e,t){const s=await this.callApi({method:h.yL.GET,url:`${m.MF.conversations.getMaster}?page=${e}${t?`&search=${t}`:""}`});var r;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r?void 0:r.message);return s.data}async getConversationsNew(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t?await this.callApi({method:h.yL.GET,url:`${m.MF.conversations_new.searchByName}?page=${e-1}&name=${t}`}):await this.callApi({method:h.yL.GET,url:`${m.MF.conversations_new.getConversationsByCompany}?page=${e-1}${s?"&show_unseen_only=true":""}`});if(404===r.statusCode)return{result:[],count:0,page:0,size:0,totalPages:0,companyLogo:""};var a;if(r.isError)throw new Error(null===(a=r.errorData)||void 0===a?void 0:a.message);return w.mapToConversationsResponse(r.data)}async getConversationsUnseenMessages(){const e=await this.callApi({method:h.yL.GET,url:m.MF.conversations_new.getUnseenMessagesCount});var t;if(e.isError)throw new Error(null===(t=e.errorData)||void 0===t?void 0:t.message);(0,n.z)((()=>{var t;return this.totalUnseenMessagesCount=(null===(t=e.data)||void 0===t?void 0:t.counter)||0}))}addConversationUnseenMessage(){this.totalUnseenMessagesCount++}resetCoversationUnseenMessages(e){this.totalUnseenMessagesCount=Math.max(this.totalUnseenMessagesCount-e,0)}async getDetail(e){const t=await this.callApi({method:h.yL.GET,url:`${m.MF.conversations.getDetail}?conversationId=${e}`});var s;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s?void 0:s.message);return Object.values(t.data||{})}async getDetailNew(e){var t,s;const r=await this.callApi({method:h.yL.GET,url:`${m.MF.conversations_new.getChatById}/${e}`});var a;if(r.isError)throw new Error(null===(a=r.errorData)||void 0===a?void 0:a.message);return(null===(t=r.data)||void 0===t||null===(s=t.messages)||void 0===s?void 0:s.map(w.mapToConversationDetail))||[]}async beginConversation(e,t){const s=await this.callApi({method:h.yL.POST,url:`${m.MF.conversations.beginConversation}?conversationId=${e}&lang=${t}`});var r;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r?void 0:r.message);return s}async beginConversationNew(e,t){var s;const r=await this.callApi({method:h.yL.POST,url:`${m.MF.conversations_new.beginConversation}`,payload:{chatId:e,templateId:t,params:{companyName:null===(s=this.rootStore.companiesStore.companyInfo)||void 0===s?void 0:s.name}}});var a;if(r.isError)throw new Error(null===(a=r.errorData)||void 0===a?void 0:a.message)}async deleteConversation(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.conversations.deleteConversation}?conversationId=${e}`});var s;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s?void 0:s.message);return t}async sendMessage(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.conversations.reply}`,payload:e});var s;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s?void 0:s.message);return t}async sendMessageNew(e){const t=await this.callApi({method:h.yL.POST,url:m.MF.conversations_new.sendMessage,payload:e});var s;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s?void 0:s.message)}async getBeginConversationTemplates(){const e=await this.callApi({method:h.yL.GET,url:m.MF.transactionalWhatsapp.getBeginConversationTemplates});var t,s,r;if(e.isError)throw new Error(null===(t=e.errorData)||void 0===t||null===(s=t.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message);return Object.values(e.data||{})}constructor(e){super(e),(0,i.Z)(this,"totalUnseenMessagesCount",C,this),(0,n.rC)(this)}},C=(0,o.Z)(M.prototype,"totalUnseenMessagesCount",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,o.Z)(M.prototype,"getConversationsNew",[n.aD],Object.getOwnPropertyDescriptor(M.prototype,"getConversationsNew"),M.prototype),(0,o.Z)(M.prototype,"getConversationsUnseenMessages",[n.aD],Object.getOwnPropertyDescriptor(M.prototype,"getConversationsUnseenMessages"),M.prototype),(0,o.Z)(M.prototype,"addConversationUnseenMessage",[n.aD],Object.getOwnPropertyDescriptor(M.prototype,"addConversationUnseenMessage"),M.prototype),(0,o.Z)(M.prototype,"resetCoversationUnseenMessages",[n.aD],Object.getOwnPropertyDescriptor(M.prototype,"resetCoversationUnseenMessages"),M.prototype),M);var T,O,P,N;let _=(T=class extends l{initializeMap(e,t){for(const s of t)e.has(s.selectedCarrierId)?e.get(s.selectedCarrierId).push(s):e.set(s.selectedCarrierId,[s])}async getCustomRates(){const e=await this.callApi({method:h.yL.GET,url:m.MF.customRates.byCompany});(0,n.z)((()=>{this.processApiResult(e,(e=>{this.customRates=new Map,this.initializeMap(this.customRates,e.data.customRates),this.additionalServices=new Map,this.initializeMap(this.additionalServices,e.data.additionalServices),this.services=new Map,this.initializeMap(this.services,e.data.services)}))}))}async saveCustomRates(e,t){const s=await this.callApi({method:h.yL.POST,url:`${m.MF.customRates.create}/${t}`,payload:{...e}});(0,n.z)((()=>{this.processApiResult(s)}))}reset(){this.customRates=new Map,this.services=new Map,this.additionalServices=new Map}constructor(e){super(e),(0,i.Z)(this,"customRates",O,this),(0,i.Z)(this,"additionalServices",P,this),(0,i.Z)(this,"services",N,this),(0,n.rC)(this)}},O=(0,o.Z)(T.prototype,"customRates",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),P=(0,o.Z)(T.prototype,"additionalServices",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),N=(0,o.Z)(T.prototype,"services",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),(0,o.Z)(T.prototype,"initializeMap",[n.aD],Object.getOwnPropertyDescriptor(T.prototype,"initializeMap"),T.prototype),(0,o.Z)(T.prototype,"getCustomRates",[n.aD],Object.getOwnPropertyDescriptor(T.prototype,"getCustomRates"),T.prototype),(0,o.Z)(T.prototype,"saveCustomRates",[n.aD],Object.getOwnPropertyDescriptor(T.prototype,"saveCustomRates"),T.prototype),(0,o.Z)(T.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(T.prototype,"reset"),T.prototype),T);var Z,I;let D=(Z=class extends l{async getTransitTimeEstimate(e){this.estimates=new Map;const t=await this.callApi({method:h.yL.POST,url:m.MF.delivery_estimates.root,payload:{addressFrom:e.addressFrom,addressTo:e.addressTo,parcels:e.parcels}});(0,n.z)((()=>{if(t.data)for(const s of t.data){var e;this.estimates.get(s.carrierInternalCode)||this.estimates.set(s.carrierInternalCode,new Map),null===(e=this.estimates.get(s.carrierInternalCode))||void 0===e||e.set(s.serviceCode,s.eta)}}))}reset(){this.estimates=new Map}constructor(e){super(e),(0,i.Z)(this,"estimates",I,this),(0,n.rC)(this)}},I=(0,o.Z)(Z.prototype,"estimates",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),(0,o.Z)(Z.prototype,"getTransitTimeEstimate",[n.aD],Object.getOwnPropertyDescriptor(Z.prototype,"getTransitTimeEstimate"),Z.prototype),(0,o.Z)(Z.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(Z.prototype,"reset"),Z.prototype),Z);var E,k,L,R,F=s(51066);let U=(E=class extends l{setCurrentPage(e){this.currentTablePage=e}setReturnStatus(e){this.returnStatus=e,this.currentTablePage=0}reset(){this.returnStatus=F.ReturnStatusTypes.CREATED,this.tabSavedState=F.ReturnStatusTypes.CREATED,this.currentTablePage=0}constructor(e){super(e),(0,i.Z)(this,"returnStatus",k,this),(0,i.Z)(this,"tabSavedState",L,this),(0,i.Z)(this,"currentTablePage",R,this),(0,n.rC)(this)}},k=(0,o.Z)(E.prototype,"returnStatus",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.ReturnStatusTypes.CREATED}}),L=(0,o.Z)(E.prototype,"tabSavedState",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.ReturnStatusTypes.CREATED}}),R=(0,o.Z)(E.prototype,"currentTablePage",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,o.Z)(E.prototype,"setCurrentPage",[n.aD],Object.getOwnPropertyDescriptor(E.prototype,"setCurrentPage"),E.prototype),(0,o.Z)(E.prototype,"setReturnStatus",[n.aD],Object.getOwnPropertyDescriptor(E.prototype,"setReturnStatus"),E.prototype),(0,o.Z)(E.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(E.prototype,"reset"),E.prototype),E);var G,B,$,z,W,H=s(27484),V=s.n(H),q=s(10285),Y=s.n(q);V().extend(Y());let K=(G=class extends l{convertReturnToSingleShipment(e){var t,s;return{return:e.return,items:e.items,shipment:(null===(t=e.shipments)||void 0===t||null===(s=t.slice(-1))||void 0===s?void 0:s[0])||void 0}}convertReturnsToMapAppend(e,t){var s;null===(s=e.data)||void 0===s||s.items.forEach((e=>{t.set(String(e.return.id),e)}))}isPending(e){return e in this.pendingShipments&&!this.shipmentError(e)}shipmentError(e){var t;return null===(t=this.pendingShipments)||void 0===t?void 0:t[e]}get returns(){return this.allReturns}get returnsCountByStatusArray(){return this.returnsCountByStatus}get returnsArray(){var e;if(!this.returns.size){const e=this.rootStore.returnsListStateStore;return this.loadReturnsPage(e.returnStatus,e.currentTablePage),[]}const t=Array.from(this.returns.values()).map((e=>this.convertReturnToSingleShipment(e))),s=(null===(e=this.rootStore.returnsListStateStore)||void 0===e?void 0:e.returnStatus)||F.ReturnStatusTypes.CREATED;return t.filter((e=>{var t;return s.includes(null===(t=e.return)||void 0===t?void 0:t.status)})).sort(((e,t)=>{const s=e.return.created||0;return(t.return.created||0)-s}))}async getReturnsStatusCount(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.returns.root}/count`});(0,n.z)((()=>{this.processApiResult(e,(()=>{if(!e.data)return;const t=new Map([[F.ReturnStatusTypes.CREATED,e.data.created],[F.ReturnStatusTypes.IN_TRANSIT,e.data.in_transit],[F.ReturnStatusTypes.EXCEPTION,e.data.exception],[F.ReturnStatusTypes.DELIVERED,e.data.delivered]]);this.returnsCountByStatus=t}))}))}async loadReturnsPage(e,t){var s,r;if(null===(s=this.rootStore.authStore)||void 0===s||null===(r=s.auth)||void 0===r||!r.accessToken)return;const a=`${m.MF.returns.getAllReturnsByStatus}/${e}?page=${t||0}`,i=await this.callApi({method:h.yL.GET,url:a});(0,n.z)((()=>{this.processApiResult(i,(e=>{e.data&&(this.convertReturnsToMapAppend(e,this.allReturns),this.totalReturns=50*e.data.total_pages)}))}))}resetReturnsMaps(){this.allReturns=new Map,this.totalReturns=0}updateReturn(e,t){this.allReturns.get(e)&&this.allReturns.set(e,t)}async generateReturnShipment(e){var t;const s=await this.callApi({method:h.yL.POST,url:m.MF.returns.createSingleShipment,payload:e});return(0,n.z)((()=>{this.processApiResult(s,(e=>{let{data:t}=e;t&&this.setPendingShipment(t.id)}))})),null===(t=s.data)||void 0===t?void 0:t.id}async arrangePickup(e){const t=await this.callApi({method:h.yL.POST,url:m.MF.returns.pickup,payload:e});(0,n.z)((()=>{this.processApiResult(t,(t=>{t.data&&(this.updateReturn(`${e.returnId}`,t.data.returnOrder),t.data.pickup&&this.rootStore.pickupsStore.pickups.set(t.data.pickup.pk,t.data.pickup))}))}))}async getReturnOrderId(e){var t;const s=await this.callApi({method:h.yL.GET,url:`${m.MF.returns.getById}/${e}`});return s.isError?null:(null===(t=s.data)||void 0===t?void 0:t.return.orderId)||null}async sendEmailLabels(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.returns.sendEmailLabels}/`,payload:{id:e}});if(this.processApiResult(t),!t.isError)return t.data}reset(){this.returnsCountByStatus=new Map,this.totalReturns=0}async loadNextPage(){const e=this.rootStore.returnsListStateStore;await this.loadReturnsPage(e.returnStatus,e.currentTablePage)}setPendingShipment(e,t){e in this.pendingShipments&&this.pendingShipments[e]===t||(this.pendingShipments={...this.pendingShipments,[e]:t})}removePendingShipment(e){e in this.pendingShipments&&(this.pendingShipments=Object.keys(this.pendingShipments).reduce(((t,s)=>s===e?t:{...t,[s]:this.pendingShipments[s]}),{}))}constructor(e,t){super(e),(0,i.Z)(this,"allReturns",B,this),(0,i.Z)(this,"returnsCountByStatus",$,this),(0,i.Z)(this,"totalReturns",z,this),(0,i.Z)(this,"pendingShipments",W,this),(0,n.rC)(this),(0,n.U5)((()=>({status:t.returnStatus})),(async()=>{this.resetReturnsMaps(),void 0===t.currentTablePage&&t.setCurrentPage(0),await this.loadNextPage()})),(0,n.U5)((()=>t.currentTablePage),(async e=>{await this.loadReturnsPage(t.returnStatus,e)}))}},B=(0,o.Z)(G.prototype,"allReturns",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),$=(0,o.Z)(G.prototype,"returnsCountByStatus",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),z=(0,o.Z)(G.prototype,"totalReturns",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=(0,o.Z)(G.prototype,"pendingShipments",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,o.Z)(G.prototype,"returns",[n.Fl],Object.getOwnPropertyDescriptor(G.prototype,"returns"),G.prototype),(0,o.Z)(G.prototype,"returnsCountByStatusArray",[n.Fl],Object.getOwnPropertyDescriptor(G.prototype,"returnsCountByStatusArray"),G.prototype),(0,o.Z)(G.prototype,"returnsArray",[n.Fl],Object.getOwnPropertyDescriptor(G.prototype,"returnsArray"),G.prototype),(0,o.Z)(G.prototype,"getReturnsStatusCount",[n.aD],Object.getOwnPropertyDescriptor(G.prototype,"getReturnsStatusCount"),G.prototype),(0,o.Z)(G.prototype,"loadReturnsPage",[n.aD],Object.getOwnPropertyDescriptor(G.prototype,"loadReturnsPage"),G.prototype),(0,o.Z)(G.prototype,"resetReturnsMaps",[n.aD],Object.getOwnPropertyDescriptor(G.prototype,"resetReturnsMaps"),G.prototype),(0,o.Z)(G.prototype,"updateReturn",[n.aD],Object.getOwnPropertyDescriptor(G.prototype,"updateReturn"),G.prototype),(0,o.Z)(G.prototype,"generateReturnShipment",[n.aD],Object.getOwnPropertyDescriptor(G.prototype,"generateReturnShipment"),G.prototype),(0,o.Z)(G.prototype,"arrangePickup",[n.aD],Object.getOwnPropertyDescriptor(G.prototype,"arrangePickup"),G.prototype),(0,o.Z)(G.prototype,"sendEmailLabels",[n.aD],Object.getOwnPropertyDescriptor(G.prototype,"sendEmailLabels"),G.prototype),(0,o.Z)(G.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(G.prototype,"reset"),G.prototype),(0,o.Z)(G.prototype,"loadNextPage",[n.aD],Object.getOwnPropertyDescriptor(G.prototype,"loadNextPage"),G.prototype),(0,o.Z)(G.prototype,"setPendingShipment",[n.aD],Object.getOwnPropertyDescriptor(G.prototype,"setPendingShipment"),G.prototype),(0,o.Z)(G.prototype,"removePendingShipment",[n.aD],Object.getOwnPropertyDescriptor(G.prototype,"removePendingShipment"),G.prototype),G);var X,Q,J,ee,te,se,re,ae=s(25108);function ie(e,t){return e.label.localeCompare(t.label)}let oe=(X=class extends l{setGenericInfoOptions(e){this.genericInfoOptions={carriers:e.carriers.sort(ie),stores:e.stores.sort(ie),shipmentsPerMonth:e.shipmentsPerMonth}}setGenericInfo(e){this.genericInfo={...e}}setCompanyInfo(e){this.companyInfo={...e}}setCompanyAddress(e){this.companyAddress={...e}}setSignupToken(e){this.signupToken=e,localStorage.setItem("selfOnboardingToken",e)}async createPassword(e){return!(await this.callApi({method:h.yL.POST,url:`${m.MF.self_onboarding.root}/${this.signupToken}/set_password`,payload:{password:e}})).isError}async getGenericInfoOptions(){try{const e=await this.callApi({method:h.yL.GET,url:`${m.MF.self_onboarding.root}/hubspot`});e.data&&this.setGenericInfoOptions(e.data)}catch(e){ae.error(e),this.setErrors(e)}}async getGenericInfo(){try{const e=await this.callApi({method:h.yL.GET,url:`${m.MF.self_onboarding.root}/${this.signupToken}/hubspot`});this.setGenericInfo(e.data)}catch(e){ae.error(e),this.setErrors(e)}}async saveGenericInfo(e){try{const t=await this.callApi({method:h.yL.POST,url:`${m.MF.self_onboarding.root}/${this.signupToken}/hubspot`,payload:e});this.setGenericInfo(t.data)}catch(e){ae.error(e),this.setErrors(e)}}async getCompanyInfo(){try{const e=await this.callApi({method:h.yL.GET,url:`${m.MF.self_onboarding.root}/${this.signupToken}/company`});this.setCompanyInfo(e.data)}catch(e){ae.error(e),(0,n.z)((()=>{var t;return this.errors=null===(t=e.errorData.response)||void 0===t?void 0:t.data}))}}async saveCompanyInfo(e){try{const t=await this.callApi({method:h.yL.POST,url:`${m.MF.self_onboarding.root}/${this.signupToken}/company`,payload:e});this.setCompanyInfo(t.data)}catch(e){throw ae.error(e),this.setErrors(e),e}}async getCompanyAddress(){try{const e=await this.callApi({method:h.yL.GET,url:`${m.MF.self_onboarding.root}/${this.signupToken}/addresses`});this.setCompanyAddress(e.data)}catch(t){var e;throw ae.error(t),this.errors=null===(e=t.errorData.response)||void 0===e?void 0:e.data,t}}async saveCompanyAddress(e){try{const t=await this.callApi({method:h.yL.POST,url:`${m.MF.self_onboarding.root}/${this.signupToken}/finalize`,payload:e});return this.setCompanyAddress(e),!t.isError&&t.data?t.data.jwtToken:null}catch(e){var t;return ae.error(e),this.errors=null===(t=e.errorData.response)||void 0===t?void 0:t.data,null}}setErrors(e){this.errors=e}constructor(e){super(e),(0,i.Z)(this,"errors",Q,this),(0,i.Z)(this,"signupToken",J,this),(0,i.Z)(this,"genericInfoOptions",ee,this),(0,i.Z)(this,"genericInfo",te,this),(0,i.Z)(this,"companyInfo",se,this),(0,i.Z)(this,"companyAddress",re,this),(0,n.rC)(this)}},Q=(0,o.Z)(X.prototype,"errors",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=(0,o.Z)(X.prototype,"signupToken",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=(0,o.Z)(X.prototype,"genericInfoOptions",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=(0,o.Z)(X.prototype,"genericInfo",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=(0,o.Z)(X.prototype,"companyInfo",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=(0,o.Z)(X.prototype,"companyAddress",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,o.Z)(X.prototype,"createPassword",[n.aD],Object.getOwnPropertyDescriptor(X.prototype,"createPassword"),X.prototype),(0,o.Z)(X.prototype,"getGenericInfoOptions",[n.aD],Object.getOwnPropertyDescriptor(X.prototype,"getGenericInfoOptions"),X.prototype),(0,o.Z)(X.prototype,"getGenericInfo",[n.aD],Object.getOwnPropertyDescriptor(X.prototype,"getGenericInfo"),X.prototype),(0,o.Z)(X.prototype,"saveGenericInfo",[n.aD],Object.getOwnPropertyDescriptor(X.prototype,"saveGenericInfo"),X.prototype),(0,o.Z)(X.prototype,"getCompanyInfo",[n.aD],Object.getOwnPropertyDescriptor(X.prototype,"getCompanyInfo"),X.prototype),(0,o.Z)(X.prototype,"saveCompanyInfo",[n.aD],Object.getOwnPropertyDescriptor(X.prototype,"saveCompanyInfo"),X.prototype),(0,o.Z)(X.prototype,"getCompanyAddress",[n.aD],Object.getOwnPropertyDescriptor(X.prototype,"getCompanyAddress"),X.prototype),(0,o.Z)(X.prototype,"saveCompanyAddress",[n.aD],Object.getOwnPropertyDescriptor(X.prototype,"saveCompanyAddress"),X.prototype),(0,o.Z)(X.prototype,"setErrors",[n.aD],Object.getOwnPropertyDescriptor(X.prototype,"setErrors"),X.prototype),X);var ne=s(52861),le=s(25108);class de extends l{async connectWaba(e,t){const s=await this.callApi({method:h.yL.POST,url:m.MF.transactionalWhatsapp.integration,payload:{channelId:e,clientId:t}});var r,a,i;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)}async getCompanyData(){const e=await this.callApi({method:h.yL.GET,url:m.MF.transactionalWhatsapp.getCompanyData});var t,s,r;if(e.isError)throw new Error(null===(t=e.errorData)||void 0===t||null===(s=t.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message);return e.data}async updateCompanyData(e){const t=await this.callApi({method:h.yL.PUT,url:m.MF.transactionalWhatsapp.updateCompanyData,payload:e});var s,r,a;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message);return t.data}async getList(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.transactionalWhatsapp.base}/`});var t,s,r;if(e.isError)throw new Error(null===(t=e.errorData)||void 0===t||null===(s=t.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message);return e.data||[]}async getDetail(e){const t=await this.callApi({method:h.yL.GET,url:`${m.MF.transactionalWhatsapp.base}/${e}`});var s,r,a;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message);return t.data}async uploadMedia(e){const{templateId:t,file:s,type:r}=e,a=s.name.split("."),i=a[0],o=a[a.length-1],n=t?{templateId:t,fileName:i,extension:o}:{fileName:i,extension:o},l=await this.callApi({method:h.yL.POST,url:`${m.MF.transactionalWhatsapp.getSignedUrl}/${r}`,payload:n});var d,c,p;if(l.isError)throw new Error(null===(d=l.errorData)||void 0===d||null===(c=d.response)||void 0===c||null===(p=c.data)||void 0===p?void 0:p.message);if(!l.data)throw new Error("Error while getting signed url");try{return await ne.Z.put(l.data.signedUrl,s,{headers:{"Content-Type":s.type}}),l.data.signedUrl}catch(e){le.error(e)}}async editTemplate(e,t){var s;const r=await this.callApi({method:h.yL.PUT,url:`${m.MF.transactionalWhatsapp.base}/${e}`,payload:t});var a,i,o;if(r.isError)throw new Error(null===(a=r.errorData)||void 0===a||null===(i=a.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message);return(null===(s=r.data)||void 0===s?void 0:s.sentForApproval)||!1}async createTemplate(e){delete e.data.startRunAfterSeconds;const t=await this.callApi({method:h.yL.POST,url:m.MF.transactionalWhatsapp.base,payload:e});var s,r,a;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)}async deleteTemplate(e){const t=await this.callApi({method:h.yL.DELETE,url:`${m.MF.transactionalWhatsapp.base}/${e}`});var s,r,a;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)}async toggleTemplateStatus(e,t){const s=await this.callApi({method:h.yL.POST,url:m.MF.transactionalWhatsapp.setFlowAbilitation,payload:{flowId:e,value:t}});var r,a,i;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)}async getUserCountryLanguages(){const e=await this.callApi({method:h.yL.GET,url:m.MF.transactionalWhatsapp.getUserCountryLanguages});var t,s,r;if(e.isError)throw new Error(null===(t=e.errorData)||void 0===t||null===(s=t.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message);return e.data||[]}async saveUserCountryLanguages(e){const t=await this.callApi({method:h.yL.POST,url:m.MF.transactionalWhatsapp.setCountryLanguage,payload:e});var s,r,a;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message);return t.data||[]}async addLanguageTemplates(e){const t=await this.callApi({method:h.yL.POST,url:m.MF.transactionalWhatsapp.addLanguageTemplates,payload:{language:e}});var s,r,a;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)}async restoreTemplate(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.transactionalWhatsapp.restoreDefault}/${e}/restoreToDefault`});var s,r,a;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)}async sendTemplatePreview(e,t){const s=await this.callApi({method:h.yL.POST,url:m.MF.transactionalWhatsapp.sendTemplatePreview,payload:{templateId:e,recipientNumbers:t}});var r,a,i;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)}async forceNewIntegration(){const e=await this.callApi({method:h.yL.POST,url:m.MF.transactionalWhatsapp.forceNewIntegration,payload:{}});var t,s,r;if(e.isError)throw new Error(null===(t=e.errorData)||void 0===t||null===(s=t.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)}constructor(e){super(e)}}var ce,pe,ue,he,me,ge=s(25108);let ye=(ce=class extends l{async getWallet(){try{const e=await this.callApi({method:h.yL.GET,url:`${m.MF.wallet.root}`});this.processApiResult(e,(()=>{(0,n.z)((()=>{this.walletStatus=e.data}))}))}catch(e){ge.log(e)}}async getTransactionsList(e,t,s){const r=function(e){let t="";e&&(e.startDate&&(t+=`&startDate=${e.startDate}`),e.endDate&&(t+=`&endDate=${e.endDate}`),e.transactionType&&(t+=`&transactionType=${e.transactionType}`),e.status&&(t+=`&status=${e.status}`));return t}(s),a=await this.callApi({method:h.yL.GET,url:`${m.MF.wallet.transactions}?page=${e}&pageSize=${t}${r}`});this.processApiResult(a,(()=>{(0,n.z)((()=>{this.transactionsList=a.data}))}))}async getReportsList(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.wallet.reports}`});this.processApiResult(e,(()=>{(0,n.z)((()=>{this.reportsList=e.data}))}))}async editCompanyRechargeData(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.wallet.recharge}`,payload:e});this.processApiResult(t,(()=>{(0,n.z)((()=>{const{isRechargeEnabled:e,paymentMethodId:s,rechargeAmount:r,thresholdAmount:a}=t.data;this.companyRechargeData={isRechargeEnabled:e,paymentMethodId:s,rechargeAmount:r,thresholdAmount:a}}))}))}async rechargeWallet(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.wallet.recharge}`,payload:e});this.processApiResult(t,(()=>{(0,n.z)((()=>{this.getWallet()}))}))}constructor(e){super(e),(0,i.Z)(this,"transactionsList",pe,this),(0,i.Z)(this,"reportsList",ue,this),(0,i.Z)(this,"walletStatus",he,this),(0,i.Z)(this,"companyRechargeData",me,this),(0,n.rC)(this)}},pe=(0,o.Z)(ce.prototype,"transactionsList",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ue=(0,o.Z)(ce.prototype,"reportsList",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),he=(0,o.Z)(ce.prototype,"walletStatus",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),me=(0,o.Z)(ce.prototype,"companyRechargeData",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,o.Z)(ce.prototype,"getWallet",[n.aD],Object.getOwnPropertyDescriptor(ce.prototype,"getWallet"),ce.prototype),(0,o.Z)(ce.prototype,"getTransactionsList",[n.aD],Object.getOwnPropertyDescriptor(ce.prototype,"getTransactionsList"),ce.prototype),(0,o.Z)(ce.prototype,"getReportsList",[n.aD],Object.getOwnPropertyDescriptor(ce.prototype,"getReportsList"),ce.prototype),(0,o.Z)(ce.prototype,"editCompanyRechargeData",[n.aD],Object.getOwnPropertyDescriptor(ce.prototype,"editCompanyRechargeData"),ce.prototype),(0,o.Z)(ce.prototype,"rechargeWallet",[n.aD],Object.getOwnPropertyDescriptor(ce.prototype,"rechargeWallet"),ce.prototype),ce);var fe,be,ve,xe,Se,je;let we=(fe=class extends l{get onlinePrinters(){return this.zebraPrinters.filter((e=>e.online))}async getZebraPrinters(){const e=await this.callApi({method:h.yL.GET,url:m.MF.printers.zebraPrinters});(0,n.z)((()=>{e.data&&(this.zebraPrinters=e.data.printersList)}))}async connectZebraPrinter(e){const t={...e,isDefault:0===this.zebraPrinters.length},s=await this.callApi({method:h.yL.POST,url:m.MF.printers.zebraPrinters,payload:t});this.processApiResult(s,(()=>{(0,n.z)((()=>{this.zebraPrinters=[...this.zebraPrinters,t]}))}))}async editZebraPrinter(e){const t=await this.callApi({method:h.yL.PATCH,url:m.MF.printers.zebraPrinters,payload:e});this.processApiResult(t,(()=>{(0,n.z)((()=>{this.zebraPrinters=this.zebraPrinters.map((t=>t.serialNumber===e.serialNumber?{...t,...e}:t))}))}))}async deleteZebraPrinter(e){const t=await this.callApi({method:h.yL.DELETE,url:m.MF.printers.zebraPrinters+"/"+e});this.processApiResult(t,(()=>{(0,n.z)((()=>{this.zebraPrinters=this.zebraPrinters.filter((t=>t.serialNumber!==e))}))}))}showPrinterSelectionModal(e){this.isPrinterSelectionModalOpen=!0,this.printRequestOrderIds=e;const t=this.zebraPrinters.find((e=>e.isDefault));this.selectedPrinter=null!=t&&t.online?t:this.onlinePrinters[0]}closePrinterSelectionModal(){this.isPrinterSelectionModalOpen=!1}showPrinterErrorModal(){this.isPrinterErrorModalOpen=!0}closePrinterErrorModal(){this.isPrinterErrorModalOpen=!1,this.selectedPrinter=null,this.printRequestOrderIds=[]}setSelectedPrinter(e){this.selectedPrinter=e}syncZebraPrinters(e){this.zebraPrinters=this.zebraPrinters.map((t=>t.serialNumber===e.serialNumber?{...t,online:e.online}:t))}constructor(e){super(e),(0,i.Z)(this,"zebraPrinters",be,this),(0,i.Z)(this,"isPrinterSelectionModalOpen",ve,this),(0,i.Z)(this,"isPrinterErrorModalOpen",xe,this),(0,i.Z)(this,"printRequestOrderIds",Se,this),(0,i.Z)(this,"selectedPrinter",je,this),(0,n.rC)(this)}},be=(0,o.Z)(fe.prototype,"zebraPrinters",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve=(0,o.Z)(fe.prototype,"isPrinterSelectionModalOpen",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xe=(0,o.Z)(fe.prototype,"isPrinterErrorModalOpen",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Se=(0,o.Z)(fe.prototype,"printRequestOrderIds",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),je=(0,o.Z)(fe.prototype,"selectedPrinter",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),(0,o.Z)(fe.prototype,"onlinePrinters",[n.Fl],Object.getOwnPropertyDescriptor(fe.prototype,"onlinePrinters"),fe.prototype),(0,o.Z)(fe.prototype,"getZebraPrinters",[n.aD],Object.getOwnPropertyDescriptor(fe.prototype,"getZebraPrinters"),fe.prototype),(0,o.Z)(fe.prototype,"connectZebraPrinter",[n.aD],Object.getOwnPropertyDescriptor(fe.prototype,"connectZebraPrinter"),fe.prototype),(0,o.Z)(fe.prototype,"editZebraPrinter",[n.aD],Object.getOwnPropertyDescriptor(fe.prototype,"editZebraPrinter"),fe.prototype),(0,o.Z)(fe.prototype,"deleteZebraPrinter",[n.aD],Object.getOwnPropertyDescriptor(fe.prototype,"deleteZebraPrinter"),fe.prototype),(0,o.Z)(fe.prototype,"showPrinterSelectionModal",[n.aD],Object.getOwnPropertyDescriptor(fe.prototype,"showPrinterSelectionModal"),fe.prototype),(0,o.Z)(fe.prototype,"closePrinterSelectionModal",[n.aD],Object.getOwnPropertyDescriptor(fe.prototype,"closePrinterSelectionModal"),fe.prototype),(0,o.Z)(fe.prototype,"showPrinterErrorModal",[n.aD],Object.getOwnPropertyDescriptor(fe.prototype,"showPrinterErrorModal"),fe.prototype),(0,o.Z)(fe.prototype,"closePrinterErrorModal",[n.aD],Object.getOwnPropertyDescriptor(fe.prototype,"closePrinterErrorModal"),fe.prototype),(0,o.Z)(fe.prototype,"setSelectedPrinter",[n.aD],Object.getOwnPropertyDescriptor(fe.prototype,"setSelectedPrinter"),fe.prototype),(0,o.Z)(fe.prototype,"syncZebraPrinters",[n.aD],Object.getOwnPropertyDescriptor(fe.prototype,"syncZebraPrinters"),fe.prototype),fe);var Me,Ce,Ae,Te,Oe,Pe,Ne,_e,Ze,Ie,De,Ee;const ke="AUTH_STORAGE_KEY";let Le=(Me=class{resetStore(){this.dataPrefetched=!1,this.dataPrefecthLoading=!1,this.modalWarningVisible=!1,this.accountWarningType="",this.modalWarningAlreadySeen=!1,this.modalWhatsappCounterVisible=!1,this.whatsappWarningType="",this.modalShipmentsCounterVisible=!1,this.shipmentsWarningType="",this.ordersStore.reset(),this.carriersStore.reset(),this.marketplacesStore.reset(),this.userStore.reset(),this.companiesStore.reset(),this.ratesStore.reset(),this.shipmentsStore.reset(),this.pickupsStore.reset(),this.authStore.reset(),this.adminStore.resetStore(),this.websocketStore.reset(),this.paymentSubscriptionsStore.reset(),this.paymentMethodsStore.reset(),this.parcelsStore.reset(),this.ordersListStateStore.reset(),this.returnsListStateStore.reset(),this.addressesStore.reset(),this.trackingNotificationsStore.reset(),this.financeStore.reset(),this.automationRulesStore.reset(),this.returnsStore.reset(),this.deliveryEstimateStore.reset(),this.customRatesStore.reset(),this.selfOnboardingStore.reset(),this.subscriptionsStore.reset(),this.trackingNotificationsStore.reset(),this.appsStore.reset()}startDataPrefetch(){this.dataPrefecthLoading=!0,this.dataPrefetched=!1}dataPrefetchCompleted(){this.dataPrefecthLoading=!1,this.dataPrefetched=!0}setModalWarningVisible(e){this.modalWarningVisible=e}setAccountWarningType(e){this.accountWarningType=e}setModalWarningAlreadySeen(e){this.modalWarningAlreadySeen=e}setModalWhatsappCounterVisible(e){this.modalWhatsappCounterVisible=e}setWhatsappWarningType(e){this.whatsappWarningType=e}setModalShipmentsCounterVisible(e){this.modalShipmentsCounterVisible=e}setShipmentsWarningType(e){this.shipmentsWarningType=e}setAppVersion(e){this.appVersion=e}setVersionHasChanged(){this.appVersionChanged=!0}constructor(e){(0,i.Z)(this,"dataPrefetched",Ce,this),(0,i.Z)(this,"dataPrefecthLoading",Ae,this),(0,i.Z)(this,"modalWarningVisible",Te,this),(0,i.Z)(this,"accountWarningType",Oe,this),(0,i.Z)(this,"modalWarningAlreadySeen",Pe,this),(0,i.Z)(this,"modalWhatsappCounterVisible",Ne,this),(0,i.Z)(this,"whatsappWarningType",_e,this),(0,i.Z)(this,"modalShipmentsCounterVisible",Ze,this),(0,i.Z)(this,"shipmentsWarningType",Ie,this),(0,i.Z)(this,"appVersion",De,this),(0,i.Z)(this,"appVersionChanged",Ee,this),(0,n.rC)(this),this.storageService=e;const t=this.storageService.getItem(ke);this.authStore=new f(this),t&&(this.authStore.auth=JSON.parse(t)),this.carriersStore=new ut(this),this.marketplacesStore=new Tt(this),this.userStore=new Nt(this),this.companiesStore=new kt(this),this.ratesStore=new qt(this),this.shipmentsStore=new Jt(this),this.websocketStore=new ls(this),this.pickupsStore=new hs(this),this.paymentSubscriptionsStore=new js(this),this.paymentMethodsStore=new Ts(this),this.financeStore=new Es(this),this.parcelsStore=new Rs(this),this.addressesStore=new Bs(this),this.ordersListStateStore=new Ks(this),this.returnsListStateStore=new U(this),this.ordersStore=new et(this,this.ordersListStateStore,this.companiesStore,this.userStore),this.returnsStore=new K(this,this.returnsListStateStore),this.trackingNotificationsStore=new tr(this),this.financeStore=new Es(this),this.automationRulesStore=new ar(this),this.adminStore=new $t(this),this.deliveryEstimateStore=new D(this),this.customRatesStore=new _(this),this.selfOnboardingStore=new oe(this),this.contactsStore=new S(this),this.walletStore=new ye(this),this.conversationsStore=new A(this),this.zebraPrintersStore=new we(this),this.subscriptionsStore=new vr(this),this.transactionalWhatsappStore=new de(this),this.appsStore=new xr(this),(0,n.U5)((()=>this.authStore.auth),(e=>{void 0!==e?this.storageService.setItem(ke,JSON.stringify(e)):this.storageService.removeItem(ke)}))}},Ce=(0,o.Z)(Me.prototype,"dataPrefetched",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ae=(0,o.Z)(Me.prototype,"dataPrefecthLoading",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Te=(0,o.Z)(Me.prototype,"modalWarningVisible",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oe=(0,o.Z)(Me.prototype,"accountWarningType",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Pe=(0,o.Z)(Me.prototype,"modalWarningAlreadySeen",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ne=(0,o.Z)(Me.prototype,"modalWhatsappCounterVisible",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_e=(0,o.Z)(Me.prototype,"whatsappWarningType",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ze=(0,o.Z)(Me.prototype,"modalShipmentsCounterVisible",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ie=(0,o.Z)(Me.prototype,"shipmentsWarningType",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),De=(0,o.Z)(Me.prototype,"appVersion",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ee=(0,o.Z)(Me.prototype,"appVersionChanged",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,o.Z)(Me.prototype,"resetStore",[n.aD],Object.getOwnPropertyDescriptor(Me.prototype,"resetStore"),Me.prototype),(0,o.Z)(Me.prototype,"startDataPrefetch",[n.aD],Object.getOwnPropertyDescriptor(Me.prototype,"startDataPrefetch"),Me.prototype),(0,o.Z)(Me.prototype,"dataPrefetchCompleted",[n.aD],Object.getOwnPropertyDescriptor(Me.prototype,"dataPrefetchCompleted"),Me.prototype),(0,o.Z)(Me.prototype,"setModalWarningVisible",[n.aD],Object.getOwnPropertyDescriptor(Me.prototype,"setModalWarningVisible"),Me.prototype),(0,o.Z)(Me.prototype,"setAccountWarningType",[n.aD],Object.getOwnPropertyDescriptor(Me.prototype,"setAccountWarningType"),Me.prototype),(0,o.Z)(Me.prototype,"setModalWarningAlreadySeen",[n.aD],Object.getOwnPropertyDescriptor(Me.prototype,"setModalWarningAlreadySeen"),Me.prototype),(0,o.Z)(Me.prototype,"setModalWhatsappCounterVisible",[n.aD],Object.getOwnPropertyDescriptor(Me.prototype,"setModalWhatsappCounterVisible"),Me.prototype),(0,o.Z)(Me.prototype,"setWhatsappWarningType",[n.aD],Object.getOwnPropertyDescriptor(Me.prototype,"setWhatsappWarningType"),Me.prototype),(0,o.Z)(Me.prototype,"setModalShipmentsCounterVisible",[n.aD],Object.getOwnPropertyDescriptor(Me.prototype,"setModalShipmentsCounterVisible"),Me.prototype),(0,o.Z)(Me.prototype,"setShipmentsWarningType",[n.aD],Object.getOwnPropertyDescriptor(Me.prototype,"setShipmentsWarningType"),Me.prototype),(0,o.Z)(Me.prototype,"setAppVersion",[n.aD],Object.getOwnPropertyDescriptor(Me.prototype,"setAppVersion"),Me.prototype),(0,o.Z)(Me.prototype,"setVersionHasChanged",[n.aD],Object.getOwnPropertyDescriptor(Me.prototype,"setVersionHasChanged"),Me.prototype),Me);var Re,Fe,Ue,Ge,Be,$e,ze,We,He,Ve,qe,Ye,Ke,Xe,Qe,Je=s(25108);V().extend(Y());let et=(Re=class extends l{get ordersPaymentMethods(){return Array.from(this.paymentMethodsSet).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase())))}get hasOtherOrders(){return Boolean(this.nextPageToken)}async loadPaymentMethods(){const e=await this.callApi({method:h.yL.POST,url:`${m.MF.orders.root}/fulltext/search/distinct`,payload:{field:"paymentMethod",size:100},runInBackground:!0});(0,n.z)((()=>{this.processApiResult(e,(e=>{if(!e.data)return;const t=Object.keys(e.data).filter((e=>e));this.paymentMethodsSet=new Set(t)}))}))}get orders(){var e;return null!==(e=this.rootStore.ordersListStateStore)&&void 0!==e&&e.isFiltering||"all"===this.rootStore.ordersListStateStore.orderStatus?this.filteringResult:"archived"===this.rootStore.ordersListStateStore.orderStatus?this.archivedResult:this.allOrders}setDownloadLock(e){this.downloadLock=e}get approximateOrdersCount(){var e,t;return null!==(e=this.rootStore.ordersListStateStore)&&void 0!==e&&e.isFiltering||"all"===this.rootStore.ordersListStateStore.orderStatus?this.approximateFilteringResultCount:"archived"===(null===(t=this.rootStore.ordersListStateStore)||void 0===t?void 0:t.orderStatus)?this.approximateArchivedResultCount:this.hasOtherOrders?this.ordersArray.length+this.ordersPerPage:this.ordersArray.length}get ordersPerPage(){var e;return(null===(e=this.rootStore.userStore.userInfo)||void 0===e?void 0:e.ordersPerPage)||50}reset(){this.resetOrdersMaps(),this.paymentMethodsSet=new Set,this.ordersCountByStatus=new Map,this.selectedOrder=null,this.nextPageToken=void 0,this.trackingRefreshCounter=0,this.alreadyLazyLoading=!1}convertOrdersToMap(e){var t;const s=new Map;return null===(t=e.data)||void 0===t||t.items.forEach((e=>{s.set(e.order.id,e)})),s}convertOrdersToMapAppend(e,t){var s;null===(s=e.data)||void 0===s||s.items.forEach((e=>{t.set(e.order.id,e)}))}getShipment(e){return"shipment"in e&&e.shipment?e.shipment:"shipments"in e&&e.shipments&&e.shipments.length?e.shipments[e.shipments.length-1]:void 0}convertOrderToSingleShipment(e){return{customsRequired:e.customsRequired,items:e.items,order:e.order,shipment:this.getShipment(e)}}convertOrdersCountByStatus(e){this.ordersCountByStatus=new Map;for(const e of Object.values(F.OrderStatuses))this.ordersCountByStatus.set(e,0);for(const t of e)this.ordersCountByStatus.set(t.order_status_type,t.count)}showFilterResultLoading(){this.showLoading(),this.isLoadingFilteringResult=!0}hideFilterResultLoading(){this.hideLoading(),this.isLoadingFilteringResult=!1}showArchivedResultLoading(){this.showLoading(),this.isLoadingArchivedResult=!0}hideArchivedResultLoading(){this.hideLoading(),this.isLoadingArchivedResult=!1}async loadOrdersPage(e){var t,s,r,a;if(!e||"misc"===e||"searchActive"===e)return;if(null===(t=this.rootStore.authStore)||void 0===t||null===(s=t.auth)||void 0===s||!s.accessToken)return;const i=!(null!==(r=this.rootStore.companiesStore)&&void 0!==r&&null!==(a=r.companyInfo)&&void 0!==a&&a.hideExternallyFulfilled);if(null===this.nextPageToken)return;let o=`${m.MF.orders.root}/by_status?status=${e}&includeExternallyHandled=${i}&limit=${this.ordersPerPage}`;void 0!==this.nextPageToken&&(o+=`&page=${this.nextPageToken}`);const l=await this.callApi({method:h.yL.GET,url:o});(0,n.z)((()=>{this.processApiResult(l,(e=>{var t;this.convertOrdersToMapAppend(e,this.allOrders),this.nextPageToken=(null===(t=e.data)||void 0===t?void 0:t.nextPage)||null}))}))}async getOrderStatusCount(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.orders.root}/status/by_status_count/`});(0,n.z)((()=>{this.processApiResult(e,(e=>{e.data&&this.convertOrdersCountByStatus(e.data.items)}))}))}async getOrderById(e,t){let s=this.ordersArray.find((t=>t.order.id===e));if(t&&(s=void 0),s)this.selectedOrder=s;else{const t=await this.callApi({method:h.yL.GET,url:`${m.MF.orders.root}/${e}`});this.processApiResult(t,(t=>{t.data&&(this.updateOrder(e,t.data),this.selectedOrder=this.convertOrderToSingleShipment(t.data))}))}}async loadOrder(e){try{return(await this.callApi({method:h.yL.GET,url:`${m.MF.orders.root}/${e}`,runInBackground:!0})).data}catch(t){Je.error(`Error importing order with id=${e}: ${t}`)}}findOrder(e){return this.allOrders.get(e)||this.filteringResult.get(e)||this.archivedResult.get(e)}updateOrder(e,t){var s;this.archivedResult.has(e)&&this.archivedResult.set(e,t),this.allOrders.has(e)&&this.allOrders.set(e,t),this.filteringResult.has(e)&&this.filteringResult.set(e,t),(null===(s=this.selectedOrder)||void 0===s?void 0:s.order.id)===e&&(this.selectedOrder=this.convertOrderToSingleShipment(t))}async refreshOrderById(e,t){const s=await this.loadOrder(e);(0,n.z)((()=>{if(s){const r=this.findOrder(e);r?(r.order.status!==s.order.status&&(this.decreaseMapValue(this.ordersCountByStatus,r.order.status),this.increaseMapValue(this.ordersCountByStatus,s.order.status)),this.updateOrder(e,s),this.lazyLoadNextPageIfNeeded()):t&&(t!==s.order.status&&(this.decreaseMapValue(this.ordersCountByStatus,t),this.increaseMapValue(this.ordersCountByStatus,s.order.status)),this.updateOrder(e,s)),this.selectedOrder&&this.selectedOrder.order.id===e&&(this.selectedOrder=this.convertOrderToSingleShipment(s))}}))}async importOrderById(e){if(!this.allOrders.has(e)){const t=await this.loadOrder(e);(0,n.z)((()=>{t&&(this.allOrders.set(e,t),t.order.paymentMethod&&this.paymentMethodsSet.add(t.order.paymentMethod),this.increaseMapValue(this.ordersCountByStatus,t.order.status),this.selectedOrder&&this.selectedOrder.order.id===e&&(this.selectedOrder=this.convertOrderToSingleShipment(t)))}))}return this.allOrders.get(e)}async editOrdersForShipment(e){const t={orders:e},s=await this.callApi({method:h.yL.PATCH,url:`${m.MF.orders.bulkSave}`,payload:t});this.processApiResult(s,(e=>{var t;null===(t=e.data)||void 0===t||t.items.forEach((e=>{const t=this.findOrder(e.id);if(t){this.decreaseMapValue(this.ordersCountByStatus,t.order.status);const s={...t};s.order={...s.order,...e},this.updateOrder(s.order.id,s),this.increaseMapValue(this.ordersCountByStatus,e.status)}}))}))}shouldPrintZpl(e,t,s){var r,a;if(t||s)return!1;const i=e.some((e=>{var t,s,r,a,i;return"shipment"in e?["ZPL","ZPLII"].includes(null===(t=e.shipment)||void 0===t||null===(s=t.responses[0].labelType)||void 0===s?void 0:s.toUpperCase()):"shipments"in e&&["ZPL","ZPLII"].includes(e.shipments&&(null===(r=e.shipments[e.shipments.length-1])||void 0===r||null===(a=r.responses[0])||void 0===a||null===(i=a.labelType)||void 0===i?void 0:i.toUpperCase())||"")})),o=(null===(r=this.rootStore.zebraPrintersStore.zebraPrinters)||void 0===r?void 0:r.length)>0,n=!(null!==(a=this.rootStore.companiesStore.companyInfo)&&void 0!==a&&a.zplToPdf);return i&&o&&n}async getLabelsForPickup(e){let{orders:t=[],labelType:s,isAdmin:r=!1,startPosition:a,printCustomsDocuments:i=!1,isReturnOrder:o=!1,skipZplCheck:n=!1,printer:l,useZebraBrowserPrinter:d=!1}=e;if(this.shouldPrintZpl(t,n,o)&&!d){const e=t.filter((e=>{var t,s,r,a,i;return"shipment"in e?["ZPL","ZPLII"].includes(null===(t=e.shipment)||void 0===t||null===(s=t.responses[0].labelType)||void 0===s?void 0:s.toUpperCase()):"shipments"in e&&(e.shipments&&["ZPL","ZPLII"].includes(null===(r=e.shipments[e.shipments.length-1])||void 0===r||null===(a=r.responses[0])||void 0===a||null===(i=a.labelType)||void 0===i?void 0:i.toUpperCase()))})),n=this.rootStore.zebraPrintersStore.onlinePrinters[0];if(!l&&n&&(l=n.serialNumber,this.rootStore.zebraPrintersStore.setSelectedPrinter(n)),await this.printZplLabels(e.map((e=>e.order.id)),s,r,a,i,o,l),t=t.filter((e=>{var t,s,r,a,i;return"shipment"in e?!["ZPL","ZPLII"].includes(null===(t=e.shipment)||void 0===t||null===(s=t.responses[0].labelType)||void 0===s?void 0:s.toUpperCase()):"shipments"in e&&(e.shipments&&!["ZPL","ZPLII"].includes(null===(r=e.shipments[e.shipments.length-1])||void 0===r||null===(a=r.responses[0])||void 0===a||null===(i=a.labelType)||void 0===i?void 0:i.toUpperCase()))})),!t.length)return}return(await this.callApi({method:h.yL.POST,url:m.MF.orders.printLabels,payload:{ids:t.map((e=>o?e.return.id:e.order.id)),labelType:s,isAdmin:r,startPosition:a,isReturnOrder:o,printCustomsDocuments:i}})).data}async getLabels(e){let{ids:t=[],labelType:s,isAdmin:r=!1,startPosition:a,printCustomsDocuments:i=!1,isReturnOrder:o=!1,skipZplCheck:l=!1,printer:d,useZebraBrowserPrinter:c=!1,items:p=[]}=e;const u=p.length>0?p:t.map((e=>(o?this.rootStore.returnsStore.returns:this.orders).get(e)));if(this.shouldPrintZpl(u,l,o)&&!c){const e=u.filter((e=>{return!!e&&("shipment"in e?["ZPL","ZPLII"].includes(null===(t=e.shipment)||void 0===t||null===(s=t.responses[0].labelType)||void 0===s?void 0:s.toUpperCase()):"shipments"in e&&(e.shipments&&["ZPL","ZPLII"].includes(null===(r=e.shipments[e.shipments.length-1])||void 0===r||null===(a=r.responses[0])||void 0===a||null===(i=a.labelType)||void 0===i?void 0:i.toUpperCase())));var t,s,r,a,i})),t=this.rootStore.zebraPrintersStore.onlinePrinters[0];if(!d&&t&&(d=t.serialNumber,this.rootStore.zebraPrintersStore.setSelectedPrinter(t)),await this.printZplLabels(e.map((e=>e.order.id)),s,r,a,i,o,d),p=p.filter((e=>{var t,s,r,a,i;return"shipment"in e?!["ZPL","ZPLII"].includes(null===(t=e.shipment)||void 0===t||null===(s=t.responses[0].labelType)||void 0===s?void 0:s.toUpperCase()):"shipments"in e&&(e.shipments&&!["ZPL","ZPLII"].includes(null===(r=e.shipments[e.shipments.length-1])||void 0===r||null===(a=r.responses[0])||void 0===a||null===(i=a.labelType)||void 0===i?void 0:i.toUpperCase()))})),!p.length)return}const g=await this.callApi({method:h.yL.POST,url:`${m.MF.orders.printLabels}`,payload:{ids:u.map((e=>o?e.return.id:e.order.id)),labelType:s,isAdmin:r,startPosition:a,isReturnOrder:o,printCustomsDocuments:i}});return(0,n.z)((()=>{this.processApiResult(g,(()=>{t.forEach((e=>{var t;const s=null===(t=this.orders)||void 0===t?void 0:t.get(e);s&&(s.order.labelPrinted=!0)}))}))})),g.data}async getOrderSummary(e){let{ids:t=[]}=e;const s=await this.callApi({method:h.yL.POST,url:`${m.MF.orders.printOrderSummary}`,payload:{ids:t}});return this.processApiResult(s),s.data}async printZplLabels(e,t,s,r,a,i,o){const l=await this.callApi({method:h.yL.POST,url:`${m.MF.orders.printZplLabels}`,payload:{ids:e,labelType:t,isAdmin:s,startPosition:r,isReturnOrder:i,printCustomsDocuments:a,printer:o}});400!==l.statusCode?(200===l.statusCode&&this.rootStore.zebraPrintersStore.closePrinterErrorModal(),(0,n.z)((()=>{e.map((e=>this.allOrders.get(e))).forEach((e=>{var t;null==e||null===(t=e.shipments)||void 0===t||t.forEach((e=>{var t;null!==(t=e.responses[0])&&void 0!==t&&t.labelPrinted&&(e.responses[0].labelPrinted=!0)}))}))}))):this.rootStore.zebraPrintersStore.showPrinterErrorModal()}async getWaybill(e){const t=await this.callApi({method:h.yL.GET,url:`${m.MF.shipments.getWaybill}/${e}`});return this.processApiResult(t),t.data}async getShipmentReceipt(e){const t=await this.callApi({method:h.yL.GET,url:`${m.MF.shipments.getShipmentReceipt}/${e}`});return(0,n.z)((()=>{this.processApiResult(t)})),t.data}changeOrderStatus(e,t,s){var r,a;const i=this.findOrder(e);if(i?(this.decreaseMapValue(this.ordersCountByStatus,i.order.status),i.order.status=t,this.updateOrder(e,i),this.increaseMapValue(this.ordersCountByStatus,t),this.allOrders=new Map(this.allOrders)):s&&(this.decreaseMapValue(this.ordersCountByStatus,s),this.increaseMapValue(this.ordersCountByStatus,t)),this.lazyLoadNextPageIfNeeded(),(null===(r=this.selectedOrder)||void 0===r||null===(a=r.order)||void 0===a?void 0:a.id)===e){const e=this.selectedOrder;e.order.status=t,this.selectedOrder=e}}get ordersArray(){var e,t,s;const r=Array.from(this.orders.values()).map((e=>this.convertOrderToSingleShipment(e)));if(this.rootStore.ordersListStateStore.isFiltering)return r;const a=!1===(null===(e=this.rootStore.companiesStore)||void 0===e||null===(t=e.companyInfo)||void 0===t?void 0:t.hideExternallyFulfilled),i=(0,m.V2)((null===(s=this.rootStore.ordersListStateStore)||void 0===s?void 0:s.orderStatus)||"incoming_orders",a);return r.filter((e=>{var t;return i.includes(null===(t=e.order)||void 0===t?void 0:t.status)&&!e.order.archived})).sort(((e,t)=>{var s,r,a,i,o,n,l,d;const c=e.order.sortValue||e.order.storeCreationDate||e.order.created||0,p=t.order.sortValue||t.order.storeCreationDate||t.order.created||0;return(null===(s=this.rootStore.marketplacesStore)||void 0===s||null===(r=s.selectedMarketplaces)||void 0===r||null===(a=r.data[String(e.order.selectedStoreId)])||void 0===a||null===(i=a.store)||void 0===i?void 0:i.internalCode)===F.availableStores.amazon.internalCode&&(null===(o=this.rootStore.marketplacesStore)||void 0===o||null===(n=o.selectedMarketplaces)||void 0===n||null===(l=n.data[String(t.order.selectedStoreId)])||void 0===l||null===(d=l.store)||void 0===d?void 0:d.internalCode)===F.availableStores.amazon.internalCode&&c===p?(t.order.created||0)-(e.order.created||0):p-c})).filter(((e,t,s)=>t===s.findIndex((t=>t.order.id===e.order.id))))}get archivedOrdersArray(){return Array.from(this.archivedResult.values()).map((e=>this.convertOrderToSingleShipment(e))).sort(((e,t)=>{var s,r,a,i,o,n,l,d;const c=e.order.sortValue||e.order.storeCreationDate||e.order.created||0,p=t.order.sortValue||t.order.storeCreationDate||t.order.created||0;return(null===(s=this.rootStore.marketplacesStore)||void 0===s||null===(r=s.selectedMarketplaces)||void 0===r||null===(a=r.data[String(e.order.selectedStoreId)])||void 0===a||null===(i=a.store)||void 0===i?void 0:i.internalCode)===F.availableStores.amazon.internalCode&&(null===(o=this.rootStore.marketplacesStore)||void 0===o||null===(n=o.selectedMarketplaces)||void 0===n||null===(l=n.data[String(t.order.selectedStoreId)])||void 0===l||null===(d=l.store)||void 0===d?void 0:d.internalCode)===F.availableStores.amazon.internalCode&&c===p?(t.order.created||0)-(e.order.created||0):p-c}))}get ordersCountByStatusArray(){return this.ordersCountByStatus}async addManualOrder(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.orders.root}`,payload:e});(0,n.z)((()=>{this.processApiResult(t,(e=>{e.data&&(this.increaseMapValue(this.ordersCountByStatus,"pending"),this.refreshOrderById(e.data.order.id))}))}))}async patchManualOrder(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.orders.root}/manualOrder/${e.id}`,payload:e});(0,n.z)((()=>{this.processApiResult(t,(t=>{if(t.data){const s=this.findOrder(e.id);if(s&&(s.order={...s.order,...t.data},this.updateOrder(e.id,s)),this.selectedOrder){const e={...this.selectedOrder.order,...t.data};this.selectedOrder.order=e}}}))}))}async deleteShipment(e,t){const s=await this.callApi({method:h.yL.DELETE,url:`/v1/shipments/${t}`});this.processApiResult(s,(async()=>{await this.refreshOrderById(e)}))}async archiveOrder(e){await this._archiveOrder(e,!0),this.lazyLoadNextPageIfNeeded()}async unarchiveOrder(e){await this._archiveOrder(e,!1)}async _archiveOrder(e,t){const s=this.findOrder(e);if(!s||s.order.archived===t)return;const r=await this.callApi({method:h.yL.PATCH,url:`${m.MF.orders.root}/${e}/archive/${t}`});(0,n.z)((()=>{this.processApiResult(r,(()=>{var r,a;s&&s.order.archived!==t&&(this.changeMapValue(this.ordersCountByStatus,s.order.status,t?-1:1),s.order.archived=t,t?this.archivedResult.set(e,s):this.archivedResult.delete(e)),(null===(r=this.selectedOrder)||void 0===r||null===(a=r.order)||void 0===a?void 0:a.id)===e&&(this.selectedOrder.order.archived=t)}))}))}lazyLoadNextPageIfNeeded(){var e;this.ordersArray.length<this.ordersPerPage&&!this.alreadyLazyLoading&&this.nextPageToken&&(this.alreadyLazyLoading=!0,this.loadOrdersPage(null===(e=this.rootStore)||void 0===e?void 0:e.ordersListStateStore.orderStatus).finally((()=>{this.alreadyLazyLoading=!1})))}async patchManualCloseOrder(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.orders.bulkClose}`,payload:{ids:e,description:"#ManuallySetAsDelivered#"}});(0,n.z)((()=>{this.processApiResult(t,(()=>{e.forEach((e=>{this.changeOrderStatus(e,"delivered")})),this.trackingRefreshCounter++}))}))}resetOrdersMaps(){this.filteringResult=new Map,this.archivedResult=new Map,this.allOrders=new Map,this.approximateFilteringResultCount=0,this.approximateArchivedResultCount=0,this.nextPageToken=void 0}get numOfSearchPagesLoaded(){let e=this.approximateNumOfPagesLoaded(this.filteringResult.size);return this.filteringResult.size%this.ordersPerPage&&e++,e}get numOfArchivedPagesLoaded(){let e=this.approximateNumOfPagesLoaded(this.archivedResult.size);return this.archivedResult.size%this.ordersPerPage&&e++,e}get numOfOrderPagesLoaded(){return this.approximateNumOfPagesLoaded(this.ordersArray.length)}approximateNumOfPagesLoaded(e){return Math.floor(e/this.ordersPerPage)}async fetchOrders(){const e=this.numOfSearchPagesLoaded;this.stateStore.isFiltering||"all"===this.stateStore.orderStatus?await this.filterOrders(this.stateStore.ordersFilters,e):"archived"===this.stateStore.orderStatus?await this.getArchivedOrders(e):await this.loadOrdersPage(this.stateStore.orderStatus)}buildOrderRequest(e){var t,s,r,a,i,o,n,l,d;const{filters:c,page:p}=e,u=!(null!==(t=this.rootStore.companiesStore)&&void 0!==t&&null!==(s=t.companyInfo)&&void 0!==s&&s.hideExternallyFulfilled),h=(0,m.V2)(c.selectedStatus,u),g={page:p,limit:this.ordersPerPage,fields:{status:h}};if(null!==c.search&&(g.text=c.search,g.fields.archived=["archived"===this.stateStore.orderStatus]),null!==(r=c.deliveryMethods)&&void 0!==r&&r.length&&(g["shippingInformation.selectedCarrierId"]=c.deliveryMethods),null!==(a=c.stores)&&void 0!==a&&a.length&&(g.fields.selectedStoreId=c.stores.map((e=>"isManual"===e?"0":e))),null!==(i=c.destinations)&&void 0!==i&&i.length&&(g.fields["addressTo.countryIsoCode.keyword"]=c.destinations),null!==(o=c.deliveryMethods)&&void 0!==o&&o.length&&(g.fields["shippingInformation.selectedCarrierId"]=c.deliveryMethods),null!==(n=c.paymentMethod)&&void 0!==n&&n.length&&(g.fields.paymentMethod=c.paymentMethod),null!==(l=c.labelPrinted)&&void 0!==l&&l.length&&(g.fields.labelPrinted=["printed"===c.labelPrinted]),null!==(d=c.orderTags)&&void 0!==d&&d.length&&(g.fieldsInFilter={orderTags:c.orderTags}),c.rangeDates&&c.rangeDates[0]&&c.rangeDates[1])try{const e={field:"storeCreationDate",start:new Date(c.rangeDates[0]).toISOString(),end:new Date(c.rangeDates[1]).toISOString()};g.range=e}catch(e){Je.log(e)}return g}async filterOrders(e,t){this.showFilterResultLoading();const s=this.buildOrderRequest({filters:e,page:t}),r=await this.callApi({method:h.yL.POST,url:`${m.MF.orders.root}/fulltext/filters`,payload:s,runInBackground:!0});(0,n.z)((()=>{this.processApiResult(r,(()=>{this.convertOrdersToMapAppend(r,this.filteringResult),this.hideLoading(),this.hideFilterResultLoading(),this.approximateFilteringResultCount=r.data.totalPages>1?r.data.totalPages*this.ordersPerPage:this.filteringResult.size}),(()=>{this.hideLoading(),this.hideFilterResultLoading()}))}))}async getArchivedOrders(e){var t,s;this.showArchivedResultLoading();let r=Object.values(F.OrderStatuses);null!==(t=this.rootStore.companiesStore)&&void 0!==t&&null!==(s=t.companyInfo)&&void 0!==s&&s.hideExternallyFulfilled&&(r=r.filter((e=>"externally_handled"!==e)));const a={page:e,fields:{archived:[!0],status:r},ordersPerPage:this.ordersPerPage},i=await this.callApi({method:h.yL.POST,url:`${m.MF.orders.root}/fulltext/filters`,payload:a,runInBackground:!0});(0,n.z)((()=>{this.processApiResult(i,(()=>{this.convertOrdersToMapAppend(i,this.archivedResult),this.hideFilterResultLoading(),this.approximateArchivedResultCount=i.data.totalPages>1?i.data.totalPages*this.ordersPerPage:this.archivedResult.size}),(()=>{this.hideLoading(),this.hideFilterResultLoading()}))}))}async loadForgottenShipmentOrders(){const e=await this.callApi({method:h.yL.POST,url:`${m.MF.orders.root}/fulltext/filters/compact`,payload:{text:"*",range:{field:"updated",start:new Date(1970,0,1).toISOString(),end:V()().subtract(3,"d").startOf("day").toISOString()},fields:{status:[F.OrderStatuses.FULFILLED],archived:[!1]},page:0,limit:this.ordersPerPage},runInBackground:!0});this.processApiResult(e,(()=>{(0,n.z)((()=>{var t;this.expiredOrdersCount=(null===(t=e.data)||void 0===t?void 0:t.items.length)||0}))}))}async editPaperlessShippingData(e,t){if(!e)return;const s=await this.callApi({method:h.yL.PATCH,url:`${m.MF.orders.plsData}/${e}`,payload:t});var r,a;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a?void 0:a.data.message)}async deletePaperlessShippingData(e){if(!e)return;const t=await this.callApi({method:h.yL.DELETE,url:`${m.MF.orders.plsData}/${e}`});var s,r;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r?void 0:r.data.message)}setPaperlessShippingData(e){this.selectedOrder&&(this.selectedOrder.order.paperlessShippingData=e?{...this.selectedOrder.order.paperlessShippingData,...e}:void 0,this.selectedOrder={...this.selectedOrder})}setPaperlessShippingFileInfo(e){this.selectedOrder&&(this.selectedOrder.order.paperlessShippingFileInfo=e,this.selectedOrder={...this.selectedOrder})}async uploadPaperlessShippingFile(e,t,s){const r=await this.callApi({method:h.yL.GET,url:`${m.MF.orders.plsPresignedUrlUpload}/${e}/${t}/${s.name}`});var a,i;if(r.isError)throw new Error(null===(a=r.errorData)||void 0===a||null===(i=a.response)||void 0===i?void 0:i.data.message);r.data&&await ne.Z.put(r.data.signedUrl,s).catch((e=>{Je.log(e)}))}async downloadPaperlessShippingFile(e,t,s){const r=await this.callApi({method:h.yL.GET,url:`${m.MF.orders.plsPresignedUrlDownload}/${e}/${t}/${s}`});var a,i;if(r.isError)throw new Error(null===(a=r.errorData)||void 0===a||null===(i=a.response)||void 0===i?void 0:i.data.message);if(!r.data)return;const o=document.createElement("a");o.href=r.data.signedUrl,o.download=s,document.body.appendChild(o),o.click(),document.body.removeChild(o)}async deletePaperlessShippingFile(e,t){const s=await this.callApi({method:h.yL.PUT,url:`${m.MF.orders.plsPresignedUrlDelete}/${e}`,payload:t});var r,a;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a?void 0:a.data.message)}async editOrderProduct(e){const{orderId:t,itemId:s,values:r}=e,a=await this.callApi({method:h.yL.PATCH,url:`${m.MF.orders.root}/${t}/items/${s}`,payload:r});var i,o;if(a.isError)throw new Error(null===(i=a.errorData)||void 0===i||null===(o=i.response)||void 0===o?void 0:o.data.message);(0,n.z)((()=>{var e;const a=this.allOrders.get(t);a&&(a.items=null===(e=a.items)||void 0===e?void 0:e.map((e=>e.id===s?r:e)),this.allOrders.set(t,a))}))}increaseMapValue(e,t){this.changeMapValue(e,t,1)}decreaseMapValue(e,t){this.changeMapValue(e,t,-1)}changeMapValue(e,t,s){if(e.has(t)){const r=e.get(t)||0;e.set(t,r+s)}}async updateSingleOrder(e,t){const s=await this.callApi({method:h.yL.PATCH,url:`${m.MF.orders.updateOrder}/${e}`,payload:{orderTags:t}});var r,a;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a?void 0:a.data.message);return s.data&&this.updateOrder(e,s.data),s.data||{}}async getAvailableOrderTags(){const e=await this.callApi({method:h.yL.GET,url:m.MF.orders.availableOrderTags});var t,s;if(e.isError)throw new Error(null===(t=e.errorData)||void 0===t||null===(s=t.response)||void 0===s?void 0:s.data.message);return e.data||[]}async addOrdersTags(e,t){const s=await this.callApi({method:h.yL.POST,url:m.MF.orders.addOrderTags,payload:{orderIds:e,orderTags:t}});var r,a;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a?void 0:a.data.message);return s.data||[]}async removeOrdersTags(e,t){const s=await this.callApi({method:h.yL.POST,url:m.MF.orders.removeOrdersTags,payload:{orderIds:e,orderTags:t}});var r,a;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a?void 0:a.data.message);return s.data||[]}constructor(e,t,s,r){super(e),(0,i.Z)(this,"allOrders",Fe,this),(0,i.Z)(this,"approximateFilteringResultCount",Ue,this),(0,i.Z)(this,"approximateArchivedResultCount",Ge,this),(0,i.Z)(this,"isLoadingFilteringResult",Be,this),(0,i.Z)(this,"isLoadingArchivedResult",$e,this),(0,i.Z)(this,"paymentMethodsSet",ze,this),(0,i.Z)(this,"nextPageToken",We,this),(0,i.Z)(this,"trackingRefreshCounter",He,this),(0,i.Z)(this,"filteringResult",Ve,this),(0,i.Z)(this,"archivedResult",qe,this),(0,i.Z)(this,"expiredOrdersCount",Ye,this),(0,i.Z)(this,"ordersCountByStatus",Ke,this),(0,i.Z)(this,"selectedOrder",Xe,this),this.alreadyLazyLoading=!1,(0,i.Z)(this,"downloadLock",Qe,this),this.stateStore=t,(0,n.rC)(this),(0,n.U5)((()=>{var e,a;return{filters:t.ordersFilters,hideExternallyFulfilled:null===(e=s.companyInfo)||void 0===e?void 0:e.hideExternallyFulfilled,ordersPerPage:null===(a=r.userInfo)||void 0===a?void 0:a.ordersPerPage,status:t.orderStatus}}),(async()=>{var e,a;void 0!==(null===(e=s.companyInfo)||void 0===e?void 0:e.hideExternallyFulfilled)&&void 0!==(null===(a=r.userInfo)||void 0===a?void 0:a.ordersPerPage)&&(this.resetOrdersMaps(),1!==t.currentTablePage&&t.setPage(1),this.fetchOrders())})),(0,n.U5)((()=>t.currentTablePage),(async(e,s)=>{if(!(e<s))if(t.isFiltering||"all"===t.orderStatus){this.numOfSearchPagesLoaded<e&&await this.filterOrders(t.ordersFilters,e-1)}else if("archived"===t.orderStatus){this.numOfArchivedPagesLoaded<e&&await this.getArchivedOrders(e-1)}else{this.numOfOrderPagesLoaded<e&&await this.loadOrdersPage(t.orderStatus)}}))}},Fe=(0,o.Z)(Re.prototype,"allOrders",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Ue=(0,o.Z)(Re.prototype,"approximateFilteringResultCount",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ge=(0,o.Z)(Re.prototype,"approximateArchivedResultCount",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Be=(0,o.Z)(Re.prototype,"isLoadingFilteringResult",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$e=(0,o.Z)(Re.prototype,"isLoadingArchivedResult",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ze=(0,o.Z)(Re.prototype,"paymentMethodsSet",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),We=(0,o.Z)(Re.prototype,"nextPageToken",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),He=(0,o.Z)(Re.prototype,"trackingRefreshCounter",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ve=(0,o.Z)(Re.prototype,"filteringResult",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),qe=(0,o.Z)(Re.prototype,"archivedResult",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Ye=(0,o.Z)(Re.prototype,"expiredOrdersCount",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ke=(0,o.Z)(Re.prototype,"ordersCountByStatus",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Xe=(0,o.Z)(Re.prototype,"selectedOrder",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=(0,o.Z)(Re.prototype,"downloadLock",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,o.Z)(Re.prototype,"ordersPaymentMethods",[n.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"ordersPaymentMethods"),Re.prototype),(0,o.Z)(Re.prototype,"hasOtherOrders",[n.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"hasOtherOrders"),Re.prototype),(0,o.Z)(Re.prototype,"loadPaymentMethods",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"loadPaymentMethods"),Re.prototype),(0,o.Z)(Re.prototype,"orders",[n.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"orders"),Re.prototype),(0,o.Z)(Re.prototype,"setDownloadLock",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"setDownloadLock"),Re.prototype),(0,o.Z)(Re.prototype,"approximateOrdersCount",[n.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"approximateOrdersCount"),Re.prototype),(0,o.Z)(Re.prototype,"ordersPerPage",[n.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"ordersPerPage"),Re.prototype),(0,o.Z)(Re.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"reset"),Re.prototype),(0,o.Z)(Re.prototype,"convertOrdersToMap",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"convertOrdersToMap"),Re.prototype),(0,o.Z)(Re.prototype,"convertOrdersToMapAppend",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"convertOrdersToMapAppend"),Re.prototype),(0,o.Z)(Re.prototype,"convertOrdersCountByStatus",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"convertOrdersCountByStatus"),Re.prototype),(0,o.Z)(Re.prototype,"showFilterResultLoading",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"showFilterResultLoading"),Re.prototype),(0,o.Z)(Re.prototype,"hideFilterResultLoading",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"hideFilterResultLoading"),Re.prototype),(0,o.Z)(Re.prototype,"showArchivedResultLoading",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"showArchivedResultLoading"),Re.prototype),(0,o.Z)(Re.prototype,"hideArchivedResultLoading",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"hideArchivedResultLoading"),Re.prototype),(0,o.Z)(Re.prototype,"loadOrdersPage",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"loadOrdersPage"),Re.prototype),(0,o.Z)(Re.prototype,"getOrderStatusCount",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"getOrderStatusCount"),Re.prototype),(0,o.Z)(Re.prototype,"getOrderById",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"getOrderById"),Re.prototype),(0,o.Z)(Re.prototype,"loadOrder",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"loadOrder"),Re.prototype),(0,o.Z)(Re.prototype,"updateOrder",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"updateOrder"),Re.prototype),(0,o.Z)(Re.prototype,"refreshOrderById",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"refreshOrderById"),Re.prototype),(0,o.Z)(Re.prototype,"importOrderById",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"importOrderById"),Re.prototype),(0,o.Z)(Re.prototype,"editOrdersForShipment",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"editOrdersForShipment"),Re.prototype),(0,o.Z)(Re.prototype,"getLabelsForPickup",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"getLabelsForPickup"),Re.prototype),(0,o.Z)(Re.prototype,"getLabels",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"getLabels"),Re.prototype),(0,o.Z)(Re.prototype,"getOrderSummary",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"getOrderSummary"),Re.prototype),(0,o.Z)(Re.prototype,"getWaybill",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"getWaybill"),Re.prototype),(0,o.Z)(Re.prototype,"getShipmentReceipt",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"getShipmentReceipt"),Re.prototype),(0,o.Z)(Re.prototype,"changeOrderStatus",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"changeOrderStatus"),Re.prototype),(0,o.Z)(Re.prototype,"ordersArray",[n.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"ordersArray"),Re.prototype),(0,o.Z)(Re.prototype,"archivedOrdersArray",[n.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"archivedOrdersArray"),Re.prototype),(0,o.Z)(Re.prototype,"ordersCountByStatusArray",[n.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"ordersCountByStatusArray"),Re.prototype),(0,o.Z)(Re.prototype,"addManualOrder",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"addManualOrder"),Re.prototype),(0,o.Z)(Re.prototype,"patchManualOrder",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"patchManualOrder"),Re.prototype),(0,o.Z)(Re.prototype,"deleteShipment",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"deleteShipment"),Re.prototype),(0,o.Z)(Re.prototype,"_archiveOrder",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"_archiveOrder"),Re.prototype),(0,o.Z)(Re.prototype,"lazyLoadNextPageIfNeeded",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"lazyLoadNextPageIfNeeded"),Re.prototype),(0,o.Z)(Re.prototype,"patchManualCloseOrder",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"patchManualCloseOrder"),Re.prototype),(0,o.Z)(Re.prototype,"resetOrdersMaps",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"resetOrdersMaps"),Re.prototype),(0,o.Z)(Re.prototype,"numOfSearchPagesLoaded",[n.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"numOfSearchPagesLoaded"),Re.prototype),(0,o.Z)(Re.prototype,"numOfArchivedPagesLoaded",[n.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"numOfArchivedPagesLoaded"),Re.prototype),(0,o.Z)(Re.prototype,"numOfOrderPagesLoaded",[n.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"numOfOrderPagesLoaded"),Re.prototype),(0,o.Z)(Re.prototype,"fetchOrders",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"fetchOrders"),Re.prototype),(0,o.Z)(Re.prototype,"filterOrders",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"filterOrders"),Re.prototype),(0,o.Z)(Re.prototype,"getArchivedOrders",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"getArchivedOrders"),Re.prototype),(0,o.Z)(Re.prototype,"loadForgottenShipmentOrders",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"loadForgottenShipmentOrders"),Re.prototype),(0,o.Z)(Re.prototype,"editPaperlessShippingData",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"editPaperlessShippingData"),Re.prototype),(0,o.Z)(Re.prototype,"deletePaperlessShippingData",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"deletePaperlessShippingData"),Re.prototype),(0,o.Z)(Re.prototype,"setPaperlessShippingData",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"setPaperlessShippingData"),Re.prototype),(0,o.Z)(Re.prototype,"setPaperlessShippingFileInfo",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"setPaperlessShippingFileInfo"),Re.prototype),(0,o.Z)(Re.prototype,"uploadPaperlessShippingFile",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"uploadPaperlessShippingFile"),Re.prototype),(0,o.Z)(Re.prototype,"downloadPaperlessShippingFile",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"downloadPaperlessShippingFile"),Re.prototype),(0,o.Z)(Re.prototype,"deletePaperlessShippingFile",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"deletePaperlessShippingFile"),Re.prototype),(0,o.Z)(Re.prototype,"editOrderProduct",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"editOrderProduct"),Re.prototype),(0,o.Z)(Re.prototype,"increaseMapValue",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"increaseMapValue"),Re.prototype),(0,o.Z)(Re.prototype,"decreaseMapValue",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"decreaseMapValue"),Re.prototype),(0,o.Z)(Re.prototype,"changeMapValue",[n.aD],Object.getOwnPropertyDescriptor(Re.prototype,"changeMapValue"),Re.prototype),Re);var tt,st,rt,at;tt=class{constructor(){(0,i.Z)(this,"items",st,this),(0,i.Z)(this,"nextPage",rt,this),(0,i.Z)(this,"count",at,this),(0,n.rC)(this)}},st=(0,o.Z)(tt.prototype,"items",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rt=(0,o.Z)(tt.prototype,"nextPage",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=(0,o.Z)(tt.prototype,"count",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null});const it=e=>e.sorting.map((t=>e.data[t]))||[],ot=()=>{const e=[];return F.StandardParcels.forEach((t=>{t.parcelSizes.forEach((s=>{e.push({id:t.carrierName+"_"+s.name,carrierName:t.carrierName,carrierLogo:t.carrierLogo,parcelSize:{id:t.carrierName+"_"+s.name,...s,name:`${t.carrierName} ${s.name}`}})}))})),e};var nt,lt,dt,ct,pt;let ut=(nt=class extends l{reset(){this.availableCarriers=[],this.selectedCarriers={data:{},sorting:[]},this.allAvailableCarriersMap={data:{},sorting:[]}}async getAllAvailableCarriers(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedCarriers}/all_available_carriers/?limit=1000`});(0,n.z)((()=>{this.processApiResult(e,(e=>{e.data&&(this.allAvailableCarriersMap=(0,m.yZ)(e.data.items))}))}))}async getAvailableCarriers(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.carriers.availableCarriers}`});this.processApiResult(e,(e=>{if(this.availableCarriers=[],e.data){for(const t of Object.keys(e.data.items))this.availableCarriers.push(e.data.items[t]);this.availableCarriers.sort(((e,t)=>e.name.localeCompare(t.name)))}}))}async carriersRawPost(e,t,s){const r=await this.callApi({method:h.yL.POST,url:`${m.MF.selectedCarriers}/${e}/${t}`,payload:s});var a,i;if(r.isError)throw new Error(null===(a=r.errorData)||void 0===a||null===(i=a.response)||void 0===i?void 0:i.data.message);return r.data}async carriersRawGet(e,t){const s=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedCarriers}/${e}/${t}`});var r,a;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a?void 0:a.data.message);return s.data}async getSelectedCarriers(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedCarriers}/?limit=2000`});this.processApiResult(e,(e=>{var t;this.selectedCarriers=(0,m.yZ)(null===(t=e.data)||void 0===t?void 0:t.items)}))}async getSelectedCarriersById(e){var t;const s=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedCarriers}/?limit=2000`});var r,a;if(this.processApiResult(s,(e=>{var t;this.selectedCarriers=(0,m.yZ)(null===(t=e.data)||void 0===t?void 0:t.items)})),s.isError)throw new Error(null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a?void 0:a.data.message);return null===(t=s.data)||void 0===t?void 0:t.items.find((t=>t.id===e))}async addSelectedCarrier(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=await this.callApi({method:h.yL.POST,url:`${m.MF.selectedCarriers}`,payload:{internalCode:e.internalCode,customName:e.customName,serviceCodes:e.serviceCodes,credentials:e.credentials,customSettings:e.customSettings,notifications:e.notifications}});return(0,n.z)((()=>{this.processApiResult(s,(e=>{var s,r,a,i;if(!e.data||!t)return;const o=(0,n.ZN)(this.selectedCarriers),l=(0,n.ZN)(this.allAvailableCarriersMap);o.data[null===(s=e.data)||void 0===s?void 0:s.id]=e.data,o.sorting.push(null===(r=e.data)||void 0===r?void 0:r.id.toString()),l.data[null===(a=e.data)||void 0===a?void 0:a.id]=e.data,o.sorting.push(null===(i=e.data)||void 0===i?void 0:i.id.toString()),this.selectedCarriers=o,this.allAvailableCarriersMap=l}))})),s.data}async updateSelectedCarrier(e){const t={customName:e.customName,serviceCodes:e.serviceCodes,disabled:e.disabled,customSettings:e.customSettings,notifications:e.notifications};e.credentials&&(t.credentials=e.credentials);const s=await this.callApi({method:h.yL.PATCH,url:`${m.MF.selectedCarriers}/${e.id}`,payload:t});(0,n.z)((()=>{this.processApiResult(s,(e=>{var t,s;if(!e.data)return;const r=(0,n.ZN)(this.selectedCarriers),a=(0,n.ZN)(this.allAvailableCarriersMap);r.data[null===(t=e.data)||void 0===t?void 0:t.id]=e.data,a.data[null===(s=e.data)||void 0===s?void 0:s.id]=e.data,this.selectedCarriers=r,this.allAvailableCarriersMap=a}))}))}async toggleSelectedCarrier(e,t){const s=await this.callApi({method:h.yL.PATCH,url:`${m.MF.selectedCarriers}/toggle/${t}`,payload:{active:e}});(0,n.z)((()=>{this.processApiResult(s,(e=>{var t,s;if(!e.data)return;const r=(0,n.ZN)(this.selectedCarriers),a=(0,n.ZN)(this.allAvailableCarriersMap);r.data[null===(t=e.data)||void 0===t?void 0:t.id]=e.data,a.data[null===(s=e.data)||void 0===s?void 0:s.id]=e.data,this.selectedCarriers=r,this.allAvailableCarriersMap=a}))}))}async deleteSelectedCarrier(e){const t=await this.callApi({method:h.yL.DELETE,url:`${m.MF.selectedCarriers}/${e}`});(0,n.z)((()=>{this.processApiResult(t,(t=>{if(204===t.statusCode){const t=(0,n.ZN)(this.selectedCarriers),s=(0,n.ZN)(this.allAvailableCarriersMap);delete t.data[e],t.sorting=t.sorting.filter((t=>t!==e.toString())),this.selectedCarriers=t,s.data[e].disabled=!0,this.allAvailableCarriersMap=s}}))}))}async getAmazonAuthorizeUrl(e){return await this.callApi({method:h.yL.GET,url:`${m.MF.selectedCarriers}/${F.availableCarriers.amazon.internalCode}/authorize?country=${e}`})}get selectedCarriersArray(){return it(this.selectedCarriers)}get selectedCarrierCandidatesArray(){const e=this.selectedCarriersArray.filter((e=>!e.isIsenduCarrier)),t=this.selectedCarriersArray.filter((e=>e.isIsenduCarrier)),s=new Map;for(const r of[...e,...t])s.has(r.carrier.internalCode)||s.set(r.carrier.internalCode,r);return Array.from(s.values())}get groupedCarriersServices(){const e={};return Object.values(this.selectedCarriers.data).forEach((t=>{if(!t.disabled&&t.active&&t.carrier){const s=e[t.carrier.internalCode]||[];s.push(t),e[t.carrier.internalCode]=[...s]}})),e}get mappedAvailableCarriers(){const e={data:{},sorting:[]};return this.availableCarriers.forEach((t=>{e.data[t.internalCode]=t,e.sorting.push(t.internalCode)})),e}openUpsOnboardingDrawer(){this.upsOnboardingDrawerOpen=!0}closeUpsOnboardingDrawer(){this.upsOnboardingDrawerOpen=!1}async upsOnboardingRegistration(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.selectedCarriers}/ISU-IC23/v1/carrier/onboarding/registration`,payload:e});var s,r;if(t.isError)throw new Error((null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r?void 0:r.data.message)||"Error while registering UPS account");return t.data&&(localStorage.setItem("upsRegistrationId",t.data.onboardingId),localStorage.setItem("upsIntegrationId",t.data.integrationId.toString())),t.data||{}}async upsOnboardingSignIn(e){var t;const s=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedCarriers}/ISU-IC23/v1/carrier/security/oauth/sign-in`});if(s.isError)throw new Error("Error while signing in to UPS account");null!==(t=s.data)&&void 0!==t&&t.signInUrl&&(localStorage.setItem("upsOauthFlow",e),window.open(s.data.signInUrl,"_self"))}async upsRefreshToken(e,t){if((await this.callApi({method:h.yL.POST,url:`${m.MF.selectedCarriers}/ISU-IC23/v1/carrier/${e}/refresh-token`,payload:{authorizationCode:t}})).isError)throw new Error("Error while refreshing UPS token")}async upsOpenAccount(e,t){var s;const r=await this.callApi({method:h.yL.POST,url:`${m.MF.selectedCarriers}/ISU-IC23/v1/carrier/onboarding/open-account`,payload:{onboardingId:e,authorizationCode:t}});if(r.isError)throw new Error("Error while refreshing UPS token");return null!==(s=r.data)&&void 0!==s&&s.integrationId&&localStorage.setItem("upsIntegrationId",r.data.integrationId.toString()),r.data}constructor(e){super(e),(0,i.Z)(this,"availableCarriers",lt,this),(0,i.Z)(this,"selectedCarriers",dt,this),(0,i.Z)(this,"allAvailableCarriersMap",ct,this),(0,i.Z)(this,"upsOnboardingDrawerOpen",pt,this),(0,n.rC)(this)}},lt=(0,o.Z)(nt.prototype,"availableCarriers",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),dt=(0,o.Z)(nt.prototype,"selectedCarriers",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},sorting:[]}}}),ct=(0,o.Z)(nt.prototype,"allAvailableCarriersMap",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},sorting:[]}}}),pt=(0,o.Z)(nt.prototype,"upsOnboardingDrawerOpen",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,o.Z)(nt.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"reset"),nt.prototype),(0,o.Z)(nt.prototype,"getAllAvailableCarriers",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"getAllAvailableCarriers"),nt.prototype),(0,o.Z)(nt.prototype,"getAvailableCarriers",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"getAvailableCarriers"),nt.prototype),(0,o.Z)(nt.prototype,"carriersRawPost",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"carriersRawPost"),nt.prototype),(0,o.Z)(nt.prototype,"carriersRawGet",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"carriersRawGet"),nt.prototype),(0,o.Z)(nt.prototype,"getSelectedCarriers",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"getSelectedCarriers"),nt.prototype),(0,o.Z)(nt.prototype,"getSelectedCarriersById",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"getSelectedCarriersById"),nt.prototype),(0,o.Z)(nt.prototype,"addSelectedCarrier",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"addSelectedCarrier"),nt.prototype),(0,o.Z)(nt.prototype,"updateSelectedCarrier",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"updateSelectedCarrier"),nt.prototype),(0,o.Z)(nt.prototype,"toggleSelectedCarrier",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"toggleSelectedCarrier"),nt.prototype),(0,o.Z)(nt.prototype,"deleteSelectedCarrier",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"deleteSelectedCarrier"),nt.prototype),(0,o.Z)(nt.prototype,"getAmazonAuthorizeUrl",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"getAmazonAuthorizeUrl"),nt.prototype),(0,o.Z)(nt.prototype,"selectedCarriersArray",[n.Fl],Object.getOwnPropertyDescriptor(nt.prototype,"selectedCarriersArray"),nt.prototype),(0,o.Z)(nt.prototype,"selectedCarrierCandidatesArray",[n.Fl],Object.getOwnPropertyDescriptor(nt.prototype,"selectedCarrierCandidatesArray"),nt.prototype),(0,o.Z)(nt.prototype,"groupedCarriersServices",[n.Fl],Object.getOwnPropertyDescriptor(nt.prototype,"groupedCarriersServices"),nt.prototype),(0,o.Z)(nt.prototype,"mappedAvailableCarriers",[n.Fl],Object.getOwnPropertyDescriptor(nt.prototype,"mappedAvailableCarriers"),nt.prototype),(0,o.Z)(nt.prototype,"openUpsOnboardingDrawer",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"openUpsOnboardingDrawer"),nt.prototype),(0,o.Z)(nt.prototype,"closeUpsOnboardingDrawer",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"closeUpsOnboardingDrawer"),nt.prototype),(0,o.Z)(nt.prototype,"upsOnboardingRegistration",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"upsOnboardingRegistration"),nt.prototype),(0,o.Z)(nt.prototype,"upsOnboardingSignIn",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"upsOnboardingSignIn"),nt.prototype),(0,o.Z)(nt.prototype,"upsRefreshToken",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"upsRefreshToken"),nt.prototype),(0,o.Z)(nt.prototype,"upsOpenAccount",[n.aD],Object.getOwnPropertyDescriptor(nt.prototype,"upsOpenAccount"),nt.prototype),nt);var ht,mt,gt,yt,ft,bt,vt,xt,St,jt,wt,Mt,Ct=s(25108);const At="ISU-API";let Tt=(ht=class extends l{reset(){this.availableMarketplaces=[],this.selectedMarketplaces={data:{},sorting:[]},this.initMarketplaces(),this.isLastStoreUpdated=!1,this.prestashopCustomStatuses=new Map,this.prestashopCustomDelivery={data:{},sorting:[]},this.woocommerceCustomDelivery={data:{},sorting:[]},this.magento1CustomDelivery={data:{},sorting:[]},this.magento2CustomDelivery={data:{},sorting:[]},this.shopifyCustomDelivery={data:{},sorting:[]},this.amazonCustomDelivery={data:{},sorting:[]},this.ebayCustomDelivery={data:{},sorting:[]}}async getSelectedMarketPlaces(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/?limit=2000`});await this.getPrestashopDefaultAndForbiddenStatuses(),this.processApiResult(e,(e=>{var t;this.selectedMarketplaces=(0,m.yZ)(null===(t=e.data)||void 0===t?void 0:t.items)}))}async addSelectedMarketPlace(e){const t=await this.callApi({method:h.yL.POST,url:m.MF.selectedMarkets,payload:{internalCode:e.internalCode,customName:e.customName||void 0,autoSync:e.autoSync,whenToAutoSync:e.whenToAutoSync,credentials:e.credentials,orderIdPrefix:e.orderIdPrefix,orderIdSuffix:e.orderIdSuffix,notifications:e.notifications,customSettings:e.customSettings}});this.processApiResult(t,(e=>{var t,s;if(!e.data)return;const r=(0,n.ZN)(this.selectedMarketplaces)||{data:{},sorting:[]};var a;(r.data[null===(t=e.data)||void 0===t?void 0:t.id]=e.data,r.sorting.includes(null===(s=e.data)||void 0===s?void 0:s.id.toString()))?this.isLastStoreUpdated=!0:(r.sorting.push(null===(a=e.data)||void 0===a?void 0:a.id.toString()),this.isLastStoreUpdated=!1);this.selectedMarketplaces=r}))}async addOauthMarketPlace(e,t){const s=await this.callApi({method:h.yL.POST,url:`${m.MF.selectedMarkets}/oauth/code/${e}`,payload:t});this.processApiResult(s,(e=>{var t,s;if(!e.data)return;const r=(0,n.ZN)(this.selectedMarketplaces)||{data:{},sorting:[]};var a;(r.data[null===(t=e.data)||void 0===t?void 0:t.id]=e.data,r.sorting.includes(null===(s=e.data)||void 0===s?void 0:s.id.toString()))?this.isLastStoreUpdated=!0:(r.sorting.push(null===(a=e.data)||void 0===a?void 0:a.id.toString()),this.isLastStoreUpdated=!1);this.selectedMarketplaces=r}))}async addOauth2MarketPlace(e,t){const s=await this.callApi({method:h.yL.POST,url:`${m.MF.selectedMarkets}/oauth2/code/${e}`,payload:t});this.processApiResult(s,(e=>{var t,s;if(!e.data)return;const r=(0,n.ZN)(this.selectedMarketplaces)||{data:{},sorting:[]};var a;(r.data[null===(t=e.data)||void 0===t?void 0:t.id]=e.data,r.sorting.includes(null===(s=e.data)||void 0===s?void 0:s.id.toString()))?this.isLastStoreUpdated=!0:(r.sorting.push(null===(a=e.data)||void 0===a?void 0:a.id.toString()),this.isLastStoreUpdated=!1);this.selectedMarketplaces=r}))}async marketPlaceRawPost(e,t,s){const r=await this.callApi({method:h.yL.POST,url:`${m.MF.selectedMarkets}/${e}/${t}`,payload:s});var a,i;if(r.isError)throw new Error(null===(a=r.errorData)||void 0===a||null===(i=a.response)||void 0===i?void 0:i.data.message);return r.data}async marketPlaceRawGet(e,t){const s=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/${e}/${t}`});var r,a;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a?void 0:a.data.message);return s.data}async addMarketplaceToService(e,t){const s=await this.callApi({method:h.yL.POST,url:`${m.MF.microservice}/${e}/setup`,payload:t});this.processApiResult(s,(e=>{var t,s;if(!e.data)return;const r=(0,n.ZN)(this.selectedMarketplaces)||{data:{},sorting:[]};var a;(r.data[null===(t=e.data)||void 0===t?void 0:t.id]=e.data,r.sorting.includes(null===(s=e.data)||void 0===s?void 0:s.id.toString()))?this.isLastStoreUpdated=!0:(r.sorting.push(null===(a=e.data)||void 0===a?void 0:a.id.toString()),this.isLastStoreUpdated=!1);this.selectedMarketplaces=r}))}async loadBigcommerceApp(e,t){await this.callApi({method:h.yL.POST,url:`${m.MF.microservice}/${e}/load`,payload:t})}async uninstallBigcommerceApp(e,t){await this.callApi({method:h.yL.POST,url:`${m.MF.microservice}/${e}/uninstall`,payload:t})}async removeUserBigcommerce(e,t){await this.callApi({method:h.yL.POST,url:`${m.MF.microservice}/${e}/remove-user`,payload:t})}async updateSelectedMarketPlace(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.selectedMarkets}/${e.id}`,payload:{internalCode:e.internalCode,customName:e.customName,disabled:e.disabled,autoSync:e.autoSync,whenToAutoSync:e.whenToAutoSync,credentials:e.credentials,orderIdPrefix:e.orderIdPrefix,orderIdSuffix:e.orderIdSuffix,notifications:e.notifications,customSettings:e.customSettings}});this.processApiResult(t,(e=>{var t;if(!e.data)return;const s=(0,n.ZN)(this.selectedMarketplaces)||{data:{},sorting:[]};s.data[null===(t=e.data)||void 0===t?void 0:t.id]=e.data,this.selectedMarketplaces=s}))}async toggleSelectedMarketplace(e,t){const s=await this.callApi({method:h.yL.PATCH,url:`${m.MF.selectedMarkets}/toggle/${t}`,payload:{active:e}});this.processApiResult(s,(e=>{var t;if(!e.data)return;const s=(0,n.ZN)(this.selectedMarketplaces)||{data:{},sorting:[]};s.data[null===(t=e.data)||void 0===t?void 0:t.id]=e.data,this.selectedMarketplaces=s}))}async deleteSelectedMarketPlace(e){const t=await this.callApi({method:h.yL.DELETE,url:`${m.MF.selectedMarkets}/${e}`,payload:{disabled:!0}});this.processApiResult(t,(t=>{if(!t.data)return;const s=(0,n.ZN)(this.selectedMarketplaces)||{data:{},sorting:[]};delete s.data[e],s.sorting=s.sorting.filter((t=>t!==e.toString())),this.selectedMarketplaces=s}))}async getEbayRedirectUrl(){return await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/oauth/url/ISU-IS6?redirect=false`})}async getWoocommerceRedirectUrl(e){return await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/${F.availableStores.woocommerce.internalCode}/authorize?shopUrl=${e}`})}async getWoocommerceV2RedirectUrl(e){return await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/${F.availableStores.woocommerce_V2.internalCode}/authorize?shopUrl=${e}`})}async getShopifyRedirectUrl(e){return await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/${F.availableStores.shopify.internalCode}/authorize?shopUrl=${e}`})}async getShopifyV2RedirectUrl(e){return await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/${F.availableStores.shopify_V2.internalCode}/authorize?shopUrl=${e}`})}async getEtsyRedirectUrl(){return await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/oauth2/url/${F.availableStores.etsy.internalCode}`})}async getAmazonAuthorizeUrl(e,t){return await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/${F.availableStores.amazon.internalCode}/authorize?country=${e}&state=${t}`})}async getPrestashopCustomStatuses(e,t){try{const s=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/prestashop/customStatuses/?url=${e}&key=${t}`});this.updatePrestashopCustomStatuses(e,s.data)}catch{Ct.log(`Error retrieving prestashop statuses for url ${e}`)}}async getPrestashopDefaultAndForbiddenStatuses(){try{const e=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/prestashop/defaultAndForbiddenStatuses/`});this.updatePrestashopCustomStatuses("-1",e.data)}catch{Ct.log("Error retrieving prestashop statuses settings")}}async getPrestashopCustomDelivery(e,t){var s;const r=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/prestashop/customDelivery/?url=${e}&key=${t}`});this.prestashopCustomDelivery=(0,m.yZ)((null===(s=r.data)||void 0===s?void 0:s.customDeliveryArray)||[])}async getWoocommerceCustomDelivery(e,t,s,r){var a;const i=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/woocommerce/customDelivery/?url=${e}&consumer_key=${t}&consumer_secret=${s}&version=${r}`});this.woocommerceCustomDelivery=(0,m.yZ)((null===(a=i.data)||void 0===a?void 0:a.customDeliveryArray)||[])}async getMagento1CustomDelivery(e,t,s){var r;const a=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/magento1/customDelivery/?url=${e}&key=${t}&user=${s}`});this.magento1CustomDelivery=(0,m.yZ)((null===(r=a.data)||void 0===r?void 0:r.customDeliveryArray)||[])}async getMagento2CustomDelivery(e,t){var s;const r=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/magento2/customDelivery/?url=${e}&accessToken=${t}`});this.magento2CustomDelivery=(0,m.yZ)((null===(s=r.data)||void 0===s?void 0:s.customDeliveryArray)||[])}async getShopifyCustomDelivery(e,t){var s;const r=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/shopify/customDelivery/?selectedStoreId=${e}&hostname=${t}`});this.shopifyCustomDelivery=(0,m.yZ)((null===(s=r.data)||void 0===s?void 0:s.customDeliveryArray)||[])}async getAmazonCustomDelivery(e){var t;const s=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/${F.availableStores.amazon.internalCode}/get-custom-delivery/${e}`});this.amazonCustomDelivery=(0,m.yZ)((null===(t=s.data)||void 0===t?void 0:t.customDeliveryArray)||[])}async getEbayCustomDelivery(e){var t;const s=await this.callApi({method:h.yL.GET,url:`${m.MF.selectedMarkets}/custom-actions/${e}/customDelivery`});this.ebayCustomDelivery=(0,m.yZ)((null===(t=s.data)||void 0===t?void 0:t.customDeliveryArray)||[])}async generatePublicApiCredentials(e){const t=await this.callApi({method:h.yL.POST,url:m.MF.selectedMarkets,payload:{credentials:{},internalCode:At,customName:e.customName,whenToAutoSync:"never",customSettings:{description:e.description,webhook:{url:e.url}}}});return this.processApiResult(t,(e=>{var t,s;if(!e.data)return;const r=(0,n.ZN)(this.selectedMarketplaces)||{data:{},sorting:[]};var a;(r.data[null===(t=e.data)||void 0===t?void 0:t.id]=e.data,r.sorting.includes(null===(s=e.data)||void 0===s?void 0:s.id.toString()))?this.isLastStoreUpdated=!0:(r.sorting.push(null===(a=e.data)||void 0===a?void 0:a.id.toString()),this.isLastStoreUpdated=!1);this.selectedMarketplaces=r})),t.data}async editPublicApi(e,t){const s=await this.callApi({method:h.yL.PATCH,url:`${m.MF.selectedMarkets}/${e}`,payload:{customName:t.customName,customSettings:{description:t.description,impersonate:t.impersonate,webhook:{url:t.url}}}});this.processApiResult(s,(e=>{var t,s;if(!e.data)return;const r=(0,n.ZN)(this.selectedMarketplaces)||{data:{},sorting:[]};var a;(r.data[null===(t=e.data)||void 0===t?void 0:t.id]=e.data,r.sorting.includes(null===(s=e.data)||void 0===s?void 0:s.id.toString()))?this.isLastStoreUpdated=!0:(r.sorting.push(null===(a=e.data)||void 0===a?void 0:a.id.toString()),this.isLastStoreUpdated=!1);this.selectedMarketplaces=r}))}clearPrestashopCustomDelivery(){this.prestashopCustomDelivery={data:{},sorting:[]}}clearWoocommerceCustomDelivery(){this.woocommerceCustomDelivery={data:{},sorting:[]}}clearMagento1CustomDelivery(){this.magento1CustomDelivery={data:{},sorting:[]}}clearMagento2CustomDelivery(){this.magento2CustomDelivery={data:{},sorting:[]}}clearShopifyCustomDelivery(){this.shopifyCustomDelivery={data:{},sorting:[]}}clearAmazonCustomDelivery(){this.amazonCustomDelivery={data:{},sorting:[]}}clearEbayCustomDelivery(){this.ebayCustomDelivery={data:{},sorting:[]}}get selectedMarketplacesArray(){return it(this.selectedMarketplaces||{data:{},sorting:[]})}get prestashopCustomDeliveryArray(){return it(this.prestashopCustomDelivery)}get woocommerceCustomDeliveryArray(){return it(this.woocommerceCustomDelivery)}get magento1CustomDeliveryArray(){return it(this.magento1CustomDelivery)}get magento2CustomDeliveryArray(){return it(this.magento2CustomDelivery)}get shopifyCustomDeliveryArray(){return it(this.shopifyCustomDelivery)}get amazonCustomDeliveryArray(){return it(this.amazonCustomDelivery)}get ebayCustomDeliveryArray(){return it(this.ebayCustomDelivery)}updatePrestashopCustomStatuses(e,t){const s=new Map(this.prestashopCustomStatuses);s.set(e,t),this.prestashopCustomStatuses=s}initMarketplaces(){for(const e of Object.values(F.availableStores))e.disabled||this.availableMarketplaces.push(e);this.availableMarketplaces.sort(((e,t)=>e.name.localeCompare(t.name)))}constructor(e){super(e),(0,i.Z)(this,"availableMarketplaces",mt,this),(0,i.Z)(this,"selectedMarketplaces",gt,this),(0,i.Z)(this,"isLastStoreUpdated",yt,this),(0,i.Z)(this,"prestashopCustomStatuses",ft,this),(0,i.Z)(this,"prestashopCustomDelivery",bt,this),(0,i.Z)(this,"woocommerceCustomDelivery",vt,this),(0,i.Z)(this,"magento1CustomDelivery",xt,this),(0,i.Z)(this,"magento2CustomDelivery",St,this),(0,i.Z)(this,"shopifyCustomDelivery",jt,this),(0,i.Z)(this,"amazonCustomDelivery",wt,this),(0,i.Z)(this,"ebayCustomDelivery",Mt,this),(0,n.rC)(this),this.initMarketplaces()}},mt=(0,o.Z)(ht.prototype,"availableMarketplaces",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gt=(0,o.Z)(ht.prototype,"selectedMarketplaces",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},sorting:[]}}}),yt=(0,o.Z)(ht.prototype,"isLastStoreUpdated",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ft=(0,o.Z)(ht.prototype,"prestashopCustomStatuses",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),bt=(0,o.Z)(ht.prototype,"prestashopCustomDelivery",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},sorting:[]}}}),vt=(0,o.Z)(ht.prototype,"woocommerceCustomDelivery",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},sorting:[]}}}),xt=(0,o.Z)(ht.prototype,"magento1CustomDelivery",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},sorting:[]}}}),St=(0,o.Z)(ht.prototype,"magento2CustomDelivery",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},sorting:[]}}}),jt=(0,o.Z)(ht.prototype,"shopifyCustomDelivery",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},sorting:[]}}}),wt=(0,o.Z)(ht.prototype,"amazonCustomDelivery",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},sorting:[]}}}),Mt=(0,o.Z)(ht.prototype,"ebayCustomDelivery",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},sorting:[]}}}),(0,o.Z)(ht.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"reset"),ht.prototype),(0,o.Z)(ht.prototype,"getSelectedMarketPlaces",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getSelectedMarketPlaces"),ht.prototype),(0,o.Z)(ht.prototype,"addSelectedMarketPlace",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"addSelectedMarketPlace"),ht.prototype),(0,o.Z)(ht.prototype,"addOauthMarketPlace",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"addOauthMarketPlace"),ht.prototype),(0,o.Z)(ht.prototype,"addOauth2MarketPlace",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"addOauth2MarketPlace"),ht.prototype),(0,o.Z)(ht.prototype,"marketPlaceRawPost",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"marketPlaceRawPost"),ht.prototype),(0,o.Z)(ht.prototype,"marketPlaceRawGet",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"marketPlaceRawGet"),ht.prototype),(0,o.Z)(ht.prototype,"addMarketplaceToService",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"addMarketplaceToService"),ht.prototype),(0,o.Z)(ht.prototype,"loadBigcommerceApp",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"loadBigcommerceApp"),ht.prototype),(0,o.Z)(ht.prototype,"uninstallBigcommerceApp",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"uninstallBigcommerceApp"),ht.prototype),(0,o.Z)(ht.prototype,"removeUserBigcommerce",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"removeUserBigcommerce"),ht.prototype),(0,o.Z)(ht.prototype,"updateSelectedMarketPlace",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"updateSelectedMarketPlace"),ht.prototype),(0,o.Z)(ht.prototype,"toggleSelectedMarketplace",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"toggleSelectedMarketplace"),ht.prototype),(0,o.Z)(ht.prototype,"deleteSelectedMarketPlace",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"deleteSelectedMarketPlace"),ht.prototype),(0,o.Z)(ht.prototype,"getEbayRedirectUrl",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getEbayRedirectUrl"),ht.prototype),(0,o.Z)(ht.prototype,"getWoocommerceRedirectUrl",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getWoocommerceRedirectUrl"),ht.prototype),(0,o.Z)(ht.prototype,"getWoocommerceV2RedirectUrl",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getWoocommerceV2RedirectUrl"),ht.prototype),(0,o.Z)(ht.prototype,"getShopifyRedirectUrl",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getShopifyRedirectUrl"),ht.prototype),(0,o.Z)(ht.prototype,"getShopifyV2RedirectUrl",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getShopifyV2RedirectUrl"),ht.prototype),(0,o.Z)(ht.prototype,"getEtsyRedirectUrl",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getEtsyRedirectUrl"),ht.prototype),(0,o.Z)(ht.prototype,"getAmazonAuthorizeUrl",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getAmazonAuthorizeUrl"),ht.prototype),(0,o.Z)(ht.prototype,"getPrestashopCustomStatuses",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getPrestashopCustomStatuses"),ht.prototype),(0,o.Z)(ht.prototype,"getPrestashopDefaultAndForbiddenStatuses",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getPrestashopDefaultAndForbiddenStatuses"),ht.prototype),(0,o.Z)(ht.prototype,"getPrestashopCustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getPrestashopCustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"getWoocommerceCustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getWoocommerceCustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"getMagento1CustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getMagento1CustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"getMagento2CustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getMagento2CustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"getAmazonCustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getAmazonCustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"getEbayCustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"getEbayCustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"generatePublicApiCredentials",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"generatePublicApiCredentials"),ht.prototype),(0,o.Z)(ht.prototype,"editPublicApi",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"editPublicApi"),ht.prototype),(0,o.Z)(ht.prototype,"clearPrestashopCustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"clearPrestashopCustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"clearWoocommerceCustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"clearWoocommerceCustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"clearMagento1CustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"clearMagento1CustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"clearMagento2CustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"clearMagento2CustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"clearShopifyCustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"clearShopifyCustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"clearAmazonCustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"clearAmazonCustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"clearEbayCustomDelivery",[n.aD],Object.getOwnPropertyDescriptor(ht.prototype,"clearEbayCustomDelivery"),ht.prototype),(0,o.Z)(ht.prototype,"selectedMarketplacesArray",[n.Fl],Object.getOwnPropertyDescriptor(ht.prototype,"selectedMarketplacesArray"),ht.prototype),(0,o.Z)(ht.prototype,"prestashopCustomDeliveryArray",[n.Fl],Object.getOwnPropertyDescriptor(ht.prototype,"prestashopCustomDeliveryArray"),ht.prototype),(0,o.Z)(ht.prototype,"woocommerceCustomDeliveryArray",[n.Fl],Object.getOwnPropertyDescriptor(ht.prototype,"woocommerceCustomDeliveryArray"),ht.prototype),(0,o.Z)(ht.prototype,"magento1CustomDeliveryArray",[n.Fl],Object.getOwnPropertyDescriptor(ht.prototype,"magento1CustomDeliveryArray"),ht.prototype),(0,o.Z)(ht.prototype,"magento2CustomDeliveryArray",[n.Fl],Object.getOwnPropertyDescriptor(ht.prototype,"magento2CustomDeliveryArray"),ht.prototype),(0,o.Z)(ht.prototype,"shopifyCustomDeliveryArray",[n.Fl],Object.getOwnPropertyDescriptor(ht.prototype,"shopifyCustomDeliveryArray"),ht.prototype),(0,o.Z)(ht.prototype,"amazonCustomDeliveryArray",[n.Fl],Object.getOwnPropertyDescriptor(ht.prototype,"amazonCustomDeliveryArray"),ht.prototype),(0,o.Z)(ht.prototype,"ebayCustomDeliveryArray",[n.Fl],Object.getOwnPropertyDescriptor(ht.prototype,"ebayCustomDeliveryArray"),ht.prototype),ht);var Ot,Pt;let Nt=(Ot=class extends l{reset(){this.userInfo=void 0}async getUserInfo(){const e=await this.callApi({method:h.yL.GET,url:m.MF.users.root});this.processApiResult(e,(e=>{this.userInfo=e.data}))}async updateOrdersPerPage(e){const t=await this.callApi({method:h.yL.PATCH,url:m.MF.users.root,payload:{ordersPerPage:e}});this.processApiResult(t,(e=>{this.userInfo=e.data}))}async updateUserInfo(e){const t=await this.callApi({method:h.yL.PATCH,url:m.MF.users.root,payload:e});this.processApiResult(t,(e=>{this.userInfo=e.data}))}async updateUserPassword(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.users.root}/password/change`,payload:e});this.processApiResult(t)}constructor(e){super(e),(0,i.Z)(this,"userInfo",Pt,this),(0,n.rC)(this)}},Pt=(0,o.Z)(Ot.prototype,"userInfo",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,o.Z)(Ot.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(Ot.prototype,"reset"),Ot.prototype),(0,o.Z)(Ot.prototype,"getUserInfo",[n.aD],Object.getOwnPropertyDescriptor(Ot.prototype,"getUserInfo"),Ot.prototype),(0,o.Z)(Ot.prototype,"updateOrdersPerPage",[n.aD],Object.getOwnPropertyDescriptor(Ot.prototype,"updateOrdersPerPage"),Ot.prototype),(0,o.Z)(Ot.prototype,"updateUserInfo",[n.aD],Object.getOwnPropertyDescriptor(Ot.prototype,"updateUserInfo"),Ot.prototype),(0,o.Z)(Ot.prototype,"updateUserPassword",[n.aD],Object.getOwnPropertyDescriptor(Ot.prototype,"updateUserPassword"),Ot.prototype),Ot);var _t,Zt,It,Dt,Et;let kt=(_t=class extends l{reset(){this.companyInfo={},this.shippingAddresses={data:{},sorting:[]},this.tmpLogo=void 0,this.modalCarrierResponsibilitiesDoNotShowAnymore=!1}setModalCarrierResponsibilitiesDoNotShowAnymore(e){this.modalCarrierResponsibilitiesDoNotShowAnymore=e}async getCompanyInfo(){const e=await this.callApi({method:h.yL.GET,url:m.MF.companies.root});this.processApiResult(e,(e=>{e.data&&(this.companyInfo=e.data)}))}async updateCompanyInfo(e){const t=await this.callApi({method:h.yL.PATCH,url:m.MF.companies.root,payload:e});this.processApiResult(t,(e=>{e.data&&(this.companyInfo=e.data)}))}async updateDefaultShippingMethod(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.companies.root}/defaultShippingMethod`,payload:{defaultShippingMethod:e}});this.processApiResult(t,(()=>{this.companyInfo.defaultShippingMethod=e}))}async updateCodFee(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.companies.root}/codFee`,payload:{codFee:e}});this.processApiResult(t,(()=>{this.companyInfo.codFee=Number(e)}))}async updateImportNotes(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.companies.root}/importNotes`,payload:{importNotes:e}});this.processApiResult(t,(()=>{(0,n.z)((()=>{this.companyInfo.importNotes=e}))}))}async updateDirectPrinting(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.companies.root}/directPrinting`,payload:{directPrinting:e}});this.processApiResult(t,(()=>{(0,n.z)((()=>{this.companyInfo.directPrinting=e}))}))}async updateModalCarrierResponsibilitiesShowed(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.companies.root}/modalCarrierResponsibilitiesShowed`,payload:{modalCarrierResponsibilitiesShowed:e}});this.processApiResult(t,(()=>{(0,n.z)((()=>{this.companyInfo.modalCarrierResponsibilitiesShowed=e}))}))}async updatePrintCustomsDocuments(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.companies.root}/printCustomsDocuments`,payload:{printCustomsDocuments:e}});this.processApiResult(t,(()=>{(0,n.z)((()=>{this.companyInfo.printCustomsDocuments=e}))}))}async uploadLogo(e){const t=new FormData;t.append("file",e);const s=await this.callApi({method:h.yL.POST,url:`${m.MF.companies.root}/uploadLogo`,payload:t,customHeaders:{"Content-Type":"multipart/form-data"}});this.processApiResult(s,(e=>{var t;this.tmpLogo=null===(t=e.data)||void 0===t?void 0:t.url}))}async getAllShippingAddresses(){const e=await this.callApi({method:h.yL.GET,url:m.MF.addresses.root});this.processApiResult(e,(e=>{var t;this.shippingAddresses=(0,m.yZ)(null===(t=e.data)||void 0===t?void 0:t.items)}))}async addShippingAddress(e){const t={type:"SHIPPING",...e},s=await this.callApi({method:h.yL.POST,url:m.MF.addresses.root,payload:t});this.processApiResult(s),s.isError||await this.getAllShippingAddresses()}async editShippingAddress(e,t){const s=await this.callApi({method:h.yL.PATCH,url:`${m.MF.addresses.root}/${t}`,payload:e});this.processApiResult(s),s.isError||await this.getAllShippingAddresses()}async updateTermsAndConditions(){const e=await this.callApi({method:h.yL.POST,url:`${m.MF.companies.root}/accept-terms`});var t;if(e.isError)throw new Error(null===(t=e.errorData)||void 0===t?void 0:t.message);(0,n.z)((()=>{this.companyInfo={...e.data||{}}}))}get defaultShippingAddress(){var e;if(null!==(e=this.shippingAddresses)&&void 0!==e&&e.data){var t;const e=Object.values(null===(t=this.shippingAddresses)||void 0===t?void 0:t.data).find((e=>e.isDefault));return e?{id:Number(e.id),name:e.name,companyName:e.companyName||void 0,street:e.street,street2:e.street2||void 0,city:e.city,state:e.state,countryIsoCode:e.countryIsoCode,zipCode:e.zipCode,email:e.email,phoneNumber:e.phoneNumber,isDefault:e.isDefault}:e}}get shippingAddressesArray(){var e;return(null===(e=this.shippingAddresses)||void 0===e?void 0:e.sorting.map((e=>({id:Number(e),name:this.shippingAddresses.data[e].name,companyName:this.shippingAddresses.data[e].companyName||void 0,street:this.shippingAddresses.data[e].street,street2:this.shippingAddresses.data[e].street2||void 0,city:this.shippingAddresses.data[e].city,state:this.shippingAddresses.data[e].state,countryIsoCode:this.shippingAddresses.data[e].countryIsoCode,zipCode:this.shippingAddresses.data[e].zipCode,email:this.shippingAddresses.data[e].email,phoneNumber:this.shippingAddresses.data[e].phoneNumber,isDefault:this.shippingAddresses.data[e].isDefault}))))||[]}getShippingAddressById(e){return this.shippingAddresses.data[e]}constructor(e){super(e),(0,i.Z)(this,"companyInfo",Zt,this),(0,i.Z)(this,"shippingAddresses",It,this),(0,i.Z)(this,"tmpLogo",Dt,this),(0,i.Z)(this,"modalCarrierResponsibilitiesDoNotShowAnymore",Et,this),(0,n.rC)(this)}},Zt=(0,o.Z)(_t.prototype,"companyInfo",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),It=(0,o.Z)(_t.prototype,"shippingAddresses",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},sorting:[]}}}),Dt=(0,o.Z)(_t.prototype,"tmpLogo",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et=(0,o.Z)(_t.prototype,"modalCarrierResponsibilitiesDoNotShowAnymore",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,o.Z)(_t.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"reset"),_t.prototype),(0,o.Z)(_t.prototype,"setModalCarrierResponsibilitiesDoNotShowAnymore",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"setModalCarrierResponsibilitiesDoNotShowAnymore"),_t.prototype),(0,o.Z)(_t.prototype,"getCompanyInfo",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"getCompanyInfo"),_t.prototype),(0,o.Z)(_t.prototype,"updateCompanyInfo",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"updateCompanyInfo"),_t.prototype),(0,o.Z)(_t.prototype,"updateDefaultShippingMethod",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"updateDefaultShippingMethod"),_t.prototype),(0,o.Z)(_t.prototype,"updateCodFee",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"updateCodFee"),_t.prototype),(0,o.Z)(_t.prototype,"updateImportNotes",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"updateImportNotes"),_t.prototype),(0,o.Z)(_t.prototype,"updateDirectPrinting",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"updateDirectPrinting"),_t.prototype),(0,o.Z)(_t.prototype,"updateModalCarrierResponsibilitiesShowed",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"updateModalCarrierResponsibilitiesShowed"),_t.prototype),(0,o.Z)(_t.prototype,"updatePrintCustomsDocuments",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"updatePrintCustomsDocuments"),_t.prototype),(0,o.Z)(_t.prototype,"uploadLogo",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"uploadLogo"),_t.prototype),(0,o.Z)(_t.prototype,"getAllShippingAddresses",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"getAllShippingAddresses"),_t.prototype),(0,o.Z)(_t.prototype,"addShippingAddress",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"addShippingAddress"),_t.prototype),(0,o.Z)(_t.prototype,"editShippingAddress",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"editShippingAddress"),_t.prototype),(0,o.Z)(_t.prototype,"updateTermsAndConditions",[n.aD],Object.getOwnPropertyDescriptor(_t.prototype,"updateTermsAndConditions"),_t.prototype),(0,o.Z)(_t.prototype,"defaultShippingAddress",[n.Fl],Object.getOwnPropertyDescriptor(_t.prototype,"defaultShippingAddress"),_t.prototype),(0,o.Z)(_t.prototype,"shippingAddressesArray",[n.Fl],Object.getOwnPropertyDescriptor(_t.prototype,"shippingAddressesArray"),_t.prototype),_t);var Lt,Rt;let Ft=(Lt=class extends l{constructor(e){super(e),(0,i.Z)(this,"usersData",Rt,this),(0,n.rC)(this)}async getUsers(e){const t=e.requestedPage||1,s=e.itemsPerPage||20,r=e.emailSearch||"",a=(t-1)*s,i=await this.callApi({method:h.yL.GET,url:`${m.MF.admin.users}?limit=${s}&offset=${a}&email=${r}`});this.processApiResult(i,(e=>{var t,s;const r={data:{},sorting:[]};null===(t=e.data)||void 0===t||t.items.forEach((e=>{r.data[e.id]=e,r.sorting.push(String(e.id))})),this.usersData={users:r,totalUsers:(null===(s=e.data)||void 0===s?void 0:s.count)||0}}))}get usersArray(){var e,t;return(null===(e=this.usersData)||void 0===e||null===(t=e.users)||void 0===t?void 0:t.sorting.map((e=>{var t,s;return null===(t=this.usersData)||void 0===t||null===(s=t.users)||void 0===s?void 0:s.data[e]})))||[]}async emulateUser(e){var t;const s=await this.callApi({method:h.yL.POST,url:`${m.MF.admin.emulateUser}`,payload:{userId:e}});return this.processApiResult(s),(null===(t=s.data)||void 0===t?void 0:t.token)||""}async emulateUserSignIn(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.admin.emulateUserSignIn}/${e}`,payload:{token:e}});return this.processApiResult(t),t.data}async updateFreeTrialEnd(e,t,s){const r=await this.callApi({method:h.yL.PATCH,url:`${m.MF.admin.companies}/${t}`,payload:{freeTrialEndDate:e}});this.processApiResult(r,(e=>{var r,a;if(null!==(r=this.usersData)&&void 0!==r&&null!==(a=r.users)&&void 0!==a&&a.data[s]&&e.data){var i,o;const r=(0,n.ZN)(null===(i=this.usersData)||void 0===i||null===(o=i.users)||void 0===o?void 0:o.data[s]);r.company=e.data,r.company.id=t,this.usersData.users.data[s]=r}}))}async togglePauseUser(e,t){var s,r;if(null===(s=this.usersData)||void 0===s||null===(r=s.users)||void 0===r||!r.data[t])throw"User not found";{var a,i;const s=null===(a=this.usersData)||void 0===a||null===(i=a.users)||void 0===i?void 0:i.data[t];let r=`${m.MF.admin.maintenance}/users/unpause_user?email=${s.email}`;e&&(r=`${m.MF.admin.maintenance}/users/pause_user?email=${s.email}`);const o=await this.callApi({method:h.yL.GET,url:r});this.processApiResult(o,(()=>{var s,r;if(null!==(s=this.usersData)&&void 0!==s&&null!==(r=s.users)&&void 0!==r&&r.data[t]){var a,i;const s=(0,n.ZN)(null===(a=this.usersData)||void 0===a||null===(i=a.users)||void 0===i?void 0:i.data[t]);s.paused=e,this.usersData.users.data[t]=s}}))}}async toggleCheckFinance(e,t){var s,r;if(null===(s=this.usersData)||void 0===s||null===(r=s.users)||void 0===r||!r.data[t])throw"User not found";{var a,i;const s=null===(a=this.usersData)||void 0===a||null===(i=a.users)||void 0===i?void 0:i.data[t];let r=`${m.MF.admin.maintenance}/users/unskip_check_finance?email=${s.email}`;e&&(r=`${m.MF.admin.maintenance}/users/skip_check_finance?email=${s.email}`);const o=await this.callApi({method:h.yL.GET,url:r});this.processApiResult(o,(()=>{var s,r;if(null!==(s=this.usersData)&&void 0!==s&&null!==(r=s.users)&&void 0!==r&&r.data[t]){var a,i;const s=(0,n.ZN)(null===(a=this.usersData)||void 0===a||null===(i=a.users)||void 0===i?void 0:i.data[t]);s.skipCheckFinance=e,this.usersData.users.data[t]=s}}))}}},Rt=(0,o.Z)(Lt.prototype,"usersData",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,o.Z)(Lt.prototype,"getUsers",[n.aD],Object.getOwnPropertyDescriptor(Lt.prototype,"getUsers"),Lt.prototype),(0,o.Z)(Lt.prototype,"usersArray",[n.Fl],Object.getOwnPropertyDescriptor(Lt.prototype,"usersArray"),Lt.prototype),(0,o.Z)(Lt.prototype,"emulateUser",[n.aD],Object.getOwnPropertyDescriptor(Lt.prototype,"emulateUser"),Lt.prototype),(0,o.Z)(Lt.prototype,"emulateUserSignIn",[n.aD],Object.getOwnPropertyDescriptor(Lt.prototype,"emulateUserSignIn"),Lt.prototype),(0,o.Z)(Lt.prototype,"updateFreeTrialEnd",[n.aD],Object.getOwnPropertyDescriptor(Lt.prototype,"updateFreeTrialEnd"),Lt.prototype),(0,o.Z)(Lt.prototype,"togglePauseUser",[n.aD],Object.getOwnPropertyDescriptor(Lt.prototype,"togglePauseUser"),Lt.prototype),(0,o.Z)(Lt.prototype,"toggleCheckFinance",[n.aD],Object.getOwnPropertyDescriptor(Lt.prototype,"toggleCheckFinance"),Lt.prototype),Lt);var Ut,Gt;let Bt=(Ut=class extends l{constructor(e){super(e),(0,i.Z)(this,"logs",Gt,this),(0,n.rC)(this)}reset(){this.logs=void 0}async getPaymentsLogs(e){await this.getLogs(e,"payments")}async getShipmentRequestLogs(e){await this.getLogs(e,"shipment-requests")}async getTrackingRequestLogs(e){await this.getLogs(e,"tracking-requests")}async getStoreSyncLogs(e){await this.getLogs(e,"store-sync")}async getGetStoreLogs(e){await this.getLogs(e,"get-orders")}async getLogs(e,t){const s=await this.callApi({method:h.yL.GET,url:`${m.MF.admin.logs}/companies/${e}/${t}`});(0,n.z)((()=>{this.processApiResult(s,(e=>{this.logs=e.data}))}))}},Gt=(0,o.Z)(Ut.prototype,"logs",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,o.Z)(Ut.prototype,"getPaymentsLogs",[n.aD],Object.getOwnPropertyDescriptor(Ut.prototype,"getPaymentsLogs"),Ut.prototype),(0,o.Z)(Ut.prototype,"getShipmentRequestLogs",[n.aD],Object.getOwnPropertyDescriptor(Ut.prototype,"getShipmentRequestLogs"),Ut.prototype),(0,o.Z)(Ut.prototype,"getTrackingRequestLogs",[n.aD],Object.getOwnPropertyDescriptor(Ut.prototype,"getTrackingRequestLogs"),Ut.prototype),(0,o.Z)(Ut.prototype,"getStoreSyncLogs",[n.aD],Object.getOwnPropertyDescriptor(Ut.prototype,"getStoreSyncLogs"),Ut.prototype),(0,o.Z)(Ut.prototype,"getGetStoreLogs",[n.aD],Object.getOwnPropertyDescriptor(Ut.prototype,"getGetStoreLogs"),Ut.prototype),(0,o.Z)(Ut.prototype,"getLogs",[n.aD],Object.getOwnPropertyDescriptor(Ut.prototype,"getLogs"),Ut.prototype),Ut);class $t{constructor(e){this.adminUsersStore=new Ft(e),this.adminLogsStore=new Bt(e)}resetStore(){this.adminUsersStore.reset(),this.adminLogsStore.reset()}}var zt,Wt,Ht=s(28721),Vt=s(25108);let qt=(zt=class extends l{reset(){this.rates={data:{},sorting:[]},this.currentRateRequestId=""}async requestRateAndProcess(e,t,s){this.rates.data[String(t.id)]={isLoading:!0,rates:[],isError:!1,errorMessage:"1"},this.rates.sorting.push(String(t.id));const r=await this.callApi({method:h.yL.GET,url:`${m.MF.rates}/${s}/${t.id}`});this.processApiResult(r,(s=>{if(e===this.currentRateRequestId){var r,a;const e=(null===(r=s.data)||void 0===r||null===(a=r.rates)||void 0===a?void 0:a.sort(((e,t)=>e.publicPrice-t.publicPrice)))||[];this.rates.data[String(t.id)]={...this.rates.data[String(t.id)],isLoading:!1,rates:e,isError:!1,errorMessage:"no error",cheapestCurrency:e.length>0&&e[0].currency||F.CurrencyUnits.EURO,cheapestValue:e.length>0?e[0].publicPrice:0},this.rates.sorting=this.rates.sorting.slice().sort(((e,t)=>{var s,r,a,i;return(null===(s=this.rates)||void 0===s||null===(r=s.data[e])||void 0===r?void 0:r.rates.length)>0&&(null===(a=this.rates)||void 0===a||null===(i=a.data[t])||void 0===i?void 0:i.rates.length)>0?this.rates.data[e].rates[0].publicPrice-this.rates.data[t].rates[0].publicPrice:0}))}else Vt.log(`Discarding rate request ${e}, current is ${this.currentRateRequestId}`)}),(e=>{var s,r,a;this.rates&&(this.rates.data[String(t.id)]={...this.rates.data[String(t.id)],isLoading:!1,rates:[],isError:!0,errorMessage:null===(s=e.errorData)||void 0===s||null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message})}))}async requestRateForReturnAndProcess(e,t,s,r,a){this.rates.data[String(t.id)]={isLoading:!0,rates:[],isError:!1,errorMessage:"1"},this.rates.sorting.push(String(t.id));const i=await this.callApi({method:h.yL.POST,url:`${m.MF.rates}/${t.id}`,payload:{parcels:s,addressTo:a,addressFrom:r}});this.processApiResult(i,(s=>{if(e===this.currentRateRequestId){var r,a;const e=(null===(r=s.data)||void 0===r||null===(a=r.rates)||void 0===a?void 0:a.sort(((e,t)=>e.publicPrice-t.publicPrice)))||[];this.rates.data[String(t.id)]={...this.rates.data[String(t.id)],isLoading:!1,rates:e,isError:!1,errorMessage:"no error",cheapestCurrency:e.length>0&&e[0].currency||F.CurrencyUnits.EURO,cheapestValue:e.length>0?e[0].publicPrice:0},this.rates.sorting=this.rates.sorting.slice().sort(((e,t)=>{var s,r;return(null===(s=this.rates.data[e])||void 0===s?void 0:s.rates.length)>0&&(null===(r=this.rates.data[t])||void 0===r?void 0:r.rates.length)>0?this.rates.data[e].rates[0].publicPrice-this.rates.data[t].rates[0].publicPrice:0}))}else Vt.log(`Discarding rate request ${e}, current is ${this.currentRateRequestId}`)}),(e=>{var s,r,a;this.rates&&(this.rates.data[String(t.id)]={...this.rates.data[String(t.id)],isLoading:!1,rates:[],isError:!0,errorMessage:null===(s=e.errorData)||void 0===s||null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message})}))}async getRates(e,t){var s;const r=null===(s=this.rootStore.carriersStore.selectedCarriersArray)||void 0===s?void 0:s.filter((e=>!e.disabled&&e.active)),a=[];this.rates={data:{},sorting:[]},this.currentRateRequestId=(0,Ht.Z)();for(let s=0;s<r.length;s++)Array.isArray(t)&&t.length>0&&a.push(this.requestRateAndProcess(this.currentRateRequestId,r[s],e));Array.isArray(a)&&a.length>0&&await Promise.all(a).catch((e=>Vt.error(e)))}async getRatesByShippingInformation(e,t,s){var r;const a=null===(r=this.rootStore.carriersStore.selectedCarriersArray)||void 0===r?void 0:r.filter((e=>!e.disabled&&e.active)),i=[];this.rates={data:{},sorting:[]},this.currentRateRequestId=(0,Ht.Z)();for(let r=0;r<a.length;r++)i.push(this.requestRateForReturnAndProcess(this.currentRateRequestId,a[r],e,t,s));Array.isArray(i)&&i.length>0&&await Promise.all(i)}get groupedCarriersServicesWithRates(){const e={},t=(0,n.ZN)(this.rootStore.carriersStore.selectedCarriers);return Object.values(t.data).forEach((t=>{if(!t.disabled&&t.active&&t.carrier){var s;const o={...t},n=e[o.carrier.internalCode]||[];if((null===(s=this.rates)||void 0===s?void 0:s.sorting.length)>0){const e=this.rates.data[o.id];var r,a,i;if(e)if(o.cheapestValue=e.cheapestValue,o.cheapestCurrency=e.cheapestCurrency,o.isLoadingRate=e.isLoading,this.dynamicRatesCarriers.includes(o.internalCode)||this.dynamicRatesCarriers.includes(null===(r=o.carrier)||void 0===r?void 0:r.internalCode))o.services=e.isError?[{code:null,name:null,rate:{errorMessage:e.errorMessage,isError:e.isError,isLoading:e.isLoading}}]:null===(a=e.rates)||void 0===a?void 0:a.map((t=>({code:t.service,name:t.serviceName,rate:{isError:e.isError,isLoading:e.isLoading,currency:t.currency,price:t.publicPrice,errorMessage:e.errorMessage}})));else o.services=null===(i=o.services)||void 0===i?void 0:i.map((t=>{var s;const r=null===(s=e.rates)||void 0===s?void 0:s.find((e=>e.service===t.code));return r?{code:t.code,name:t.name,description:t.description,rate:{isError:e.isError,isLoading:e.isLoading,currency:r.currency,price:r.publicPrice,errorMessage:e.errorMessage}}:{code:t.code,name:t.name,description:t.description,rate:{isError:e.isError,isLoading:e.isLoading,errorMessage:e.errorMessage}}}))}n.push(o),e[o.carrier.internalCode]=[...n]}})),e}constructor(e){super(e),(0,i.Z)(this,"rates",Wt,this),this.currentRateRequestId="",this.dynamicRatesCarriers=[F.availableCarriers.amazon_merchant_fulfillment.internalCode],(0,n.rC)(this)}},Wt=(0,o.Z)(zt.prototype,"rates",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},sorting:[]}}}),(0,o.Z)(zt.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(zt.prototype,"reset"),zt.prototype),(0,o.Z)(zt.prototype,"getRates",[n.aD],Object.getOwnPropertyDescriptor(zt.prototype,"getRates"),zt.prototype),(0,o.Z)(zt.prototype,"getRatesByShippingInformation",[n.aD],Object.getOwnPropertyDescriptor(zt.prototype,"getRatesByShippingInformation"),zt.prototype),(0,o.Z)(zt.prototype,"groupedCarriersServicesWithRates",[n.Fl],Object.getOwnPropertyDescriptor(zt.prototype,"groupedCarriersServicesWithRates"),zt.prototype),zt);var Yt,Kt,Xt,Qt=s(25108);let Jt=(Yt=class extends l{reset(){this.shipmentTracking={trackings:[]}}async shipOrders(e){this.shipmentsCount=e.length;const t=await this.callApi({method:h.yL.POST,url:m.MF.shipments.batchAsync,payload:{shipments:e.map((e=>{let{orderId:t,addressReturn:s}=e;return{orderId:t,addressReturn:s}}))}});(0,n.z)((()=>{this.processApiResult(t,(()=>{e.forEach(((e,s)=>{try{var r;const a=this.rootStore.ordersStore.orders.get(e.orderId);a&&null!==(r=t.data)&&void 0!==r&&r.items[s]&&(a.shipments||(a.shipments=[]),a.shipments.push({request:{...e,created:t.data.items[s].created},responses:[]}),this.rootStore.ordersStore.changeOrderStatus(e.orderId,"generating_labels"))}catch(e){Qt.error(e)}}))}))}))}async getTrackings(e){const t=await this.callApi({method:h.yL.GET,url:`/v1/shipments/responses/trackings/byOrder/${e}`});(0,n.z)((()=>{this.processApiResult(t,(e=>{this.shipmentTracking=e.data||{trackings:[]}}))}))}async closeShipments(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.shipments.close}`,payload:{shipmentRequestIds:e}});(0,n.z)((()=>{this.processApiResult(t)}))}constructor(e){super(e),(0,i.Z)(this,"shipmentTracking",Kt,this),(0,i.Z)(this,"shipmentsCount",Xt,this),(0,n.rC)(this)}},Kt=(0,o.Z)(Yt.prototype,"shipmentTracking",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{trackings:[]}}}),Xt=(0,o.Z)(Yt.prototype,"shipmentsCount",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,o.Z)(Yt.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(Yt.prototype,"reset"),Yt.prototype),(0,o.Z)(Yt.prototype,"shipOrders",[n.aD],Object.getOwnPropertyDescriptor(Yt.prototype,"shipOrders"),Yt.prototype),(0,o.Z)(Yt.prototype,"getTrackings",[n.aD],Object.getOwnPropertyDescriptor(Yt.prototype,"getTrackings"),Yt.prototype),(0,o.Z)(Yt.prototype,"closeShipments",[n.aD],Object.getOwnPropertyDescriptor(Yt.prototype,"closeShipments"),Yt.prototype),Yt);var es,ts,ss,rs,as,is=s(97366),os=s(25108);function ns(e){let{orderId:t,orderIds:s}=e;return[t,s].flat().filter((e=>e))}let ls=(es=class extends l{reset(){var e;this.messages=[],null===(e=this.manager)||void 0===e||e._close(),this.isConnected=!1}connect(){var e;if(!this.rootStore.authStore.auth)return;this.manager=new is.dK("wss://sockrate-prod.isendu.com",{extraHeaders:{authorization:`Bearer ${null===(e=this.rootStore.authStore.auth)||void 0===e?void 0:e.accessToken}`},withCredentials:!0});const t=this.manager.socket("/");t.on("connect",(()=>{this.isConnected=!0})),t.onAny(((e,t)=>{switch(e){case"new_version":return this.processNewVersionNotification(t);case"orders":return this.processOrdersNotifications(t);case"shipments":return this.processShipmentsNotification(t);case"subscriptions_refresh":return this.processSubscriptionChangeNotification(t);case"return_shipments":return this.processReturnShipmentsNotification(t);case"whatsapp":return this.processWhatsappNotification(t);case"whatsapp_new_message":return this.processWhatsappNewMessageNotification(t);case"wallet_recharged":return this.processWalletRechargeNotification(t);case"zebra_status":return this.processZebraPrinterNotification(t)}}))}constructor(e){super(e),(0,i.Z)(this,"manager",ts,this),(0,i.Z)(this,"messages",ss,this),(0,i.Z)(this,"newWhatsappMessageNotifications",rs,this),(0,i.Z)(this,"isConnected",as,this),(0,n.rC)(this),this.connect()}popMessage(){return this.messages.pop()}popWhatsappMessage(){const e=this.newWhatsappMessageNotifications[this.newWhatsappMessageNotifications.length-1];return this.newWhatsappMessageNotifications=this.newWhatsappMessageNotifications.slice(0,-1),e}emitMessage(e){this.manager.socket("/").emit("yancy_emitted_message",e)}async processNewStatus(e,t,s){var r;"fulfilled"===s?await this.rootStore.ordersStore.refreshOrderById(e,"pending"):this.rootStore.ordersStore.changeOrderStatus(e,s,null===(r=t.message.extraInfo)||void 0===r?void 0:r.oldStatus);(0,n.z)((()=>{this.messages.push(t)}))}processOrdersNotifications(e){const t=ns(e.message);if("new_order"!==e.type){if("new_status"===e.type){var s;const r=null===(s=e.message.extraInfo)||void 0===s?void 0:s.status;return t.forEach((t=>this.processNewStatus(t,e,r)))}return t.forEach((async t=>{await this.rootStore.ordersStore.refreshOrderById(t),(0,n.z)((()=>{this.messages.push(e)}))}))}{var r,a;const e=[],s=null===(r=this.rootStore.companiesStore)||void 0===r||null===(a=r.companyInfo)||void 0===a?void 0:a.hideExternallyFulfilled;Promise.all(t.map((async t=>{if(!this.rootStore.ordersStore.orders.get(t)){var r;const a=await this.rootStore.ordersStore.importOrderById(t);a&&!("externally_handled"===(null==a||null===(r=a.order)||void 0===r?void 0:r.status)&&s)&&e.push(t)}}))).then((()=>{e.length&&(0,n.z)((()=>{const t={type:"new_order",message:{orderIds:e}};this.messages.push(t)}))}))}}processShipmentsNotification(e){const t=ns(e.message);if("shipment_error"===e.type)return Promise.all(t.map((e=>this.rootStore.ordersStore.refreshOrderById(e)))).then((()=>{this.messages.push(e)}));let s;switch(e.type){case"shipment_success":s="fulfilled";break;case"in_transit":s="in_transit";break;case"delivered":s="delivered";break;case"exception":s="exception"}return t.forEach((t=>this.processNewStatus(t,e,s)))}processReturnShipmentsNotification(e){return"return_shipment_error"===e.type?(this.rootStore.returnsStore.setPendingShipment(e.message.shipmentId,e.message.error),void this.messages.push(e)):"return_shipment_success"===e.type?(this.rootStore.returnsStore.resetReturnsMaps(),this.rootStore.returnsStore.removePendingShipment(e.message.shipmentId),void this.messages.push(e)):void 0}processWalletRechargeNotification(e){this.rootStore.walletStore.getWallet(),this.messages.push(e)}processWhatsappNewMessageNotification(e){this.messages.push(e),this.newWhatsappMessageNotifications.push(e)}processSubscriptionChangeNotification(e){this.messages.push(e),e.message.Result&&this.rootStore.subscriptionsStore.getSubscriptions()}processWhatsappNotification(e){let{message:{currentCount:t,maxCount:s}}=e;const r=t/s;r>=1?this.rootStore.setWhatsappWarningType(m.Fd.whatsappCounterFinished):r>=.9&&this.rootStore.setWhatsappWarningType(m.Fd.whatsappCounterAlmost)}processZebraPrinterNotification(e){this.rootStore.zebraPrintersStore.syncZebraPrinters(e.message)}processNewVersionNotification(e){e!==this.rootStore.appVersion&&this.rootStore.setVersionHasChanged()}connectToServer(){try{this.isConnected||(this.showLoading(),this.connect(),this.hideLoading())}catch(e){os.error(e)}}reconnectWithNewToken(){var e;null===(e=this.manager)||void 0===e||e._close(),this.isConnected=!1,this.connect()}},ts=(0,o.Z)(es.prototype,"manager",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ss=(0,o.Z)(es.prototype,"messages",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rs=(0,o.Z)(es.prototype,"newWhatsappMessageNotifications",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),as=(0,o.Z)(es.prototype,"isConnected",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,o.Z)(es.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"reset"),es.prototype),(0,o.Z)(es.prototype,"popMessage",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"popMessage"),es.prototype),(0,o.Z)(es.prototype,"popWhatsappMessage",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"popWhatsappMessage"),es.prototype),(0,o.Z)(es.prototype,"emitMessage",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"emitMessage"),es.prototype),(0,o.Z)(es.prototype,"processNewStatus",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"processNewStatus"),es.prototype),(0,o.Z)(es.prototype,"processOrdersNotifications",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"processOrdersNotifications"),es.prototype),(0,o.Z)(es.prototype,"processShipmentsNotification",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"processShipmentsNotification"),es.prototype),(0,o.Z)(es.prototype,"processReturnShipmentsNotification",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"processReturnShipmentsNotification"),es.prototype),(0,o.Z)(es.prototype,"processWalletRechargeNotification",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"processWalletRechargeNotification"),es.prototype),(0,o.Z)(es.prototype,"processWhatsappNewMessageNotification",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"processWhatsappNewMessageNotification"),es.prototype),(0,o.Z)(es.prototype,"processSubscriptionChangeNotification",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"processSubscriptionChangeNotification"),es.prototype),(0,o.Z)(es.prototype,"processWhatsappNotification",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"processWhatsappNotification"),es.prototype),(0,o.Z)(es.prototype,"processZebraPrinterNotification",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"processZebraPrinterNotification"),es.prototype),(0,o.Z)(es.prototype,"processNewVersionNotification",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"processNewVersionNotification"),es.prototype),(0,o.Z)(es.prototype,"connectToServer",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"connectToServer"),es.prototype),(0,o.Z)(es.prototype,"reconnectWithNewToken",[n.aD],Object.getOwnPropertyDescriptor(es.prototype,"reconnectWithNewToken"),es.prototype),es);var ds,cs,ps,us;let hs=(ds=class extends l{async getPickupsList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=`/paged/?limit=${e}`;this.nextPageToken&&(t+=`&page=${this.nextPageToken}`);const s=await this.callApi({method:h.yL.GET,url:`${m.MF.pickups.root}${t}`});var r,a;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r||null===(a=r.response)||void 0===a?void 0:a.data.message);s.data&&(this.setPickups(s.data.pickups),s.data.nextPage&&this.setNextPageToken(s.data.nextPage,e))}async getAvailableIntegrationsIds(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.pickups.root}/carriers`});var t,s;if(e.isError)throw new Error(null===(t=e.errorData)||void 0===t||null===(s=t.response)||void 0===s?void 0:s.data.message);return e.data||{}}async getPickableOrders(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.pickups.root}/carrier`,payload:e});var s,r;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r?void 0:r.data.message);return t.data||{}}async addNewPickup(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.pickups.root}/add`,payload:e});var s,r;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r?void 0:r.data.message);this.getPickupsList()}async deletePickup(e){const t=await this.callApi({method:h.yL.DELETE,url:`${m.MF.pickups.root}/${e}`});var s,r;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r?void 0:r.data.message);(0,n.z)((()=>{this.pickups.delete(e)}))}setPickups(e){for(const t of e)this.pickups.set(t.pk,t);this.approximatePickupsCount=e.length}setNextPageToken(e,t){this.nextPageToken=e,this.approximatePickupsCount=this.approximatePickupsCount+t}get pickupsArray(){return Array.from(this.pickups.values())}reset(){this.pickups=new Map}constructor(e){super(e),(0,i.Z)(this,"pickups",cs,this),(0,i.Z)(this,"nextPageToken",ps,this),(0,i.Z)(this,"approximatePickupsCount",us,this),(0,n.rC)(this)}},cs=(0,o.Z)(ds.prototype,"pickups",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),ps=(0,o.Z)(ds.prototype,"nextPageToken",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),us=(0,o.Z)(ds.prototype,"approximatePickupsCount",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,o.Z)(ds.prototype,"getPickupsList",[n.aD],Object.getOwnPropertyDescriptor(ds.prototype,"getPickupsList"),ds.prototype),(0,o.Z)(ds.prototype,"getAvailableIntegrationsIds",[n.aD],Object.getOwnPropertyDescriptor(ds.prototype,"getAvailableIntegrationsIds"),ds.prototype),(0,o.Z)(ds.prototype,"getPickableOrders",[n.aD],Object.getOwnPropertyDescriptor(ds.prototype,"getPickableOrders"),ds.prototype),(0,o.Z)(ds.prototype,"addNewPickup",[n.aD],Object.getOwnPropertyDescriptor(ds.prototype,"addNewPickup"),ds.prototype),(0,o.Z)(ds.prototype,"deletePickup",[n.aD],Object.getOwnPropertyDescriptor(ds.prototype,"deletePickup"),ds.prototype),(0,o.Z)(ds.prototype,"setPickups",[n.aD],Object.getOwnPropertyDescriptor(ds.prototype,"setPickups"),ds.prototype),(0,o.Z)(ds.prototype,"setNextPageToken",[n.aD],Object.getOwnPropertyDescriptor(ds.prototype,"setNextPageToken"),ds.prototype),(0,o.Z)(ds.prototype,"pickupsArray",[n.Fl],Object.getOwnPropertyDescriptor(ds.prototype,"pickupsArray"),ds.prototype),(0,o.Z)(ds.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(ds.prototype,"reset"),ds.prototype),ds);var ms,gs,ys,fs,bs,vs,xs,Ss;let js=(ms=class extends l{reset(){this.paymentSubscriptions=new Map,this.isPaymentSubscriptionsError=!1,this.addOns=new Map,this.isFreeTrial=!1,this.isSubscriptionLoading=!1,this.isAddonsLoading=!1,this.shipmentCounter=0}convertPaymentSubscriptionsToMap(e){this.paymentSubscriptions=new Map,this.convertPaymentSubscriptionsToMapAppend(e)}convertPaymentSubscriptionsToMapAppend(e){var t;null===(t=e.data)||void 0===t||t.items.forEach((e=>{this.paymentSubscriptions.set(e.id,e)}))}convertAddOnsToMap(e){this.addOns=new Map,this.convertAddOnsToMapAppend(e)}convertAddOnsToMapAppend(e){var t,s;null===(t=e.data)||void 0===t||null===(s=t.items)||void 0===s||s.forEach(((e,t)=>{this.addOns.set(t+"_"+e.itemPriceId,e)}))}async setup(e){let{selectedPlanId:t,selectedAddonId:s,billingAddress:r,paymentMethod:a}=e;this.isSubscriptionLoading=!0;const i=await this.callApi({method:h.yL.POST,url:`${m.MF.subscriptions.setup}`,payload:{selectedPlanId:t,selectedAddonId:s,billingAddress:r,paymentMethod:a}});return(0,n.z)((()=>{this.processApiResult(i,(async()=>{await this.getPaymentSubscriptions(),await this.getShipmentCounter(),await this.getAddonsWithInfo(),await this.rootStore.paymentMethodsStore.getPaymentMethods(),await this.rootStore.companiesStore.getCompanyInfo(),this.isSubscriptionLoading=!1}))})),i.data}async getPaymentSubscriptions(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.payment_subscriptions.root}`});(0,n.z)((()=>{this.processApiResult(e,(async e=>{this.convertPaymentSubscriptionsToMap(e),this.isPaymentSubscriptionsError=!1;const t=this.paymentSubscriptionsArray.sort(((e,t)=>e.currentPeriodEnd-t.currentPeriodEnd))[0];t&&(this.isFreeTrial="trialing"===t.status)}),(()=>{this.isPaymentSubscriptionsError=!0}))}))}async setSubscription(e){let{itemPriceId:t}=e;const s=await this.callApi({method:h.yL.POST,url:`${m.MF.subscriptions.plans}/setsubscription`,payload:{itemPriceId:t}});(0,n.z)((()=>{this.processApiResult(s,(async()=>{await this.getPaymentSubscriptions()}))}))}async changePlan(e){let{planId:t,itemPriceId:s}=e;this.isSubscriptionLoading=!0;const r=await this.callApi({method:h.yL.PATCH,url:`${m.MF.subscriptions.plans}/change`,payload:{planId:t,itemPriceId:s}});return(0,n.z)((()=>{this.processApiResult(r,(async()=>{await this.getPaymentSubscriptions(),await this.getShipmentCounter(),this.isSubscriptionLoading=!1}))})),this.paymentSubscriptionsArray}async resetPlan(){this.isSubscriptionLoading=!0;const e=await this.callApi({method:h.yL.POST,url:`${m.MF.subscriptions.plans}/reset`,payload:{}});return(0,n.z)((()=>{this.processApiResult(e,(async()=>{await this.getPaymentSubscriptions(),this.isSubscriptionLoading=!1}))})),this.paymentSubscriptionsArray}async cancelPlan(e){let{planId:t}=e;this.isSubscriptionLoading=!0;const s=await this.callApi({method:h.yL.DELETE,url:`${m.MF.subscriptions.plans}/${t}`});return(0,n.z)((()=>{this.processApiResult(s,(async()=>{await this.getPaymentSubscriptions(),this.isSubscriptionLoading=!1}))})),this.paymentSubscriptionsArray}async setSubscriptionPlan(e){let{chargebeeCustomerId:t,subscriptionId:s,itemPriceId:r}=e;const a=await this.callApi({method:h.yL.PATCH,url:`${m.MF.subscriptions.createUpdatePlan}/`,payload:{chargebeeCustomerId:t,subscriptionId:s,itemPriceId:r}});return(0,n.z)((()=>{this.processApiResult(a,(async()=>{await this.getPaymentSubscriptions()}))})),this.paymentSubscriptionsArray}async createAddon(e){let{type:t,itemPriceId:s}=e;this.isAddonsLoading=!0;const r=await this.callApi({method:h.yL.POST,url:`${m.MF.subscriptions.addons}`,payload:{type:t,itemPriceId:s}});return(0,n.z)((()=>{this.processApiResult(r,(async()=>{await this.getPaymentSubscriptions(),await this.getAddonsWithInfo()}))})),this.paymentSubscriptionsArray}async resetAddon(e){let{type:t}=e;this.isAddonsLoading=!0;const s=await this.callApi({method:h.yL.PATCH,url:`${m.MF.subscriptions.addons}/reset`,payload:{type:t}});return(0,n.z)((()=>{this.processApiResult(s,(async()=>{await this.getPaymentSubscriptions(),await this.getAddonsWithInfo()}))})),this.paymentSubscriptionsArray}async changeAddon(e){let{type:t,itemPriceId:s}=e;this.isAddonsLoading=!0;const r=await this.callApi({method:h.yL.PATCH,url:`${m.MF.subscriptions.addons}/change`,payload:{type:t,itemPriceId:s}});return(0,n.z)((()=>{this.processApiResult(r,(async()=>{await this.getPaymentSubscriptions(),await this.getAddonsWithInfo()}))})),this.paymentSubscriptionsArray}async cancelAddon(e){let{type:t,id:s}=e;this.isAddonsLoading=!0;const r=await this.callApi({method:h.yL.DELETE,url:`${m.MF.subscriptions.addons}/${t}/${s}`});return(0,n.z)((()=>{this.processApiResult(r,(async()=>{await this.getPaymentSubscriptions(),await this.getAddonsWithInfo()}))})),this.paymentSubscriptionsArray}async getAddonsByCompany(e){this.isAddonsLoading=!0;const t=await this.callApi({method:h.yL.GET,url:`${m.MF.payment_subscriptions.getAddonsByCompany}/${e}`});(0,n.z)((()=>{this.isAddonsLoading=!1,this.processApiResult(t,(async e=>{this.convertAddOnsToMap(e)}))}))}async getShipmentCounter(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.payment_subscriptions.getShipmentCounter}`});return(0,n.z)((()=>{this.processApiResult(e),this.shipmentCounter=e.data})),e.data}async getAddonsWithInfo(){this.isAddonsLoading=!0;const e=await this.callApi({method:h.yL.GET,url:`${m.MF.payment_subscriptions.getAddonsWithInfo}`});(0,n.z)((()=>{this.isAddonsLoading=!1,this.processApiResult(e,(async e=>{this.convertAddOnsToMap(e)}))}))}get paymentSubscriptionsArray(){return Array.from(this.paymentSubscriptions.values())}get addOnsArray(){return Array.from(this.addOns.values())}get filteredAddons(){if(this.addOnsArray){return this.addOnsArray.filter((e=>{var t,s,r;return"active"===(null==e||null===(t=e.status)||void 0===t?void 0:t.toLowerCase())||"future"===(null==e||null===(s=e.status)||void 0===s?void 0:s.toLowerCase())||"nonrenewing"===(null==e||null===(r=e.status)||void 0===r?void 0:r.toLowerCase())})).sort(((e,t)=>{var s,r,a,i;const o="active"===(null==e||null===(s=e.status)||void 0===s?void 0:s.toLowerCase())||"nonrenewing"===(null==e||null===(r=e.status)||void 0===r?void 0:r.toLowerCase())?1:0;return("active"===(null==t||null===(a=t.status)||void 0===a?void 0:a.toLowerCase())||"nonrenewing"===(null==t||null===(i=t.status)||void 0===i?void 0:i.toLowerCase())?1:0)-o}))}return[]}get whatsAppAddons(){return this.paymentSubscriptionsArray.filter((e=>{var t;return(e.status===F.Subscriptions.subscriptionStatusActive||e.status===F.Subscriptions.subscriptionStatusFuture)&&(null===(t=e.priceId)||void 0===t?void 0:t.startsWith(F.Subscriptions.subscriptionPrefixWhatsApp))}))}get whatsAppActiveAddons(){return this.whatsAppAddons.filter((e=>e.status===F.Subscriptions.subscriptionStatusActive))}get whatsAppFutureAddons(){return this.whatsAppAddons.filter((e=>e.status===F.Subscriptions.subscriptionStatusFuture))}get whatsAppSubscriptions(){return this.whatsAppAddons.filter((e=>this.rootStore.financeStore.whatsappPricesArray.includes(e.priceId))).sort(this.sortWhatsAppAddons)}get activeWhatsAppSubscriptions(){return this.whatsAppActiveAddons.filter((e=>this.rootStore.financeStore.whatsappPricesArray.includes(e.priceId))).sort(this.sortWhatsAppAddons)}get futureWhatsAppSubscriptions(){return this.whatsAppFutureAddons.filter((e=>this.rootStore.financeStore.whatsappPricesArray.includes(e.priceId))).sort(this.sortWhatsAppAddons)}get currentWhatsAppSubscription(){return this.activeWhatsAppSubscriptions[0]}get futureWhatsAppSubscription(){return this.futureWhatsAppSubscriptions[0]}constructor(e){super(e),(0,i.Z)(this,"paymentSubscriptions",gs,this),(0,i.Z)(this,"isPaymentSubscriptionsError",ys,this),(0,i.Z)(this,"addOns",fs,this),(0,i.Z)(this,"isFreeTrial",bs,this),(0,i.Z)(this,"shipmentCounter",vs,this),(0,i.Z)(this,"isSubscriptionLoading",xs,this),(0,i.Z)(this,"isAddonsLoading",Ss,this),this.sortWhatsAppAddons=(e,t)=>e.currentPeriodEnd&&t.currentPeriodEnd?t.currentPeriodEnd-e.currentPeriodEnd:e.currentPeriodEnd?e.currentPeriodEnd:t.currentPeriodEnd?t.currentPeriodEnd:0,(0,n.rC)(this)}},gs=(0,o.Z)(ms.prototype,"paymentSubscriptions",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),ys=(0,o.Z)(ms.prototype,"isPaymentSubscriptionsError",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fs=(0,o.Z)(ms.prototype,"addOns",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),bs=(0,o.Z)(ms.prototype,"isFreeTrial",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vs=(0,o.Z)(ms.prototype,"shipmentCounter",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xs=(0,o.Z)(ms.prototype,"isSubscriptionLoading",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ss=(0,o.Z)(ms.prototype,"isAddonsLoading",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,o.Z)(ms.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"reset"),ms.prototype),(0,o.Z)(ms.prototype,"setup",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"setup"),ms.prototype),(0,o.Z)(ms.prototype,"getPaymentSubscriptions",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"getPaymentSubscriptions"),ms.prototype),(0,o.Z)(ms.prototype,"setSubscription",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"setSubscription"),ms.prototype),(0,o.Z)(ms.prototype,"changePlan",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"changePlan"),ms.prototype),(0,o.Z)(ms.prototype,"resetPlan",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"resetPlan"),ms.prototype),(0,o.Z)(ms.prototype,"cancelPlan",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"cancelPlan"),ms.prototype),(0,o.Z)(ms.prototype,"setSubscriptionPlan",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"setSubscriptionPlan"),ms.prototype),(0,o.Z)(ms.prototype,"createAddon",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"createAddon"),ms.prototype),(0,o.Z)(ms.prototype,"resetAddon",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"resetAddon"),ms.prototype),(0,o.Z)(ms.prototype,"changeAddon",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"changeAddon"),ms.prototype),(0,o.Z)(ms.prototype,"cancelAddon",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"cancelAddon"),ms.prototype),(0,o.Z)(ms.prototype,"getAddonsByCompany",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"getAddonsByCompany"),ms.prototype),(0,o.Z)(ms.prototype,"getShipmentCounter",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"getShipmentCounter"),ms.prototype),(0,o.Z)(ms.prototype,"getAddonsWithInfo",[n.aD],Object.getOwnPropertyDescriptor(ms.prototype,"getAddonsWithInfo"),ms.prototype),(0,o.Z)(ms.prototype,"paymentSubscriptionsArray",[n.Fl],Object.getOwnPropertyDescriptor(ms.prototype,"paymentSubscriptionsArray"),ms.prototype),(0,o.Z)(ms.prototype,"addOnsArray",[n.Fl],Object.getOwnPropertyDescriptor(ms.prototype,"addOnsArray"),ms.prototype),(0,o.Z)(ms.prototype,"filteredAddons",[n.Fl],Object.getOwnPropertyDescriptor(ms.prototype,"filteredAddons"),ms.prototype),(0,o.Z)(ms.prototype,"whatsAppAddons",[n.Fl],Object.getOwnPropertyDescriptor(ms.prototype,"whatsAppAddons"),ms.prototype),(0,o.Z)(ms.prototype,"whatsAppActiveAddons",[n.Fl],Object.getOwnPropertyDescriptor(ms.prototype,"whatsAppActiveAddons"),ms.prototype),(0,o.Z)(ms.prototype,"whatsAppFutureAddons",[n.Fl],Object.getOwnPropertyDescriptor(ms.prototype,"whatsAppFutureAddons"),ms.prototype),(0,o.Z)(ms.prototype,"whatsAppSubscriptions",[n.Fl],Object.getOwnPropertyDescriptor(ms.prototype,"whatsAppSubscriptions"),ms.prototype),(0,o.Z)(ms.prototype,"activeWhatsAppSubscriptions",[n.Fl],Object.getOwnPropertyDescriptor(ms.prototype,"activeWhatsAppSubscriptions"),ms.prototype),(0,o.Z)(ms.prototype,"futureWhatsAppSubscriptions",[n.Fl],Object.getOwnPropertyDescriptor(ms.prototype,"futureWhatsAppSubscriptions"),ms.prototype),(0,o.Z)(ms.prototype,"currentWhatsAppSubscription",[n.Fl],Object.getOwnPropertyDescriptor(ms.prototype,"currentWhatsAppSubscription"),ms.prototype),(0,o.Z)(ms.prototype,"futureWhatsAppSubscription",[n.Fl],Object.getOwnPropertyDescriptor(ms.prototype,"futureWhatsAppSubscription"),ms.prototype),ms);var ws,Ms,Cs,As;let Ts=(ws=class extends l{reset(){this.paymentMethods=new Map,this.lastRequestMethod="",this.paymentMethodType=null}convertPaymentMethodsToMap(e){this.paymentMethods=new Map,this.convertPaymentMethodsToMapAppend(e)}convertPaymentMethodsToMapAppend(e){var t;null===(t=e.data)||void 0===t||t.items.forEach((e=>{this.paymentMethods.set(`${e.id}`,e)}))}async getPaymentMethods(){this.lastRequestMethod=h.yL.GET;const e=await this.callApi({method:h.yL.GET,url:`${m.MF.payment_methods.root}`});(0,n.z)((()=>{this.processApiResult(e,(async e=>{this.convertPaymentMethodsToMap(e)}))}))}async addPaymentMethod(e){let{paymentId:t,iban:s,firstName:r,lastName:a,email:i,isDefault:o}=e;this.lastRequestMethod=h.yL.POST;const n=await this.callApi({method:h.yL.POST,url:`${m.MF.payment_methods.root}`,payload:{paymentId:t,iban:s,firstName:r,lastName:a,email:i,isDefault:o}});return this.processApiResult(n,(e=>{null!=e&&e.data&&(this.paymentMethods.set(`${e.data.id}`,e.data),o&&this.paymentMethods.forEach((t=>{var s;t.isDefault=t.id===(null===(s=e.data)||void 0===s?void 0:s.id)})))})),n.data}async defaultPaymentMethod(e){this.lastRequestMethod=h.yL.PATCH;const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.payment_methods.root}/${e}`,payload:{isDefault:!0}});this.processApiResult(t,(()=>{this.paymentMethods.forEach((t=>{t.isDefault=t.id===e}))}))}async removePaymentMethod(e){this.lastRequestMethod=h.yL.DELETE;const t=await this.callApi({method:h.yL.DELETE,url:`${m.MF.payment_methods.root}/${e}`});(0,n.z)((()=>{this.processApiResult(t,(()=>{const t=(0,n.ZN)(this.paymentMethods);t.delete(`${e}`),this.paymentMethods=t}))}))}async getPaymentMethodType(){this.lastRequestMethod=h.yL.GET;const e=await this.callApi({method:h.yL.GET,url:`${m.MF.payment_methods.getType}`});(0,n.z)((()=>{this.processApiResult(e,(e=>{null!=e&&e.data&&(this.paymentMethodType=e.data)}))}))}get paymentMethodsArray(){return Array.from(this.paymentMethods.values())}constructor(e){super(e),(0,i.Z)(this,"paymentMethods",Ms,this),(0,i.Z)(this,"lastRequestMethod",Cs,this),(0,i.Z)(this,"paymentMethodType",As,this),(0,n.rC)(this)}},Ms=(0,o.Z)(ws.prototype,"paymentMethods",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Cs=(0,o.Z)(ws.prototype,"lastRequestMethod",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),As=(0,o.Z)(ws.prototype,"paymentMethodType",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),(0,o.Z)(ws.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(ws.prototype,"reset"),ws.prototype),(0,o.Z)(ws.prototype,"getPaymentMethods",[n.aD],Object.getOwnPropertyDescriptor(ws.prototype,"getPaymentMethods"),ws.prototype),(0,o.Z)(ws.prototype,"addPaymentMethod",[n.aD],Object.getOwnPropertyDescriptor(ws.prototype,"addPaymentMethod"),ws.prototype),(0,o.Z)(ws.prototype,"defaultPaymentMethod",[n.aD],Object.getOwnPropertyDescriptor(ws.prototype,"defaultPaymentMethod"),ws.prototype),(0,o.Z)(ws.prototype,"removePaymentMethod",[n.aD],Object.getOwnPropertyDescriptor(ws.prototype,"removePaymentMethod"),ws.prototype),(0,o.Z)(ws.prototype,"getPaymentMethodType",[n.aD],Object.getOwnPropertyDescriptor(ws.prototype,"getPaymentMethodType"),ws.prototype),(0,o.Z)(ws.prototype,"paymentMethodsArray",[n.Fl],Object.getOwnPropertyDescriptor(ws.prototype,"paymentMethodsArray"),ws.prototype),ws);var Os,Ps,Ns,_s,Zs,Is,Ds;let Es=(Os=class extends l{reset(){this.clientSecret="",this.invoices=new Map,this.coupons=new Map,this.promotionalCredits=new Map,this.plans=new Map,this.addons=new Map}convertInvoicesToMap(e){this.invoices=new Map,this.convertInvoicesToMapAppend(e)}convertInvoicesToMapAppend(e){var t;null===(t=e.data)||void 0===t||t.items.forEach((e=>{this.invoices.set(`${e.id}`,e)}))}convertCouponsToMap(e){this.coupons=new Map,this.convertCouponsToMapAppend(e)}convertCouponsToMapAppend(e){var t;null===(t=e.data)||void 0===t||t.items.forEach((e=>{this.coupons.set(`${e.id}`,e)}))}convertPromotionalCreditsToMap(e){this.promotionalCredits=new Map,this.convertPromotionalCreditsToMapAppend(e)}convertPromotionalCreditsToMapAppend(e){var t;null===(t=e.data)||void 0===t||t.items.forEach((e=>this.promotionalCredits.set(`${e.id}`,e)))}async getInvoices(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.invoices.root}`});(0,n.z)((()=>{this.processApiResult(e,(async e=>{this.convertInvoicesToMap(e)}))}))}async getCoupons(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.invoices.root}/coupons`});(0,n.z)((()=>{this.processApiResult(e,(async e=>{this.convertCouponsToMap(e)}))}))}convertPlansToMapAppend(e){if(null==e||!e.data)return;const t=Object.values(e.data);t.length&&t.forEach((e=>{this.plans.set(`${e.plan.id}`,e)}))}convertPlansToMap(e){this.plans=new Map,this.convertPlansToMapAppend(e)}async getPlans(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.subscriptions.plans}/`});(0,n.z)((()=>{this.processApiResult(e,(async e=>{this.convertPlansToMap(e)}))}))}get plansArray(){return Array.from(this.plans.values())}convertAddonsToMapAppend(e){if(null==e||!e.data)return;const t=Object.values(null==e?void 0:e.data);t.length&&t.forEach((e=>{this.addons.set(`${e.plan.id}`,e)}))}convertAddonsToMap(e){this.addons=new Map,this.convertAddonsToMapAppend(e)}async getAddons(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.subscriptions.addons}`});(0,n.z)((()=>{this.processApiResult(e,(async e=>{this.convertAddonsToMap(e)}))}))}get addonsArray(){return Array.from(this.addons.values())}async getPromotionalCredits(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.invoices.root}/promotional_credits`});(0,n.z)((()=>{this.processApiResult(e,(e=>{this.convertPromotionalCreditsToMap(e)}))}))}async getInvoicePdfViewUrl(e){const t=await this.callApi({method:h.yL.GET,url:`${m.MF.invoices.root}/view/${e}`});return this.processApiResult(t),null==t?void 0:t.data}async getInvoicePdfDownloadUrl(e){const t=await this.callApi({method:h.yL.GET,url:`${m.MF.invoices.root}/download/${e}`});return this.processApiResult(t),null==t?void 0:t.data}get invoicesArray(){return Array.from(this.invoices.values())}get couponsArray(){return Array.from(this.coupons.values())}get promotionalCreditsArray(){return Array.from(this.promotionalCredits.values())}get whatsappPrices(){const e=this.addonsArray.map((e=>e.prices));return[].concat(...e).filter((e=>e.id.startsWith(F.Subscriptions.subscriptionPrefixWhatsApp)))}get selectableWhatsappPrices(){const e=/wa-([0-9])s-FT-([0-9]+)/;return this.whatsappPrices.filter((t=>!e.test(null==t?void 0:t.id)))}get whatsappPricesArray(){return this.whatsappPrices.map((e=>e.id))}constructor(e){super(e),(0,i.Z)(this,"clientSecret",Ps,this),(0,i.Z)(this,"invoices",Ns,this),(0,i.Z)(this,"coupons",_s,this),(0,i.Z)(this,"promotionalCredits",Zs,this),(0,i.Z)(this,"plans",Is,this),(0,i.Z)(this,"addons",Ds,this),(0,n.rC)(this)}},Ps=(0,o.Z)(Os.prototype,"clientSecret",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ns=(0,o.Z)(Os.prototype,"invoices",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),_s=(0,o.Z)(Os.prototype,"coupons",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Zs=(0,o.Z)(Os.prototype,"promotionalCredits",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Is=(0,o.Z)(Os.prototype,"plans",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Ds=(0,o.Z)(Os.prototype,"addons",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),(0,o.Z)(Os.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(Os.prototype,"reset"),Os.prototype),(0,o.Z)(Os.prototype,"getInvoices",[n.aD],Object.getOwnPropertyDescriptor(Os.prototype,"getInvoices"),Os.prototype),(0,o.Z)(Os.prototype,"getCoupons",[n.aD],Object.getOwnPropertyDescriptor(Os.prototype,"getCoupons"),Os.prototype),(0,o.Z)(Os.prototype,"getPlans",[n.aD],Object.getOwnPropertyDescriptor(Os.prototype,"getPlans"),Os.prototype),(0,o.Z)(Os.prototype,"plansArray",[n.Fl],Object.getOwnPropertyDescriptor(Os.prototype,"plansArray"),Os.prototype),(0,o.Z)(Os.prototype,"getAddons",[n.aD],Object.getOwnPropertyDescriptor(Os.prototype,"getAddons"),Os.prototype),(0,o.Z)(Os.prototype,"addonsArray",[n.Fl],Object.getOwnPropertyDescriptor(Os.prototype,"addonsArray"),Os.prototype),(0,o.Z)(Os.prototype,"getPromotionalCredits",[n.aD],Object.getOwnPropertyDescriptor(Os.prototype,"getPromotionalCredits"),Os.prototype),(0,o.Z)(Os.prototype,"getInvoicePdfViewUrl",[n.aD],Object.getOwnPropertyDescriptor(Os.prototype,"getInvoicePdfViewUrl"),Os.prototype),(0,o.Z)(Os.prototype,"getInvoicePdfDownloadUrl",[n.aD],Object.getOwnPropertyDescriptor(Os.prototype,"getInvoicePdfDownloadUrl"),Os.prototype),(0,o.Z)(Os.prototype,"invoicesArray",[n.Fl],Object.getOwnPropertyDescriptor(Os.prototype,"invoicesArray"),Os.prototype),(0,o.Z)(Os.prototype,"couponsArray",[n.Fl],Object.getOwnPropertyDescriptor(Os.prototype,"couponsArray"),Os.prototype),(0,o.Z)(Os.prototype,"promotionalCreditsArray",[n.Fl],Object.getOwnPropertyDescriptor(Os.prototype,"promotionalCreditsArray"),Os.prototype),(0,o.Z)(Os.prototype,"whatsappPrices",[n.Fl],Object.getOwnPropertyDescriptor(Os.prototype,"whatsappPrices"),Os.prototype),(0,o.Z)(Os.prototype,"selectableWhatsappPrices",[n.Fl],Object.getOwnPropertyDescriptor(Os.prototype,"selectableWhatsappPrices"),Os.prototype),(0,o.Z)(Os.prototype,"whatsappPricesArray",[n.Fl],Object.getOwnPropertyDescriptor(Os.prototype,"whatsappPricesArray"),Os.prototype),Os);var ks,Ls;let Rs=(ks=class extends l{reset(){this.customParcels=[]}async addParcel(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.parcels.root}`,payload:{...e}});(0,n.z)((()=>{this.processApiResult(t,(e=>{if(!e.data)return;const t=[...this.customParcels];t.push(e.data),this.customParcels=t}))}))}async editParcel(e,t){const s=await this.callApi({method:h.yL.PATCH,url:`${m.MF.parcels.root}/${e}`,payload:{id:e,...t}});(0,n.z)((()=>{this.processApiResult(s,(t=>{const s=this.customParcels.findIndex((t=>Number(t.id)===e));-1!==s&&t.data&&(this.customParcels[s]=t.data)}))}))}async removeParcel(e){const t=await this.callApi({method:h.yL.DELETE,url:`${m.MF.parcels.root}/${e}`,payload:{id:e}});this.processApiResult(t,(()=>{const t=this.customParcels.filter((t=>Number(t.id)!==e));this.customParcels=t}))}async getCustomParcels(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.parcels.root}`});(0,n.z)((()=>{this.processApiResult(e,(e=>{var t;this.customParcels=(null===(t=e.data)||void 0===t?void 0:t.items)||[]}))}))}get allParcels(){const e=ot();let t=[];return this.customParcels&&(t=this.customParcels.map((e=>({id:e.id,parcelSize:e})))),t=t.length>0?[...t,...e]:[...e],(0,m.yZ)(t)}get defaultParcel(){return this.customParcels.find((e=>e.isDefault))}async setDefaultParcel(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.parcels.root}/${e}`,payload:{isDefault:!0}});this.processApiResult(t,(()=>{this.customParcels=this.customParcels.map((t=>({...t,isDefault:t.id===e})))}))}async unsetDefaultParcel(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.parcels.root}/${e}`,payload:{isDefault:!1}});this.processApiResult(t,(()=>{this.customParcels.forEach((e=>{e.isDefault=!1}))}))}resetCache(){this.getApiClient().invalidateCacheKey(`${m.MF.parcels.root}`)}constructor(e){super(e),(0,i.Z)(this,"customParcels",Ls,this),(0,n.rC)(this)}},Ls=(0,o.Z)(ks.prototype,"customParcels",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,o.Z)(ks.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(ks.prototype,"reset"),ks.prototype),(0,o.Z)(ks.prototype,"addParcel",[n.aD],Object.getOwnPropertyDescriptor(ks.prototype,"addParcel"),ks.prototype),(0,o.Z)(ks.prototype,"editParcel",[n.aD],Object.getOwnPropertyDescriptor(ks.prototype,"editParcel"),ks.prototype),(0,o.Z)(ks.prototype,"removeParcel",[n.aD],Object.getOwnPropertyDescriptor(ks.prototype,"removeParcel"),ks.prototype),(0,o.Z)(ks.prototype,"getCustomParcels",[n.aD],Object.getOwnPropertyDescriptor(ks.prototype,"getCustomParcels"),ks.prototype),(0,o.Z)(ks.prototype,"allParcels",[n.Fl],Object.getOwnPropertyDescriptor(ks.prototype,"allParcels"),ks.prototype),(0,o.Z)(ks.prototype,"defaultParcel",[n.Fl],Object.getOwnPropertyDescriptor(ks.prototype,"defaultParcel"),ks.prototype),(0,o.Z)(ks.prototype,"setDefaultParcel",[n.aD],Object.getOwnPropertyDescriptor(ks.prototype,"setDefaultParcel"),ks.prototype),(0,o.Z)(ks.prototype,"unsetDefaultParcel",[n.aD],Object.getOwnPropertyDescriptor(ks.prototype,"unsetDefaultParcel"),ks.prototype),ks);var Fs,Us,Gs=s(25108);let Bs=(Fs=class extends l{reset(){this.addresses=new Map}convertAddressesToMap(e){this.addresses=new Map,this.convertAddressesToMapAppend(e)}convertAddressesToMapAppend(e){var t;null===(t=e.data)||void 0===t||t.items.forEach((e=>{this.addresses.set(`${e.id}`,e)}))}async getAddresses(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.addresses.root}`});(0,n.z)((()=>{this.processApiResult(e,(async e=>{this.convertAddressesToMap(e)}))}))}async addAddress(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.addresses.root}`,payload:e});this.processApiResult(t,(e=>{e.data&&this.addresses.set(`${e.data.id}`,e.data)}))}async editAddress(e,t){const s=await this.callApi({method:h.yL.PATCH,url:`${m.MF.addresses.root}/${t}`,payload:e});this.processApiResult(s,(e=>{e.data&&this.addresses.set(`${t}`,e.data)}))}async defaultAddress(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.addresses.root}/${e}`,payload:{isDefault:!0}});this.processApiResult(t,(()=>{this.addresses.forEach((t=>{t.isDefault=t.id===e}))}))}async removeAddress(e){const t=await this.callApi({method:h.yL.DELETE,url:`${m.MF.addresses.root}/${e}`});this.processApiResult(t,(()=>{const t=(0,n.ZN)(this.addresses);t.delete(`${e}`),this.addresses=t}))}get senderAddressesArray(){return Array.from(this.addresses.values()).filter((e=>"SHIPPING"===e.type))}get pickupAddressesArray(){return Array.from(this.addresses.values()).filter((e=>"PICKUP"===e.type))}async autocomplete(e){try{var t;return(null===(t=(await this.callApi({method:h.yL.GET,url:`${m.MF.addresses.autocomplete}?input=${e}`})).data)||void 0===t?void 0:t.items)||[]}catch(e){return Gs.error(e),[]}}async autocompleteStreetAddress(e){const t=await this.callApi({method:h.yL.GET,url:`${m.MF.addresses.autocomplete}/${e}`});if(!t.isError&&t.data)return t.data;throw new Error("Error while getting address")}async addressFormAutocomplete(e){try{const t=await this.callApi({method:h.yL.GET,url:`${m.MF.addresses.suggest}?query=${e}`});return Array.isArray(null==t?void 0:t.data)?t.data.filter((e=>void 0!==e.city&&void 0!==e.countryIsoCode&&void 0!==e.state&&void 0!==e.street&&void 0!==e.zipCode)):[]}catch(e){return Gs.error(e),[]}}getAddressById(e){return this.addresses.get(`${e}`)}constructor(e){super(e),(0,i.Z)(this,"addresses",Us,this),(0,n.rC)(this)}},Us=(0,o.Z)(Fs.prototype,"addresses",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),(0,o.Z)(Fs.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(Fs.prototype,"reset"),Fs.prototype),(0,o.Z)(Fs.prototype,"getAddresses",[n.aD],Object.getOwnPropertyDescriptor(Fs.prototype,"getAddresses"),Fs.prototype),(0,o.Z)(Fs.prototype,"addAddress",[n.aD],Object.getOwnPropertyDescriptor(Fs.prototype,"addAddress"),Fs.prototype),(0,o.Z)(Fs.prototype,"editAddress",[n.aD],Object.getOwnPropertyDescriptor(Fs.prototype,"editAddress"),Fs.prototype),(0,o.Z)(Fs.prototype,"defaultAddress",[n.aD],Object.getOwnPropertyDescriptor(Fs.prototype,"defaultAddress"),Fs.prototype),(0,o.Z)(Fs.prototype,"removeAddress",[n.aD],Object.getOwnPropertyDescriptor(Fs.prototype,"removeAddress"),Fs.prototype),(0,o.Z)(Fs.prototype,"senderAddressesArray",[n.Fl],Object.getOwnPropertyDescriptor(Fs.prototype,"senderAddressesArray"),Fs.prototype),(0,o.Z)(Fs.prototype,"pickupAddressesArray",[n.Fl],Object.getOwnPropertyDescriptor(Fs.prototype,"pickupAddressesArray"),Fs.prototype),Fs);var $s,zs,Ws,Hs,Vs,qs,Ys;let Ks=($s=class extends l{get isFiltering(){var e,t,s,r,a,i,o;const n=(null===(e=this.ordersFilters.deliveryMethods)||void 0===e?void 0:e.length)||(null===(t=this.ordersFilters.destinations)||void 0===t?void 0:t.length)||(null===(s=this.ordersFilters.paymentMethod)||void 0===s?void 0:s.length)||(null===(r=this.ordersFilters.labelPrinted)||void 0===r?void 0:r.length)||(null===(a=this.ordersFilters.rangeDates)||void 0===a?void 0:a.length)||(null===(i=this.ordersFilters.stores)||void 0===i?void 0:i.length)||(null===(o=this.ordersFilters.orderTags)||void 0===o?void 0:o.length)||this.ordersFilters.search;return Boolean(n)}setPage(e){this.currentTablePage=e}setStatus(e){this.orderStatus=e,this.setFilters({})}setFilters(e){this.ordersFilters=e,this.orderStatus=e.selectedStatus||this.orderStatus,"all"===this.ordersFilters.selectedStatus&&(this.orderStatus="all")}resetFilters(){this.ordersFilters={}}reset(){this.orderStatus="incoming_orders",this.currentTablePage=1,this.ordersFilters={rangeDates:[],destinations:[],stores:[],deliveryMethods:[],paymentMethod:[],labelPrinted:""}}removeFilter(e,t){var s,r,a,i,o;switch(e){case"rangeDates":this.ordersFilters={...this.ordersFilters,rangeDates:void 0};break;case"destinations":this.ordersFilters={...this.ordersFilters,destinations:null===(s=this.ordersFilters.destinations)||void 0===s?void 0:s.filter((e=>e!==t))};break;case"deliveryMethods":this.ordersFilters={...this.ordersFilters,deliveryMethods:null===(r=this.ordersFilters.deliveryMethods)||void 0===r?void 0:r.filter((e=>e!==t))};break;case"paymentMethod":this.ordersFilters={...this.ordersFilters,paymentMethod:null===(a=this.ordersFilters.paymentMethod)||void 0===a?void 0:a.filter((e=>e!==t))};break;case"labelPrinted":this.ordersFilters={...this.ordersFilters,labelPrinted:""};break;case"stores":this.ordersFilters={...this.ordersFilters,stores:null===(i=this.ordersFilters.stores)||void 0===i?void 0:i.filter((e=>e!==t))};break;case"search":this.ordersFilters={...this.ordersFilters,search:""};break;case"orderTags":this.ordersFilters={...this.ordersFilters,orderTags:null===(o=this.ordersFilters.orderTags)||void 0===o?void 0:o.filter((e=>e!==t))}}this.isFiltering||("all"===this.ordersFilters.selectedStatus?this.setStatus("incoming_orders"):this.setStatus(this.ordersFilters.selectedStatus))}toggleQuickFiltersDrawer(){this.isQuickFiltersDrawerVisible=!this.isQuickFiltersDrawerVisible}toggleSaveFiltersModal(){this.isSaveFiltersModalVisible=!this.isSaveFiltersModalVisible}async fetchQuickFilters(){const e=await this.callApi({url:m.MF.users.customFilter,method:h.yL.GET});var t,s;if(e.isError)throw new Error(null===(t=e.errorData)||void 0===t||null===(s=t.response)||void 0===s?void 0:s.data.message);(0,n.z)((()=>{this.processApiResult(e,(()=>{var t;this.quickFilters=(null===(t=e.data)||void 0===t?void 0:t.dataArray.sort(((e,t)=>e.data.name.localeCompare(t.data.name))))||[]}))}))}async saveQuickFilter(e){const t=await this.callApi({url:m.MF.users.customFilter,method:h.yL.POST,payload:{saveData:{name:e,filters:this.ordersFilters}}});var s,r;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r?void 0:r.data.message);(0,n.z)((()=>{this.processApiResult(t,(()=>{if(!t.data)return;const e=[...this.quickFilters,t.data];this.quickFilters=e.sort(((e,t)=>e&&t?e.data.name.localeCompare(t.data.name):0))||[]}))}))}async deleteQuickFilter(e){const t=await this.callApi({url:`${m.MF.users.customisations}/${e}`,method:h.yL.DELETE});var s,r;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r?void 0:r.data.message);(0,n.z)((()=>{this.quickFilters=this.quickFilters.filter((t=>t.id!==e))}))}constructor(e){super(e),(0,i.Z)(this,"orderStatus",zs,this),(0,i.Z)(this,"currentTablePage",Ws,this),(0,i.Z)(this,"ordersFilters",Hs,this),(0,i.Z)(this,"isQuickFiltersDrawerVisible",Vs,this),(0,i.Z)(this,"isSaveFiltersModalVisible",qs,this),(0,i.Z)(this,"quickFilters",Ys,this),(0,n.rC)(this)}},zs=(0,o.Z)($s.prototype,"orderStatus",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"incoming_orders"}}),Ws=(0,o.Z)($s.prototype,"currentTablePage",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Hs=(0,o.Z)($s.prototype,"ordersFilters",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Vs=(0,o.Z)($s.prototype,"isQuickFiltersDrawerVisible",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qs=(0,o.Z)($s.prototype,"isSaveFiltersModalVisible",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ys=(0,o.Z)($s.prototype,"quickFilters",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,o.Z)($s.prototype,"isFiltering",[n.Fl],Object.getOwnPropertyDescriptor($s.prototype,"isFiltering"),$s.prototype),(0,o.Z)($s.prototype,"setPage",[n.aD],Object.getOwnPropertyDescriptor($s.prototype,"setPage"),$s.prototype),(0,o.Z)($s.prototype,"setStatus",[n.aD],Object.getOwnPropertyDescriptor($s.prototype,"setStatus"),$s.prototype),(0,o.Z)($s.prototype,"setFilters",[n.aD],Object.getOwnPropertyDescriptor($s.prototype,"setFilters"),$s.prototype),(0,o.Z)($s.prototype,"resetFilters",[n.aD],Object.getOwnPropertyDescriptor($s.prototype,"resetFilters"),$s.prototype),(0,o.Z)($s.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor($s.prototype,"reset"),$s.prototype),(0,o.Z)($s.prototype,"removeFilter",[n.aD],Object.getOwnPropertyDescriptor($s.prototype,"removeFilter"),$s.prototype),(0,o.Z)($s.prototype,"toggleQuickFiltersDrawer",[n.aD],Object.getOwnPropertyDescriptor($s.prototype,"toggleQuickFiltersDrawer"),$s.prototype),(0,o.Z)($s.prototype,"toggleSaveFiltersModal",[n.aD],Object.getOwnPropertyDescriptor($s.prototype,"toggleSaveFiltersModal"),$s.prototype),(0,o.Z)($s.prototype,"fetchQuickFilters",[n.aD],Object.getOwnPropertyDescriptor($s.prototype,"fetchQuickFilters"),$s.prototype),(0,o.Z)($s.prototype,"saveQuickFilter",[n.aD],Object.getOwnPropertyDescriptor($s.prototype,"saveQuickFilter"),$s.prototype),(0,o.Z)($s.prototype,"deleteQuickFilter",[n.aD],Object.getOwnPropertyDescriptor($s.prototype,"deleteQuickFilter"),$s.prototype),$s);var Xs,Qs,Js,er;let tr=(Xs=class extends l{getActiveNotificationTypesByStatus(e){return Object.values(F.TrackingNotificationTypes).filter((t=>this.allSettings.trackingNotificationsStatusSettings.find((s=>s.type===t&&s.status===e&&s.active))))}getActiveNotificationTypes(){return Object.values(F.TrackingNotificationTypes).filter((e=>this.allSettings.trackingNotificationsStatusSettings.find((t=>t.type===e&&t.active))))}isTypeActivated(e){return Boolean(this.allSettings.trackingNotificationsStatusSettings.find((t=>t.type===e&&t.active)))}reset(){this.allSettings={companySettings:{},trackingNotificationsSettings:[],trackingNotificationsStatusSettings:[],defaultTrackingNotificationsSettings:[]},this.allSettingsLoaded=!1}async getAllSettings(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.tracking_notifications.allSettings}`});this.processApiResult(e,(e=>{this.allSettings={...e.data},this.allSettingsLoaded=!0}))}async getTemplateByLanguage(e,t){const s=await this.callApi({method:h.yL.GET,url:`${m.MF.tracking_notifications.whatsappTemplate.getTemplateByLanguage}/${e}/${t}`});var r;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r?void 0:r.message);return s.data}async getTemplatesStatus(){const e=await this.callApi({method:h.yL.GET,url:m.MF.tracking_notifications.whatsappTemplate.getTemplatesStatus});var t;if(e.isError)throw new Error(null===(t=e.errorData)||void 0===t?void 0:t.message);return e.data}async toggleTemplateStatus(e,t){const s=await this.callApi({method:h.yL.POST,url:`${m.MF.tracking_notifications.whatsappTemplate.toggleTemplateStatus}/${e}`,payload:{enabled:t}});var r;if(s.isError)throw new Error(null===(r=s.errorData)||void 0===r?void 0:r.message)}async getTemplate(e,t){var s;return null===(s=(await this.callApi({method:h.yL.GET,url:`${m.MF.tracking_notifications.templates}?type=${e}&id=${t}`})).data)||void 0===s?void 0:s.htmlTemplate}async getPreviewTemplate(e,t,s,r,a){var i;const o=await this.callApi({method:h.yL.POST,url:`${m.MF.tracking_notifications.preview}`,payload:{type:e,id:t,country:s,substitionData:r,pickup:a}});return this.processApiResult(o),null===(i=o.data)||void 0===i?void 0:i.htmlTemplate}async getEmailTemplate(e){var t;return null===(t=(await this.callApi({method:h.yL.GET,url:`${m.MF.tracking_notifications.templates}/${e}`})).data)||void 0===t?void 0:t.results.content.html}async updateCompanySettingsTrackingNotification(e){let{replyTo:t,bcc:s}=e;const r=await this.callApi({method:h.yL.POST,url:`${m.MF.tracking_notifications.companySettings}`,payload:{replyTo:t,bcc:s}});this.processApiResult(r)}async updateWhatsappEnabledTrackingNotification(e){let{enabled:t}=e;const s=await this.callApi({method:h.yL.POST,url:`${m.MF.tracking_notifications.whatsapp}`,payload:{enabled:t}});(0,n.z)((()=>{this.processApiResult(s),this.allSettings.companySettings.whatsappEnabled=t}))}async updateTrackingNotification(e){let{status:t,type:s,country:r,values:a}=e;const i=await this.callApi({method:h.yL.POST,url:`${m.MF.tracking_notifications.root}`,payload:{status:t,type:s,country:r,values:a}});this.processApiResult(i)}async updateTrackingNotificationStatus(e){let{status:t,type:s,active:r,reviewLink:a}=e;const i=await this.callApi({method:h.yL.POST,url:`${m.MF.tracking_notifications.status}`,payload:{status:t,type:s,active:r,reviewLink:a}});(0,n.z)((()=>{this.processApiResult(i);const e=this.allSettings.trackingNotificationsStatusSettings.find((e=>e.status===t&&e.type===s));e?(void 0!==r&&(e.active=r),void 0!==a&&(e.reviewLink=a)):this.allSettings.trackingNotificationsStatusSettings.push({active:r,status:t,type:s,reviewLink:a})}))}async sendPreviewEmailTemplate(e){const t=await this.callApi({method:h.yL.POST,url:`${m.MF.tracking_notifications.sendEmailPreview}/`,payload:e});this.processApiResult(t)}async uploadBackgroundImage(e){const t=new FormData;t.append("file",e);const s=await this.callApi({method:h.yL.POST,url:`${m.MF.tracking_notifications.root}/uploadBackgroundImage`,payload:t,customHeaders:{"Content-Type":"multipart/form-data"}});this.processApiResult(s,(e=>{var t;this.tmpBackgroundImage=null===(t=e.data)||void 0===t?void 0:t.url}))}async deleteTrackingNotification(e){let{status:t,type:s,country:r}=e;const a=await this.callApi({method:h.yL.DELETE,url:`${m.MF.tracking_notifications.root}/${t}/${s}/${r}`});this.processApiResult(a)}setAllSettingsLoaded(e){this.allSettingsLoaded=e}setTmpBackgroundImage(e){this.tmpBackgroundImage=e}constructor(e){super(e),(0,i.Z)(this,"allSettings",Qs,this),(0,i.Z)(this,"allSettingsLoaded",Js,this),(0,i.Z)(this,"tmpBackgroundImage",er,this),(0,n.rC)(this)}},Qs=(0,o.Z)(Xs.prototype,"allSettings",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{companySettings:{},trackingNotificationsSettings:[],trackingNotificationsStatusSettings:[],defaultTrackingNotificationsSettings:[]}}}),Js=(0,o.Z)(Xs.prototype,"allSettingsLoaded",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),er=(0,o.Z)(Xs.prototype,"tmpBackgroundImage",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),(0,o.Z)(Xs.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"reset"),Xs.prototype),(0,o.Z)(Xs.prototype,"getAllSettings",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"getAllSettings"),Xs.prototype),(0,o.Z)(Xs.prototype,"getTemplateByLanguage",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"getTemplateByLanguage"),Xs.prototype),(0,o.Z)(Xs.prototype,"getTemplatesStatus",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"getTemplatesStatus"),Xs.prototype),(0,o.Z)(Xs.prototype,"toggleTemplateStatus",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"toggleTemplateStatus"),Xs.prototype),(0,o.Z)(Xs.prototype,"getTemplate",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"getTemplate"),Xs.prototype),(0,o.Z)(Xs.prototype,"getPreviewTemplate",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"getPreviewTemplate"),Xs.prototype),(0,o.Z)(Xs.prototype,"getEmailTemplate",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"getEmailTemplate"),Xs.prototype),(0,o.Z)(Xs.prototype,"updateCompanySettingsTrackingNotification",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"updateCompanySettingsTrackingNotification"),Xs.prototype),(0,o.Z)(Xs.prototype,"updateWhatsappEnabledTrackingNotification",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"updateWhatsappEnabledTrackingNotification"),Xs.prototype),(0,o.Z)(Xs.prototype,"updateTrackingNotification",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"updateTrackingNotification"),Xs.prototype),(0,o.Z)(Xs.prototype,"updateTrackingNotificationStatus",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"updateTrackingNotificationStatus"),Xs.prototype),(0,o.Z)(Xs.prototype,"sendPreviewEmailTemplate",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"sendPreviewEmailTemplate"),Xs.prototype),(0,o.Z)(Xs.prototype,"uploadBackgroundImage",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"uploadBackgroundImage"),Xs.prototype),(0,o.Z)(Xs.prototype,"deleteTrackingNotification",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"deleteTrackingNotification"),Xs.prototype),(0,o.Z)(Xs.prototype,"setAllSettingsLoaded",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"setAllSettingsLoaded"),Xs.prototype),(0,o.Z)(Xs.prototype,"setTmpBackgroundImage",[n.aD],Object.getOwnPropertyDescriptor(Xs.prototype,"setTmpBackgroundImage"),Xs.prototype),Xs);var sr,rr;let ar=(sr=class extends l{reset(){this.automationRules=new Map}convertAutomationRulesToMap(e){this.automationRules=new Map,this.convertAutomationRulesToMapAppend(e)}convertAutomationRulesToMapAppend(e){const t=Object.values(e.data);t.length&&t.forEach((e=>{this.automationRules.set(`${e.id}`,e)}))}async saveRule(e,t){const s=await this.callApi({method:h.yL.POST,url:`${m.MF.automation_rules.root}/`,payload:{companyId:e,rule:t}});(0,n.z)((()=>{this.processApiResult(s,(async()=>{await this.getAutomationRules()}))}))}async getAutomationRules(){const e=await this.callApi({method:h.yL.GET,url:`${m.MF.automation_rules.root}/company/`});(0,n.z)((()=>{this.processApiResult(e,(e=>{this.convertAutomationRulesToMap(e)}))}))}async toggleRule(e,t){const s=await this.callApi({method:h.yL.POST,url:`${m.MF.automation_rules.root}/toggle/${e}`,payload:{toggle:t}});(0,n.z)((()=>{this.processApiResult(s,(()=>{const s=this.automationRules.get(String(e))||{};this.automationRules.set(String(e),{...s,isEnabled:t})}))}))}async editRule(e,t){const s=await this.callApi({method:h.yL.PATCH,url:`${m.MF.automation_rules.root}/${e}`,payload:{rule:t}});(0,n.z)((()=>{this.processApiResult(s,(async()=>{await this.getAutomationRules()}))}))}async orderBulk(e){const t=await this.callApi({method:h.yL.PATCH,url:`${m.MF.automation_rules.root}/bulk/order`,payload:{rules:e}});(0,n.z)((()=>{this.processApiResult(t,(async()=>{await this.getAutomationRules()}))}))}async deleteRule(e){const t=await this.callApi({method:h.yL.DELETE,url:`${m.MF.automation_rules.root}/${e}`});(0,n.z)((()=>{this.processApiResult(t,(()=>{this.automationRules.delete(String(e))}))}))}async applyRules(){const e=await this.callApi({method:h.yL.POST,url:`${m.MF.automation_rules.root}/apply_rules`});(0,n.z)((()=>{this.processApiResult(e)}))}get automationRulesArray(){return Array.from(this.automationRules.values())}constructor(e){super(e),(0,i.Z)(this,"automationRules",rr,this),(0,n.rC)(this)}},rr=(0,o.Z)(sr.prototype,"automationRules",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),(0,o.Z)(sr.prototype,"reset",[n.aD],Object.getOwnPropertyDescriptor(sr.prototype,"reset"),sr.prototype),(0,o.Z)(sr.prototype,"saveRule",[n.aD],Object.getOwnPropertyDescriptor(sr.prototype,"saveRule"),sr.prototype),(0,o.Z)(sr.prototype,"getAutomationRules",[n.aD],Object.getOwnPropertyDescriptor(sr.prototype,"getAutomationRules"),sr.prototype),(0,o.Z)(sr.prototype,"toggleRule",[n.aD],Object.getOwnPropertyDescriptor(sr.prototype,"toggleRule"),sr.prototype),(0,o.Z)(sr.prototype,"editRule",[n.aD],Object.getOwnPropertyDescriptor(sr.prototype,"editRule"),sr.prototype),(0,o.Z)(sr.prototype,"orderBulk",[n.aD],Object.getOwnPropertyDescriptor(sr.prototype,"orderBulk"),sr.prototype),(0,o.Z)(sr.prototype,"deleteRule",[n.aD],Object.getOwnPropertyDescriptor(sr.prototype,"deleteRule"),sr.prototype),(0,o.Z)(sr.prototype,"applyRules",[n.aD],Object.getOwnPropertyDescriptor(sr.prototype,"applyRules"),sr.prototype),(0,o.Z)(sr.prototype,"automationRulesArray",[n.Fl],Object.getOwnPropertyDescriptor(sr.prototype,"automationRulesArray"),sr.prototype),sr),ir=function(e){return e[e.Unknown=0]="Unknown",e[e.Future=1]="Future",e[e.Trial=2]="Trial",e[e.Active=3]="Active",e[e.NonRenewing=4]="NonRenewing",e[e.Paused=5]="Paused",e[e.Cancelled=6]="Cancelled",e}({}),or=function(e){return e[e.Monthly=0]="Monthly",e[e.Yearly=1]="Yearly",e}({});const nr=2147483647;function lr(e){var t,s,r,a,i,o,n,l,d;const c=-1===e.plan.planSpecification.shipmentsCounter,p=[ir.Active,ir.Trial,ir.NonRenewing,ir.Paused].includes(e.status),u=e.status===ir.Future,h=e.status===ir.Active,m=new Date(e.endDate);m.setDate(m.getDate()+1);const g=c?nr-e.planSpecification.shipmentsCounter:e.plan.planSpecification.shipmentsCounter-e.planSpecification.shipmentsCounter,y=e.planSpecification.whatsappUnitPrice*e.planSpecification.whatsappExpansionCounter,f=-1!==(null===(t=e.scheduledChanges)||void 0===t?void 0:t.waQuantity),b=-1!==(null===(s=e.scheduledChanges)||void 0===s?void 0:s.planPrice),v=-1!==(null===(r=e.scheduledChanges)||void 0===r?void 0:r.waUnitPrice);return{isActive:p,isFuture:u,isFreeTrial:"Free Trial"===e.plan.planSpecification.tier,isGoldPlan:"Gold"===e.plan.planSpecification.tier,hasUnlimitedShipments:c,isRenewing:h,subscriptionId:e.chargeBeeSubscriptionId,planId:e.planId,planName:e.planSpecification.tier,status:e.status,startedAt:e.startDate,expiresAt:m.toISOString(),planIncludedConversations:e.plan.planSpecification.whatsappCurrentCounter,sentConversations:e.plan.planSpecification.whatsappCurrentCounter+e.planSpecification.whatsappExpansionCounter-e.planSpecification.whatsappCurrentCounter,availableConversations:e.plan.planSpecification.whatsappCurrentCounter+e.planSpecification.whatsappExpansionCounter,planPrice:e.planActualPrice,recurringType:e.plan.planSpecification.recurring===or.Monthly?"monthly":"yearly",availableShipments:c?nr:e.plan.planSpecification.shipmentsCounter,sentShipments:g,hasConversationsExpansion:e.planSpecification.whatsappExpansionCounter>0,expansionsConversations:e.planSpecification.whatsappExpansionCounter||0,planLevel:e.plan.planSpecification.planLevel,whatsappExpansionCustomPrice:y,whatsappScheduledExpansionPrice:f?(null===(a=e.scheduledChanges)||void 0===a?void 0:a.waQuantity)*(null===(i=e.scheduledChanges)||void 0===i?void 0:i.waUnitPrice):0,hasDuePayments:e.hasDuePayments,hasWhatsappScheduledExpansion:-1!==(null===(o=e.scheduledChanges)||void 0===o?void 0:o.waQuantity),whatsappScheduledExpansion:(null===(n=e.scheduledChanges)||void 0===n?void 0:n.waQuantity)||0,hasScheduledPlanPriceChange:b,scheduledPlanPriceChange:b?null===(l=e.scheduledChanges)||void 0===l?void 0:l.planPrice:0,hasScheduledExpansionPriceChange:v,scheduledExpansionPriceChange:v?null===(d=e.scheduledChanges)||void 0===d?void 0:d.waUnitPrice:0}}function dr(e){const{grindMonthlyPlan:t,grindYearlyPlan:s,growthMonthlyPlan:r,growthYearlyPlan:a,goldMonthlyPlan:i,goldYearlyPlan:o}=function(e){const t=e.find((e=>{var t;return"GRIND"===(null===(t=e.planSpecification.tier)||void 0===t?void 0:t.toUpperCase())&&e.planSpecification.recurring===or.Monthly})),s=e.find((e=>{var t;return"GRIND"===(null===(t=e.planSpecification.tier)||void 0===t?void 0:t.toUpperCase())&&e.planSpecification.recurring===or.Yearly})),r=e.find((e=>{var t;return"GROWTH"===(null===(t=e.planSpecification.tier)||void 0===t?void 0:t.toUpperCase())&&e.planSpecification.recurring===or.Monthly})),a=e.find((e=>{var t;return"GROWTH"===(null===(t=e.planSpecification.tier)||void 0===t?void 0:t.toUpperCase())&&e.planSpecification.recurring===or.Yearly})),i=e.find((e=>{var t;return"GOLD"===(null===(t=e.planSpecification.tier)||void 0===t?void 0:t.toUpperCase())&&e.planSpecification.recurring===or.Monthly})),o=e.find((e=>{var t;return"GOLD"===(null===(t=e.planSpecification.tier)||void 0===t?void 0:t.toUpperCase())&&e.planSpecification.recurring===or.Yearly}));return{grindMonthlyPlan:t,grindYearlyPlan:s,growthMonthlyPlan:r,growthYearlyPlan:a,goldMonthlyPlan:i,goldYearlyPlan:o}}(e);if(!(t&&s&&r&&a&&i&&o))return[];return[{monthlyPlanId:t.id,yearlyPlanId:s.id,monthlyChargeBeeId:t.chargeBeeId,yearlyChargeBeeId:s.chargeBeeId,planName:"Grind",canImportFromCSV:t.planSpecification.canImportFromCSV,monthlyPrice:t.price,yearlyPrice:s.price,canShipWithOwnCarriers:t.planSpecification.canShipWithOwnCarriers,canShipWithIsenduCarrier:t.planSpecification.canShipWithIsenduCarrier,canUseAutomationRules:t.planSpecification.canUseAutomationRules,canUseTransactionalMail:t.planSpecification.canUseTransactionalMail,manualOrders:"unlimited",monthlyIncludedConversations:t.planSpecification.whatsappCurrentCounter,yearlyIncludedConversations:s.planSpecification.whatsappCurrentCounter,monthlyShipments:t.planSpecification.shipmentsCounter,yearlyShipments:s.planSpecification.shipmentsCounter,senderAddressesCounter:"unlimited",supportType:t.planSpecification.clientSupportType,planLevel:t.planSpecification.planLevel},{monthlyPlanId:r.id,yearlyPlanId:a.id,monthlyChargeBeeId:r.chargeBeeId,yearlyChargeBeeId:a.chargeBeeId,planName:"Growth",canImportFromCSV:r.planSpecification.canImportFromCSV,monthlyPrice:r.price,yearlyPrice:a.price,canShipWithOwnCarriers:r.planSpecification.canShipWithOwnCarriers,canShipWithIsenduCarrier:r.planSpecification.canShipWithIsenduCarrier,canUseAutomationRules:r.planSpecification.canUseAutomationRules,canUseTransactionalMail:r.planSpecification.canUseTransactionalMail,manualOrders:"unlimited",monthlyIncludedConversations:r.planSpecification.whatsappCurrentCounter,yearlyIncludedConversations:a.planSpecification.whatsappCurrentCounter,monthlyShipments:r.planSpecification.shipmentsCounter,yearlyShipments:a.planSpecification.shipmentsCounter,senderAddressesCounter:"unlimited",supportType:r.planSpecification.clientSupportType,planLevel:r.planSpecification.planLevel},{monthlyPlanId:i.id,yearlyPlanId:o.id,monthlyChargeBeeId:i.chargeBeeId,yearlyChargeBeeId:o.chargeBeeId,planName:"Gold",canImportFromCSV:i.planSpecification.canImportFromCSV,monthlyPrice:"onDemand",yearlyPrice:"onDemand",canShipWithOwnCarriers:i.planSpecification.canShipWithOwnCarriers,canShipWithIsenduCarrier:i.planSpecification.canShipWithIsenduCarrier,canUseAutomationRules:i.planSpecification.canUseAutomationRules,canUseTransactionalMail:i.planSpecification.canUseTransactionalMail,manualOrders:"unlimited",monthlyIncludedConversations:i.planSpecification.whatsappCurrentCounter,yearlyIncludedConversations:o.planSpecification.whatsappCurrentCounter,monthlyShipments:"unlimited",yearlyShipments:"unlimited",senderAddressesCounter:"unlimited",supportType:i.planSpecification.clientSupportType,planLevel:i.planSpecification.planLevel}]}var cr,pr,ur,hr,mr,gr,yr,fr,br=s(25108);let vr=(cr=class extends l{get currentExpansionsPrice(){return this.whatsappMonthlyTiers.length&&this.whatsappYearlyTiers.length&&this.activeSubscription?this.activeSubscription.whatsappExpansionCustomPrice:0}get futureExpansionsPrice(){return this.whatsappMonthlyTiers.length&&this.whatsappYearlyTiers.length&&this.futureSubscription?this.futureSubscription.whatsappExpansionCustomPrice:0}async getAllPlans(){try{const e=await this.callApi({method:h.yL.GET,url:m.MF.subscriptions_new.getActivePlans});(0,n.z)((()=>{const t=e.data||[];this.allAvailablePlans=dr(t||[])}))}catch(e){br.error(e),(0,n.z)((()=>{this.allAvailablePlans=[]}))}}async getWhatsappExpansionTiers(){if(!this.whatsappMonthlyTiers.length&&!this.whatsappYearlyTiers.length)try{const e=await this.callApi({method:h.yL.GET,url:m.MF.subscriptions_new.getWhatsappTiers});(0,n.z)((()=>{const t=e.data||[];this.whatsappMonthlyTiers=t.filter((e=>{let{tierType:t,isExpansionPack:s}=e;return t===or.Monthly&&s})),this.whatsappYearlyTiers=t.filter((e=>{let{tierType:t,isExpansionPack:s}=e;return t===or.Yearly&&s}))}))}catch(e){br.error(e),(0,n.z)((()=>{this.whatsappMonthlyTiers=[],this.whatsappYearlyTiers=[]}))}}async getSubscriptions(){try{const e=await this.callApi({method:h.yL.GET,url:`${m.MF.subscriptions_new.getSubscriptions}?onlyActive=false`});(0,n.z)((()=>{const t=(e.data||[]||[]).map(lr);this.activeSubscription=t.find((e=>e.isActive)),this.futureSubscription=t.find((e=>e.isFuture)),this.activeSubscription&&(this.activeSubscription.hasNextFutureSubscription=!!this.futureSubscription)}))}catch(e){(0,n.z)((()=>{this.activeSubscription=void 0,this.futureSubscription=void 0}))}}async cancelSubscription(){await this.callApi({method:h.yL.POST,url:m.MF.subscriptions_new.cancelSubscription}),this.waitForOperationStatusNotification()}async reactivateSubscription(){await this.callApi({method:h.yL.POST,url:m.MF.subscriptions_new.reactivateSubscription}),this.waitForOperationStatusNotification()}async addWhatsappExpansion(e){await this.callApi({method:h.yL.POST,url:`${m.MF.subscriptions_new.addWhatsappExpansion}?totalWhatsapp=${e}`})}async decreaseWhatsappExpansion(e){await this.callApi({method:h.yL.POST,url:`${m.MF.subscriptions_new.decreaseWhatsappExpansion}?totalWhatsapp=${e}`}),this.waitForOperationStatusNotification()}async cancelScheduledChange(){var e;await this.callApi({method:h.yL.POST,url:`${m.MF.subscriptions_new.cancelScheduledChange}?subscriptionId=${null===(e=this.activeSubscription)||void 0===e?void 0:e.subscriptionId}`}),this.waitForOperationStatusNotification()}async saveChurnReason(e,t){await this.callApi({method:h.yL.POST,url:m.MF.subscriptions_new.churnReason,payload:{reason:e,additionalInfo:t}})}waitForOperationStatusNotification(){this.loadingTasksCounter++,this.currentOperationStatus="pending"}handleNewOperationNotification(){if("pending"!==this.currentOperationStatus)return;const e=this.rootStore.websocketStore.messages.pop();e&&"subscriptions_refresh"===e.type&&(this.loadingTasksCounter--,this.currentOperationStatus="idle",this.getSubscriptions())}showRemoveSubscriptionModal(){this.isRemoveSubscriptionModalVisible=!0}hideRemoveSubscriptionModal(){this.isRemoveSubscriptionModalVisible=!1}getSelectedExpansionTierPrice(e,t){if(!t)return 0;const s=("monthly"===e?this.whatsappMonthlyTiers:this.whatsappYearlyTiers).find((e=>{let{fromWhatsapp:s,toWhatsapp:r}=e;return s<=t&&r>=t}));return(null==s?void 0:s.price)||0}getExpansionsPrice(e,t){return this.getSelectedExpansionTierPrice(e,t)*t||0}constructor(e){super(e),(0,i.Z)(this,"allAvailablePlans",pr,this),(0,i.Z)(this,"activeSubscription",ur,this),(0,i.Z)(this,"futureSubscription",hr,this),(0,i.Z)(this,"whatsappMonthlyTiers",mr,this),(0,i.Z)(this,"whatsappYearlyTiers",gr,this),(0,i.Z)(this,"isRemoveSubscriptionModalVisible",yr,this),(0,i.Z)(this,"currentOperationStatus",fr,this),(0,n.rC)(this),(0,n.U5)((()=>e.websocketStore.messages.length),(()=>this.handleNewOperationNotification()))}},pr=(0,o.Z)(cr.prototype,"allAvailablePlans",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ur=(0,o.Z)(cr.prototype,"activeSubscription",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hr=(0,o.Z)(cr.prototype,"futureSubscription",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mr=(0,o.Z)(cr.prototype,"whatsappMonthlyTiers",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gr=(0,o.Z)(cr.prototype,"whatsappYearlyTiers",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yr=(0,o.Z)(cr.prototype,"isRemoveSubscriptionModalVisible",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fr=(0,o.Z)(cr.prototype,"currentOperationStatus",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"idle"}}),(0,o.Z)(cr.prototype,"currentExpansionsPrice",[n.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"currentExpansionsPrice"),cr.prototype),(0,o.Z)(cr.prototype,"futureExpansionsPrice",[n.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"futureExpansionsPrice"),cr.prototype),(0,o.Z)(cr.prototype,"getAllPlans",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"getAllPlans"),cr.prototype),(0,o.Z)(cr.prototype,"getWhatsappExpansionTiers",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"getWhatsappExpansionTiers"),cr.prototype),(0,o.Z)(cr.prototype,"getSubscriptions",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"getSubscriptions"),cr.prototype),(0,o.Z)(cr.prototype,"cancelSubscription",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"cancelSubscription"),cr.prototype),(0,o.Z)(cr.prototype,"reactivateSubscription",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"reactivateSubscription"),cr.prototype),(0,o.Z)(cr.prototype,"addWhatsappExpansion",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"addWhatsappExpansion"),cr.prototype),(0,o.Z)(cr.prototype,"decreaseWhatsappExpansion",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"decreaseWhatsappExpansion"),cr.prototype),(0,o.Z)(cr.prototype,"cancelScheduledChange",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"cancelScheduledChange"),cr.prototype),(0,o.Z)(cr.prototype,"saveChurnReason",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"saveChurnReason"),cr.prototype),(0,o.Z)(cr.prototype,"waitForOperationStatusNotification",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"waitForOperationStatusNotification"),cr.prototype),(0,o.Z)(cr.prototype,"handleNewOperationNotification",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"handleNewOperationNotification"),cr.prototype),(0,o.Z)(cr.prototype,"showRemoveSubscriptionModal",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"showRemoveSubscriptionModal"),cr.prototype),(0,o.Z)(cr.prototype,"hideRemoveSubscriptionModal",[n.aD],Object.getOwnPropertyDescriptor(cr.prototype,"hideRemoveSubscriptionModal"),cr.prototype),cr);class xr extends l{async getApps(){var e;const t=await this.callApi({method:h.yL.GET,url:m.MF.apps.root});var s,r;if(t.isError)throw new Error(null===(s=t.errorData)||void 0===s||null===(r=s.response)||void 0===r?void 0:r.data.message);return(null===(e=t.data)||void 0===e?void 0:e.items)||[]}async getAppInfo(e){const{appName:t,appId:s}=e,r=await this.callApi({method:h.yL.GET,url:m.MF.apps.root+`/${t}/${s}`});var a,i;if(r.isError)throw new Error(null===(a=r.errorData)||void 0===a||null===(i=a.response)||void 0===i?void 0:i.data.message);return r.data||{}}async setupApp(e){const{appName:t,requestData:s}=e,r=await this.callApi({method:h.yL.POST,url:m.MF.apps.root+`/${t}`,payload:s});var a,i;if(r.isError||!r.data)throw new Error(null===(a=r.errorData)||void 0===a||null===(i=a.response)||void 0===i?void 0:i.data.message);localStorage.setItem(`${t}AppId`,r.data.uuid),window.location.replace(r.data.signInUrl)}async authorizeApp(e){const{appName:t,requestData:s}=e,r=await this.callApi({method:h.yL.POST,url:m.MF.apps.root+`/${t}/authorization`,payload:s});var a,i;if(r.isError)throw new Error(null===(a=r.errorData)||void 0===a||null===(i=a.response)||void 0===i?void 0:i.data.message)}async updateApp(e){const{appName:t,appId:s,updatedData:r}=e,a=await this.callApi({method:h.yL.PATCH,url:m.MF.apps.root+`/${t}/${s}`,payload:r});var i,o;if(a.isError)throw new Error(null===(i=a.errorData)||void 0===i||null===(o=i.response)||void 0===o?void 0:o.data.message)}async connectApp(e){const{appName:t,appId:s}=e,r=await this.callApi({method:h.yL.GET,url:m.MF.apps.root+`/${t}/${s}/login`});var a,i;if(r.isError)throw new Error(null===(a=r.errorData)||void 0===a||null===(i=a.response)||void 0===i?void 0:i.data.message);r.data&&(localStorage.setItem(`${t}AppId`,s),window.location.replace(r.data.signInUrl))}async deleteApp(e){const{appName:t,appId:s}=e,r=await this.callApi({method:h.yL.DELETE,url:m.MF.apps.root+`/${t}/${s}`});var a,i;if(r.isError)throw new Error(null===(a=r.errorData)||void 0===a||null===(i=a.response)||void 0===i?void 0:i.data.message)}constructor(e){super(e),(0,n.rC)(this)}}s(1357)},1357:(e,t,s)=>{"use strict";s(19448),s(18077)},42480:()=>{}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var s=o[e]={id:e,loaded:!1,exports:{}};return i[e].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=i,e=[],n.O=(t,s,r,a)=>{if(!s){var i=1/0;for(c=0;c<e.length;c++){for(var[s,r,a]=e[c],o=!0,l=0;l<s.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((e=>n.O[e](s[l])))?s.splice(l--,1):(o=!1,a<i&&(i=a));if(o){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[s,r,a]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);n.r(a);var i={};t=t||[null,s({}),s([]),s(s)];for(var o=2&r&&e;"object"==typeof o&&!~t.indexOf(o);o=s(o))Object.getOwnPropertyNames(o).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,n.d(a,i),a},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,s)=>(n.f[s](e,t),t)),[])),n.u=e=>"assets/bundles/"+e+"."+{4:"276e0005f3aca94089d1",178:"45699ed3b8200d1bc652",190:"7dc3ed7ce390a3efaf82",289:"ec47ae0232aeba658f58",488:"a7add6f74cae4ca67ec9",845:"eb63803a7a7d2777f299",1533:"1a432ca849b636dc21c9",1968:"d1fb0104ce2afc15688e",2069:"05f5f404199e73507044",2235:"680f3bd8ded4ce48091c",2673:"e7821e9b21e38a47c5fa",2969:"96beb881e8323d45ff2e",3102:"11cb844cd13932852ee0",3442:"4a67ba8b7228f4ce86d2",3666:"8f81d3df3af01902b1c8",3767:"21d6883849fb1fb89104",3815:"aec59a9c8e3633318849",3834:"5c481c6abab5d52609aa",3864:"2dc68b92d61222c53e91",3869:"01b79b61910cd4e67fbd",4233:"84f0ea9f1d1611e00a3b",4328:"d47f84267c7b28c1b25c",4404:"c0a81da944492d7f6d38",4680:"221945b0d0bc480fb2c1",4922:"0d9959600faf3d258cac",5588:"a4031662b6c9083343b3",5778:"31ceaaa8bb4539714508",5986:"f5b2609fe48c0b17d7d0",6092:"b7d40642b5370e97755f",6382:"998c7547d82185ad8c77",6386:"22a2fa7e9d491f674d9c",6584:"eb6789edc779ed5180f3",6665:"ad3df654581fd682d8fc",7059:"4c50715b5140bce12d66",7752:"dcd91d18843b317485b2",7763:"970dcba6826002eafb94",7856:"2a60847c4da2c826a74e",8218:"4eb67848fc2860afbd7e",8401:"8133ddf5c66ec4bb9f4c",8446:"634a78a39db71afc8351",9160:"7a495f735873bff10221",9194:"985b271e4e6cbc615a62",9305:"6abf6268dee28e71ddf4",9366:"eb28e7d39af68e222a36",9369:"296a65008076570c115e",9466:"6900a7c9b1e860a9c144",9543:"2262c9204878df6ea434",9657:"6476982682396a80d969",9703:"3a0a65906416755ee2f4",9808:"11030f5c486ff31f9f06",9982:"4b54418aed6a3558f4d6"}[e]+".js",n.miniCssF=e=>"assets/css/"+e+"."+{178:"720cd8ce5d25dada2f89",190:"40ce72ee07524f0788ad",488:"53fa8e8edd36defec53e",1968:"a766d4860d68d24cf62c",2969:"d2647a35ee8bc4335f68",3102:"12451e881a7683daf370",3442:"1973a73b2e8a482b02ef",3666:"f213a892091c277c363e",3767:"235c0681f705a0282fcb",3834:"3621cfb413104babb779",3864:"5c8613b61a5c7d4665e6",3869:"e34f3b591eddb647aada",4404:"1845556c62adea9f2444",5588:"bb3305e4d67419222677",5778:"de1e654cb6fcb18251ae",6386:"40ce72ee07524f0788ad",6584:"c4418a8a9190ac6cf7bd",6665:"fcbe277f38721a9f2695",7059:"9d902911594a2d8d3545",7752:"1a098c27b7727c68a8f5",8218:"79c7f41a49dcd66331e9",9160:"b876ad6455f50c2fe9cb",9194:"8542f8dab5a8d7a674ec",9369:"77ab76af4a2339b32073",9703:"381c9a04314c992a1f69",9982:"e09d812c964cf0374924"}[e]+".css",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},a="@isendu/yancy:",n.l=(e,t,s,i)=>{if(r[e])r[e].push(t);else{var o,l;if(void 0!==s)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var p=d[c];if(p.getAttribute("src")==e||p.getAttribute("data-webpack")==a+s){o=p;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",a+s),o.src=e),r[e]=[t];var u=(t,s)=>{o.onerror=o.onload=null,clearTimeout(h);var a=r[e];if(delete r[e],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(s))),t)return t(s)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),l&&document.head.appendChild(o)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{if("undefined"!=typeof document){var e=e=>new Promise(((t,s)=>{var r=n.miniCssF(e),a=n.p+r;if(((e,t)=>{for(var s=document.getElementsByTagName("link"),r=0;r<s.length;r++){var a=(o=s[r]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===e||a===t))return o}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){var o;if((a=(o=i[r]).getAttribute("data-href"))===e||a===t)return o}})(r,a))return t();((e,t,s,r,a)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=s=>{if(i.onerror=i.onload=null,"load"===s.type)r();else{var o=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=n,i.parentNode&&i.parentNode.removeChild(i),a(l)}},i.href=t,s?s.parentNode.insertBefore(i,s.nextSibling):document.head.appendChild(i)})(e,a,null,t,s)})),t={2143:0};n.f.miniCss=(s,r)=>{t[s]?r.push(t[s]):0!==t[s]&&{178:1,190:1,488:1,1968:1,2969:1,3102:1,3442:1,3666:1,3767:1,3834:1,3864:1,3869:1,4404:1,5588:1,5778:1,6386:1,6584:1,6665:1,7059:1,7752:1,8218:1,9160:1,9194:1,9369:1,9703:1,9982:1}[s]&&r.push(t[s]=e(s).then((()=>{t[s]=0}),(e=>{throw delete t[s],e})))}}})(),(()=>{var e={2143:0};n.f.j=(t,s)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var a=new Promise(((s,a)=>r=e[t]=[s,a]));s.push(r[2]=a);var i=n.p+n.u(t),o=new Error;n.l(i,(s=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,r[1](o)}}),"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,s)=>{var r,a,[i,o,l]=s,d=0;if(i.some((t=>0!==e[t]))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)var c=l(n)}for(t&&t(s);d<i.length;d++)a=i[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},s=globalThis.webpackChunk_isendu_yancy=globalThis.webpackChunk_isendu_yancy||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var l=n.O(void 0,[3602],(()=>n(69681)));l=n.O(l)})();